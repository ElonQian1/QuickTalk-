# 快速使用指南

## 问题解决

**问题**: 编译后总是使用错误的数据库或证书  
**原因**: 项目中有多个数据库和证书文件，编译时不知道用哪个  
**解决**: 使用自动化脚本，确保始终使用正确的生产文件

## 生产环境文件位置

```
E:\duihua\customer-service-system\服务器数据库\
├── customer_service.db  ← 真实的生产数据库
├── server.crt           ← 真实的 SSL 证书  
└── server.key           ← 真实的 SSL 密钥
```

**这里的文件是唯一的真实生产文件！**

## 使用方法

### 方法 1: 仅同步生产文件（快速）

```batch
cd E:\duihua\customer-service-system\scripts
sync-production-files.bat
```

或者直接在 PowerShell 运行：

```powershell
$ProductionDir = "E:\duihua\customer-service-system\服务器数据库"
$DeployDir = "E:\duihua\customer-service-system\ubuntu-deploy-ready"
Copy-Item "$ProductionDir\customer_service.db" -Destination "$DeployDir\customer_service.db" -Force
Copy-Item "$ProductionDir\server.crt" -Destination "$DeployDir\certs\server.crt" -Force
Copy-Item "$ProductionDir\server.key" -Destination "$DeployDir\certs\server.key" -Force
Write-Host "Done!" -ForegroundColor Green
```

### 方法 2: 完整更新（编译 + 同步）

```batch
cd E:\duihua\customer-service-system\scripts
update-deploy-package.bat
```

这会：
1. 编译后端（Linux HTTPS 版本）
2. 编译前端
3. 复制所有文件
4. **自动同步生产数据库和证书**

## 部署到 Ubuntu

完成后，上传整个 `ubuntu-deploy-ready` 文件夹到服务器：

```bash
cd /root/ubuntu-deploy-ready
chmod +x customer-service-backend *.sh
./start.sh
```

## 验证

检查文件是否正确：

```powershell
# 查看数据库
Get-Item "E:\duihua\customer-service-system\ubuntu-deploy-ready\customer_service.db" | Format-List

# 查看证书
Get-Item "E:\duihua\customer-service-system\ubuntu-deploy-ready\certs\server.*" | Format-List
```

确保时间戳是最新的！

## 为什么这样做？

- ✅ **自动化**: 不需要手动复制文件
- ✅ **准确**: 确保使用正确的生产文件
- ✅ **简单**: 一个命令搞定
- ✅ **可靠**: 每次都从同一个源复制

---

**最后更新**: 2025年10月17日
