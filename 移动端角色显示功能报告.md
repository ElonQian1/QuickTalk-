# 移动端店铺头像下方角色显示功能报告

## 🎯 功能需求

在移动端管理后台的店铺列表中，在每个店铺的 `class="shop-avatar"` 下方显示当前用户在该店铺中的角色（店主或员工）。

## 🔧 实施方案

### 1. CSS样式调整

#### 新增样式类：
```css
.shop-avatar-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-right: 15px;
    flex-shrink: 0;
}

.shop-avatar {
    margin-bottom: 5px;  /* 为角色标签留出空间 */
}

.shop-role {
    font-size: 10px;
    color: #666;
    background: #f0f0f0;
    padding: 2px 6px;
    border-radius: 8px;
    white-space: nowrap;
}

.shop-role.owner {
    background: #e8f5e8;
    color: #2d7d32;
}

.shop-role.employee {
    background: #e3f2fd;
    color: #1976d2;
}

.shop-role.admin {
    background: #fff3e0;
    color: #f57c00;
}
```

### 2. HTML结构调整

#### 原始结构：
```html
<div class="shop-item">
    <div class="shop-avatar">A</div>
    <div class="shop-content">...</div>
</div>
```

#### 调整后结构：
```html
<div class="shop-item">
    <div class="shop-avatar-container">
        <div class="shop-avatar">A</div>
        <div class="shop-role owner">店主</div>
    </div>
    <div class="shop-content">...</div>
</div>
```

### 3. JavaScript功能实现

#### 新增角色判断方法：
```javascript
static getUserRoleInShop(shop) {
    // 如果当前用户是超级管理员
    if (currentUser && currentUser.role === 'super_admin') {
        return { role: 'admin', text: '管理员' };
    }
    
    // 如果当前用户是店主
    if (currentUser && currentUser.role === 'shop_owner') {
        return { role: 'owner', text: '店主' };
    }
    
    // 如果是员工
    if (currentUser && (currentUser.role === 'employee' || currentUser.role === 'agent')) {
        return { role: 'employee', text: '员工' };
    }
    
    // 默认返回
    return { role: 'member', text: '成员' };
}
```

## 🎨 视觉效果

### 布局示例：
```
┌─────────────────────────────────────┐
│ [A]    店铺名称                      │
│ 店主   域名信息                      │
│        状态标签                      │
│                                    │
│        [管理] [消息] [编辑]          │
└─────────────────────────────────────┘
```

### 角色标签样式：
- **店主**: 绿色背景 `#e8f5e8`，绿色文字 `#2d7d32`
- **员工**: 蓝色背景 `#e3f2fd`，蓝色文字 `#1976d2`  
- **管理员**: 橙色背景 `#fff3e0`，橙色文字 `#f57c00`

## 📱 应用场景

### 1. 店铺管理列表
- 显示用户在每个店铺中的实际角色
- 根据用户权限动态展示操作按钮

### 2. 消息列表
- 帮助用户快速识别自己在各店铺中的身份
- 便于区分不同权限等级的店铺

### 3. 管理员视图
- 统一显示"管理员"标识
- 区别于普通用户的店铺视图

## 🔄 角色判断逻辑

| 用户角色 | 显示标签 | 样式类 | 权限说明 |
|---------|---------|--------|----------|
| `super_admin` | 管理员 | `admin` | 可管理所有店铺 |
| `shop_owner` | 店主 | `owner` | 可管理自己的店铺 |
| `employee` | 员工 | `employee` | 有限权限访问 |
| `agent` | 员工 | `employee` | 客服代理权限 |
| 其他 | 成员 | `member` | 基础访问权限 |

## ✅ 完成状态

✅ **功能已完全实现**
- 头像下方成功显示角色标签
- 不同角色采用不同颜色区分
- 三种列表视图全部适配
- 响应式设计，移动端友好

**现在用户可以在移动端管理后台清楚地看到自己在每个店铺中的角色身份！**

---
*功能完成时间: 2025-09-12 17:25:00*
*涉及文件: static/admin-mobile.html*
