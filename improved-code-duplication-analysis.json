{
  "metadata": {
    "projectPath": ".",
    "analysisDate": "2025-09-16T06:36:58.691Z",
    "analyzerVersion": "2.0.0 (Improved)",
    "phase7Target": "< 10% code duplication",
    "improvementNotes": "Fixed algorithm to exclude common patterns and overlapping blocks"
  },
  "summary": {
    "totalFiles": 139,
    "totalLines": 79120,
    "duplicateLines": 9678,
    "duplicateBlocks": 1476,
    "duplicationRate": 12.23,
    "targetAchieved": false,
    "phase7Status": "NEEDS_IMPROVEMENT"
  },
  "files": {
    "scanned": [
      "analyze-code-duplication-improved.js",
      "analyze-code-duplication.js",
      "analyze-file-structure.js",
      "analyze-frontend-redundancy.js",
      "auth-routes.js",
      "database-sqlite.js",
      "refactor-message-repository.js",
      "reorganize-css.js",
      "reorganize-js-modules.js",
      "scripts\\repair-image-messages.js",
      "scripts\\smart-repair-images.js",
      "scripts\\upgrade-database.js",
      "server-v2.js",
      "server.js",
      "src\\ai-assistant-manager-refactored.js",
      "src\\ai-assistant-manager.js",
      "src\\analytics-dashboard-manager.js",
      "src\\api\\embed-routes.js",
      "src\\api\\FileUploadAPI.js",
      "src\\api\\StaticFileService.js",
      "src\\app\\modular-app.js",
      "src\\client-api\\client-api-router.js",
      "src\\client-api\\ClientApiHandler.js",
      "src\\client-api\\connection-handler-v2.js",
      "src\\client-api\\connection-handler.js",
      "src\\client-api\\message-handler-v2.js",
      "src\\client-api\\message-handler.js",
      "src\\client-api\\routes.js",
      "src\\controllers\\MessageController.js",
      "src\\database\\database-core.js",
      "src\\database\\message-repository.js",
      "src\\database\\shop-repository.js",
      "src\\database\\ShopRepository.js",
      "src\\file-manager.js",
      "src\\modules\\AdvancedNotificationSystem.js",
      "src\\modules\\ComprehensiveSecurityModule.js",
      "src\\modules\\EmployeeManager.js",
      "src\\modules\\EnhancedAIAssistant.js",
      "src\\modules\\EnhancedAnalyticsDashboard.js",
      "src\\modules\\FileManager.js",
      "src\\modules\\PaymentActivationSystem.js",
      "src\\multi-shop-customer-service-manager.js",
      "src\\schemas\\AIAssistantSchemaConfig.js",
      "src\\schemas\\AnalyticsDashboardSchemaConfig.js",
      "src\\schemas\\MessageRepositorySchemaConfig.js",
      "src\\schemas\\SecurityModuleSchemaConfig.js",
      "src\\search-history-manager.js",
      "src\\security\\auth-validator.js",
      "src\\security\\domain-validator.js",
      "src\\security\\rate-limiter.js",
      "src\\security\\security-logger.js",
      "src\\security\\SecurityManager.js",
      "src\\services\\AutoReplyService.js",
      "src\\services\\ConversationService.js",
      "src\\services\\index.js",
      "src\\services\\IntentClassificationService.js",
      "src\\services\\interfaces.js",
      "src\\services\\KnowledgeBaseService.js",
      "src\\services\\MessageService.js",
      "src\\services\\NotificationService.js",
      "src\\services\\ServiceFactory.js",
      "src\\services\\ServiceIntegration.js",
      "src\\services\\ServiceInterfaceValidator.js",
      "src\\services\\ServiceManager.js",
      "src\\services\\ShopService.js",
      "src\\utils\\AuthValidator.js",
      "src\\utils\\DatabaseSchemaManager.js",
      "src\\utils\\EnhancedFileManager.js",
      "src\\utils\\ErrorHandler.js",
      "src\\utils\\WebSocketHelper.js",
      "src\\websocket\\WebSocketAPI.js",
      "src\\websocket\\WebSocketManager-v2.js",
      "src\\websocket\\WebSocketManager.js",
      "src\\websocket\\WebSocketRouter.js",
      "static\\assets\\js\\components\\button.js",
      "static\\assets\\js\\components\\form.js",
      "static\\assets\\js\\components\\index.js",
      "static\\assets\\js\\components\\modal.js",
      "static\\assets\\js\\components\\navigation.js",
      "static\\assets\\js\\components\\notification.js",
      "static\\assets\\js\\core\\api-client.js",
      "static\\assets\\js\\core\\app.js",
      "static\\assets\\js\\core\\config.js",
      "static\\assets\\js\\core\\event-bus.js",
      "static\\assets\\js\\core\\module-loader.js",
      "static\\assets\\js\\core\\utils.js",
      "static\\assets\\js\\managers\\auth-manager.js",
      "static\\assets\\js\\managers\\message-manager.js",
      "static\\assets\\js\\managers\\page-manager.js",
      "static\\assets\\js\\managers\\shop-manager.js",
      "static\\assets\\js\\modules\\admin\\file-manager.js",
      "static\\assets\\js\\modules\\admin\\notification-manager.js",
      "static\\assets\\js\\modules\\ai\\chatbot.js",
      "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
      "static\\assets\\js\\modules\\analytics\\dashboard.js",
      "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
      "static\\assets\\js\\modules\\message\\mobile-manager.js",
      "static\\assets\\js\\modules\\message\\search-manager.js",
      "static\\assets\\js\\modules\\message\\unified-manager.js",
      "static\\assets\\js\\modules\\mobile\\customer-service.js",
      "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
      "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
      "static\\assets\\js\\modules\\shop\\mobile-manager.js",
      "static\\chat.js",
      "static\\js\\ai-chatbot.js",
      "static\\js\\analytics-dashboard.js",
      "static\\js\\core\\IntegrationManager.js",
      "static\\js\\core\\UnifiedComponentManager.js",
      "static\\js\\core\\UnifiedMessageAPI.js",
      "static\\js\\enhanced-ai-assistant.js",
      "static\\js\\enhanced-analytics-dashboard.js",
      "static\\js\\enhanced-file-manager.js",
      "static\\js\\enhanced-mobile-customer-service.js",
      "static\\js\\message-search-manager.js",
      "static\\js\\mobile\\mobile-admin-app.js",
      "static\\js\\mobile\\mobile-admin-modules.js",
      "static\\js\\mobile-customer-service.js",
      "static\\js\\mobile-ecommerce-customer-service.js",
      "static\\js\\modules\\ruilong-features\\mobile-functions.js",
      "static\\js\\modules\\ruilong-features\\module-loader.js",
      "static\\js\\modules\\ruilong-features\\payment-system.js",
      "static\\js\\modules\\ruilong-features\\role-manager.js",
      "static\\js\\modules\\ruilong-features\\shop-buttons.js",
      "static\\js\\notification-manager.js",
      "static\\realtime-customer-service.js",
      "static\\sw.js",
      "static\\tests\\e2e\\complete-user-flows.test.js",
      "static\\tests\\integration\\customer-service-integration.test.js",
      "static\\tests\\quick-test.js",
      "static\\tests\\test-config.js",
      "static\\tests\\unit\\api-client.test.js",
      "static\\tests\\unit\\config.test.js",
      "static\\tests\\unit\\event-bus.test.js",
      "static\\tests\\unit\\modal.test.js",
      "static\\tests\\unit\\utils.test.js",
      "test-auth-validator.js",
      "test-database-refactor.js",
      "test-service-layer-integration.js",
      "test-simple-refactor.js"
    ],
    "ignored": [
      "node_modules/**",
      ".git/**",
      "logs/**",
      "uploads/**",
      "temp/**",
      "data/**",
      ".github/**",
      "docs/**"
    ]
  },
  "duplicateBlocks": [
    {
      "id": "6ba4ed45",
      "size": 5,
      "occurrences": 7,
      "duplicateLines": 30,
      "locations": [
        {
          "file": "src\\multi-shop-customer-service-manager.js",
          "lines": "111-115",
          "preview": "headers: { 'X-Session-Id': sessionId } | });"
        },
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "76-80",
          "preview": "headers: { 'X-Session-Id': sessionId } | });"
        },
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "81-85",
          "preview": "headers: { 'X-Session-Id': sessionId } | });"
        },
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "241-245",
          "preview": "headers: { 'X-Session-Id': sessionId } | });"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "76-80",
          "preview": "headers: { 'X-Session-Id': sessionId } | });"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "81-85",
          "preview": "headers: { 'X-Session-Id': sessionId } | });"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "241-245",
          "preview": "headers: { 'X-Session-Id': sessionId } | });"
        }
      ],
      "codePreview": [
        "headers: { 'X-Session-Id': sessionId }",
        "});",
        "if (response.ok) {",
        "const data = await response.json();"
      ]
    },
    {
      "id": "929dae0b",
      "size": 5,
      "occurrences": 6,
      "duplicateLines": 25,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "331-335",
          "preview": "method: 'POST', | headers: { | 'Content-Type': 'application/json'"
        },
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "876-880",
          "preview": "method: 'POST', | headers: { | 'Content-Type': 'application/json'"
        },
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "491-495",
          "preview": "method: 'POST', | headers: { | 'Content-Type': 'application/json'"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "876-880",
          "preview": "method: 'POST', | headers: { | 'Content-Type': 'application/json'"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "491-495",
          "preview": "method: 'POST', | headers: { | 'Content-Type': 'application/json'"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "331-335",
          "preview": "method: 'POST', | headers: { | 'Content-Type': 'application/json'"
        }
      ],
      "codePreview": [
        "method: 'POST',",
        "headers: {",
        "'Content-Type': 'application/json'",
        "},",
        "body: JSON.stringify({"
      ]
    },
    {
      "id": "92a0de5b",
      "size": 7,
      "occurrences": 4,
      "duplicateLines": 21,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "120-126",
          "preview": "const sessionId = localStorage.getItem('sessionId'); | const response = await fetch('/api/messages/unread-counts', { | headers: { 'X-Session-Id': sessionId }"
        },
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "239-245",
          "preview": "const sessionId = localStorage.getItem('sessionId'); | const response = await fetch('/api/messages/unread-counts', { | headers: { 'X-Session-Id': sessionId }"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "120-126",
          "preview": "const sessionId = localStorage.getItem('sessionId'); | const response = await fetch('/api/messages/unread-counts', { | headers: { 'X-Session-Id': sessionId }"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "239-245",
          "preview": "const sessionId = localStorage.getItem('sessionId'); | const response = await fetch('/api/messages/unread-counts', { | headers: { 'X-Session-Id': sessionId }"
        }
      ],
      "codePreview": [
        "const sessionId = localStorage.getItem('sessionId');",
        "const response = await fetch('/api/messages/unread-counts', {",
        "headers: { 'X-Session-Id': sessionId }",
        "});",
        "if (response.ok) {",
        "const data = await response.json();"
      ]
    },
    {
      "id": "cdb48420",
      "size": 5,
      "occurrences": 4,
      "duplicateLines": 15,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "636-640",
          "preview": "<button class=\"action-btn\" onclick=\"fileManager.downloadFile('${file.id}')\" title=\"下载\"> | <i class=\"icon-download\"></i> | </button>"
        },
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "676-680",
          "preview": "<button class=\"action-btn\" onclick=\"fileManager.downloadFile('${file.id}')\" title=\"下载\"> | <i class=\"icon-download\"></i> | </button>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "636-640",
          "preview": "<button class=\"action-btn\" onclick=\"fileManager.downloadFile('${file.id}')\" title=\"下载\"> | <i class=\"icon-download\"></i> | </button>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "676-680",
          "preview": "<button class=\"action-btn\" onclick=\"fileManager.downloadFile('${file.id}')\" title=\"下载\"> | <i class=\"icon-download\"></i> | </button>"
        }
      ],
      "codePreview": [
        "<button class=\"action-btn\" onclick=\"fileManager.downloadFile('${file.id}')\" title=\"下载\">",
        "<i class=\"icon-download\"></i>",
        "</button>",
        "<button class=\"action-btn\" onclick=\"fileManager.shareFile('${file.id}')\" title=\"共享\">",
        "<i class=\"icon-share\"></i>"
      ]
    },
    {
      "id": "8e0ef66e",
      "size": 5,
      "occurrences": 4,
      "duplicateLines": 15,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "701-705",
          "preview": "method: 'POST', | headers: { | 'X-Session-Id': localStorage.getItem('sessionId')"
        },
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "736-740",
          "preview": "method: 'POST', | headers: { | 'X-Session-Id': localStorage.getItem('sessionId')"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "701-705",
          "preview": "method: 'POST', | headers: { | 'X-Session-Id': localStorage.getItem('sessionId')"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "736-740",
          "preview": "method: 'POST', | headers: { | 'X-Session-Id': localStorage.getItem('sessionId')"
        }
      ],
      "codePreview": [
        "method: 'POST',",
        "headers: {",
        "'X-Session-Id': localStorage.getItem('sessionId')",
        "},",
        "body: formData"
      ]
    },
    {
      "id": "a122d720",
      "size": 5,
      "occurrences": 3,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "auth-routes.js",
          "lines": "751-755",
          "preview": "const userShops = await database.getUserShops(req.user.id); | const hasAccess = req.user.role === 'super_admin' || | userShops.some(shop => shop.id === shopId);"
        },
        {
          "file": "auth-routes.js",
          "lines": "886-890",
          "preview": "const userShops = await database.getUserShops(req.user.id); | const hasAccess = req.user.role === 'super_admin' || | userShops.some(shop => shop.id === shopId);"
        },
        {
          "file": "auth-routes.js",
          "lines": "1231-1235",
          "preview": "const userShops = await database.getUserShops(req.user.id); | const hasAccess = req.user.role === 'super_admin' || | userShops.some(shop => shop.id === shopId);"
        }
      ],
      "codePreview": [
        "const userShops = await database.getUserShops(req.user.id);",
        "const hasAccess = req.user.role === 'super_admin' ||",
        "userShops.some(shop => shop.id === shopId);",
        "if (!hasAccess) {"
      ]
    },
    {
      "id": "86f8b0a0",
      "size": 5,
      "occurrences": 3,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "src\\multi-shop-customer-service-manager.js",
          "lines": "76-80",
          "preview": "const response = await fetch('/api/auth/me', { | headers: { 'X-Session-Id': sessionId } | });"
        },
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "1036-1040",
          "preview": "const response = await fetch('/api/auth/me', { | headers: { 'X-Session-Id': sessionId } | });"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "1036-1040",
          "preview": "const response = await fetch('/api/auth/me', { | headers: { 'X-Session-Id': sessionId } | });"
        }
      ],
      "codePreview": [
        "const response = await fetch('/api/auth/me', {",
        "headers: { 'X-Session-Id': sessionId }",
        "});",
        "if (response.ok) {"
      ]
    },
    {
      "id": "f812c298",
      "size": 5,
      "occurrences": 3,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "src\\multi-shop-customer-service-manager.js",
          "lines": "966-970",
          "preview": "headers: { | 'Content-Type': 'application/json', | 'X-Session-Id': sessionId"
        },
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "616-620",
          "preview": "headers: { | 'Content-Type': 'application/json', | 'X-Session-Id': sessionId"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "616-620",
          "preview": "headers: { | 'Content-Type': 'application/json', | 'X-Session-Id': sessionId"
        }
      ],
      "codePreview": [
        "headers: {",
        "'Content-Type': 'application/json',",
        "'X-Session-Id': sessionId",
        "},",
        "body: JSON.stringify({"
      ]
    },
    {
      "id": "8139190e",
      "size": 5,
      "occurrences": 3,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\tests\\unit\\api-client.test.js",
          "lines": "131-135",
          "preview": "window.fetch = jest.fn().mockResolvedValue({ | ok: true, | headers: {"
        },
        {
          "file": "static\\tests\\unit\\api-client.test.js",
          "lines": "201-205",
          "preview": "window.fetch = jest.fn().mockResolvedValue({ | ok: true, | headers: {"
        },
        {
          "file": "static\\tests\\unit\\api-client.test.js",
          "lines": "411-415",
          "preview": "window.fetch = jest.fn().mockResolvedValue({ | ok: true, | headers: {"
        }
      ],
      "codePreview": [
        "window.fetch = jest.fn().mockResolvedValue({",
        "ok: true,",
        "headers: {",
        "get: jest.fn().mockReturnValue('application/json')",
        "},"
      ]
    },
    {
      "id": "8cd3795e",
      "size": 5,
      "occurrences": 3,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\tests\\unit\\api-client.test.js",
          "lines": "226-230",
          "preview": "ok: true, | headers: { | get: jest.fn().mockReturnValue('application/json')"
        },
        {
          "file": "static\\tests\\unit\\api-client.test.js",
          "lines": "266-270",
          "preview": "ok: true, | headers: { | get: jest.fn().mockReturnValue('application/json')"
        },
        {
          "file": "static\\tests\\unit\\api-client.test.js",
          "lines": "391-395",
          "preview": "ok: true, | headers: { | get: jest.fn().mockReturnValue('application/json')"
        }
      ],
      "codePreview": [
        "ok: true,",
        "headers: {",
        "get: jest.fn().mockReturnValue('application/json')",
        "},",
        "json: jest.fn().mockResolvedValue({})"
      ]
    },
    {
      "id": "8298203e",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "analyze-code-duplication-improved.js",
          "lines": "41-50",
          "preview": "'.json', | '.md', | '.txt',"
        },
        {
          "file": "analyze-code-duplication.js",
          "lines": "41-50",
          "preview": "'.json', | '.md', | '.txt',"
        }
      ],
      "codePreview": [
        "'.json',",
        "'.md',",
        "'.txt',",
        "'.log',",
        "'.sql',",
        "'.csv',",
        "'.xml',",
        "'.html',",
        "'.css'",
        "];"
      ]
    },
    {
      "id": "83a69128",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "src\\analytics-dashboard-manager.js",
          "lines": "761-770",
          "preview": "switch (timeRange) { | case '1h': | startTime = new Date(now.getTime() - 60 * 60 * 1000);"
        },
        {
          "file": "src\\modules\\EnhancedAnalyticsDashboard.js",
          "lines": "1441-1450",
          "preview": "switch (timeRange) { | case '1h': | startTime = new Date(now.getTime() - 60 * 60 * 1000);"
        }
      ],
      "codePreview": [
        "switch (timeRange) {",
        "case '1h':",
        "startTime = new Date(now.getTime() - 60 * 60 * 1000);",
        "break;",
        "case '24h':",
        "startTime = new Date(now.getTime() - 24 * 60 * 60 * 1000);",
        "break;",
        "case '7d':",
        "startTime = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);",
        "break;"
      ]
    },
    {
      "id": "e31c604c",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "src\\client-api\\message-handler-v2.js",
          "lines": "191-200",
          "preview": "const limit = Math.min(parseInt(req.query.limit) || 50, 100); | if (!userId) {"
        },
        {
          "file": "src\\client-api\\message-handler.js",
          "lines": "121-130",
          "preview": "const limit = Math.min(parseInt(req.query.limit) || 50, 100); | if (!userId) {"
        }
      ],
      "codePreview": [
        "const limit = Math.min(parseInt(req.query.limit) || 50, 100);",
        "if (!userId) {",
        "return res.status(400).json({",
        "success: false,",
        "error: {",
        "code: 'MISSING_USER_ID',",
        "message: '缺少用户ID'",
        "}",
        "});"
      ]
    },
    {
      "id": "34e34ec8",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "21-30",
          "preview": "apiEndpoint: '/api/files', | maxFileSize: 100 * 1024 * 1024, // 100MB | allowedTypes: ['image/*', 'application/pdf', 'text/*', 'application/msword', 'application/vnd.openxmlformats-officedocument.*'],"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "21-30",
          "preview": "apiEndpoint: '/api/files', | maxFileSize: 100 * 1024 * 1024, // 100MB | allowedTypes: ['image/*', 'application/pdf', 'text/*', 'application/msword', 'application/vnd.openxmlformats-officedocument.*'],"
        }
      ],
      "codePreview": [
        "apiEndpoint: '/api/files',",
        "maxFileSize: 100 * 1024 * 1024,",
        "allowedTypes: ['image/*', 'application/pdf', 'text/*', 'application/msword', 'application/vnd.openxmlformats-officedocument.*'],",
        "enableDragDrop: true,",
        "enablePreview: true,",
        "enableSharing: true,",
        "enableVersionControl: true,",
        "...options",
        "};"
      ]
    },
    {
      "id": "8fe0321f",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "31-40",
          "preview": "this.container = null; | this.currentFiles = []; | this.selectedFiles = [];"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "31-40",
          "preview": "this.container = null; | this.currentFiles = []; | this.selectedFiles = [];"
        }
      ],
      "codePreview": [
        "this.container = null;",
        "this.currentFiles = [];",
        "this.selectedFiles = [];",
        "this.currentView = 'grid';",
        "this.currentSort = { field: 'uploadTime', order: 'desc' };",
        "this.currentFilter = { category: 'all', type: 'all' };",
        "this.uploadQueue = [];",
        "this.init();"
      ]
    },
    {
      "id": "c00a6026",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "71-80",
          "preview": "<div class=\"file-manager-header\"> | <div class=\"file-manager-toolbar\"> | <div class=\"toolbar-left\">"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "71-80",
          "preview": "<div class=\"file-manager-header\"> | <div class=\"file-manager-toolbar\"> | <div class=\"toolbar-left\">"
        }
      ],
      "codePreview": [
        "<div class=\"file-manager-header\">",
        "<div class=\"file-manager-toolbar\">",
        "<div class=\"toolbar-left\">",
        "<button class=\"btn btn-primary\" id=\"upload-btn\">",
        "<i class=\"icon-upload\"></i> 上传文件",
        "</button>",
        "<div class=\"file-actions\">",
        "<button class=\"btn btn-outline\" id=\"download-btn\" disabled>",
        "<i class=\"icon-download\"></i> 下载",
        "</button>"
      ]
    },
    {
      "id": "b3ea1e93",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "81-90",
          "preview": "<button class=\"btn btn-outline\" id=\"share-btn\" disabled> | <i class=\"icon-share\"></i> 共享 | </button>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "81-90",
          "preview": "<button class=\"btn btn-outline\" id=\"share-btn\" disabled> | <i class=\"icon-share\"></i> 共享 | </button>"
        }
      ],
      "codePreview": [
        "<button class=\"btn btn-outline\" id=\"share-btn\" disabled>",
        "<i class=\"icon-share\"></i> 共享",
        "</button>",
        "<button class=\"btn btn-outline\" id=\"delete-btn\" disabled>",
        "<i class=\"icon-trash\"></i> 删除",
        "</button>",
        "</div>",
        "</div>",
        "<div class=\"toolbar-center\">"
      ]
    },
    {
      "id": "f6104463",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "91-100",
          "preview": "<div class=\"search-box\"> | <input type=\"text\" id=\"search-input\" placeholder=\"搜索文件...\" /> | <button id=\"search-btn\">"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "91-100",
          "preview": "<div class=\"search-box\"> | <input type=\"text\" id=\"search-input\" placeholder=\"搜索文件...\" /> | <button id=\"search-btn\">"
        }
      ],
      "codePreview": [
        "<div class=\"search-box\">",
        "<input type=\"text\" id=\"search-input\" placeholder=\"搜索文件...\" />",
        "<button id=\"search-btn\">",
        "<i class=\"icon-search\"></i>",
        "</button>",
        "</div>",
        "</div>",
        "<div class=\"toolbar-right\">",
        "<div class=\"view-toggle\">"
      ]
    },
    {
      "id": "bb554598",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "101-110",
          "preview": "<button class=\"view-btn active\" data-view=\"grid\"> | <i class=\"icon-grid\"></i> | </button>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "101-110",
          "preview": "<button class=\"view-btn active\" data-view=\"grid\"> | <i class=\"icon-grid\"></i> | </button>"
        }
      ],
      "codePreview": [
        "<button class=\"view-btn active\" data-view=\"grid\">",
        "<i class=\"icon-grid\"></i>",
        "</button>",
        "<button class=\"view-btn\" data-view=\"list\">",
        "<i class=\"icon-list\"></i>",
        "</button>",
        "</div>",
        "<div class=\"sort-dropdown\">",
        "<select id=\"sort-select\">"
      ]
    },
    {
      "id": "bc95bd1e",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "111-120",
          "preview": "<option value=\"uploadTime-desc\">最新上传</option> | <option value=\"uploadTime-asc\">最早上传</option> | <option value=\"filename-asc\">文件名 A-Z</option>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "111-120",
          "preview": "<option value=\"uploadTime-desc\">最新上传</option> | <option value=\"uploadTime-asc\">最早上传</option> | <option value=\"filename-asc\">文件名 A-Z</option>"
        }
      ],
      "codePreview": [
        "<option value=\"uploadTime-desc\">最新上传</option>",
        "<option value=\"uploadTime-asc\">最早上传</option>",
        "<option value=\"filename-asc\">文件名 A-Z</option>",
        "<option value=\"filename-desc\">文件名 Z-A</option>",
        "<option value=\"fileSize-desc\">大小(大→小)</option>",
        "<option value=\"fileSize-asc\">大小(小→大)</option>",
        "</select>",
        "</div>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "809a4951",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "121-130",
          "preview": "<div class=\"file-manager-filters\"> | <div class=\"filter-tabs\">"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "121-130",
          "preview": "<div class=\"file-manager-filters\"> | <div class=\"filter-tabs\">"
        }
      ],
      "codePreview": [
        "<div class=\"file-manager-filters\">",
        "<div class=\"filter-tabs\">",
        "<button class=\"filter-tab active\" data-category=\"all\">全部</button>",
        "<button class=\"filter-tab\" data-category=\"image\">图片</button>",
        "<button class=\"filter-tab\" data-category=\"document\">文档</button>",
        "<button class=\"filter-tab\" data-category=\"video\">视频</button>",
        "<button class=\"filter-tab\" data-category=\"audio\">音频</button>",
        "<button class=\"filter-tab\" data-category=\"other\">其他</button>",
        "</div>"
      ]
    },
    {
      "id": "1787795e",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "131-140",
          "preview": "<div class=\"filter-stats\"> | <span id=\"file-count\">0 个文件</span>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "131-140",
          "preview": "<div class=\"filter-stats\"> | <span id=\"file-count\">0 个文件</span>"
        }
      ],
      "codePreview": [
        "<div class=\"filter-stats\">",
        "<span id=\"file-count\">0 个文件</span>",
        "<span id=\"total-size\">0 MB</span>",
        "</div>",
        "</div>",
        "</div>",
        "<div class=\"file-manager-content\">",
        "<div class=\"file-browser\" id=\"file-browser\">"
      ]
    },
    {
      "id": "6e9ada7b",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "141-150",
          "preview": "<!-- 文件列表将在这里动态生成 --> | </div>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "141-150",
          "preview": "<!-- 文件列表将在这里动态生成 --> | </div>"
        }
      ],
      "codePreview": [
        "<!-- 文件列表将在这里动态生成 -->",
        "</div>",
        "<div class=\"upload-area\" id=\"upload-area\" style=\"display: none;\">",
        "<div class=\"upload-drop-zone\">",
        "<i class=\"icon-cloud-upload\"></i>",
        "<h3>拖拽文件到这里或点击选择</h3>",
        "<p>支持多文件上传，单个文件最大 100MB</p>",
        "<input type=\"file\" id=\"file-input\" multiple accept=\"${this.options.allowedTypes.join(',')}\" />",
        "</div>"
      ]
    },
    {
      "id": "e442eb8a",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "151-160",
          "preview": "<div class=\"upload-progress\" id=\"upload-progress\"> | <!-- 上传进度将在这里显示 -->"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "151-160",
          "preview": "<div class=\"upload-progress\" id=\"upload-progress\"> | <!-- 上传进度将在这里显示 -->"
        }
      ],
      "codePreview": [
        "<div class=\"upload-progress\" id=\"upload-progress\">",
        "<!-- 上传进度将在这里显示 -->",
        "</div>",
        "</div>",
        "</div>",
        "<div class=\"file-manager-sidebar\" id=\"file-sidebar\" style=\"display: none;\">",
        "<div class=\"sidebar-header\">",
        "<h3>文件详情</h3>"
      ]
    },
    {
      "id": "83f99cd0",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "161-170",
          "preview": "<button class=\"close-btn\" id=\"close-sidebar\">×</button> | </div>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "161-170",
          "preview": "<button class=\"close-btn\" id=\"close-sidebar\">×</button> | </div>"
        }
      ],
      "codePreview": [
        "<button class=\"close-btn\" id=\"close-sidebar\">×</button>",
        "</div>",
        "<div class=\"sidebar-content\">",
        "<div class=\"file-preview\" id=\"file-preview\">",
        "<!-- 文件预览 -->",
        "</div>",
        "<div class=\"file-info\" id=\"file-info\">",
        "<!-- 文件信息 -->"
      ]
    },
    {
      "id": "c5de9299",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "171-180",
          "preview": "</div> | <div class=\"file-actions-panel\">"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "171-180",
          "preview": "</div> | <div class=\"file-actions-panel\">"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"file-actions-panel\">",
        "<button class=\"btn btn-primary btn-block\" id=\"preview-download\">下载文件</button>",
        "<button class=\"btn btn-outline btn-block\" id=\"preview-share\">创建共享链接</button>",
        "${this.options.enableVersionControl ? '<button class=\"btn btn-outline btn-block\" id=\"preview-versions\">版本历史</button>' : ''}",
        "</div>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "3d5b297d",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "181-190",
          "preview": "<!-- 模态框 --> | <div class=\"modal\" id=\"share-modal\"> | <div class=\"modal-content\">"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "181-190",
          "preview": "<!-- 模态框 --> | <div class=\"modal\" id=\"share-modal\"> | <div class=\"modal-content\">"
        }
      ],
      "codePreview": [
        "<!-- 模态框 -->",
        "<div class=\"modal\" id=\"share-modal\">",
        "<div class=\"modal-content\">",
        "<div class=\"modal-header\">",
        "<h3>创建共享链接</h3>",
        "<button class=\"close-btn\" data-modal=\"share-modal\">×</button>",
        "</div>",
        "<div class=\"modal-body\">",
        "<form id=\"share-form\">",
        "<div class=\"form-group\">"
      ]
    },
    {
      "id": "7317b0dd",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "191-200",
          "preview": "<label>共享类型</label> | <select name=\"shareType\"> | <option value=\"public\">公开链接</option>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "191-200",
          "preview": "<label>共享类型</label> | <select name=\"shareType\"> | <option value=\"public\">公开链接</option>"
        }
      ],
      "codePreview": [
        "<label>共享类型</label>",
        "<select name=\"shareType\">",
        "<option value=\"public\">公开链接</option>",
        "<option value=\"password\">密码保护</option>",
        "<option value=\"time\">时间限制</option>",
        "</select>",
        "</div>",
        "<div class=\"form-group\" id=\"password-group\" style=\"display: none;\">",
        "<label>访问密码</label>"
      ]
    },
    {
      "id": "86976bb0",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "201-210",
          "preview": "<input type=\"password\" name=\"password\" placeholder=\"设置访问密码\" /> | </div>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "201-210",
          "preview": "<input type=\"password\" name=\"password\" placeholder=\"设置访问密码\" /> | </div>"
        }
      ],
      "codePreview": [
        "<input type=\"password\" name=\"password\" placeholder=\"设置访问密码\" />",
        "</div>",
        "<div class=\"form-group\" id=\"expiry-group\" style=\"display: none;\">",
        "<label>过期时间</label>",
        "<input type=\"datetime-local\" name=\"expiresAt\" />",
        "</div>",
        "<div class=\"form-group\">",
        "<label>下载限制</label>"
      ]
    },
    {
      "id": "5604b458",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "211-220",
          "preview": "<input type=\"number\" name=\"maxDownloads\" placeholder=\"最大下载次数（可选）\" min=\"1\" /> | </div> | </form>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "211-220",
          "preview": "<input type=\"number\" name=\"maxDownloads\" placeholder=\"最大下载次数（可选）\" min=\"1\" /> | </div> | </form>"
        }
      ],
      "codePreview": [
        "<input type=\"number\" name=\"maxDownloads\" placeholder=\"最大下载次数（可选）\" min=\"1\" />",
        "</div>",
        "</form>",
        "</div>",
        "<div class=\"modal-footer\">",
        "<button class=\"btn btn-outline\" data-modal=\"share-modal\">取消</button>",
        "<button class=\"btn btn-primary\" id=\"create-share-link\">创建链接</button>",
        "</div>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "5b831156",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "221-230",
          "preview": "<div class=\"modal\" id=\"upload-modal\"> | <div class=\"modal-content\">"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "221-230",
          "preview": "<div class=\"modal\" id=\"upload-modal\"> | <div class=\"modal-content\">"
        }
      ],
      "codePreview": [
        "<div class=\"modal\" id=\"upload-modal\">",
        "<div class=\"modal-content\">",
        "<div class=\"modal-header\">",
        "<h3>文件上传</h3>",
        "<button class=\"close-btn\" data-modal=\"upload-modal\">×</button>",
        "</div>",
        "<div class=\"modal-body\">",
        "<div class=\"upload-file-list\" id=\"upload-file-list\">",
        "<!-- 待上传文件列表 -->"
      ]
    },
    {
      "id": "f5745e7b",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "231-240",
          "preview": "</div> | </div> | <div class=\"modal-footer\">"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "231-240",
          "preview": "</div> | </div> | <div class=\"modal-footer\">"
        }
      ],
      "codePreview": [
        "</div>",
        "</div>",
        "<div class=\"modal-footer\">",
        "<button class=\"btn btn-outline\" data-modal=\"upload-modal\">取消</button>",
        "<button class=\"btn btn-primary\" id=\"start-upload\">开始上传</button>",
        "</div>",
        "</div>",
        "</div>",
        "`;",
        "}"
      ]
    },
    {
      "id": "e11d5420",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "261-270",
          "preview": "document.getElementById('search-btn').addEventListener('click', () => { | this.performSearch(); | });"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "261-270",
          "preview": "document.getElementById('search-btn').addEventListener('click', () => { | this.performSearch(); | });"
        }
      ],
      "codePreview": [
        "document.getElementById('search-btn').addEventListener('click', () => {",
        "this.performSearch();",
        "});",
        "document.querySelectorAll('.view-btn').forEach(btn => {",
        "btn.addEventListener('click', (e) => {",
        "this.switchView(e.target.dataset.view);",
        "});",
        "});"
      ]
    },
    {
      "id": "99b7f191",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "341-350",
          "preview": "['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => { | this.container.addEventListener(eventName, (e) => { | e.preventDefault();"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "341-350",
          "preview": "['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => { | this.container.addEventListener(eventName, (e) => { | e.preventDefault();"
        }
      ],
      "codePreview": [
        "['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {",
        "this.container.addEventListener(eventName, (e) => {",
        "e.preventDefault();",
        "e.stopPropagation();",
        "});",
        "});",
        "this.container.addEventListener('dragenter', () => {",
        "this.container.classList.add('drag-over');"
      ]
    },
    {
      "id": "2d161d49",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "411-420",
          "preview": "files.forEach(file => { | const fileItem = { | id: 'upload_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9),"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "411-420",
          "preview": "files.forEach(file => { | const fileItem = { | id: 'upload_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9),"
        }
      ],
      "codePreview": [
        "files.forEach(file => {",
        "const fileItem = {",
        "id: 'upload_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9),",
        "file,",
        "status: 'pending',",
        "progress: 0,",
        "error: null",
        "};",
        "this.uploadQueue.push(fileItem);",
        "});"
      ]
    },
    {
      "id": "5d4f4698",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "431-440",
          "preview": "listContainer.innerHTML = this.uploadQueue.map(item => ` | <div class=\"upload-item\" data-id=\"${item.id}\"> | <div class=\"upload-item-info\">"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "431-440",
          "preview": "listContainer.innerHTML = this.uploadQueue.map(item => ` | <div class=\"upload-item\" data-id=\"${item.id}\"> | <div class=\"upload-item-info\">"
        }
      ],
      "codePreview": [
        "listContainer.innerHTML = this.uploadQueue.map(item => `",
        "<div class=\"upload-item\" data-id=\"${item.id}\">",
        "<div class=\"upload-item-info\">",
        "<div class=\"file-icon\">",
        "<i class=\"icon-${this.getFileIcon(item.file.type)}\"></i>",
        "</div>",
        "<div class=\"file-details\">",
        "<div class=\"file-name\">${item.file.name}</div>",
        "<div class=\"file-size\">${this.formatFileSize(item.file.size)}</div>",
        "</div>"
      ]
    },
    {
      "id": "4a3d5328",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "441-450",
          "preview": "<div class=\"upload-status\"> | <span class=\"status-text\">${this.getStatusText(item.status)}</span> | <button class=\"remove-btn\" onclick=\"fileManager.removeFromQueue('${item.id}')\">×</button>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "441-450",
          "preview": "<div class=\"upload-status\"> | <span class=\"status-text\">${this.getStatusText(item.status)}</span> | <button class=\"remove-btn\" onclick=\"fileManager.removeFromQueue('${item.id}')\">×</button>"
        }
      ],
      "codePreview": [
        "<div class=\"upload-status\">",
        "<span class=\"status-text\">${this.getStatusText(item.status)}</span>",
        "<button class=\"remove-btn\" onclick=\"fileManager.removeFromQueue('${item.id}')\">×</button>",
        "</div>",
        "</div>",
        "<div class=\"upload-progress-bar\">",
        "<div class=\"progress-fill\" style=\"width: ${item.progress}%\"></div>",
        "</div>"
      ]
    },
    {
      "id": "d2485ee2",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "561-570",
          "preview": "userId: this.options.userId || 'default_user', | page: 1, | limit: 100,"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "561-570",
          "preview": "userId: this.options.userId || 'default_user', | page: 1, | limit: 100,"
        }
      ],
      "codePreview": [
        "userId: this.options.userId || 'default_user',",
        "page: 1,",
        "limit: 100,",
        "sortBy: this.currentSort.field,",
        "sortOrder: this.currentSort.order",
        "});",
        "if (this.currentFilter.category !== 'all') {",
        "params.append('category', this.currentFilter.category);",
        "}"
      ]
    },
    {
      "id": "53f148f6",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "591-600",
          "preview": "*/ | renderFiles() { | const browser = document.getElementById('file-browser');"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "591-600",
          "preview": "*/ | renderFiles() { | const browser = document.getElementById('file-browser');"
        }
      ],
      "codePreview": [
        "renderFiles() {",
        "const browser = document.getElementById('file-browser');",
        "if (this.currentFiles.length === 0) {",
        "browser.innerHTML = `",
        "<div class=\"empty-state\">",
        "<i class=\"icon-folder-open\"></i>",
        "<h3>暂无文件</h3>",
        "<p>点击上传按钮或拖拽文件到这里开始使用</p>"
      ]
    },
    {
      "id": "71bcdac1",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "621-630",
          "preview": "<div class=\"file-item\" data-id=\"${file.id}\" onclick=\"fileManager.selectFile('${file.id}')\"> | <div class=\"file-thumbnail\"> | ${this.generateThumbnail(file)}"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "621-630",
          "preview": "<div class=\"file-item\" data-id=\"${file.id}\" onclick=\"fileManager.selectFile('${file.id}')\"> | <div class=\"file-thumbnail\"> | ${this.generateThumbnail(file)}"
        }
      ],
      "codePreview": [
        "<div class=\"file-item\" data-id=\"${file.id}\" onclick=\"fileManager.selectFile('${file.id}')\">",
        "<div class=\"file-thumbnail\">",
        "${this.generateThumbnail(file)}",
        "</div>",
        "<div class=\"file-info\">",
        "<div class=\"file-name\" title=\"${file.originalName}\">${file.originalName}</div>",
        "<div class=\"file-meta\">",
        "<span class=\"file-size\">${this.formatFileSize(file.fileSize)}</span>",
        "<span class=\"file-date\">${this.formatDate(file.uploadTime)}</span>",
        "</div>"
      ]
    },
    {
      "id": "3073c721",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "631-640",
          "preview": "</div> | <div class=\"file-actions\"> | <button class=\"action-btn\" onclick=\"fileManager.previewFile('${file.id}')\" title=\"预览\">"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "631-640",
          "preview": "</div> | <div class=\"file-actions\"> | <button class=\"action-btn\" onclick=\"fileManager.previewFile('${file.id}')\" title=\"预览\">"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"file-actions\">",
        "<button class=\"action-btn\" onclick=\"fileManager.previewFile('${file.id}')\" title=\"预览\">",
        "<i class=\"icon-eye\"></i>",
        "</button>",
        "<button class=\"action-btn\" onclick=\"fileManager.downloadFile('${file.id}')\" title=\"下载\">",
        "<i class=\"icon-download\"></i>",
        "</button>",
        "<button class=\"action-btn\" onclick=\"fileManager.shareFile('${file.id}')\" title=\"共享\">",
        "<i class=\"icon-share\"></i>"
      ]
    },
    {
      "id": "7c802ddf",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "651-660",
          "preview": "const browser = document.getElementById('file-browser'); | browser.className = 'file-browser list-view';"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "651-660",
          "preview": "const browser = document.getElementById('file-browser'); | browser.className = 'file-browser list-view';"
        }
      ],
      "codePreview": [
        "const browser = document.getElementById('file-browser');",
        "browser.className = 'file-browser list-view';",
        "browser.innerHTML = `",
        "<div class=\"file-list-header\">",
        "<div class=\"col-name\">文件名</div>",
        "<div class=\"col-size\">大小</div>",
        "<div class=\"col-type\">类型</div>",
        "<div class=\"col-date\">修改时间</div>",
        "<div class=\"col-actions\">操作</div>"
      ]
    },
    {
      "id": "739da33a",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "661-670",
          "preview": "</div> | ${this.currentFiles.map(file => `"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "661-670",
          "preview": "</div> | ${this.currentFiles.map(file => `"
        }
      ],
      "codePreview": [
        "</div>",
        "${this.currentFiles.map(file => `",
        "<div class=\"file-list-item\" data-id=\"${file.id}\" onclick=\"fileManager.selectFile('${file.id}')\">",
        "<div class=\"col-name\">",
        "<i class=\"icon-${this.getFileIcon(file.mimeType)}\"></i>",
        "<span title=\"${file.originalName}\">${file.originalName}</span>",
        "</div>",
        "<div class=\"col-size\">${this.formatFileSize(file.fileSize)}</div>",
        "<div class=\"col-type\">${this.getFileType(file.mimeType)}</div>"
      ]
    },
    {
      "id": "67a776e8",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "671-680",
          "preview": "<div class=\"col-date\">${this.formatDate(file.uploadTime)}</div> | <div class=\"col-actions\"> | <button class=\"action-btn\" onclick=\"fileManager.previewFile('${file.id}')\" title=\"预览\">"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "671-680",
          "preview": "<div class=\"col-date\">${this.formatDate(file.uploadTime)}</div> | <div class=\"col-actions\"> | <button class=\"action-btn\" onclick=\"fileManager.previewFile('${file.id}')\" title=\"预览\">"
        }
      ],
      "codePreview": [
        "<div class=\"col-date\">${this.formatDate(file.uploadTime)}</div>",
        "<div class=\"col-actions\">",
        "<button class=\"action-btn\" onclick=\"fileManager.previewFile('${file.id}')\" title=\"预览\">",
        "<i class=\"icon-eye\"></i>",
        "</button>",
        "<button class=\"action-btn\" onclick=\"fileManager.downloadFile('${file.id}')\" title=\"下载\">",
        "<i class=\"icon-download\"></i>",
        "</button>",
        "<button class=\"action-btn\" onclick=\"fileManager.shareFile('${file.id}')\" title=\"共享\">",
        "<i class=\"icon-share\"></i>"
      ]
    },
    {
      "id": "d7665188",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "701-710",
          "preview": "*/ | getFileIcon(mimeType) { | if (mimeType.startsWith('image/')) return 'image';"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "701-710",
          "preview": "*/ | getFileIcon(mimeType) { | if (mimeType.startsWith('image/')) return 'image';"
        }
      ],
      "codePreview": [
        "getFileIcon(mimeType) {",
        "if (mimeType.startsWith('image/')) return 'image';",
        "if (mimeType.startsWith('video/')) return 'video';",
        "if (mimeType.startsWith('audio/')) return 'music';",
        "if (mimeType.includes('pdf')) return 'file-pdf';",
        "if (mimeType.includes('word')) return 'file-word';",
        "if (mimeType.includes('excel')) return 'file-excel';",
        "if (mimeType.includes('zip') || mimeType.includes('rar')) return 'archive';",
        "if (mimeType.startsWith('text/')) return 'file-text';"
      ]
    },
    {
      "id": "10e60cac",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "721-730",
          "preview": "'audio/': '音频', | 'application/pdf': 'PDF文档', | 'application/msword': 'Word文档',"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "721-730",
          "preview": "'audio/': '音频', | 'application/pdf': 'PDF文档', | 'application/msword': 'Word文档',"
        }
      ],
      "codePreview": [
        "'audio/': '音频',",
        "'application/pdf': 'PDF文档',",
        "'application/msword': 'Word文档',",
        "'application/vnd.openxmlformats-officedocument.wordprocessingml.document': 'Word文档',",
        "'application/vnd.ms-excel': 'Excel表格',",
        "'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet': 'Excel表格',",
        "'text/': '文本',",
        "'application/zip': '压缩包',",
        "'application/x-rar-compressed': '压缩包'",
        "};"
      ]
    },
    {
      "id": "9622622a",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "41-50",
          "preview": "<h3>📡 通知管理系统</h3> | <div class=\"notification-controls\"> | <button id=\"send-notification-btn\" class=\"btn btn-primary\">发送通知</button>"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "41-50",
          "preview": "<h3>📡 通知管理系统</h3> | <div class=\"notification-controls\"> | <button id=\"send-notification-btn\" class=\"btn btn-primary\">发送通知</button>"
        }
      ],
      "codePreview": [
        "<h3>📡 通知管理系统</h3>",
        "<div class=\"notification-controls\">",
        "<button id=\"send-notification-btn\" class=\"btn btn-primary\">发送通知</button>",
        "<button id=\"manage-templates-btn\" class=\"btn btn-secondary\">管理模板</button>",
        "<button id=\"view-stats-btn\" class=\"btn btn-info\">查看统计</button>",
        "<button id=\"test-notification-btn\" class=\"btn btn-warning\">测试通知</button>",
        "</div>",
        "</div>",
        "<div class=\"notification-tabs\">"
      ]
    },
    {
      "id": "b513af70",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "51-60",
          "preview": "<button class=\"tab-btn active\" data-tab=\"send\">发送通知</button> | <button class=\"tab-btn\" data-tab=\"templates\">模板管理</button> | <button class=\"tab-btn\" data-tab=\"subscriptions\">订阅管理</button>"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "51-60",
          "preview": "<button class=\"tab-btn active\" data-tab=\"send\">发送通知</button> | <button class=\"tab-btn\" data-tab=\"templates\">模板管理</button> | <button class=\"tab-btn\" data-tab=\"subscriptions\">订阅管理</button>"
        }
      ],
      "codePreview": [
        "<button class=\"tab-btn active\" data-tab=\"send\">发送通知</button>",
        "<button class=\"tab-btn\" data-tab=\"templates\">模板管理</button>",
        "<button class=\"tab-btn\" data-tab=\"subscriptions\">订阅管理</button>",
        "<button class=\"tab-btn\" data-tab=\"stats\">统计分析</button>",
        "</div>",
        "<div class=\"notification-content\">",
        "<!-- 发送通知标签页 -->",
        "<div id=\"send-tab\" class=\"tab-content active\">",
        "<div class=\"send-form\">"
      ]
    },
    {
      "id": "6c478c01",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "61-70",
          "preview": "<div class=\"form-group\"> | <label>标题:</label> | <input type=\"text\" id=\"notification-title\" placeholder=\"输入通知标题\">"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "61-70",
          "preview": "<div class=\"form-group\"> | <label>标题:</label> | <input type=\"text\" id=\"notification-title\" placeholder=\"输入通知标题\">"
        }
      ],
      "codePreview": [
        "<div class=\"form-group\">",
        "<label>标题:</label>",
        "<input type=\"text\" id=\"notification-title\" placeholder=\"输入通知标题\">",
        "</div>",
        "<div class=\"form-group\">",
        "<label>内容:</label>",
        "<textarea id=\"notification-message\" placeholder=\"输入通知内容\"></textarea>",
        "</div>",
        "<div class=\"form-group\">",
        "<label>类型:</label>"
      ]
    },
    {
      "id": "baaf6e3f",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "71-80",
          "preview": "<select id=\"notification-type\"> | <option value=\"general\">一般通知</option> | <option value=\"message\">消息通知</option>"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "71-80",
          "preview": "<select id=\"notification-type\"> | <option value=\"general\">一般通知</option> | <option value=\"message\">消息通知</option>"
        }
      ],
      "codePreview": [
        "<select id=\"notification-type\">",
        "<option value=\"general\">一般通知</option>",
        "<option value=\"message\">消息通知</option>",
        "<option value=\"order\">订单通知</option>",
        "<option value=\"system\">系统通知</option>",
        "</select>",
        "</div>",
        "<div class=\"form-group\">",
        "<label>优先级:</label>",
        "<select id=\"notification-priority\">"
      ]
    },
    {
      "id": "ea80b9b5",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "81-90",
          "preview": "<option value=\"normal\">普通</option> | <option value=\"high\">高</option> | <option value=\"urgent\">紧急</option>"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "81-90",
          "preview": "<option value=\"normal\">普通</option> | <option value=\"high\">高</option> | <option value=\"urgent\">紧急</option>"
        }
      ],
      "codePreview": [
        "<option value=\"normal\">普通</option>",
        "<option value=\"high\">高</option>",
        "<option value=\"urgent\">紧急</option>",
        "</select>",
        "</div>",
        "<div class=\"form-group\">",
        "<label>发送渠道:</label>",
        "<div class=\"checkbox-group\">",
        "<label><input type=\"checkbox\" value=\"websocket\" checked> WebSocket实时</label>",
        "<label><input type=\"checkbox\" value=\"email\"> 邮件</label>"
      ]
    },
    {
      "id": "ee6b23e0",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "91-100",
          "preview": "<label><input type=\"checkbox\" value=\"push\"> 推送</label> | <label><input type=\"checkbox\" value=\"sms\"> 短信</label> | </div>"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "91-100",
          "preview": "<label><input type=\"checkbox\" value=\"push\"> 推送</label> | <label><input type=\"checkbox\" value=\"sms\"> 短信</label> | </div>"
        }
      ],
      "codePreview": [
        "<label><input type=\"checkbox\" value=\"push\"> 推送</label>",
        "<label><input type=\"checkbox\" value=\"sms\"> 短信</label>",
        "</div>",
        "</div>",
        "<div class=\"form-group\">",
        "<label>目标用户 (留空为广播):</label>",
        "<input type=\"text\" id=\"target-user\" placeholder=\"用户ID\">",
        "</div>",
        "<div class=\"form-group\">",
        "<label>定时发送:</label>"
      ]
    },
    {
      "id": "f16c02bd",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "101-110",
          "preview": "<input type=\"datetime-local\" id=\"scheduled-time\"> | </div> | <button id=\"send-now-btn\" class=\"btn btn-primary\">立即发送</button>"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "101-110",
          "preview": "<input type=\"datetime-local\" id=\"scheduled-time\"> | </div> | <button id=\"send-now-btn\" class=\"btn btn-primary\">立即发送</button>"
        }
      ],
      "codePreview": [
        "<input type=\"datetime-local\" id=\"scheduled-time\">",
        "</div>",
        "<button id=\"send-now-btn\" class=\"btn btn-primary\">立即发送</button>",
        "</div>",
        "</div>",
        "<!-- 模板管理标签页 -->",
        "<div id=\"templates-tab\" class=\"tab-content\">",
        "<div class=\"templates-header\">",
        "<button id=\"create-template-btn\" class=\"btn btn-primary\">创建模板</button>"
      ]
    },
    {
      "id": "5d165cc7",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "111-120",
          "preview": "</div> | <div id=\"templates-list\" class=\"templates-list\"> | <!-- 模板列表 -->"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "111-120",
          "preview": "</div> | <div id=\"templates-list\" class=\"templates-list\"> | <!-- 模板列表 -->"
        }
      ],
      "codePreview": [
        "</div>",
        "<div id=\"templates-list\" class=\"templates-list\">",
        "<!-- 模板列表 -->",
        "</div>",
        "</div>",
        "<!-- 订阅管理标签页 -->",
        "<div id=\"subscriptions-tab\" class=\"tab-content\">",
        "<div id=\"subscriptions-list\" class=\"subscriptions-list\">",
        "<!-- 订阅列表 -->"
      ]
    },
    {
      "id": "054015d8",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "121-130",
          "preview": "</div> | </div>"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "121-130",
          "preview": "</div> | </div>"
        }
      ],
      "codePreview": [
        "</div>",
        "</div>",
        "<!-- 统计分析标签页 -->",
        "<div id=\"stats-tab\" class=\"tab-content\">",
        "<div id=\"stats-dashboard\" class=\"stats-dashboard\">",
        "<!-- 统计图表 -->",
        "</div>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "e0f82079",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "131-140",
          "preview": "<!-- 通知弹窗 --> | <div id=\"notification-toast\" class=\"notification-toast\">"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "131-140",
          "preview": "<!-- 通知弹窗 --> | <div id=\"notification-toast\" class=\"notification-toast\">"
        }
      ],
      "codePreview": [
        "<!-- 通知弹窗 -->",
        "<div id=\"notification-toast\" class=\"notification-toast\">",
        "<!-- 实时通知显示区域 -->",
        "</div>",
        "<!-- 模态框 -->",
        "<div id=\"notification-modal\" class=\"modal\">",
        "<div class=\"modal-content\">",
        "<span class=\"close\">&times;</span>"
      ]
    },
    {
      "id": "50cec3b9",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "241-250",
          "preview": "content.classList.remove('active'); | }); | document.getElementById(`${tabName}-tab`).classList.add('active');"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "241-250",
          "preview": "content.classList.remove('active'); | }); | document.getElementById(`${tabName}-tab`).classList.add('active');"
        }
      ],
      "codePreview": [
        "content.classList.remove('active');",
        "});",
        "document.getElementById(`${tabName}-tab`).classList.add('active');",
        "switch (tabName) {",
        "case 'templates':",
        "this.loadTemplates();",
        "break;",
        "case 'subscriptions':"
      ]
    },
    {
      "id": "30e2da5c",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "291-300",
          "preview": "message, | type, | priority,"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "291-300",
          "preview": "message, | type, | priority,"
        }
      ],
      "codePreview": [
        "message,",
        "type,",
        "priority,",
        "channels,",
        "scheduledAt: scheduledTime || null,",
        "metadata: {",
        "source: 'manual',",
        "userAgent: navigator.userAgent",
        "}",
        "};"
      ]
    },
    {
      "id": "16801d7b",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "391-400",
          "preview": "<div class=\"template-header\"> | <h4>${template.name}</h4> | <span class=\"template-type\">${template.type}</span>"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "391-400",
          "preview": "<div class=\"template-header\"> | <h4>${template.name}</h4> | <span class=\"template-type\">${template.type}</span>"
        }
      ],
      "codePreview": [
        "<div class=\"template-header\">",
        "<h4>${template.name}</h4>",
        "<span class=\"template-type\">${template.type}</span>",
        "</div>",
        "<div class=\"template-content\">",
        "<p><strong>标题:</strong> ${template.title}</p>",
        "<p><strong>内容:</strong> ${template.content.substring(0, 100)}...</p>",
        "<p><strong>渠道:</strong> ${template.channels.join(', ')}</p>",
        "</div>",
        "<div class=\"template-actions\">"
      ]
    },
    {
      "id": "457d1f9a",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "441-450",
          "preview": "<div class=\"stats-item\"> | <span>已发送:</span> | <span class=\"stats-value\">${this.stats.totalStats.sent}</span>"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "441-450",
          "preview": "<div class=\"stats-item\"> | <span>已发送:</span> | <span class=\"stats-value\">${this.stats.totalStats.sent}</span>"
        }
      ],
      "codePreview": [
        "<div class=\"stats-item\">",
        "<span>已发送:</span>",
        "<span class=\"stats-value\">${this.stats.totalStats.sent}</span>",
        "</div>",
        "<div class=\"stats-item\">",
        "<span>已送达:</span>",
        "<span class=\"stats-value\">${this.stats.totalStats.delivered}</span>",
        "</div>",
        "<div class=\"stats-item\">",
        "<span>失败:</span>"
      ]
    },
    {
      "id": "bccc7246",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "451-460",
          "preview": "<span class=\"stats-value\">${this.stats.totalStats.failed}</span> | </div> | <div class=\"stats-item\">"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "451-460",
          "preview": "<span class=\"stats-value\">${this.stats.totalStats.failed}</span> | </div> | <div class=\"stats-item\">"
        }
      ],
      "codePreview": [
        "<span class=\"stats-value\">${this.stats.totalStats.failed}</span>",
        "</div>",
        "<div class=\"stats-item\">",
        "<span>成功率:</span>",
        "<span class=\"stats-value\">${this.stats.totalStats.successRate}</span>",
        "</div>",
        "</div>",
        "<div class=\"stats-card\">",
        "<h4>队列状态</h4>"
      ]
    },
    {
      "id": "fcd2801c",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "461-470",
          "preview": "<div class=\"stats-item\"> | <span>待处理:</span> | <span class=\"stats-value\">${this.stats.queueStatus.pending}</span>"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "461-470",
          "preview": "<div class=\"stats-item\"> | <span>待处理:</span> | <span class=\"stats-value\">${this.stats.queueStatus.pending}</span>"
        }
      ],
      "codePreview": [
        "<div class=\"stats-item\">",
        "<span>待处理:</span>",
        "<span class=\"stats-value\">${this.stats.queueStatus.pending}</span>",
        "</div>",
        "<div class=\"stats-item\">",
        "<span>处理中:</span>",
        "<span class=\"stats-value\">${this.stats.queueStatus.processing ? '是' : '否'}</span>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "792b4d42",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "471-480",
          "preview": "<div class=\"stats-card\"> | <h4>按类型统计</h4> | ${this.stats.typeStats.map(type => `"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "471-480",
          "preview": "<div class=\"stats-card\"> | <h4>按类型统计</h4> | ${this.stats.typeStats.map(type => `"
        }
      ],
      "codePreview": [
        "<div class=\"stats-card\">",
        "<h4>按类型统计</h4>",
        "${this.stats.typeStats.map(type => `",
        "<div class=\"stats-item\">",
        "<span>${type.type}:</span>",
        "<span class=\"stats-value\">${type.sent}/${type.delivered}</span>",
        "</div>",
        "`).join('')}",
        "</div>"
      ]
    },
    {
      "id": "dda2a196",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "481-490",
          "preview": "<div class=\"stats-card\"> | <h4>按渠道统计</h4> | ${this.stats.channelStats.slice(0, 5).map(channel => `"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "481-490",
          "preview": "<div class=\"stats-card\"> | <h4>按渠道统计</h4> | ${this.stats.channelStats.slice(0, 5).map(channel => `"
        }
      ],
      "codePreview": [
        "<div class=\"stats-card\">",
        "<h4>按渠道统计</h4>",
        "${this.stats.channelStats.slice(0, 5).map(channel => `",
        "<div class=\"stats-item\">",
        "<span>${channel.channel}:</span>",
        "<span class=\"stats-value\">${channel.sent}/${channel.delivered}</span>",
        "</div>",
        "`).join('')}",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "9d2b8029",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "501-510",
          "preview": "const notificationElement = document.createElement('div'); | notificationElement.className = `notification-item priority-${notification.priority || 'normal'}`; | notificationElement.innerHTML = `"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "501-510",
          "preview": "const notificationElement = document.createElement('div'); | notificationElement.className = `notification-item priority-${notification.priority || 'normal'}`; | notificationElement.innerHTML = `"
        }
      ],
      "codePreview": [
        "const notificationElement = document.createElement('div');",
        "notificationElement.className = `notification-item priority-${notification.priority || 'normal'}`;",
        "notificationElement.innerHTML = `",
        "<div class=\"notification-header\">",
        "<strong>${notification.title}</strong>",
        "<span class=\"notification-time\">${new Date(notification.timestamp).toLocaleTimeString()}</span>",
        "</div>",
        "<div class=\"notification-body\">",
        "${notification.message}",
        "</div>"
      ]
    },
    {
      "id": "0e839c1d",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "541-550",
          "preview": "showMessage(message, type = 'info') { | const toast = document.getElementById('notification-toast'); | if (!toast) return;"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "541-550",
          "preview": "showMessage(message, type = 'info') { | const toast = document.getElementById('notification-toast'); | if (!toast) return;"
        }
      ],
      "codePreview": [
        "showMessage(message, type = 'info') {",
        "const toast = document.getElementById('notification-toast');",
        "if (!toast) return;",
        "const messageElement = document.createElement('div');",
        "messageElement.className = `message-item message-${type}`;",
        "messageElement.innerHTML = `",
        "<div class=\"message-content\">${message}</div>",
        "<button class=\"message-close\" onclick=\"this.parentElement.remove()\">×</button>",
        "`;"
      ]
    },
    {
      "id": "28c74f52",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "11-20",
          "preview": "constructor(options = {}) { | this.shopId = options.shopId || 'default'; | this.containerId = options.containerId || 'ai-chatbot';"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "11-20",
          "preview": "constructor(options = {}) { | this.shopId = options.shopId || 'default'; | this.containerId = options.containerId || 'ai-chatbot';"
        }
      ],
      "codePreview": [
        "constructor(options = {}) {",
        "this.shopId = options.shopId || 'default';",
        "this.containerId = options.containerId || 'ai-chatbot';",
        "this.apiEndpoint = options.apiEndpoint || '/api/ai';",
        "this.websocket = null;",
        "this.conversationId = this.generateConversationId();",
        "this.isConnected = false;",
        "this.messageHistory = [];",
        "this.currentContext = {};",
        "this.typingIndicator = null;"
      ]
    },
    {
      "id": "062f8814",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "61-70",
          "preview": "container.innerHTML = ` | <div class=\"ai-chatbot-container\">"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "61-70",
          "preview": "container.innerHTML = ` | <div class=\"ai-chatbot-container\">"
        }
      ],
      "codePreview": [
        "container.innerHTML = `",
        "<div class=\"ai-chatbot-container\">",
        "<!-- 聊天头部 -->",
        "<div class=\"ai-chatbot-header\">",
        "<div class=\"ai-bot-avatar\">",
        "<div class=\"bot-status-indicator\" id=\"botStatusIndicator\"></div>",
        "🤖",
        "</div>",
        "<div class=\"ai-bot-info\">"
      ]
    },
    {
      "id": "5b40e932",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "71-80",
          "preview": "<div class=\"ai-bot-name\">AI智能助手</div> | <div class=\"ai-bot-status\" id=\"botStatusText\">正在连接...</div> | </div>"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "71-80",
          "preview": "<div class=\"ai-bot-name\">AI智能助手</div> | <div class=\"ai-bot-status\" id=\"botStatusText\">正在连接...</div> | </div>"
        }
      ],
      "codePreview": [
        "<div class=\"ai-bot-name\">AI智能助手</div>",
        "<div class=\"ai-bot-status\" id=\"botStatusText\">正在连接...</div>",
        "</div>",
        "<div class=\"ai-chatbot-actions\">",
        "<button class=\"btn-icon\" id=\"aiSettingsBtn\" title=\"设置\">⚙️</button>",
        "<button class=\"btn-icon\" id=\"aiMinimizeBtn\" title=\"最小化\">➖</button>",
        "<button class=\"btn-icon\" id=\"aiCloseBtn\" title=\"关闭\">✕</button>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "7dddb24d",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "81-90",
          "preview": "<!-- 聊天消息区域 --> | <div class=\"ai-chatbot-messages\" id=\"aiChatMessages\"> | <div class=\"ai-message-container\">"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "81-90",
          "preview": "<!-- 聊天消息区域 --> | <div class=\"ai-chatbot-messages\" id=\"aiChatMessages\"> | <div class=\"ai-message-container\">"
        }
      ],
      "codePreview": [
        "<!-- 聊天消息区域 -->",
        "<div class=\"ai-chatbot-messages\" id=\"aiChatMessages\">",
        "<div class=\"ai-message-container\">",
        "<div class=\"ai-system-message\">",
        "🤖 AI智能客服已启动，我将为您提供专业的服务！",
        "</div>",
        "</div>",
        "</div>",
        "<!-- 智能建议区域 -->"
      ]
    },
    {
      "id": "4ee2a05e",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "91-100",
          "preview": "<div class=\"ai-suggestions-container\" id=\"aiSuggestions\" style=\"display: none;\"> | <div class=\"ai-suggestions-title\">💡 智能建议：</div> | <div class=\"ai-suggestions-list\" id=\"aiSuggestionsList\"></div>"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "91-100",
          "preview": "<div class=\"ai-suggestions-container\" id=\"aiSuggestions\" style=\"display: none;\"> | <div class=\"ai-suggestions-title\">💡 智能建议：</div> | <div class=\"ai-suggestions-list\" id=\"aiSuggestionsList\"></div>"
        }
      ],
      "codePreview": [
        "<div class=\"ai-suggestions-container\" id=\"aiSuggestions\" style=\"display: none;\">",
        "<div class=\"ai-suggestions-title\">💡 智能建议：</div>",
        "<div class=\"ai-suggestions-list\" id=\"aiSuggestionsList\"></div>",
        "</div>",
        "<!-- 快速回复区域 -->",
        "<div class=\"ai-quick-replies\" id=\"aiQuickReplies\">",
        "<div class=\"ai-quick-reply-item\" data-text=\"查看营业时间\">🕐 营业时间</div>",
        "<div class=\"ai-quick-reply-item\" data-text=\"联系方式\">📞 联系方式</div>",
        "<div class=\"ai-quick-reply-item\" data-text=\"退换货政策\">🔄 退换货</div>"
      ]
    },
    {
      "id": "5affa2cd",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "101-110",
          "preview": "<div class=\"ai-quick-reply-item\" data-text=\"转人工客服\">👨‍💼 人工客服</div> | </div>"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "101-110",
          "preview": "<div class=\"ai-quick-reply-item\" data-text=\"转人工客服\">👨‍💼 人工客服</div> | </div>"
        }
      ],
      "codePreview": [
        "<div class=\"ai-quick-reply-item\" data-text=\"转人工客服\">👨‍💼 人工客服</div>",
        "</div>",
        "<!-- 输入区域 -->",
        "<div class=\"ai-chatbot-input\">",
        "<div class=\"ai-input-container\">",
        "<textarea",
        "id=\"aiMessageInput\"",
        "placeholder=\"请输入您的问题...\"",
        "rows=\"1\""
      ]
    },
    {
      "id": "a54c8412",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "111-120",
          "preview": "maxlength=\"500\" | ></textarea> | <div class=\"ai-input-actions\">"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "111-120",
          "preview": "maxlength=\"500\" | ></textarea> | <div class=\"ai-input-actions\">"
        }
      ],
      "codePreview": [
        "maxlength=\"500\"",
        "></textarea>",
        "<div class=\"ai-input-actions\">",
        "<button class=\"btn-icon\" id=\"aiEmojiBtn\" title=\"表情\">😊</button>",
        "<button class=\"btn-icon\" id=\"aiVoiceBtn\" title=\"语音\">🎤</button>",
        "<button class=\"btn-primary\" id=\"aiSendBtn\" title=\"发送\">",
        "<span class=\"btn-text\">发送</span>",
        "<span class=\"btn-icon\">➤</span>",
        "</button>",
        "</div>"
      ]
    },
    {
      "id": "6fdad7db",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "121-130",
          "preview": "</div> | <div class=\"ai-input-status\"> | <span class=\"ai-char-count\" id=\"aiCharCount\">0/500</span>"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "121-130",
          "preview": "</div> | <div class=\"ai-input-status\"> | <span class=\"ai-char-count\" id=\"aiCharCount\">0/500</span>"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"ai-input-status\">",
        "<span class=\"ai-char-count\" id=\"aiCharCount\">0/500</span>",
        "<span class=\"ai-typing-status\" id=\"aiTypingStatus\"></span>",
        "</div>",
        "</div>",
        "<!-- AI状态指示器 -->",
        "<div class=\"ai-status-bar\" id=\"aiStatusBar\">",
        "<div class=\"ai-status-item\">"
      ]
    },
    {
      "id": "95206aba",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "131-140",
          "preview": "<span class=\"ai-status-label\">智能分析:</span> | <span class=\"ai-status-value\" id=\"aiAnalysisStatus\">待机中</span> | </div>"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "131-140",
          "preview": "<span class=\"ai-status-label\">智能分析:</span> | <span class=\"ai-status-value\" id=\"aiAnalysisStatus\">待机中</span> | </div>"
        }
      ],
      "codePreview": [
        "<span class=\"ai-status-label\">智能分析:</span>",
        "<span class=\"ai-status-value\" id=\"aiAnalysisStatus\">待机中</span>",
        "</div>",
        "<div class=\"ai-status-item\">",
        "<span class=\"ai-status-label\">置信度:</span>",
        "<span class=\"ai-status-value\" id=\"aiConfidenceScore\">--</span>",
        "</div>",
        "<div class=\"ai-status-item\">",
        "<span class=\"ai-status-label\">情感:</span>",
        "<span class=\"ai-status-value\" id=\"aiSentimentScore\">中性</span>"
      ]
    },
    {
      "id": "cfc05816",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "141-150",
          "preview": "</div> | </div> | </div>"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "141-150",
          "preview": "</div> | </div> | </div>"
        }
      ],
      "codePreview": [
        "</div>",
        "</div>",
        "</div>",
        "<!-- AI设置面板 -->",
        "<div class=\"ai-settings-panel\" id=\"aiSettingsPanel\" style=\"display: none;\">",
        "<div class=\"ai-settings-header\">",
        "<h3>🤖 AI设置</h3>",
        "<button class=\"btn-close\" id=\"aiSettingsCloseBtn\">✕</button>",
        "</div>"
      ]
    },
    {
      "id": "c73d99ee",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "151-160",
          "preview": "<div class=\"ai-settings-content\"> | <div class=\"ai-setting-group\"> | <label class=\"ai-setting-label\">"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "151-160",
          "preview": "<div class=\"ai-settings-content\"> | <div class=\"ai-setting-group\"> | <label class=\"ai-setting-label\">"
        }
      ],
      "codePreview": [
        "<div class=\"ai-settings-content\">",
        "<div class=\"ai-setting-group\">",
        "<label class=\"ai-setting-label\">",
        "<input type=\"checkbox\" id=\"autoReplyToggle\" checked>",
        "启用自动回复",
        "</label>",
        "</div>",
        "<div class=\"ai-setting-group\">",
        "<label class=\"ai-setting-label\">",
        "<input type=\"checkbox\" id=\"smartSuggestionsToggle\" checked>"
      ]
    },
    {
      "id": "56a564d3",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "161-170",
          "preview": "智能建议 | </label> | </div>"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "161-170",
          "preview": "智能建议 | </label> | </div>"
        }
      ],
      "codePreview": [
        "智能建议",
        "</label>",
        "</div>",
        "<div class=\"ai-setting-group\">",
        "<label class=\"ai-setting-label\">",
        "<input type=\"checkbox\" id=\"sentimentAnalysisToggle\" checked>",
        "情感分析",
        "</label>",
        "</div>",
        "<div class=\"ai-setting-group\">"
      ]
    },
    {
      "id": "8ce332ac",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "171-180",
          "preview": "<label class=\"ai-setting-label\">响应延迟 (毫秒):</label> | <input type=\"range\" id=\"responseDelaySlider\" min=\"0\" max=\"3000\" value=\"800\" step=\"100\"> | <span id=\"responseDelayValue\">800ms</span>"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "171-180",
          "preview": "<label class=\"ai-setting-label\">响应延迟 (毫秒):</label> | <input type=\"range\" id=\"responseDelaySlider\" min=\"0\" max=\"3000\" value=\"800\" step=\"100\"> | <span id=\"responseDelayValue\">800ms</span>"
        }
      ],
      "codePreview": [
        "<label class=\"ai-setting-label\">响应延迟 (毫秒):</label>",
        "<input type=\"range\" id=\"responseDelaySlider\" min=\"0\" max=\"3000\" value=\"800\" step=\"100\">",
        "<span id=\"responseDelayValue\">800ms</span>",
        "</div>",
        "<div class=\"ai-setting-group\">",
        "<label class=\"ai-setting-label\">转人工阈值:</label>",
        "<input type=\"range\" id=\"handoffThresholdSlider\" min=\"0\" max=\"1\" value=\"0.3\" step=\"0.1\">",
        "<span id=\"handoffThresholdValue\">0.3</span>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "e77c234a",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "191-200",
          "preview": "addChatBotStyles() { | if (document.getElementById('ai-chatbot-styles')) return;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "191-200",
          "preview": "addChatBotStyles() { | if (document.getElementById('ai-chatbot-styles')) return;"
        }
      ],
      "codePreview": [
        "addChatBotStyles() {",
        "if (document.getElementById('ai-chatbot-styles')) return;",
        "const style = document.createElement('style');",
        "style.id = 'ai-chatbot-styles';",
        "style.textContent = `",
        ".ai-chatbot-container {",
        "width: 100%;",
        "height: 600px;",
        "background: #ffffff;"
      ]
    },
    {
      "id": "2335458f",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "201-210",
          "preview": "border-radius: 12px; | box-shadow: 0 4px 20px rgba(0,0,0,0.1); | display: flex;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "201-210",
          "preview": "border-radius: 12px; | box-shadow: 0 4px 20px rgba(0,0,0,0.1); | display: flex;"
        }
      ],
      "codePreview": [
        "border-radius: 12px;",
        "box-shadow: 0 4px 20px rgba(0,0,0,0.1);",
        "display: flex;",
        "flex-direction: column;",
        "overflow: hidden;",
        "font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;",
        "}",
        ".ai-chatbot-header {",
        "background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);"
      ]
    },
    {
      "id": "70e56f90",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "211-220",
          "preview": "color: white; | padding: 16px; | display: flex;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "211-220",
          "preview": "color: white; | padding: 16px; | display: flex;"
        }
      ],
      "codePreview": [
        "color: white;",
        "padding: 16px;",
        "display: flex;",
        "align-items: center;",
        "gap: 12px;",
        "border-radius: 12px 12px 0 0;",
        "}",
        ".ai-bot-avatar {",
        "width: 40px;"
      ]
    },
    {
      "id": "9e022771",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "221-230",
          "preview": "height: 40px; | background: rgba(255,255,255,0.2); | border-radius: 50%;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "221-230",
          "preview": "height: 40px; | background: rgba(255,255,255,0.2); | border-radius: 50%;"
        }
      ],
      "codePreview": [
        "height: 40px;",
        "background: rgba(255,255,255,0.2);",
        "border-radius: 50%;",
        "display: flex;",
        "align-items: center;",
        "justify-content: center;",
        "font-size: 20px;",
        "position: relative;",
        "}"
      ]
    },
    {
      "id": "3089c3a8",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "231-240",
          "preview": ".bot-status-indicator { | position: absolute; | top: -2px;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "231-240",
          "preview": ".bot-status-indicator { | position: absolute; | top: -2px;"
        }
      ],
      "codePreview": [
        ".bot-status-indicator {",
        "position: absolute;",
        "top: -2px;",
        "right: -2px;",
        "width: 12px;",
        "height: 12px;",
        "background: #4ade80;",
        "border: 2px solid white;",
        "border-radius: 50%;",
        "animation: pulse 2s infinite;"
      ]
    },
    {
      "id": "b111f941",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "281-290",
          "preview": ".ai-message { | max-width: 80%; | padding: 12px 16px;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "281-290",
          "preview": ".ai-message { | max-width: 80%; | padding: 12px 16px;"
        }
      ],
      "codePreview": [
        ".ai-message {",
        "max-width: 80%;",
        "padding: 12px 16px;",
        "border-radius: 18px;",
        "word-wrap: break-word;",
        "position: relative;",
        "animation: messageSlideIn 0.3s ease-out;",
        "}",
        "@keyframes messageSlideIn {"
      ]
    },
    {
      "id": "b4cb7a42",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "301-310",
          "preview": ".ai-message.user { | align-self: flex-end; | background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "301-310",
          "preview": ".ai-message.user { | align-self: flex-end; | background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);"
        }
      ],
      "codePreview": [
        ".ai-message.user {",
        "align-self: flex-end;",
        "background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);",
        "color: white;",
        "}",
        ".ai-message.bot {",
        "align-self: flex-start;",
        "background: white;",
        "border: 1px solid #e2e8f0;"
      ]
    },
    {
      "id": "03b3a83a",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "311-320",
          "preview": "box-shadow: 0 1px 3px rgba(0,0,0,0.1); | }"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "311-320",
          "preview": "box-shadow: 0 1px 3px rgba(0,0,0,0.1); | }"
        }
      ],
      "codePreview": [
        "box-shadow: 0 1px 3px rgba(0,0,0,0.1);",
        "}",
        ".ai-message.system {",
        "align-self: center;",
        "background: #f1f5f9;",
        "color: #64748b;",
        "font-size: 14px;",
        "text-align: center;",
        "border-radius: 12px;"
      ]
    },
    {
      "id": "fc261605",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "321-330",
          "preview": "} | .ai-system-message {"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "321-330",
          "preview": "} | .ai-system-message {"
        }
      ],
      "codePreview": [
        "}",
        ".ai-system-message {",
        "background: #eff6ff;",
        "color: #1d4ed8;",
        "padding: 12px;",
        "border-radius: 8px;",
        "text-align: center;",
        "font-size: 14px;",
        "border-left: 4px solid #3b82f6;"
      ]
    },
    {
      "id": "32da6378",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "351-360",
          "preview": "align-items: center; | gap: 8px; | padding: 12px 16px;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "351-360",
          "preview": "align-items: center; | gap: 8px; | padding: 12px 16px;"
        }
      ],
      "codePreview": [
        "align-items: center;",
        "gap: 8px;",
        "padding: 12px 16px;",
        "background: white;",
        "border-radius: 18px;",
        "border: 1px solid #e2e8f0;",
        "max-width: 80px;",
        "margin-bottom: 12px;",
        "}"
      ]
    },
    {
      "id": "c323f49b",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "361-370",
          "preview": ".ai-typing-dots { | display: flex; | gap: 4px;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "361-370",
          "preview": ".ai-typing-dots { | display: flex; | gap: 4px;"
        }
      ],
      "codePreview": [
        ".ai-typing-dots {",
        "display: flex;",
        "gap: 4px;",
        "}",
        ".ai-typing-dot {",
        "width: 6px;",
        "height: 6px;",
        "background: #94a3b8;",
        "border-radius: 50%;"
      ]
    },
    {
      "id": "f3158a24",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "401-410",
          "preview": ".ai-suggestion-item { | background: white;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "401-410",
          "preview": ".ai-suggestion-item { | background: white;"
        }
      ],
      "codePreview": [
        ".ai-suggestion-item {",
        "background: white;",
        "border: 1px solid #f59e0b;",
        "color: #92400e;",
        "padding: 6px 12px;",
        "border-radius: 16px;",
        "font-size: 13px;",
        "cursor: pointer;",
        "transition: all 0.2s;"
      ]
    },
    {
      "id": "b20d50fa",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "421-430",
          "preview": "gap: 8px; | padding: 12px 16px; | background: white;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "421-430",
          "preview": "gap: 8px; | padding: 12px 16px; | background: white;"
        }
      ],
      "codePreview": [
        "gap: 8px;",
        "padding: 12px 16px;",
        "background: white;",
        "border-top: 1px solid #e2e8f0;",
        "}",
        ".ai-quick-reply-item {",
        "background: #f1f5f9;",
        "border: 1px solid #cbd5e1;",
        "color: #475569;"
      ]
    },
    {
      "id": "75e6098a",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "431-440",
          "preview": "padding: 8px 12px; | border-radius: 16px; | font-size: 13px;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "431-440",
          "preview": "padding: 8px 12px; | border-radius: 16px; | font-size: 13px;"
        }
      ],
      "codePreview": [
        "padding: 8px 12px;",
        "border-radius: 16px;",
        "font-size: 13px;",
        "cursor: pointer;",
        "transition: all 0.2s;",
        "white-space: nowrap;",
        "}",
        ".ai-quick-reply-item:hover {",
        "background: #667eea;"
      ]
    },
    {
      "id": "839832b7",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "451-460",
          "preview": ".ai-input-container { | display: flex; | align-items: flex-end;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "451-460",
          "preview": ".ai-input-container { | display: flex; | align-items: flex-end;"
        }
      ],
      "codePreview": [
        ".ai-input-container {",
        "display: flex;",
        "align-items: flex-end;",
        "gap: 12px;",
        "background: #f8fafc;",
        "border: 1px solid #e2e8f0;",
        "border-radius: 24px;",
        "padding: 8px;",
        "transition: all 0.2s;",
        "}"
      ]
    },
    {
      "id": "e4e9fd85",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "471-480",
          "preview": "background: transparent; | resize: none; | font-size: 14px;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "471-480",
          "preview": "background: transparent; | resize: none; | font-size: 14px;"
        }
      ],
      "codePreview": [
        "background: transparent;",
        "resize: none;",
        "font-size: 14px;",
        "line-height: 1.5;",
        "padding: 8px 12px;",
        "min-height: 20px;",
        "max-height: 100px;",
        "font-family: inherit;",
        "}"
      ]
    },
    {
      "id": "00b9ab09",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "481-490",
          "preview": ".ai-input-actions { | display: flex; | gap: 4px;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "481-490",
          "preview": ".ai-input-actions { | display: flex; | gap: 4px;"
        }
      ],
      "codePreview": [
        ".ai-input-actions {",
        "display: flex;",
        "gap: 4px;",
        "align-items: center;",
        "}",
        ".ai-input-status {",
        "display: flex;",
        "justify-content: space-between;",
        "align-items: center;"
      ]
    },
    {
      "id": "46878995",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "491-500",
          "preview": "margin-top: 8px; | font-size: 12px; | color: #64748b;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "491-500",
          "preview": "margin-top: 8px; | font-size: 12px; | color: #64748b;"
        }
      ],
      "codePreview": [
        "margin-top: 8px;",
        "font-size: 12px;",
        "color: #64748b;",
        "}",
        ".ai-status-bar {",
        "background: #f8fafc;",
        "border-top: 1px solid #e2e8f0;",
        "padding: 8px 16px;",
        "display: flex;"
      ]
    },
    {
      "id": "3ff05d35",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "521-530",
          "preview": "top: 60px; | right: 16px; | width: 280px;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "521-530",
          "preview": "top: 60px; | right: 16px; | width: 280px;"
        }
      ],
      "codePreview": [
        "top: 60px;",
        "right: 16px;",
        "width: 280px;",
        "background: white;",
        "border: 1px solid #e2e8f0;",
        "border-radius: 8px;",
        "box-shadow: 0 10px 25px rgba(0,0,0,0.15);",
        "z-index: 1000;",
        "}"
      ]
    },
    {
      "id": "d77b8eb4",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "531-540",
          "preview": ".ai-settings-header { | background: #f8fafc; | padding: 16px;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "531-540",
          "preview": ".ai-settings-header { | background: #f8fafc; | padding: 16px;"
        }
      ],
      "codePreview": [
        ".ai-settings-header {",
        "background: #f8fafc;",
        "padding: 16px;",
        "border-bottom: 1px solid #e2e8f0;",
        "display: flex;",
        "justify-content: space-between;",
        "align-items: center;",
        "}",
        ".ai-settings-content {"
      ]
    },
    {
      "id": "2c0e0e21",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "551-560",
          "preview": "gap: 8px; | font-size: 14px; | color: #374151;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "551-560",
          "preview": "gap: 8px; | font-size: 14px; | color: #374151;"
        }
      ],
      "codePreview": [
        "gap: 8px;",
        "font-size: 14px;",
        "color: #374151;",
        "cursor: pointer;",
        "}",
        ".btn-icon {",
        "background: transparent;",
        "border: none;",
        "padding: 8px;"
      ]
    },
    {
      "id": "8d36d50a",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "571-580",
          "preview": ".btn-primary { | background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); | color: white;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "571-580",
          "preview": ".btn-primary { | background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); | color: white;"
        }
      ],
      "codePreview": [
        ".btn-primary {",
        "background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);",
        "color: white;",
        "border: none;",
        "padding: 8px 16px;",
        "border-radius: 20px;",
        "cursor: pointer;",
        "font-size: 14px;",
        "font-weight: 500;",
        "display: flex;"
      ]
    },
    {
      "id": "6f13967b",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "591-600",
          "preview": ".btn-primary:disabled { | opacity: 0.6; | cursor: not-allowed;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "591-600",
          "preview": ".btn-primary:disabled { | opacity: 0.6; | cursor: not-allowed;"
        }
      ],
      "codePreview": [
        ".btn-primary:disabled {",
        "opacity: 0.6;",
        "cursor: not-allowed;",
        "transform: none;",
        "box-shadow: none;",
        "}",
        ".btn-close {",
        "background: transparent;",
        "border: none;"
      ]
    },
    {
      "id": "65692d89",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "761-770",
          "preview": "quickReplies.forEach(item => { | item.addEventListener('click', () => { | const text = item.getAttribute('data-text');"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "761-770",
          "preview": "quickReplies.forEach(item => { | item.addEventListener('click', () => { | const text = item.getAttribute('data-text');"
        }
      ],
      "codePreview": [
        "quickReplies.forEach(item => {",
        "item.addEventListener('click', () => {",
        "const text = item.getAttribute('data-text');",
        "if (text) {",
        "document.getElementById('aiMessageInput').value = text;",
        "this.handleSendMessage();",
        "}",
        "});",
        "});"
      ]
    },
    {
      "id": "6c0c21ba",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "1041-1050",
          "preview": "<div class=\"ai-typing-dots\"> | <div class=\"ai-typing-dot\"></div> | <div class=\"ai-typing-dot\"></div>"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "1041-1050",
          "preview": "<div class=\"ai-typing-dots\"> | <div class=\"ai-typing-dot\"></div> | <div class=\"ai-typing-dot\"></div>"
        }
      ],
      "codePreview": [
        "<div class=\"ai-typing-dots\">",
        "<div class=\"ai-typing-dot\"></div>",
        "<div class=\"ai-typing-dot\"></div>",
        "<div class=\"ai-typing-dot\"></div>",
        "</div>",
        "<span>AI正在思考...</span>",
        "`;",
        "messageContainer.appendChild(this.typingIndicator);",
        "messagesContainer.scrollTop = messagesContainer.scrollHeight;"
      ]
    },
    {
      "id": "21fdf1e7",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "1081-1090",
          "preview": "item.addEventListener('click', () => { | document.getElementById('aiMessageInput').value = suggestion.text || suggestion; | this.handleSendMessage();"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "1081-1090",
          "preview": "item.addEventListener('click', () => { | document.getElementById('aiMessageInput').value = suggestion.text || suggestion; | this.handleSendMessage();"
        }
      ],
      "codePreview": [
        "item.addEventListener('click', () => {",
        "document.getElementById('aiMessageInput').value = suggestion.text || suggestion;",
        "this.handleSendMessage();",
        "suggestionsContainer.style.display = 'none';",
        "});",
        "suggestionsList.appendChild(item);",
        "});",
        "suggestionsContainer.style.display = 'block';"
      ]
    },
    {
      "id": "c2c7e6a7",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "1121-1130",
          "preview": "if (existingButton) { | existingButton.remove(); | }"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "1121-1130",
          "preview": "if (existingButton) { | existingButton.remove(); | }"
        }
      ],
      "codePreview": [
        "if (existingButton) {",
        "existingButton.remove();",
        "}",
        "const handoffButton = document.createElement('div');",
        "handoffButton.className = 'ai-quick-reply-item ai-handoff-button';",
        "handoffButton.style.background = '#dc2626';",
        "handoffButton.style.color = 'white';",
        "handoffButton.style.borderColor = '#dc2626';",
        "handoffButton.textContent = '🆘 转接人工客服';"
      ]
    },
    {
      "id": "82f2543a",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "21-30",
          "preview": "containerId: 'ai-assistant-container', | enableRealTime: true, | showAnalysis: true,"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "21-30",
          "preview": "containerId: 'ai-assistant-container', | enableRealTime: true, | showAnalysis: true,"
        }
      ],
      "codePreview": [
        "containerId: 'ai-assistant-container',",
        "enableRealTime: true,",
        "showAnalysis: true,",
        "maxSuggestions: 5,",
        "autoRefresh: 10000,",
        "...options",
        "};",
        "this.isEnabled = false;",
        "this.currentConversationId = null;"
      ]
    },
    {
      "id": "87914e1c",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "71-80",
          "preview": "aiInterface.innerHTML = ` | <div class=\"ai-assistant-header\"> | <div class=\"ai-assistant-title\">"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "71-80",
          "preview": "aiInterface.innerHTML = ` | <div class=\"ai-assistant-header\"> | <div class=\"ai-assistant-title\">"
        }
      ],
      "codePreview": [
        "aiInterface.innerHTML = `",
        "<div class=\"ai-assistant-header\">",
        "<div class=\"ai-assistant-title\">",
        "<i class=\"fas fa-robot\"></i>",
        "<span>AI智能助手</span>",
        "<div class=\"ai-status-indicator\" id=\"ai-status\">",
        "<span class=\"status-dot\"></span>",
        "<span class=\"status-text\">就绪</span>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "82f98e90",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "81-90",
          "preview": "<div class=\"ai-assistant-controls\"> | <button class=\"ai-toggle-btn\" id=\"ai-toggle\"> | <i class=\"fas fa-power-off\"></i>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "81-90",
          "preview": "<div class=\"ai-assistant-controls\"> | <button class=\"ai-toggle-btn\" id=\"ai-toggle\"> | <i class=\"fas fa-power-off\"></i>"
        }
      ],
      "codePreview": [
        "<div class=\"ai-assistant-controls\">",
        "<button class=\"ai-toggle-btn\" id=\"ai-toggle\">",
        "<i class=\"fas fa-power-off\"></i>",
        "</button>",
        "<button class=\"ai-settings-btn\" id=\"ai-settings\">",
        "<i class=\"fas fa-cog\"></i>",
        "</button>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "6b8a47a5",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "91-100",
          "preview": "<div class=\"ai-assistant-content\" id=\"ai-content\"> | <!-- 回复建议面板 --> | <div class=\"ai-panel reply-suggestions-panel\">"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "91-100",
          "preview": "<div class=\"ai-assistant-content\" id=\"ai-content\"> | <!-- 回复建议面板 --> | <div class=\"ai-panel reply-suggestions-panel\">"
        }
      ],
      "codePreview": [
        "<div class=\"ai-assistant-content\" id=\"ai-content\">",
        "<!-- 回复建议面板 -->",
        "<div class=\"ai-panel reply-suggestions-panel\">",
        "<div class=\"panel-header\">",
        "<h4><i class=\"fas fa-lightbulb\"></i> 智能回复建议</h4>",
        "<button class=\"refresh-btn\" id=\"refresh-suggestions\">",
        "<i class=\"fas fa-sync-alt\"></i>",
        "</button>",
        "</div>",
        "<div class=\"panel-content\">"
      ]
    },
    {
      "id": "7c63da9a",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "101-110",
          "preview": "<div class=\"suggestions-container\" id=\"suggestions-container\"> | <div class=\"no-suggestions\"> | <i class=\"fas fa-comment-dots\"></i>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "101-110",
          "preview": "<div class=\"suggestions-container\" id=\"suggestions-container\"> | <div class=\"no-suggestions\"> | <i class=\"fas fa-comment-dots\"></i>"
        }
      ],
      "codePreview": [
        "<div class=\"suggestions-container\" id=\"suggestions-container\">",
        "<div class=\"no-suggestions\">",
        "<i class=\"fas fa-comment-dots\"></i>",
        "<p>选择对话以获取智能回复建议</p>",
        "</div>",
        "</div>",
        "</div>",
        "</div>",
        "<!-- 消息分析面板 -->"
      ]
    },
    {
      "id": "611a52f9",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "111-120",
          "preview": "<div class=\"ai-panel message-analysis-panel\" style=\"display: ${this.options.showAnalysis ? 'block' : 'none'};\"> | <div class=\"panel-header\"> | <h4><i class=\"fas fa-analytics\"></i> 消息分析</h4>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "111-120",
          "preview": "<div class=\"ai-panel message-analysis-panel\" style=\"display: ${this.options.showAnalysis ? 'block' : 'none'};\"> | <div class=\"panel-header\"> | <h4><i class=\"fas fa-analytics\"></i> 消息分析</h4>"
        }
      ],
      "codePreview": [
        "<div class=\"ai-panel message-analysis-panel\" style=\"display: ${this.options.showAnalysis ? 'block' : 'none'};\">",
        "<div class=\"panel-header\">",
        "<h4><i class=\"fas fa-analytics\"></i> 消息分析</h4>",
        "<button class=\"toggle-analysis-btn\" id=\"toggle-analysis\">",
        "<i class=\"fas fa-eye\"></i>",
        "</button>",
        "</div>",
        "<div class=\"panel-content\">",
        "<div class=\"analysis-container\" id=\"analysis-container\">",
        "<!-- 意图识别 -->"
      ]
    },
    {
      "id": "bf0523b0",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "121-130",
          "preview": "<div class=\"analysis-item\"> | <label>意图识别:</label> | <div class=\"intent-result\" id=\"intent-result\">"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "121-130",
          "preview": "<div class=\"analysis-item\"> | <label>意图识别:</label> | <div class=\"intent-result\" id=\"intent-result\">"
        }
      ],
      "codePreview": [
        "<div class=\"analysis-item\">",
        "<label>意图识别:</label>",
        "<div class=\"intent-result\" id=\"intent-result\">",
        "<span class=\"intent-label\">未知</span>",
        "<span class=\"confidence-score\">0%</span>",
        "</div>",
        "</div>",
        "<!-- 情感分析 -->",
        "<div class=\"analysis-item\">"
      ]
    },
    {
      "id": "dc40bd46",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "131-140",
          "preview": "<label>情感分析:</label> | <div class=\"sentiment-result\" id=\"sentiment-result\"> | <span class=\"sentiment-label neutral\">中性</span>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "131-140",
          "preview": "<label>情感分析:</label> | <div class=\"sentiment-result\" id=\"sentiment-result\"> | <span class=\"sentiment-label neutral\">中性</span>"
        }
      ],
      "codePreview": [
        "<label>情感分析:</label>",
        "<div class=\"sentiment-result\" id=\"sentiment-result\">",
        "<span class=\"sentiment-label neutral\">中性</span>",
        "<div class=\"sentiment-meter\">",
        "<div class=\"sentiment-bar\" id=\"sentiment-bar\"></div>",
        "</div>",
        "</div>",
        "</div>",
        "<!-- 关键词 -->"
      ]
    },
    {
      "id": "ce714ae0",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "141-150",
          "preview": "<div class=\"analysis-item\"> | <label>关键词:</label> | <div class=\"keywords-container\" id=\"keywords-container\">"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "141-150",
          "preview": "<div class=\"analysis-item\"> | <label>关键词:</label> | <div class=\"keywords-container\" id=\"keywords-container\">"
        }
      ],
      "codePreview": [
        "<div class=\"analysis-item\">",
        "<label>关键词:</label>",
        "<div class=\"keywords-container\" id=\"keywords-container\">",
        "<span class=\"no-keywords\">暂无关键词</span>",
        "</div>",
        "</div>",
        "<!-- 实体识别 -->",
        "<div class=\"analysis-item\">",
        "<label>实体识别:</label>"
      ]
    },
    {
      "id": "2e4dd8d5",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "151-160",
          "preview": "<div class=\"entities-container\" id=\"entities-container\"> | <span class=\"no-entities\">暂无实体</span> | </div>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "151-160",
          "preview": "<div class=\"entities-container\" id=\"entities-container\"> | <span class=\"no-entities\">暂无实体</span> | </div>"
        }
      ],
      "codePreview": [
        "<div class=\"entities-container\" id=\"entities-container\">",
        "<span class=\"no-entities\">暂无实体</span>",
        "</div>",
        "</div>",
        "</div>",
        "</div>",
        "</div>",
        "<!-- 自动回复面板 -->",
        "<div class=\"ai-panel auto-reply-panel\">"
      ]
    },
    {
      "id": "3577bd42",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "161-170",
          "preview": "<div class=\"panel-header\"> | <h4><i class=\"fas fa-magic\"></i> 自动回复</h4> | <div class=\"auto-reply-toggle\">"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "161-170",
          "preview": "<div class=\"panel-header\"> | <h4><i class=\"fas fa-magic\"></i> 自动回复</h4> | <div class=\"auto-reply-toggle\">"
        }
      ],
      "codePreview": [
        "<div class=\"panel-header\">",
        "<h4><i class=\"fas fa-magic\"></i> 自动回复</h4>",
        "<div class=\"auto-reply-toggle\">",
        "<input type=\"checkbox\" id=\"auto-reply-enabled\" class=\"toggle-switch\">",
        "<label for=\"auto-reply-enabled\"></label>",
        "</div>",
        "</div>",
        "<div class=\"panel-content\">",
        "<div class=\"auto-reply-result\" id=\"auto-reply-result\">",
        "<div class=\"no-auto-reply\">"
      ]
    },
    {
      "id": "65c6168f",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "171-180",
          "preview": "<i class=\"fas fa-robot\"></i> | <p>暂无自动回复建议</p> | </div>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "171-180",
          "preview": "<i class=\"fas fa-robot\"></i> | <p>暂无自动回复建议</p> | </div>"
        }
      ],
      "codePreview": [
        "<i class=\"fas fa-robot\"></i>",
        "<p>暂无自动回复建议</p>",
        "</div>",
        "</div>",
        "</div>",
        "</div>",
        "<!-- 知识库快速搜索 -->",
        "<div class=\"ai-panel knowledge-search-panel\">",
        "<div class=\"panel-header\">"
      ]
    },
    {
      "id": "5ea58a31",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "181-190",
          "preview": "<h4><i class=\"fas fa-search\"></i> 知识库搜索</h4> | </div> | <div class=\"panel-content\">"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "181-190",
          "preview": "<h4><i class=\"fas fa-search\"></i> 知识库搜索</h4> | </div> | <div class=\"panel-content\">"
        }
      ],
      "codePreview": [
        "<h4><i class=\"fas fa-search\"></i> 知识库搜索</h4>",
        "</div>",
        "<div class=\"panel-content\">",
        "<div class=\"search-input-container\">",
        "<input type=\"text\" id=\"kb-search-input\" placeholder=\"搜索知识库...\" class=\"search-input\">",
        "<button class=\"search-btn\" id=\"kb-search-btn\">",
        "<i class=\"fas fa-search\"></i>",
        "</button>",
        "</div>",
        "<div class=\"search-results\" id=\"kb-search-results\">"
      ]
    },
    {
      "id": "7e34459a",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "191-200",
          "preview": "<!-- 搜索结果将在这里显示 --> | </div> | </div>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "191-200",
          "preview": "<!-- 搜索结果将在这里显示 --> | </div> | </div>"
        }
      ],
      "codePreview": [
        "<!-- 搜索结果将在这里显示 -->",
        "</div>",
        "</div>",
        "</div>",
        "</div>",
        "<!-- AI设置模态框 -->",
        "<div class=\"ai-settings-modal\" id=\"ai-settings-modal\" style=\"display: none;\">",
        "<div class=\"modal-content\">",
        "<div class=\"modal-header\">"
      ]
    },
    {
      "id": "2f935a9c",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "201-210",
          "preview": "<h3>AI助手设置</h3> | <button class=\"close-btn\" id=\"close-settings\"> | <i class=\"fas fa-times\"></i>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "201-210",
          "preview": "<h3>AI助手设置</h3> | <button class=\"close-btn\" id=\"close-settings\"> | <i class=\"fas fa-times\"></i>"
        }
      ],
      "codePreview": [
        "<h3>AI助手设置</h3>",
        "<button class=\"close-btn\" id=\"close-settings\">",
        "<i class=\"fas fa-times\"></i>",
        "</button>",
        "</div>",
        "<div class=\"modal-body\">",
        "<div class=\"settings-section\">",
        "<h4>基本设置</h4>",
        "<div class=\"setting-item\">",
        "<label>置信度阈值:</label>"
      ]
    },
    {
      "id": "6e7284d9",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "211-220",
          "preview": "<input type=\"range\" id=\"confidence-threshold\" min=\"0.1\" max=\"1\" step=\"0.1\" value=\"0.7\"> | <span class=\"threshold-value\">0.7</span> | </div>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "211-220",
          "preview": "<input type=\"range\" id=\"confidence-threshold\" min=\"0.1\" max=\"1\" step=\"0.1\" value=\"0.7\"> | <span class=\"threshold-value\">0.7</span> | </div>"
        }
      ],
      "codePreview": [
        "<input type=\"range\" id=\"confidence-threshold\" min=\"0.1\" max=\"1\" step=\"0.1\" value=\"0.7\">",
        "<span class=\"threshold-value\">0.7</span>",
        "</div>",
        "<div class=\"setting-item\">",
        "<label>最大建议数量:</label>",
        "<input type=\"number\" id=\"max-suggestions\" min=\"1\" max=\"10\" value=\"5\">",
        "</div>",
        "<div class=\"setting-item\">",
        "<label>自动刷新间隔(秒):</label>",
        "<input type=\"number\" id=\"refresh-interval\" min=\"5\" max=\"60\" value=\"10\">"
      ]
    },
    {
      "id": "a51fe0e9",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "221-230",
          "preview": "</div> | </div>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "221-230",
          "preview": "</div> | </div>"
        }
      ],
      "codePreview": [
        "</div>",
        "</div>",
        "<div class=\"settings-section\">",
        "<h4>显示设置</h4>",
        "<div class=\"setting-item\">",
        "<label>",
        "<input type=\"checkbox\" id=\"show-analysis\" checked>",
        "显示消息分析",
        "</label>"
      ]
    },
    {
      "id": "86cbb0d0",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "231-240",
          "preview": "</div> | <div class=\"setting-item\"> | <label>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "231-240",
          "preview": "</div> | <div class=\"setting-item\"> | <label>"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"setting-item\">",
        "<label>",
        "<input type=\"checkbox\" id=\"show-confidence\" checked>",
        "显示置信度",
        "</label>",
        "</div>",
        "<div class=\"setting-item\">",
        "<label>",
        "<input type=\"checkbox\" id=\"enable-sound\" checked>"
      ]
    },
    {
      "id": "431e4453",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "241-250",
          "preview": "启用声音提示 | </label> | </div>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "241-250",
          "preview": "启用声音提示 | </label> | </div>"
        }
      ],
      "codePreview": [
        "启用声音提示",
        "</label>",
        "</div>",
        "</div>",
        "<div class=\"settings-section\">",
        "<h4>学习设置</h4>",
        "<div class=\"setting-item\">",
        "<label>",
        "<input type=\"checkbox\" id=\"enable-learning\" checked>"
      ]
    },
    {
      "id": "c93fcd47",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "251-260",
          "preview": "启用智能学习 | </label> | </div>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "251-260",
          "preview": "启用智能学习 | </label> | </div>"
        }
      ],
      "codePreview": [
        "启用智能学习",
        "</label>",
        "</div>",
        "<div class=\"setting-item\">",
        "<label>",
        "<input type=\"checkbox\" id=\"auto-improve\" checked>",
        "自动改进建议",
        "</label>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "8d097f0a",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "261-270",
          "preview": "</div> | <div class=\"modal-footer\"> | <button class=\"btn btn-secondary\" id=\"reset-settings\">重置</button>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "261-270",
          "preview": "</div> | <div class=\"modal-footer\"> | <button class=\"btn btn-secondary\" id=\"reset-settings\">重置</button>"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"modal-footer\">",
        "<button class=\"btn btn-secondary\" id=\"reset-settings\">重置</button>",
        "<button class=\"btn btn-primary\" id=\"save-settings\">保存设置</button>",
        "</div>",
        "</div>",
        "</div>",
        "`;",
        "container.appendChild(aiInterface);"
      ]
    },
    {
      "id": "194b0f4e",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "411-420",
          "preview": "const toggleBtn = document.getElementById('ai-toggle'); | const statusIndicator = document.getElementById('ai-status');"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "411-420",
          "preview": "const toggleBtn = document.getElementById('ai-toggle'); | const statusIndicator = document.getElementById('ai-status');"
        }
      ],
      "codePreview": [
        "const toggleBtn = document.getElementById('ai-toggle');",
        "const statusIndicator = document.getElementById('ai-status');",
        "const content = document.getElementById('ai-content');",
        "if (this.isEnabled) {",
        "toggleBtn.classList.add('active');",
        "statusIndicator.querySelector('.status-text').textContent = '已启用';",
        "statusIndicator.querySelector('.status-dot').className = 'status-dot active';",
        "content.style.display = 'block';"
      ]
    },
    {
      "id": "a1f5dd83",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "601-610",
          "preview": "container.innerHTML = suggestions.map((suggestion, index) => ` | <div class=\"suggestion-item\" data-index=\"${index}\">"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "601-610",
          "preview": "container.innerHTML = suggestions.map((suggestion, index) => ` | <div class=\"suggestion-item\" data-index=\"${index}\">"
        }
      ],
      "codePreview": [
        "container.innerHTML = suggestions.map((suggestion, index) => `",
        "<div class=\"suggestion-item\" data-index=\"${index}\">",
        "<div class=\"suggestion-content\">",
        "<div class=\"suggestion-text\">${this.escapeHtml(suggestion.text)}</div>",
        "<div class=\"suggestion-meta\">",
        "<span class=\"suggestion-type\">${this.getSuggestionTypeText(suggestion.type)}</span>",
        "<span class=\"confidence-score\" style=\"display: ${this.options.showConfidence ? 'inline' : 'none'};\">",
        "置信度: ${Math.round(suggestion.confidence * 100)}%",
        "</span>"
      ]
    },
    {
      "id": "c44e7d57",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "611-620",
          "preview": "</div> | </div> | <div class=\"suggestion-actions\">"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "611-620",
          "preview": "</div> | </div> | <div class=\"suggestion-actions\">"
        }
      ],
      "codePreview": [
        "</div>",
        "</div>",
        "<div class=\"suggestion-actions\">",
        "<button class=\"use-suggestion-btn\" onclick=\"aiAssistant.useSuggestion(${index})\">",
        "<i class=\"fas fa-check\"></i>",
        "</button>",
        "<button class=\"edit-suggestion-btn\" onclick=\"aiAssistant.editSuggestion(${index})\">",
        "<i class=\"fas fa-edit\"></i>",
        "</button>",
        "<button class=\"feedback-btn positive\" onclick=\"aiAssistant.giveFeedback(${index}, 'positive')\">"
      ]
    },
    {
      "id": "dd67f496",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "621-630",
          "preview": "<i class=\"fas fa-thumbs-up\"></i> | </button> | <button class=\"feedback-btn negative\" onclick=\"aiAssistant.giveFeedback(${index}, 'negative')\">"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "621-630",
          "preview": "<i class=\"fas fa-thumbs-up\"></i> | </button> | <button class=\"feedback-btn negative\" onclick=\"aiAssistant.giveFeedback(${index}, 'negative')\">"
        }
      ],
      "codePreview": [
        "<i class=\"fas fa-thumbs-up\"></i>",
        "</button>",
        "<button class=\"feedback-btn negative\" onclick=\"aiAssistant.giveFeedback(${index}, 'negative')\">",
        "<i class=\"fas fa-thumbs-down\"></i>",
        "</button>",
        "</div>",
        "</div>",
        "`).join('');"
      ]
    },
    {
      "id": "90f1c838",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "851-860",
          "preview": "} | resultsContainer.innerHTML = results.map(result => `"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "851-860",
          "preview": "} | resultsContainer.innerHTML = results.map(result => `"
        }
      ],
      "codePreview": [
        "}",
        "resultsContainer.innerHTML = results.map(result => `",
        "<div class=\"search-result-item\">",
        "<div class=\"result-question\">${this.escapeHtml(result.question)}</div>",
        "<div class=\"result-answer\">${this.escapeHtml(result.answer)}</div>",
        "<div class=\"result-meta\">",
        "<span class=\"result-category\">${result.category}</span>",
        "<span class=\"result-confidence\">匹配度: ${Math.round(result.confidence * 100)}%</span>",
        "</div>"
      ]
    },
    {
      "id": "44405952",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "961-970",
          "preview": "*/ | saveSettings() { | const settings = {"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "961-970",
          "preview": "*/ | saveSettings() { | const settings = {"
        }
      ],
      "codePreview": [
        "saveSettings() {",
        "const settings = {",
        "confidenceThreshold: document.getElementById('confidence-threshold')?.value,",
        "maxSuggestions: document.getElementById('max-suggestions')?.value,",
        "refreshInterval: document.getElementById('refresh-interval')?.value,",
        "showAnalysis: document.getElementById('show-analysis')?.checked,",
        "showConfidence: document.getElementById('show-confidence')?.checked,",
        "enableSound: document.getElementById('enable-sound')?.checked,",
        "enableLearning: document.getElementById('enable-learning')?.checked,"
      ]
    },
    {
      "id": "b09c2f67",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "1001-1010",
          "preview": "maxSuggestions: 5, | refreshInterval: 10, | showAnalysis: true,"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "1001-1010",
          "preview": "maxSuggestions: 5, | refreshInterval: 10, | showAnalysis: true,"
        }
      ],
      "codePreview": [
        "maxSuggestions: 5,",
        "refreshInterval: 10,",
        "showAnalysis: true,",
        "showConfidence: true,",
        "enableSound: true,",
        "enableLearning: true,",
        "autoImprove: true",
        "};",
        "this.applySettings(defaultSettings);"
      ]
    },
    {
      "id": "68b7c00a",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "1111-1120",
          "preview": "getIntentText(intent) { | const intentMap = { | 'greeting': '问候',"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "1111-1120",
          "preview": "getIntentText(intent) { | const intentMap = { | 'greeting': '问候',"
        }
      ],
      "codePreview": [
        "getIntentText(intent) {",
        "const intentMap = {",
        "'greeting': '问候',",
        "'question': '提问',",
        "'complaint': '投诉',",
        "'compliment': '赞扬',",
        "'request': '请求',",
        "'booking': '预订',",
        "'cancellation': '取消',",
        "'unknown': '未知'"
      ]
    },
    {
      "id": "53e913d7",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "71-80",
          "preview": "createDashboardInterface() { | const container = document.getElementById('analytics-dashboard') || document.body;"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "71-80",
          "preview": "createDashboardInterface() { | const container = document.getElementById('analytics-dashboard') || document.body;"
        }
      ],
      "codePreview": [
        "createDashboardInterface() {",
        "const container = document.getElementById('analytics-dashboard') || document.body;",
        "container.innerHTML = `",
        "<div class=\"analytics-dashboard\">",
        "<!-- 头部控制区域 -->",
        "<div class=\"dashboard-header\">",
        "<div class=\"header-title\">",
        "<h2>📊 数据分析仪表板</h2>",
        "<span class=\"last-updated\">最后更新: <span id=\"last-updated-time\">--</span></span>"
      ]
    },
    {
      "id": "f9c14e8b",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "81-90",
          "preview": "</div> | <div class=\"header-controls\"> | <select id=\"time-range-select\" class=\"time-range-select\">"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "81-90",
          "preview": "</div> | <div class=\"header-controls\"> | <select id=\"time-range-select\" class=\"time-range-select\">"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"header-controls\">",
        "<select id=\"time-range-select\" class=\"time-range-select\">",
        "<option value=\"1h\">过去1小时</option>",
        "<option value=\"24h\" selected>过去24小时</option>",
        "<option value=\"7d\">过去7天</option>",
        "<option value=\"30d\">过去30天</option>",
        "</select>",
        "<button class=\"refresh-btn\" onclick=\"dashboard.refreshData()\">",
        "🔄 刷新"
      ]
    },
    {
      "id": "eec75dcd",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "91-100",
          "preview": "</button> | <button class=\"export-btn\" onclick=\"dashboard.exportReport()\"> | 📥 导出报告"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "91-100",
          "preview": "</button> | <button class=\"export-btn\" onclick=\"dashboard.exportReport()\"> | 📥 导出报告"
        }
      ],
      "codePreview": [
        "</button>",
        "<button class=\"export-btn\" onclick=\"dashboard.exportReport()\">",
        "📥 导出报告",
        "</button>",
        "</div>",
        "</div>",
        "<!-- 实时监控卡片区域 -->",
        "<div class=\"metrics-cards\">",
        "<div class=\"metric-card\">"
      ]
    },
    {
      "id": "72ae7898",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "101-110",
          "preview": "<div class=\"metric-icon\">💬</div> | <div class=\"metric-content\"> | <div class=\"metric-title\">对话总数</div>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "101-110",
          "preview": "<div class=\"metric-icon\">💬</div> | <div class=\"metric-content\"> | <div class=\"metric-title\">对话总数</div>"
        }
      ],
      "codePreview": [
        "<div class=\"metric-icon\">💬</div>",
        "<div class=\"metric-content\">",
        "<div class=\"metric-title\">对话总数</div>",
        "<div class=\"metric-value\" id=\"total-conversations\">--</div>",
        "<div class=\"metric-change\" id=\"conversations-change\">--</div>",
        "</div>",
        "</div>",
        "<div class=\"metric-card\">",
        "<div class=\"metric-icon\">📨</div>"
      ]
    },
    {
      "id": "ac839ef8",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "111-120",
          "preview": "<div class=\"metric-content\"> | <div class=\"metric-title\">消息总数</div> | <div class=\"metric-value\" id=\"total-messages\">--</div>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "111-120",
          "preview": "<div class=\"metric-content\"> | <div class=\"metric-title\">消息总数</div> | <div class=\"metric-value\" id=\"total-messages\">--</div>"
        }
      ],
      "codePreview": [
        "<div class=\"metric-content\">",
        "<div class=\"metric-title\">消息总数</div>",
        "<div class=\"metric-value\" id=\"total-messages\">--</div>",
        "<div class=\"metric-change\" id=\"messages-change\">--</div>",
        "</div>",
        "</div>",
        "<div class=\"metric-card\">",
        "<div class=\"metric-icon\">⚡</div>",
        "<div class=\"metric-content\">"
      ]
    },
    {
      "id": "3190c980",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "121-130",
          "preview": "<div class=\"metric-title\">平均响应时间</div> | <div class=\"metric-value\" id=\"avg-response-time\">--</div> | <div class=\"metric-change\" id=\"response-time-change\">--</div>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "121-130",
          "preview": "<div class=\"metric-title\">平均响应时间</div> | <div class=\"metric-value\" id=\"avg-response-time\">--</div> | <div class=\"metric-change\" id=\"response-time-change\">--</div>"
        }
      ],
      "codePreview": [
        "<div class=\"metric-title\">平均响应时间</div>",
        "<div class=\"metric-value\" id=\"avg-response-time\">--</div>",
        "<div class=\"metric-change\" id=\"response-time-change\">--</div>",
        "</div>",
        "</div>",
        "<div class=\"metric-card\">",
        "<div class=\"metric-icon\">😊</div>",
        "<div class=\"metric-content\">",
        "<div class=\"metric-title\">客户满意度</div>"
      ]
    },
    {
      "id": "d9294295",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "131-140",
          "preview": "<div class=\"metric-value\" id=\"customer-satisfaction\">--</div> | <div class=\"metric-change\" id=\"satisfaction-change\">--</div> | </div>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "131-140",
          "preview": "<div class=\"metric-value\" id=\"customer-satisfaction\">--</div> | <div class=\"metric-change\" id=\"satisfaction-change\">--</div> | </div>"
        }
      ],
      "codePreview": [
        "<div class=\"metric-value\" id=\"customer-satisfaction\">--</div>",
        "<div class=\"metric-change\" id=\"satisfaction-change\">--</div>",
        "</div>",
        "</div>",
        "</div>",
        "<!-- 图表区域 -->",
        "<div class=\"charts-container\">",
        "<div class=\"chart-row\">",
        "<div class=\"chart-card\">"
      ]
    },
    {
      "id": "d3886020",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "141-150",
          "preview": "<div class=\"chart-header\"> | <h3>📈 对话趋势</h3> | <div class=\"chart-controls\">"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "141-150",
          "preview": "<div class=\"chart-header\"> | <h3>📈 对话趋势</h3> | <div class=\"chart-controls\">"
        }
      ],
      "codePreview": [
        "<div class=\"chart-header\">",
        "<h3>📈 对话趋势</h3>",
        "<div class=\"chart-controls\">",
        "<button class=\"chart-btn\" onclick=\"dashboard.toggleChartType('conversations')\">切换视图</button>",
        "</div>",
        "</div>",
        "<div class=\"chart-content\">",
        "<canvas id=\"conversations-chart\"></canvas>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "2a7bf81f",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "151-160",
          "preview": "<div class=\"chart-card\"> | <div class=\"chart-header\">"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "151-160",
          "preview": "<div class=\"chart-card\"> | <div class=\"chart-header\">"
        }
      ],
      "codePreview": [
        "<div class=\"chart-card\">",
        "<div class=\"chart-header\">",
        "<h3>⏰ 工作负载分布</h3>",
        "<div class=\"chart-controls\">",
        "<button class=\"chart-btn\" onclick=\"dashboard.toggleChartType('workload')\">切换视图</button>",
        "</div>",
        "</div>",
        "<div class=\"chart-content\">",
        "<canvas id=\"workload-chart\"></canvas>"
      ]
    },
    {
      "id": "144b7f13",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "161-170",
          "preview": "</div> | </div> | </div>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "161-170",
          "preview": "</div> | </div> | </div>"
        }
      ],
      "codePreview": [
        "</div>",
        "</div>",
        "</div>",
        "<div class=\"chart-row\">",
        "<div class=\"chart-card\">",
        "<div class=\"chart-header\">",
        "<h3>👥 客服效率排行</h3>",
        "<div class=\"chart-controls\">",
        "<button class=\"chart-btn\" onclick=\"dashboard.showStaffDetails()\">详细信息</button>"
      ]
    },
    {
      "id": "fa79ebb5",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "171-180",
          "preview": "</div> | </div> | <div class=\"chart-content\">"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "171-180",
          "preview": "</div> | </div> | <div class=\"chart-content\">"
        }
      ],
      "codePreview": [
        "</div>",
        "</div>",
        "<div class=\"chart-content\">",
        "<div id=\"staff-efficiency-list\" class=\"staff-list\"></div>",
        "</div>",
        "</div>",
        "<div class=\"chart-card\">",
        "<div class=\"chart-header\">",
        "<h3>⭐ 满意度分布</h3>"
      ]
    },
    {
      "id": "8db6b281",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "181-190",
          "preview": "<div class=\"chart-controls\"> | <button class=\"chart-btn\" onclick=\"dashboard.showSatisfactionDetails()\">详细分析</button> | </div>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "181-190",
          "preview": "<div class=\"chart-controls\"> | <button class=\"chart-btn\" onclick=\"dashboard.showSatisfactionDetails()\">详细分析</button> | </div>"
        }
      ],
      "codePreview": [
        "<div class=\"chart-controls\">",
        "<button class=\"chart-btn\" onclick=\"dashboard.showSatisfactionDetails()\">详细分析</button>",
        "</div>",
        "</div>",
        "<div class=\"chart-content\">",
        "<canvas id=\"satisfaction-chart\"></canvas>",
        "</div>",
        "</div>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "143c09b8",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "191-200",
          "preview": "<!-- KPI指标区域 --> | <div class=\"kpi-section\">"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "191-200",
          "preview": "<!-- KPI指标区域 --> | <div class=\"kpi-section\">"
        }
      ],
      "codePreview": [
        "<!-- KPI指标区域 -->",
        "<div class=\"kpi-section\">",
        "<div class=\"section-header\">",
        "<h3>🎯 KPI指标</h3>",
        "<button class=\"kpi-report-btn\" onclick=\"dashboard.generateKpiReport()\">生成完整报告</button>",
        "</div>",
        "<div class=\"kpi-grid\">",
        "<div class=\"kpi-item\">",
        "<div class=\"kpi-title\">响应时间得分</div>"
      ]
    },
    {
      "id": "58b55f9c",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "201-210",
          "preview": "<div class=\"kpi-score\" id=\"response-time-score\">--</div> | <div class=\"kpi-progress\"> | <div class=\"progress-bar\" id=\"response-time-progress\"></div>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "201-210",
          "preview": "<div class=\"kpi-score\" id=\"response-time-score\">--</div> | <div class=\"kpi-progress\"> | <div class=\"progress-bar\" id=\"response-time-progress\"></div>"
        }
      ],
      "codePreview": [
        "<div class=\"kpi-score\" id=\"response-time-score\">--</div>",
        "<div class=\"kpi-progress\">",
        "<div class=\"progress-bar\" id=\"response-time-progress\"></div>",
        "</div>",
        "</div>",
        "<div class=\"kpi-item\">",
        "<div class=\"kpi-title\">客户满意度得分</div>",
        "<div class=\"kpi-score\" id=\"satisfaction-score\">--</div>",
        "<div class=\"kpi-progress\">"
      ]
    },
    {
      "id": "48bb7ff4",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "211-220",
          "preview": "<div class=\"progress-bar\" id=\"satisfaction-progress\"></div> | </div> | </div>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "211-220",
          "preview": "<div class=\"progress-bar\" id=\"satisfaction-progress\"></div> | </div> | </div>"
        }
      ],
      "codePreview": [
        "<div class=\"progress-bar\" id=\"satisfaction-progress\"></div>",
        "</div>",
        "</div>",
        "<div class=\"kpi-item\">",
        "<div class=\"kpi-title\">客服效率得分</div>",
        "<div class=\"kpi-score\" id=\"efficiency-score\">--</div>",
        "<div class=\"kpi-progress\">",
        "<div class=\"progress-bar\" id=\"efficiency-progress\"></div>",
        "</div>"
      ]
    },
    {
      "id": "5bd9816a",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "221-230",
          "preview": "</div> | <div class=\"kpi-item\">"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "221-230",
          "preview": "</div> | <div class=\"kpi-item\">"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"kpi-item\">",
        "<div class=\"kpi-title\">系统性能得分</div>",
        "<div class=\"kpi-score\" id=\"performance-score\">--</div>",
        "<div class=\"kpi-progress\">",
        "<div class=\"progress-bar\" id=\"performance-progress\"></div>",
        "</div>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "6cdfdb6e",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "261-270",
          "preview": "switch (e.key) { | case 'r': | e.preventDefault();"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "261-270",
          "preview": "switch (e.key) { | case 'r': | e.preventDefault();"
        }
      ],
      "codePreview": [
        "switch (e.key) {",
        "case 'r':",
        "e.preventDefault();",
        "this.refreshData();",
        "break;",
        "case 'e':",
        "e.preventDefault();",
        "this.exportReport();",
        "break;",
        "}"
      ]
    },
    {
      "id": "06a727b9",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "291-300",
          "preview": "this.loadWorkloadAnalysis() | ]);"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "291-300",
          "preview": "this.loadWorkloadAnalysis() | ]);"
        }
      ],
      "codePreview": [
        "this.loadWorkloadAnalysis()",
        "]);",
        "this.updateMetricCards(realtimeData);",
        "this.updateCharts({",
        "realtime: realtimeData,",
        "staff: staffEfficiency,",
        "satisfaction: customerSatisfaction,",
        "workload: workloadData"
      ]
    },
    {
      "id": "e3517e07",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "431-440",
          "preview": "// 响应时间 | const avgResponseTime = document.getElementById('avg-response-time'); | const responseTimeChange = document.getElementById('response-time-change');"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "431-440",
          "preview": "// 响应时间 | const avgResponseTime = document.getElementById('avg-response-time'); | const responseTimeChange = document.getElementById('response-time-change');"
        }
      ],
      "codePreview": [
        "const avgResponseTime = document.getElementById('avg-response-time');",
        "const responseTimeChange = document.getElementById('response-time-change');",
        "if (avgResponseTime) {",
        "avgResponseTime.textContent = `${data.responseTime.average}分钟`;",
        "}",
        "if (responseTimeChange) {",
        "const isImprovement = data.responseTime.average < 5;",
        "responseTimeChange.textContent = isImprovement ? '表现良好' : '需要改善';",
        "responseTimeChange.className = `metric-change ${isImprovement ? 'positive' : 'negative'}`;"
      ]
    },
    {
      "id": "1f04b2fe",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "491-500",
          "preview": "this.charts.conversations = new Chart(ctx, { | type: 'line',"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "491-500",
          "preview": "this.charts.conversations = new Chart(ctx, { | type: 'line',"
        }
      ],
      "codePreview": [
        "this.charts.conversations = new Chart(ctx, {",
        "type: 'line',",
        "data: {",
        "labels: timeLabels,",
        "datasets: [{",
        "label: '对话数量',",
        "data: conversationData,",
        "borderColor: '#4CAF50',",
        "backgroundColor: 'rgba(76, 175, 80, 0.1)',"
      ]
    },
    {
      "id": "ad97a5e7",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "501-510",
          "preview": "borderWidth: 2, | fill: true, | tension: 0.4"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "501-510",
          "preview": "borderWidth: 2, | fill: true, | tension: 0.4"
        }
      ],
      "codePreview": [
        "borderWidth: 2,",
        "fill: true,",
        "tension: 0.4",
        "}]",
        "},",
        "options: {",
        "responsive: true,",
        "maintainAspectRatio: false,",
        "plugins: {",
        "legend: {"
      ]
    },
    {
      "id": "cd99763d",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "551-560",
          "preview": "this.charts.workload = new Chart(ctx, { | type: 'bar', | data: {"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "551-560",
          "preview": "this.charts.workload = new Chart(ctx, { | type: 'bar', | data: {"
        }
      ],
      "codePreview": [
        "this.charts.workload = new Chart(ctx, {",
        "type: 'bar',",
        "data: {",
        "labels: hourLabels,",
        "datasets: [{",
        "label: '消息数量',",
        "data: workloadData,",
        "backgroundColor: 'rgba(54, 162, 235, 0.6)',",
        "borderColor: 'rgba(54, 162, 235, 1)',",
        "borderWidth: 1"
      ]
    },
    {
      "id": "5b5bd52f",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "571-580",
          "preview": "scales: { | y: { | beginAtZero: true,"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "571-580",
          "preview": "scales: { | y: { | beginAtZero: true,"
        }
      ],
      "codePreview": [
        "scales: {",
        "y: {",
        "beginAtZero: true,",
        "grid: {",
        "color: 'rgba(0,0,0,0.1)'",
        "}",
        "},",
        "x: {",
        "grid: {",
        "color: 'rgba(0,0,0,0.1)'"
      ]
    },
    {
      "id": "8d27370e",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "601-610",
          "preview": "container.innerHTML = staffList.map((staff, index) => ` | <div class=\"staff-item\"> | <div class=\"staff-rank\">#${index + 1}</div>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "601-610",
          "preview": "container.innerHTML = staffList.map((staff, index) => ` | <div class=\"staff-item\"> | <div class=\"staff-rank\">#${index + 1}</div>"
        }
      ],
      "codePreview": [
        "container.innerHTML = staffList.map((staff, index) => `",
        "<div class=\"staff-item\">",
        "<div class=\"staff-rank\">#${index + 1}</div>",
        "<div class=\"staff-info\">",
        "<div class=\"staff-name\">${staff.staffName}</div>",
        "<div class=\"staff-stats\">",
        "处理对话: ${staff.conversationsHandled} | 平均响应: ${staff.avgResponseTime}分钟",
        "</div>",
        "</div>",
        "<div class=\"staff-efficiency\">"
      ]
    },
    {
      "id": "4bc7fd60",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "641-650",
          "preview": "labels: ['5星', '4星', '3星', '2星', '1星'], | datasets: [{ | data: ["
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "641-650",
          "preview": "labels: ['5星', '4星', '3星', '2星', '1星'], | datasets: [{ | data: ["
        }
      ],
      "codePreview": [
        "labels: ['5星', '4星', '3星', '2星', '1星'],",
        "datasets: [{",
        "data: [",
        "ratingDistribution[5],",
        "ratingDistribution[4],",
        "ratingDistribution[3],",
        "ratingDistribution[2],",
        "ratingDistribution[1]",
        "],",
        "backgroundColor: ["
      ]
    },
    {
      "id": "bfd5572e",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "661-670",
          "preview": "responsive: true, | maintainAspectRatio: false, | plugins: {"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "661-670",
          "preview": "responsive: true, | maintainAspectRatio: false, | plugins: {"
        }
      ],
      "codePreview": [
        "responsive: true,",
        "maintainAspectRatio: false,",
        "plugins: {",
        "legend: {",
        "position: 'bottom',",
        "labels: {",
        "padding: 20,",
        "usePointStyle: true",
        "}",
        "}"
      ]
    },
    {
      "id": "0394c125",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "681-690",
          "preview": "// 模拟KPI得分计算 | const responseTimeScore = Math.max(0, Math.min(100, (10 - data.responseTime.average) * 10)); | const satisfactionScore = 86; // 4.3/5 * 100 * 0.2 + 80"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "681-690",
          "preview": "// 模拟KPI得分计算 | const responseTimeScore = Math.max(0, Math.min(100, (10 - data.responseTime.average) * 10)); | const satisfactionScore = 86; // 4.3/5 * 100 * 0.2 + 80"
        }
      ],
      "codePreview": [
        "const responseTimeScore = Math.max(0, Math.min(100, (10 - data.responseTime.average) * 10));",
        "const satisfactionScore = 86;",
        "const efficiencyScore = 91;",
        "const performanceScore = Math.max(0, Math.min(100, (300 - data.performance.avgResponseTime) / 2));",
        "this.updateKpiItem('response-time-score', 'response-time-progress', responseTimeScore);",
        "this.updateKpiItem('satisfaction-score', 'satisfaction-progress', satisfactionScore);",
        "this.updateKpiItem('efficiency-score', 'efficiency-progress', efficiencyScore);",
        "this.updateKpiItem('performance-score', 'performance-progress', performanceScore);"
      ]
    },
    {
      "id": "1428ff26",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "861-870",
          "preview": "<h3>📊 KPI报告</h3> | <button class=\"close-btn\" onclick=\"this.parentElement.parentElement.parentElement.remove()\">✕</button> | </div>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "861-870",
          "preview": "<h3>📊 KPI报告</h3> | <button class=\"close-btn\" onclick=\"this.parentElement.parentElement.parentElement.remove()\">✕</button> | </div>"
        }
      ],
      "codePreview": [
        "<h3>📊 KPI报告</h3>",
        "<button class=\"close-btn\" onclick=\"this.parentElement.parentElement.parentElement.remove()\">✕</button>",
        "</div>",
        "<div class=\"modal-body\">",
        "<div class=\"report-summary\">",
        "<h4>报告摘要</h4>",
        "<p>报告类型: ${reportData.reportType}</p>",
        "<p>生成时间: ${new Date(reportData.generatedAt).toLocaleString()}</p>",
        "<p>总体得分: ${Math.round(reportData.kpiScores.overall)}分</p>",
        "</div>"
      ]
    },
    {
      "id": "8613dae7",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "871-880",
          "preview": "<div class=\"report-metrics\"> | <h4>详细指标</h4> | <ul>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "871-880",
          "preview": "<div class=\"report-metrics\"> | <h4>详细指标</h4> | <ul>"
        }
      ],
      "codePreview": [
        "<div class=\"report-metrics\">",
        "<h4>详细指标</h4>",
        "<ul>",
        "<li>对话总数: ${reportData.summary.totalConversations}</li>",
        "<li>消息总数: ${reportData.summary.totalMessages}</li>",
        "<li>平均评分: ${reportData.summary.averageRating}</li>",
        "<li>客服人员: ${reportData.summary.staffCount}人</li>",
        "</ul>",
        "</div>",
        "<div class=\"report-recommendations\">"
      ]
    },
    {
      "id": "6046f6a7",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "881-890",
          "preview": "<h4>改进建议</h4> | <ul> | ${reportData.recommendations.map(rec =>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "881-890",
          "preview": "<h4>改进建议</h4> | <ul> | ${reportData.recommendations.map(rec =>"
        }
      ],
      "codePreview": [
        "<h4>改进建议</h4>",
        "<ul>",
        "${reportData.recommendations.map(rec =>",
        "`<li><strong>${rec.title}:</strong> ${rec.description}</li>`",
        ").join('')}",
        "</ul>",
        "</div>",
        "</div>",
        "<div class=\"modal-footer\">",
        "<button class=\"btn btn-primary\" onclick=\"dashboard.downloadReport()\">下载完整报告</button>"
      ]
    },
    {
      "id": "f678f2c1",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "911-920",
          "preview": "const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' }); | const link = document.createElement('a'); | const url = URL.createObjectURL(blob);"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "911-920",
          "preview": "const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' }); | const link = document.createElement('a'); | const url = URL.createObjectURL(blob);"
        }
      ],
      "codePreview": [
        "const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });",
        "const link = document.createElement('a');",
        "const url = URL.createObjectURL(blob);",
        "link.setAttribute('href', url);",
        "link.setAttribute('download', `KPI报告_${new Date().toISOString().split('T')[0]}.csv`);",
        "link.style.visibility = 'hidden';",
        "document.body.appendChild(link);",
        "link.click();"
      ]
    },
    {
      "id": "67718db9",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "21-30",
          "preview": "this.currentUser = null; | this.websocket = null; | this.charts = new Map();"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "21-30",
          "preview": "this.currentUser = null; | this.websocket = null; | this.charts = new Map();"
        }
      ],
      "codePreview": [
        "this.currentUser = null;",
        "this.websocket = null;",
        "this.charts = new Map();",
        "this.refreshInterval = null;",
        "this.currentTimeRange = '24h';",
        "this.dashboardMode = 'overview';",
        "this.isRealTimeEnabled = true;",
        "this.notifications = [];",
        "this.filters = {};"
      ]
    },
    {
      "id": "3c84df29",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "81-90",
          "preview": "<nav class=\"dashboard-nav\"> | <div class=\"nav-brand\"> | <h1><i class=\"fas fa-chart-line\"></i> 数据分析中心</h1>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "81-90",
          "preview": "<nav class=\"dashboard-nav\"> | <div class=\"nav-brand\"> | <h1><i class=\"fas fa-chart-line\"></i> 数据分析中心</h1>"
        }
      ],
      "codePreview": [
        "<nav class=\"dashboard-nav\">",
        "<div class=\"nav-brand\">",
        "<h1><i class=\"fas fa-chart-line\"></i> 数据分析中心</h1>",
        "<div class=\"nav-status\">",
        "<span class=\"status-indicator\" id=\"connection-status\"></span>",
        "<span class=\"status-text\">实时连接</span>",
        "</div>",
        "</div>",
        "<div class=\"nav-controls\">"
      ]
    },
    {
      "id": "c36e4bd6",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "91-100",
          "preview": "<div class=\"time-range-selector\"> | <select id=\"time-range-select\"> | <option value=\"1h\">最近1小时</option>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "91-100",
          "preview": "<div class=\"time-range-selector\"> | <select id=\"time-range-select\"> | <option value=\"1h\">最近1小时</option>"
        }
      ],
      "codePreview": [
        "<div class=\"time-range-selector\">",
        "<select id=\"time-range-select\">",
        "<option value=\"1h\">最近1小时</option>",
        "<option value=\"24h\" selected>最近24小时</option>",
        "<option value=\"7d\">最近7天</option>",
        "<option value=\"30d\">最近30天</option>",
        "<option value=\"90d\">最近90天</option>",
        "</select>",
        "</div>"
      ]
    },
    {
      "id": "4459c53b",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "101-110",
          "preview": "<div class=\"dashboard-modes\"> | <button class=\"mode-btn active\" data-mode=\"overview\"> | <i class=\"fas fa-tachometer-alt\"></i> 概览"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "101-110",
          "preview": "<div class=\"dashboard-modes\"> | <button class=\"mode-btn active\" data-mode=\"overview\"> | <i class=\"fas fa-tachometer-alt\"></i> 概览"
        }
      ],
      "codePreview": [
        "<div class=\"dashboard-modes\">",
        "<button class=\"mode-btn active\" data-mode=\"overview\">",
        "<i class=\"fas fa-tachometer-alt\"></i> 概览",
        "</button>",
        "<button class=\"mode-btn\" data-mode=\"kpi\">",
        "<i class=\"fas fa-chart-bar\"></i> KPI",
        "</button>",
        "<button class=\"mode-btn\" data-mode=\"performance\">",
        "<i class=\"fas fa-users\"></i> 绩效",
        "</button>"
      ]
    },
    {
      "id": "146cafd0",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "111-120",
          "preview": "<button class=\"mode-btn\" data-mode=\"satisfaction\"> | <i class=\"fas fa-smile\"></i> 满意度 | </button>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "111-120",
          "preview": "<button class=\"mode-btn\" data-mode=\"satisfaction\"> | <i class=\"fas fa-smile\"></i> 满意度 | </button>"
        }
      ],
      "codePreview": [
        "<button class=\"mode-btn\" data-mode=\"satisfaction\">",
        "<i class=\"fas fa-smile\"></i> 满意度",
        "</button>",
        "<button class=\"mode-btn\" data-mode=\"revenue\">",
        "<i class=\"fas fa-dollar-sign\"></i> 收入",
        "</button>",
        "</div>",
        "<div class=\"action-buttons\">",
        "<button id=\"refresh-btn\" class=\"action-btn\" title=\"刷新数据\">"
      ]
    },
    {
      "id": "d7ed27a3",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "121-130",
          "preview": "<i class=\"fas fa-sync-alt\"></i> | </button> | <button id=\"export-btn\" class=\"action-btn\" title=\"导出数据\">"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "121-130",
          "preview": "<i class=\"fas fa-sync-alt\"></i> | </button> | <button id=\"export-btn\" class=\"action-btn\" title=\"导出数据\">"
        }
      ],
      "codePreview": [
        "<i class=\"fas fa-sync-alt\"></i>",
        "</button>",
        "<button id=\"export-btn\" class=\"action-btn\" title=\"导出数据\">",
        "<i class=\"fas fa-download\"></i>",
        "</button>",
        "<button id=\"settings-btn\" class=\"action-btn\" title=\"设置\">",
        "<i class=\"fas fa-cog\"></i>",
        "</button>",
        "<button id=\"fullscreen-btn\" class=\"action-btn\" title=\"全屏\">",
        "<i class=\"fas fa-expand\"></i>"
      ]
    },
    {
      "id": "2d85a348",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "131-140",
          "preview": "</button> | </div> | </div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "131-140",
          "preview": "</button> | </div> | </div>"
        }
      ],
      "codePreview": [
        "</button>",
        "</div>",
        "</div>",
        "</nav>",
        "<!-- 主要内容区域 -->",
        "<main class=\"dashboard-main\">",
        "<!-- 侧边栏筛选器 -->",
        "<aside class=\"dashboard-sidebar\" id=\"dashboard-sidebar\">",
        "<div class=\"sidebar-section\">"
      ]
    },
    {
      "id": "8677d264",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "141-150",
          "preview": "<h3><i class=\"fas fa-filter\"></i> 筛选器</h3> | <div class=\"filter-group\"> | <label>员工</label>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "141-150",
          "preview": "<h3><i class=\"fas fa-filter\"></i> 筛选器</h3> | <div class=\"filter-group\"> | <label>员工</label>"
        }
      ],
      "codePreview": [
        "<h3><i class=\"fas fa-filter\"></i> 筛选器</h3>",
        "<div class=\"filter-group\">",
        "<label>员工</label>",
        "<select id=\"employee-filter\" multiple>",
        "<option value=\"all\">全部员工</option>",
        "</select>",
        "</div>",
        "<div class=\"filter-group\">",
        "<label>客户类型</label>",
        "<select id=\"customer-type-filter\">"
      ]
    },
    {
      "id": "c1777829",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "151-160",
          "preview": "<option value=\"all\">全部客户</option> | <option value=\"new\">新客户</option> | <option value=\"returning\">老客户</option>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "151-160",
          "preview": "<option value=\"all\">全部客户</option> | <option value=\"new\">新客户</option> | <option value=\"returning\">老客户</option>"
        }
      ],
      "codePreview": [
        "<option value=\"all\">全部客户</option>",
        "<option value=\"new\">新客户</option>",
        "<option value=\"returning\">老客户</option>",
        "</select>",
        "</div>",
        "<div class=\"filter-group\">",
        "<label>对话状态</label>",
        "<select id=\"conversation-status-filter\">",
        "<option value=\"all\">全部状态</option>",
        "<option value=\"active\">进行中</option>"
      ]
    },
    {
      "id": "6c4659d8",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "161-170",
          "preview": "<option value=\"closed\">已结束</option> | </select> | </div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "161-170",
          "preview": "<option value=\"closed\">已结束</option> | </select> | </div>"
        }
      ],
      "codePreview": [
        "<option value=\"closed\">已结束</option>",
        "</select>",
        "</div>",
        "</div>",
        "<div class=\"sidebar-section\">",
        "<h3><i class=\"fas fa-bell\"></i> 实时警报</h3>",
        "<div id=\"alerts-container\" class=\"alerts-container\">",
        "<!-- 动态警报内容 -->",
        "</div>"
      ]
    },
    {
      "id": "b40dc915",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "171-180",
          "preview": "</div> | <div class=\"sidebar-section\">"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "171-180",
          "preview": "</div> | <div class=\"sidebar-section\">"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"sidebar-section\">",
        "<h3><i class=\"fas fa-star\"></i> 快速指标</h3>",
        "<div id=\"quick-metrics\" class=\"quick-metrics\">",
        "<!-- 快速指标内容 -->",
        "</div>",
        "</div>",
        "</aside>"
      ]
    },
    {
      "id": "64edb4c5",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "181-190",
          "preview": "<!-- 仪表板内容 --> | <section class=\"dashboard-content\" id=\"dashboard-content\"> | <!-- 动态内容区域 -->"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "181-190",
          "preview": "<!-- 仪表板内容 --> | <section class=\"dashboard-content\" id=\"dashboard-content\"> | <!-- 动态内容区域 -->"
        }
      ],
      "codePreview": [
        "<!-- 仪表板内容 -->",
        "<section class=\"dashboard-content\" id=\"dashboard-content\">",
        "<!-- 动态内容区域 -->",
        "</section>",
        "</main>",
        "<!-- 加载遮罩 -->",
        "<div id=\"loading-overlay\" class=\"loading-overlay hidden\">",
        "<div class=\"loading-spinner\">",
        "<i class=\"fas fa-spinner fa-spin\"></i>"
      ]
    },
    {
      "id": "23ba5729",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "191-200",
          "preview": "<p>加载数据中...</p> | </div> | </div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "191-200",
          "preview": "<p>加载数据中...</p> | </div> | </div>"
        }
      ],
      "codePreview": [
        "<p>加载数据中...</p>",
        "</div>",
        "</div>",
        "<!-- 模态对话框 -->",
        "<div id=\"modal-overlay\" class=\"modal-overlay hidden\">",
        "<div class=\"modal-container\">",
        "<div class=\"modal-header\">",
        "<h3 id=\"modal-title\">标题</h3>",
        "<button id=\"modal-close\" class=\"modal-close\">"
      ]
    },
    {
      "id": "14075b8c",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "201-210",
          "preview": "<i class=\"fas fa-times\"></i> | </button> | </div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "201-210",
          "preview": "<i class=\"fas fa-times\"></i> | </button> | </div>"
        }
      ],
      "codePreview": [
        "<i class=\"fas fa-times\"></i>",
        "</button>",
        "</div>",
        "<div class=\"modal-body\" id=\"modal-body\">",
        "<!-- 模态内容 -->",
        "</div>",
        "<div class=\"modal-footer\" id=\"modal-footer\">",
        "<button id=\"modal-cancel\" class=\"btn btn-secondary\">取消</button>",
        "<button id=\"modal-confirm\" class=\"btn btn-primary\">确认</button>",
        "</div>"
      ]
    },
    {
      "id": "18855346",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "271-280",
          "preview": "const mode = e.currentTarget.dataset.mode; | this.switchDashboardMode(mode); | });"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "271-280",
          "preview": "const mode = e.currentTarget.dataset.mode; | this.switchDashboardMode(mode); | });"
        }
      ],
      "codePreview": [
        "const mode = e.currentTarget.dataset.mode;",
        "this.switchDashboardMode(mode);",
        "});",
        "});",
        "document.getElementById('refresh-btn').addEventListener('click', () => this.refreshDashboard());",
        "document.getElementById('export-btn').addEventListener('click', () => this.showExportModal());",
        "document.getElementById('settings-btn').addEventListener('click', () => this.showSettingsModal());",
        "document.getElementById('fullscreen-btn').addEventListener('click', () => this.toggleFullscreen());"
      ]
    },
    {
      "id": "4125a602",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "291-300",
          "preview": "case 'overview': | this.createOverviewDashboard(contentArea); | break;"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "291-300",
          "preview": "case 'overview': | this.createOverviewDashboard(contentArea); | break;"
        }
      ],
      "codePreview": [
        "case 'overview':",
        "this.createOverviewDashboard(contentArea);",
        "break;",
        "case 'kpi':",
        "this.createKPIDashboard(contentArea);",
        "break;",
        "case 'performance':",
        "this.createPerformanceDashboard(contentArea);",
        "break;",
        "case 'satisfaction':"
      ]
    },
    {
      "id": "ed52cf1e",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "311-320",
          "preview": "*/ | createOverviewDashboard(container) { | container.innerHTML = `"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "311-320",
          "preview": "*/ | createOverviewDashboard(container) { | container.innerHTML = `"
        }
      ],
      "codePreview": [
        "createOverviewDashboard(container) {",
        "container.innerHTML = `",
        "<div class=\"overview-dashboard\">",
        "<!-- 关键指标卡片 -->",
        "<div class=\"metrics-grid\">",
        "<div class=\"metric-card\" id=\"conversations-card\">",
        "<div class=\"metric-header\">",
        "<h3>对话总数</h3>",
        "<i class=\"fas fa-comments metric-icon\"></i>"
      ]
    },
    {
      "id": "9de2f87a",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "321-330",
          "preview": "</div> | <div class=\"metric-value\" id=\"total-conversations\">-</div> | <div class=\"metric-change\" id=\"conversations-change\">-</div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "321-330",
          "preview": "</div> | <div class=\"metric-value\" id=\"total-conversations\">-</div> | <div class=\"metric-change\" id=\"conversations-change\">-</div>"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"metric-value\" id=\"total-conversations\">-</div>",
        "<div class=\"metric-change\" id=\"conversations-change\">-</div>",
        "</div>",
        "<div class=\"metric-card\" id=\"response-time-card\">",
        "<div class=\"metric-header\">",
        "<h3>平均响应时间</h3>",
        "<i class=\"fas fa-clock metric-icon\"></i>",
        "</div>"
      ]
    },
    {
      "id": "afef7e54",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "331-340",
          "preview": "<div class=\"metric-value\" id=\"avg-response-time\">-</div> | <div class=\"metric-change\" id=\"response-time-change\">-</div> | </div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "331-340",
          "preview": "<div class=\"metric-value\" id=\"avg-response-time\">-</div> | <div class=\"metric-change\" id=\"response-time-change\">-</div> | </div>"
        }
      ],
      "codePreview": [
        "<div class=\"metric-value\" id=\"avg-response-time\">-</div>",
        "<div class=\"metric-change\" id=\"response-time-change\">-</div>",
        "</div>",
        "<div class=\"metric-card\" id=\"satisfaction-card\">",
        "<div class=\"metric-header\">",
        "<h3>客户满意度</h3>",
        "<i class=\"fas fa-smile metric-icon\"></i>",
        "</div>",
        "<div class=\"metric-value\" id=\"avg-satisfaction\">-</div>"
      ]
    },
    {
      "id": "8e9b0042",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "341-350",
          "preview": "<div class=\"metric-change\" id=\"satisfaction-change\">-</div> | </div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "341-350",
          "preview": "<div class=\"metric-change\" id=\"satisfaction-change\">-</div> | </div>"
        }
      ],
      "codePreview": [
        "<div class=\"metric-change\" id=\"satisfaction-change\">-</div>",
        "</div>",
        "<div class=\"metric-card\" id=\"revenue-card\">",
        "<div class=\"metric-header\">",
        "<h3>总收入</h3>",
        "<i class=\"fas fa-dollar-sign metric-icon\"></i>",
        "</div>",
        "<div class=\"metric-value\" id=\"total-revenue\">-</div>",
        "<div class=\"metric-change\" id=\"revenue-change\">-</div>"
      ]
    },
    {
      "id": "ae08abed",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "351-360",
          "preview": "</div> | </div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "351-360",
          "preview": "</div> | </div>"
        }
      ],
      "codePreview": [
        "</div>",
        "</div>",
        "<!-- 图表区域 -->",
        "<div class=\"charts-grid\">",
        "<div class=\"chart-container\">",
        "<div class=\"chart-header\">",
        "<h3>对话趋势</h3>",
        "<div class=\"chart-controls\">",
        "<select class=\"chart-type-select\">"
      ]
    },
    {
      "id": "ac5de901",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "361-370",
          "preview": "<option value=\"line\">线图</option> | <option value=\"bar\">柱图</option> | <option value=\"area\">面积图</option>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "361-370",
          "preview": "<option value=\"line\">线图</option> | <option value=\"bar\">柱图</option> | <option value=\"area\">面积图</option>"
        }
      ],
      "codePreview": [
        "<option value=\"line\">线图</option>",
        "<option value=\"bar\">柱图</option>",
        "<option value=\"area\">面积图</option>",
        "</select>",
        "</div>",
        "</div>",
        "<div class=\"chart-content\">",
        "<canvas id=\"conversations-trend-chart\"></canvas>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "bf26330a",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "371-380",
          "preview": "<div class=\"chart-container\"> | <div class=\"chart-header\">"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "371-380",
          "preview": "<div class=\"chart-container\"> | <div class=\"chart-header\">"
        }
      ],
      "codePreview": [
        "<div class=\"chart-container\">",
        "<div class=\"chart-header\">",
        "<h3>响应时间分布</h3>",
        "</div>",
        "<div class=\"chart-content\">",
        "<canvas id=\"response-time-chart\"></canvas>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "4303c2f8",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "381-390",
          "preview": "<div class=\"chart-container\"> | <div class=\"chart-header\"> | <h3>员工绩效排名</h3>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "381-390",
          "preview": "<div class=\"chart-container\"> | <div class=\"chart-header\"> | <h3>员工绩效排名</h3>"
        }
      ],
      "codePreview": [
        "<div class=\"chart-container\">",
        "<div class=\"chart-header\">",
        "<h3>员工绩效排名</h3>",
        "</div>",
        "<div class=\"chart-content\">",
        "<canvas id=\"employee-ranking-chart\"></canvas>",
        "</div>",
        "</div>",
        "<div class=\"chart-container\">"
      ]
    },
    {
      "id": "7ffe49d9",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "391-400",
          "preview": "<div class=\"chart-header\"> | <h3>客户满意度分布</h3> | </div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "391-400",
          "preview": "<div class=\"chart-header\"> | <h3>客户满意度分布</h3> | </div>"
        }
      ],
      "codePreview": [
        "<div class=\"chart-header\">",
        "<h3>客户满意度分布</h3>",
        "</div>",
        "<div class=\"chart-content\">",
        "<canvas id=\"satisfaction-distribution-chart\"></canvas>",
        "</div>",
        "</div>",
        "</div>",
        "<!-- 详细数据表格 -->"
      ]
    },
    {
      "id": "331737a1",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "401-410",
          "preview": "<div class=\"data-tables\"> | <div class=\"table-container\"> | <div class=\"table-header\">"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "401-410",
          "preview": "<div class=\"data-tables\"> | <div class=\"table-container\"> | <div class=\"table-header\">"
        }
      ],
      "codePreview": [
        "<div class=\"data-tables\">",
        "<div class=\"table-container\">",
        "<div class=\"table-header\">",
        "<h3>最新对话</h3>",
        "<button class=\"btn btn-sm btn-primary\">查看全部</button>",
        "</div>",
        "<div class=\"table-content\">",
        "<table id=\"recent-conversations-table\" class=\"data-table\">",
        "<thead>",
        "<tr>"
      ]
    },
    {
      "id": "d1d0e24f",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "411-420",
          "preview": "<th>客户</th> | <th>员工</th> | <th>开始时间</th>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "411-420",
          "preview": "<th>客户</th> | <th>员工</th> | <th>开始时间</th>"
        }
      ],
      "codePreview": [
        "<th>客户</th>",
        "<th>员工</th>",
        "<th>开始时间</th>",
        "<th>状态</th>",
        "<th>消息数</th>",
        "<th>满意度</th>",
        "</tr>",
        "</thead>",
        "<tbody>",
        "<!-- 动态数据 -->"
      ]
    },
    {
      "id": "07646a53",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "441-450",
          "preview": "<button class=\"tab-btn active\" data-category=\"all\">全部</button> | <button class=\"tab-btn\" data-category=\"performance\">性能</button> | <button class=\"tab-btn\" data-category=\"customer\">客户</button>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "441-450",
          "preview": "<button class=\"tab-btn active\" data-category=\"all\">全部</button> | <button class=\"tab-btn\" data-category=\"performance\">性能</button> | <button class=\"tab-btn\" data-category=\"customer\">客户</button>"
        }
      ],
      "codePreview": [
        "<button class=\"tab-btn active\" data-category=\"all\">全部</button>",
        "<button class=\"tab-btn\" data-category=\"performance\">性能</button>",
        "<button class=\"tab-btn\" data-category=\"customer\">客户</button>",
        "<button class=\"tab-btn\" data-category=\"business\">业务</button>",
        "<button class=\"tab-btn\" data-category=\"employee\">员工</button>",
        "<button class=\"tab-btn\" data-category=\"system\">系统</button>",
        "</div>",
        "</div>",
        "<div class=\"kpi-grid\" id=\"kpi-grid\">"
      ]
    },
    {
      "id": "b4f33ff5",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "451-460",
          "preview": "<!-- 动态KPI卡片 --> | </div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "451-460",
          "preview": "<!-- 动态KPI卡片 --> | </div>"
        }
      ],
      "codePreview": [
        "<!-- 动态KPI卡片 -->",
        "</div>",
        "<div class=\"kpi-analytics\">",
        "<div class=\"analytics-section\">",
        "<h3>KPI趋势分析</h3>",
        "<canvas id=\"kpi-trends-chart\"></canvas>",
        "</div>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "1a033f72",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "471-480",
          "preview": "<div class=\"performance-dashboard\"> | <div class=\"performance-summary\"> | <div class=\"summary-cards\">"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "471-480",
          "preview": "<div class=\"performance-dashboard\"> | <div class=\"performance-summary\"> | <div class=\"summary-cards\">"
        }
      ],
      "codePreview": [
        "<div class=\"performance-dashboard\">",
        "<div class=\"performance-summary\">",
        "<div class=\"summary-cards\">",
        "<div class=\"summary-card\">",
        "<h3>总员工数</h3>",
        "<div class=\"summary-value\" id=\"total-employees\">-</div>",
        "</div>",
        "<div class=\"summary-card\">",
        "<h3>活跃员工</h3>",
        "<div class=\"summary-value\" id=\"active-employees\">-</div>"
      ]
    },
    {
      "id": "2cbdc940",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "481-490",
          "preview": "</div> | <div class=\"summary-card\"> | <h3>平均生产力</h3>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "481-490",
          "preview": "</div> | <div class=\"summary-card\"> | <h3>平均生产力</h3>"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"summary-card\">",
        "<h3>平均生产力</h3>",
        "<div class=\"summary-value\" id=\"avg-productivity\">-</div>",
        "</div>",
        "<div class=\"summary-card\">",
        "<h3>平均质量分</h3>",
        "<div class=\"summary-value\" id=\"avg-quality\">-</div>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "75e8dc5e",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "491-500",
          "preview": "</div> | <div class=\"performance-charts\">"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "491-500",
          "preview": "</div> | <div class=\"performance-charts\">"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"performance-charts\">",
        "<div class=\"chart-container\">",
        "<h3>员工绩效排名</h3>",
        "<canvas id=\"employee-performance-chart\"></canvas>",
        "</div>",
        "<div class=\"chart-container\">",
        "<h3>绩效趋势</h3>",
        "<canvas id=\"performance-trend-chart\"></canvas>"
      ]
    },
    {
      "id": "feef55b1",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "501-510",
          "preview": "</div> | </div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "501-510",
          "preview": "</div> | </div>"
        }
      ],
      "codePreview": [
        "</div>",
        "</div>",
        "<div class=\"performance-table\">",
        "<h3>详细绩效数据</h3>",
        "<table id=\"performance-data-table\" class=\"data-table\">",
        "<thead>",
        "<tr>",
        "<th>员工</th>",
        "<th>对话数</th>"
      ]
    },
    {
      "id": "fcadbeec",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "511-520",
          "preview": "<th>响应时间</th> | <th>满意度</th> | <th>生产力分</th>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "511-520",
          "preview": "<th>响应时间</th> | <th>满意度</th> | <th>生产力分</th>"
        }
      ],
      "codePreview": [
        "<th>响应时间</th>",
        "<th>满意度</th>",
        "<th>生产力分</th>",
        "<th>质量分</th>",
        "<th>排名</th>",
        "</tr>",
        "</thead>",
        "<tbody>",
        "<!-- 动态数据 -->",
        "</tbody>"
      ]
    },
    {
      "id": "e195143d",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "531-540",
          "preview": "*/ | createSatisfactionDashboard(container) { | container.innerHTML = `"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "531-540",
          "preview": "*/ | createSatisfactionDashboard(container) { | container.innerHTML = `"
        }
      ],
      "codePreview": [
        "createSatisfactionDashboard(container) {",
        "container.innerHTML = `",
        "<div class=\"satisfaction-dashboard\">",
        "<div class=\"satisfaction-overview\">",
        "<div class=\"satisfaction-gauge\">",
        "<h3>整体满意度</h3>",
        "<canvas id=\"satisfaction-gauge-chart\"></canvas>",
        "</div>",
        "<div class=\"satisfaction-distribution\">"
      ]
    },
    {
      "id": "0d802a64",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "541-550",
          "preview": "<h3>满意度分布</h3> | <canvas id=\"satisfaction-pie-chart\"></canvas> | </div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "541-550",
          "preview": "<h3>满意度分布</h3> | <canvas id=\"satisfaction-pie-chart\"></canvas> | </div>"
        }
      ],
      "codePreview": [
        "<h3>满意度分布</h3>",
        "<canvas id=\"satisfaction-pie-chart\"></canvas>",
        "</div>",
        "</div>",
        "<div class=\"satisfaction-details\">",
        "<div class=\"details-section\">",
        "<h3>满意度趋势</h3>",
        "<canvas id=\"satisfaction-trend-chart\"></canvas>",
        "</div>"
      ]
    },
    {
      "id": "0902ee68",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "551-560",
          "preview": "<div class=\"details-section\"> | <h3>各维度评分</h3> | <canvas id=\"satisfaction-radar-chart\"></canvas>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "551-560",
          "preview": "<div class=\"details-section\"> | <h3>各维度评分</h3> | <canvas id=\"satisfaction-radar-chart\"></canvas>"
        }
      ],
      "codePreview": [
        "<div class=\"details-section\">",
        "<h3>各维度评分</h3>",
        "<canvas id=\"satisfaction-radar-chart\"></canvas>",
        "</div>",
        "</div>",
        "<div class=\"feedback-analysis\">",
        "<h3>客户反馈分析</h3>",
        "<div id=\"feedback-table-container\">",
        "<table id=\"feedback-table\" class=\"data-table\">"
      ]
    },
    {
      "id": "b4debadc",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "561-570",
          "preview": "<thead> | <tr> | <th>客户</th>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "561-570",
          "preview": "<thead> | <tr> | <th>客户</th>"
        }
      ],
      "codePreview": [
        "<thead>",
        "<tr>",
        "<th>客户</th>",
        "<th>评分</th>",
        "<th>反馈内容</th>",
        "<th>情感</th>",
        "<th>时间</th>",
        "<th>处理员工</th>",
        "</tr>",
        "</thead>"
      ]
    },
    {
      "id": "01c939c5",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "571-580",
          "preview": "<tbody> | <!-- 动态反馈数据 --> | </tbody>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "571-580",
          "preview": "<tbody> | <!-- 动态反馈数据 --> | </tbody>"
        }
      ],
      "codePreview": [
        "<tbody>",
        "<!-- 动态反馈数据 -->",
        "</tbody>",
        "</table>",
        "</div>",
        "</div>",
        "</div>",
        "`;",
        "this.initializeSatisfactionDashboard();"
      ]
    },
    {
      "id": "7e5ca225",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "591-600",
          "preview": "<div class=\"revenue-card\"> | <h3>总收入</h3> | <div class=\"revenue-value\" id=\"total-revenue-display\">-</div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "591-600",
          "preview": "<div class=\"revenue-card\"> | <h3>总收入</h3> | <div class=\"revenue-value\" id=\"total-revenue-display\">-</div>"
        }
      ],
      "codePreview": [
        "<div class=\"revenue-card\">",
        "<h3>总收入</h3>",
        "<div class=\"revenue-value\" id=\"total-revenue-display\">-</div>",
        "<div class=\"revenue-change\" id=\"revenue-growth\">-</div>",
        "</div>",
        "<div class=\"revenue-card\">",
        "<h3>月度经常性收入(MRR)</h3>",
        "<div class=\"revenue-value\" id=\"mrr-display\">-</div>",
        "</div>",
        "<div class=\"revenue-card\">"
      ]
    },
    {
      "id": "9789a88b",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "601-610",
          "preview": "<h3>年度经常性收入(ARR)</h3> | <div class=\"revenue-value\" id=\"arr-display\">-</div> | </div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "601-610",
          "preview": "<h3>年度经常性收入(ARR)</h3> | <div class=\"revenue-value\" id=\"arr-display\">-</div> | </div>"
        }
      ],
      "codePreview": [
        "<h3>年度经常性收入(ARR)</h3>",
        "<div class=\"revenue-value\" id=\"arr-display\">-</div>",
        "</div>",
        "<div class=\"revenue-card\">",
        "<h3>客户生命周期价值(LTV)</h3>",
        "<div class=\"revenue-value\" id=\"ltv-display\">-</div>",
        "</div>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "b9ffe2e3",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "611-620",
          "preview": "<div class=\"revenue-charts\"> | <div class=\"chart-container\"> | <h3>收入趋势</h3>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "611-620",
          "preview": "<div class=\"revenue-charts\"> | <div class=\"chart-container\"> | <h3>收入趋势</h3>"
        }
      ],
      "codePreview": [
        "<div class=\"revenue-charts\">",
        "<div class=\"chart-container\">",
        "<h3>收入趋势</h3>",
        "<canvas id=\"revenue-trend-chart\"></canvas>",
        "</div>",
        "<div class=\"chart-container\">",
        "<h3>订阅类型分布</h3>",
        "<canvas id=\"subscription-chart\"></canvas>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "d171578a",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "621-630",
          "preview": "<div class=\"revenue-analysis\"> | <div class=\"analysis-section\">"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "621-630",
          "preview": "<div class=\"revenue-analysis\"> | <div class=\"analysis-section\">"
        }
      ],
      "codePreview": [
        "<div class=\"revenue-analysis\">",
        "<div class=\"analysis-section\">",
        "<h3>收入预测</h3>",
        "<canvas id=\"revenue-forecast-chart\"></canvas>",
        "</div>",
        "<div class=\"analysis-section\">",
        "<h3>客户获取与流失</h3>",
        "<canvas id=\"churn-retention-chart\"></canvas>",
        "</div>"
      ]
    },
    {
      "id": "d40ada0a",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "761-770",
          "preview": "const [ | dashboardData, | employeeList,"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "761-770",
          "preview": "const [ | dashboardData, | employeeList,"
        }
      ],
      "codePreview": [
        "const [",
        "dashboardData,",
        "employeeList,",
        "alerts",
        "] = await Promise.all([",
        "this.fetchDashboardData(),",
        "this.fetchEmployeeList(),",
        "this.fetchAlerts()",
        "]);"
      ]
    },
    {
      "id": "83b95aa6",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "941-950",
          "preview": "data: { | labels: [], | datasets: [{"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "941-950",
          "preview": "data: { | labels: [], | datasets: [{"
        }
      ],
      "codePreview": [
        "data: {",
        "labels: [],",
        "datasets: [{",
        "label: '对话数量',",
        "data: [],",
        "borderColor: '#667eea',",
        "backgroundColor: 'rgba(102, 126, 234, 0.1)',",
        "fill: true",
        "}]",
        "},"
      ]
    },
    {
      "id": "fa6e368f",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "971-980",
          "preview": "// 员工排名图表 | const employeeRankingCtx = document.getElementById('employee-ranking-chart');"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "971-980",
          "preview": "// 员工排名图表 | const employeeRankingCtx = document.getElementById('employee-ranking-chart');"
        }
      ],
      "codePreview": [
        "const employeeRankingCtx = document.getElementById('employee-ranking-chart');",
        "if (employeeRankingCtx) {",
        "this.charts.set('employee-ranking', new Chart(employeeRankingCtx, {",
        "type: 'horizontalBar',",
        "data: {",
        "labels: [],",
        "datasets: [{",
        "label: '绩效分数',"
      ]
    },
    {
      "id": "4e07adfe",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "991-1000",
          "preview": "if (satisfactionDistCtx) { | this.charts.set('satisfaction-distribution', new Chart(satisfactionDistCtx, { | type: 'doughnut',"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "991-1000",
          "preview": "if (satisfactionDistCtx) { | this.charts.set('satisfaction-distribution', new Chart(satisfactionDistCtx, { | type: 'doughnut',"
        }
      ],
      "codePreview": [
        "if (satisfactionDistCtx) {",
        "this.charts.set('satisfaction-distribution', new Chart(satisfactionDistCtx, {",
        "type: 'doughnut',",
        "data: {",
        "labels: ['非常满意', '满意', '一般', '不满意', '非常不满意'],",
        "datasets: [{",
        "data: [],",
        "backgroundColor: [",
        "'#4caf50',",
        "'#8bc34a',"
      ]
    },
    {
      "id": "c44d2e03",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1151-1160",
          "preview": "data = await this.fetchPerformanceData(); | this.updatePerformanceDashboard(data); | break;"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1151-1160",
          "preview": "data = await this.fetchPerformanceData(); | this.updatePerformanceDashboard(data); | break;"
        }
      ],
      "codePreview": [
        "data = await this.fetchPerformanceData();",
        "this.updatePerformanceDashboard(data);",
        "break;",
        "case 'satisfaction':",
        "data = await this.fetchSatisfactionData();",
        "this.updateSatisfactionDashboard(data);",
        "break;",
        "case 'revenue':",
        "data = await this.fetchRevenueData();",
        "this.updateRevenueDashboard(data);"
      ]
    },
    {
      "id": "7298134c",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1241-1250",
          "preview": "if (!container || !metrics) return; | container.innerHTML = `"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1241-1250",
          "preview": "if (!container || !metrics) return; | container.innerHTML = `"
        }
      ],
      "codePreview": [
        "if (!container || !metrics) return;",
        "container.innerHTML = `",
        "<div class=\"quick-metric\">",
        "<span class=\"metric-label\">活跃对话</span>",
        "<span class=\"metric-value\">${metrics.activeConversations || 0}</span>",
        "</div>",
        "<div class=\"quick-metric\">",
        "<span class=\"metric-label\">在线员工</span>",
        "<span class=\"metric-value\">${metrics.onlineEmployees || 0}</span>"
      ]
    },
    {
      "id": "bffb4bef",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1251-1260",
          "preview": "</div> | <div class=\"quick-metric\"> | <span class=\"metric-label\">响应时间</span>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1251-1260",
          "preview": "</div> | <div class=\"quick-metric\"> | <span class=\"metric-label\">响应时间</span>"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"quick-metric\">",
        "<span class=\"metric-label\">响应时间</span>",
        "<span class=\"metric-value\">${this.formatTime(metrics.avgResponseTime || 0)}</span>",
        "</div>",
        "<div class=\"quick-metric\">",
        "<span class=\"metric-label\">今日收入</span>",
        "<span class=\"metric-value\">${this.formatCurrency(metrics.todayRevenue || 0)}</span>",
        "</div>",
        "`;"
      ]
    },
    {
      "id": "2638f052",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1271-1280",
          "preview": "title.textContent = '导出数据'; | body.innerHTML = `"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1271-1280",
          "preview": "title.textContent = '导出数据'; | body.innerHTML = `"
        }
      ],
      "codePreview": [
        "title.textContent = '导出数据';",
        "body.innerHTML = `",
        "<form id=\"export-form\">",
        "<div class=\"form-group\">",
        "<label>导出类型</label>",
        "<select name=\"reportType\" required>",
        "<option value=\"dashboard\">完整仪表板</option>",
        "<option value=\"kpi\">KPI指标</option>",
        "<option value=\"performance\">员工绩效</option>"
      ]
    },
    {
      "id": "4c56faf8",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1281-1290",
          "preview": "<option value=\"satisfaction\">客户满意度</option> | <option value=\"revenue\">收入分析</option> | </select>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1281-1290",
          "preview": "<option value=\"satisfaction\">客户满意度</option> | <option value=\"revenue\">收入分析</option> | </select>"
        }
      ],
      "codePreview": [
        "<option value=\"satisfaction\">客户满意度</option>",
        "<option value=\"revenue\">收入分析</option>",
        "</select>",
        "</div>",
        "<div class=\"form-group\">",
        "<label>导出格式</label>",
        "<select name=\"format\" required>",
        "<option value=\"json\">JSON</option>",
        "<option value=\"csv\">CSV</option>",
        "<option value=\"excel\">Excel</option>"
      ]
    },
    {
      "id": "75bbd145",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1291-1300",
          "preview": "</select> | </div> | <div class=\"form-group\">"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1291-1300",
          "preview": "</select> | </div> | <div class=\"form-group\">"
        }
      ],
      "codePreview": [
        "</select>",
        "</div>",
        "<div class=\"form-group\">",
        "<label>时间范围</label>",
        "<select name=\"timeRange\" required>",
        "<option value=\"24h\">最近24小时</option>",
        "<option value=\"7d\">最近7天</option>",
        "<option value=\"30d\">最近30天</option>",
        "<option value=\"90d\">最近90天</option>",
        "</select>"
      ]
    },
    {
      "id": "23aeecb6",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1361-1370",
          "preview": "type: format === 'json' ? 'application/json' : 'text/plain' | });"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1361-1370",
          "preview": "type: format === 'json' ? 'application/json' : 'text/plain' | });"
        }
      ],
      "codePreview": [
        "type: format === 'json' ? 'application/json' : 'text/plain'",
        "});",
        "const url = URL.createObjectURL(blob);",
        "const a = document.createElement('a');",
        "a.href = url;",
        "a.download = filename;",
        "document.body.appendChild(a);",
        "a.click();",
        "document.body.removeChild(a);"
      ]
    },
    {
      "id": "5d00f458",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1381-1390",
          "preview": "const confirmBtn = document.getElementById('modal-confirm'); | title.textContent = '仪表板设置';"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1381-1390",
          "preview": "const confirmBtn = document.getElementById('modal-confirm'); | title.textContent = '仪表板设置';"
        }
      ],
      "codePreview": [
        "const confirmBtn = document.getElementById('modal-confirm');",
        "title.textContent = '仪表板设置';",
        "body.innerHTML = `",
        "<form id=\"settings-form\">",
        "<div class=\"form-group\">",
        "<label>",
        "<input type=\"checkbox\" name=\"realTimeEnabled\" ${this.isRealTimeEnabled ? 'checked' : ''}>",
        "启用实时更新",
        "</label>"
      ]
    },
    {
      "id": "2b44eeaf",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1391-1400",
          "preview": "</div> | <div class=\"form-group\"> | <label>自动刷新间隔(秒)</label>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1391-1400",
          "preview": "</div> | <div class=\"form-group\"> | <label>自动刷新间隔(秒)</label>"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"form-group\">",
        "<label>自动刷新间隔(秒)</label>",
        "<input type=\"number\" name=\"refreshInterval\" value=\"30\" min=\"10\" max=\"300\">",
        "</div>",
        "<div class=\"form-group\">",
        "<label>默认时间范围</label>",
        "<select name=\"defaultTimeRange\">",
        "<option value=\"1h\">1小时</option>",
        "<option value=\"24h\" selected>24小时</option>"
      ]
    },
    {
      "id": "e87919ce",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1461-1470",
          "preview": "updateConnectionStatus(status) { | const indicator = document.getElementById('connection-status'); | const statusText = document.querySelector('.status-text');"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1461-1470",
          "preview": "updateConnectionStatus(status) { | const indicator = document.getElementById('connection-status'); | const statusText = document.querySelector('.status-text');"
        }
      ],
      "codePreview": [
        "updateConnectionStatus(status) {",
        "const indicator = document.getElementById('connection-status');",
        "const statusText = document.querySelector('.status-text');",
        "if (indicator && statusText) {",
        "indicator.className = `status-indicator ${status}`;",
        "switch (status) {",
        "case 'connected':",
        "statusText.textContent = '实时连接';"
      ]
    },
    {
      "id": "d50423a6",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1501-1510",
          "preview": "if (!container) return; | const notification = document.createElement('div');"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1501-1510",
          "preview": "if (!container) return; | const notification = document.createElement('div');"
        }
      ],
      "codePreview": [
        "if (!container) return;",
        "const notification = document.createElement('div');",
        "notification.className = `notification notification-${type}`;",
        "notification.innerHTML = `",
        "<div class=\"notification-content\">",
        "<span class=\"notification-message\">${message}</span>",
        "<button class=\"notification-close\" onclick=\"this.parentElement.parentElement.remove()\">",
        "<i class=\"fas fa-times\"></i>",
        "</button>"
      ]
    },
    {
      "id": "1747fbfa",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "91-100",
          "preview": "<h3>🔍 消息搜索</h3> | <button class=\"toggle-search-btn\" id=\"toggleSearchBtn\"> | <span class=\"toggle-icon\">▼</span>"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "91-100",
          "preview": "<h3>🔍 消息搜索</h3> | <button class=\"toggle-search-btn\" id=\"toggleSearchBtn\"> | <span class=\"toggle-icon\">▼</span>"
        }
      ],
      "codePreview": [
        "<h3>🔍 消息搜索</h3>",
        "<button class=\"toggle-search-btn\" id=\"toggleSearchBtn\">",
        "<span class=\"toggle-icon\">▼</span>",
        "</button>",
        "</div>",
        "</div>",
        "<div class=\"search-content\" id=\"searchContent\">",
        "<!-- 基础搜索 -->",
        "<div class=\"basic-search\">"
      ]
    },
    {
      "id": "8fb1d801",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "101-110",
          "preview": "<div class=\"search-input-group\"> | <input type=\"text\" id=\"searchInput\" placeholder=\"搜索消息内容、发送者姓名或文件名...\" class=\"search-input\"> | <button id=\"searchBtn\" class=\"search-btn\">🔍 搜索</button>"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "101-110",
          "preview": "<div class=\"search-input-group\"> | <input type=\"text\" id=\"searchInput\" placeholder=\"搜索消息内容、发送者姓名或文件名...\" class=\"search-input\"> | <button id=\"searchBtn\" class=\"search-btn\">🔍 搜索</button>"
        }
      ],
      "codePreview": [
        "<div class=\"search-input-group\">",
        "<input type=\"text\" id=\"searchInput\" placeholder=\"搜索消息内容、发送者姓名或文件名...\" class=\"search-input\">",
        "<button id=\"searchBtn\" class=\"search-btn\">🔍 搜索</button>",
        "<button id=\"clearSearchBtn\" class=\"clear-btn\">✖ 清除</button>",
        "</div>",
        "<div class=\"search-suggestions\" id=\"searchSuggestions\" style=\"display: none;\">",
        "<!-- 搜索建议将在这里显示 -->",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "accee06f",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "111-120",
          "preview": "<!-- 高级搜索选项 --> | <div class=\"advanced-search\" id=\"advancedSearch\" style=\"display: none;\">"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "111-120",
          "preview": "<!-- 高级搜索选项 --> | <div class=\"advanced-search\" id=\"advancedSearch\" style=\"display: none;\">"
        }
      ],
      "codePreview": [
        "<!-- 高级搜索选项 -->",
        "<div class=\"advanced-search\" id=\"advancedSearch\" style=\"display: none;\">",
        "<div class=\"filter-row\">",
        "<div class=\"filter-group\">",
        "<label>日期范围:</label>",
        "<input type=\"date\" id=\"dateFrom\" class=\"date-input\">",
        "<span>至</span>",
        "<input type=\"date\" id=\"dateTo\" class=\"date-input\">",
        "</div>"
      ]
    },
    {
      "id": "9961ca0c",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "121-130",
          "preview": "<div class=\"filter-group\"> | <label>发送者类型:</label>"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "121-130",
          "preview": "<div class=\"filter-group\"> | <label>发送者类型:</label>"
        }
      ],
      "codePreview": [
        "<div class=\"filter-group\">",
        "<label>发送者类型:</label>",
        "<select id=\"senderTypeFilter\" class=\"filter-select\">",
        "<option value=\"\">全部</option>",
        "<option value=\"customer\">客户</option>",
        "<option value=\"staff\">客服</option>",
        "<option value=\"system\">系统</option>",
        "</select>",
        "</div>"
      ]
    },
    {
      "id": "c6aa1bb9",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "131-140",
          "preview": "</div> | <div class=\"filter-row\">"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "131-140",
          "preview": "</div> | <div class=\"filter-row\">"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"filter-row\">",
        "<div class=\"filter-group\">",
        "<label>消息类型:</label>",
        "<select id=\"messageTypeFilter\" class=\"filter-select\">",
        "<option value=\"\">全部</option>",
        "<option value=\"text\">文本</option>",
        "<option value=\"image\">图片</option>",
        "<option value=\"file\">文件</option>"
      ]
    },
    {
      "id": "7ebeff7a",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "141-150",
          "preview": "<option value=\"audio\">音频</option> | <option value=\"video\">视频</option> | <option value=\"emoji\">表情</option>"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "141-150",
          "preview": "<option value=\"audio\">音频</option> | <option value=\"video\">视频</option> | <option value=\"emoji\">表情</option>"
        }
      ],
      "codePreview": [
        "<option value=\"audio\">音频</option>",
        "<option value=\"video\">视频</option>",
        "<option value=\"emoji\">表情</option>",
        "</select>",
        "</div>",
        "<div class=\"filter-group\">",
        "<label>对话ID:</label>",
        "<input type=\"text\" id=\"conversationIdFilter\" placeholder=\"指定对话ID\" class=\"filter-input\">",
        "</div>"
      ]
    },
    {
      "id": "187a55b9",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "151-160",
          "preview": "</div> | <div class=\"filter-actions\">"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "151-160",
          "preview": "</div> | <div class=\"filter-actions\">"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"filter-actions\">",
        "<button id=\"advancedSearchBtn\" class=\"advanced-search-btn\">🔍 高级搜索</button>",
        "<button id=\"resetFiltersBtn\" class=\"reset-filters-btn\">🔄 重置筛选</button>",
        "<button id=\"saveFiltersBtn\" class=\"save-filters-btn\">💾 保存筛选</button>",
        "</div>",
        "</div>",
        "<!-- 搜索历史 -->"
      ]
    },
    {
      "id": "4333c062",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "161-170",
          "preview": "<div class=\"search-history\" id=\"searchHistoryPanel\" style=\"display: none;\"> | <div class=\"history-header\"> | <h4>📝 搜索历史</h4>"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "161-170",
          "preview": "<div class=\"search-history\" id=\"searchHistoryPanel\" style=\"display: none;\"> | <div class=\"history-header\"> | <h4>📝 搜索历史</h4>"
        }
      ],
      "codePreview": [
        "<div class=\"search-history\" id=\"searchHistoryPanel\" style=\"display: none;\">",
        "<div class=\"history-header\">",
        "<h4>📝 搜索历史</h4>",
        "<button id=\"clearHistoryBtn\" class=\"clear-history-btn\">🗑️ 清除历史</button>",
        "</div>",
        "<div class=\"history-list\" id=\"historyList\">",
        "<!-- 搜索历史将在这里显示 -->",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "746f1ef1",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "171-180",
          "preview": "<!-- 工具栏 --> | <div class=\"search-toolbar\"> | <button id=\"toggleAdvancedBtn\" class=\"toolbar-btn\">⚙️ 高级搜索</button>"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "171-180",
          "preview": "<!-- 工具栏 --> | <div class=\"search-toolbar\"> | <button id=\"toggleAdvancedBtn\" class=\"toolbar-btn\">⚙️ 高级搜索</button>"
        }
      ],
      "codePreview": [
        "<!-- 工具栏 -->",
        "<div class=\"search-toolbar\">",
        "<button id=\"toggleAdvancedBtn\" class=\"toolbar-btn\">⚙️ 高级搜索</button>",
        "<button id=\"toggleHistoryBtn\" class=\"toolbar-btn\">📝 搜索历史</button>",
        "<button id=\"exportResultsBtn\" class=\"toolbar-btn\">📤 导出结果</button>",
        "<button id=\"searchStatsBtn\" class=\"toolbar-btn\">📊 搜索统计</button>",
        "</div>",
        "</div>",
        "<!-- 搜索结果 -->"
      ]
    },
    {
      "id": "309c4206",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "181-190",
          "preview": "<div class=\"search-results\" id=\"searchResults\" style=\"display: none;\"> | <div class=\"results-header\"> | <h4 id=\"resultsTitle\">搜索结果</h4>"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "181-190",
          "preview": "<div class=\"search-results\" id=\"searchResults\" style=\"display: none;\"> | <div class=\"results-header\"> | <h4 id=\"resultsTitle\">搜索结果</h4>"
        }
      ],
      "codePreview": [
        "<div class=\"search-results\" id=\"searchResults\" style=\"display: none;\">",
        "<div class=\"results-header\">",
        "<h4 id=\"resultsTitle\">搜索结果</h4>",
        "<div class=\"results-info\">",
        "<span id=\"resultsCount\">0 条结果</span>",
        "<span id=\"searchTime\">0ms</span>",
        "</div>",
        "</div>",
        "<div class=\"results-list\" id=\"resultsList\">",
        "<!-- 搜索结果将在这里显示 -->"
      ]
    },
    {
      "id": "ea18c045",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "241-250",
          "preview": "this.toggleAdvancedSearch(); | });"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "241-250",
          "preview": "this.toggleAdvancedSearch(); | });"
        }
      ],
      "codePreview": [
        "this.toggleAdvancedSearch();",
        "});",
        "document.getElementById('toggleHistoryBtn')?.addEventListener('click', () => {",
        "this.toggleSearchHistory();",
        "});",
        "document.getElementById('exportResultsBtn')?.addEventListener('click', () => {",
        "this.exportSearchResults();",
        "});"
      ]
    },
    {
      "id": "135f5506",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "291-300",
          "preview": "const response = await fetch('/api/search/messages', { | method: 'POST',"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "291-300",
          "preview": "const response = await fetch('/api/search/messages', { | method: 'POST',"
        }
      ],
      "codePreview": [
        "const response = await fetch('/api/search/messages', {",
        "method: 'POST',",
        "headers: { 'Content-Type': 'application/json' },",
        "body: JSON.stringify({",
        "query,",
        "shopId: 'shop_1',",
        "userId: 'user_1',",
        "limit: 50,",
        "offset: 0"
      ]
    },
    {
      "id": "9c7f5f32",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "331-340",
          "preview": "const response = await fetch('/api/search/messages', { | method: 'POST', | headers: { 'Content-Type': 'application/json' },"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "331-340",
          "preview": "const response = await fetch('/api/search/messages', { | method: 'POST', | headers: { 'Content-Type': 'application/json' },"
        }
      ],
      "codePreview": [
        "const response = await fetch('/api/search/messages', {",
        "method: 'POST',",
        "headers: { 'Content-Type': 'application/json' },",
        "body: JSON.stringify({",
        "query,",
        "shopId: 'shop_1',",
        "userId: 'user_1',",
        "...filters,",
        "limit: 50,",
        "offset: 0"
      ]
    },
    {
      "id": "c971de0f",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "421-430",
          "preview": "<div class=\"result-header\"> | <div class=\"result-meta\"> | <span class=\"sender-info\">"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "421-430",
          "preview": "<div class=\"result-header\"> | <div class=\"result-meta\"> | <span class=\"sender-info\">"
        }
      ],
      "codePreview": [
        "<div class=\"result-header\">",
        "<div class=\"result-meta\">",
        "<span class=\"sender-info\">",
        "<span class=\"sender-type ${message.sender_type}\">${this.getSenderTypeLabel(message.sender_type)}</span>",
        "<span class=\"sender-name\">${message.sender_name || '未知'}</span>",
        "</span>",
        "<span class=\"message-time\">${this.formatDate(message.created_at)}</span>",
        "</div>",
        "<div class=\"result-actions\">",
        "<button class=\"view-conversation-btn\" data-conversation-id=\"${message.conversation_id}\">"
      ]
    },
    {
      "id": "f7a92bb6",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "431-440",
          "preview": "📄 查看对话 | </button> | <button class=\"export-message-btn\" data-message-id=\"${message.id}\">"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "431-440",
          "preview": "📄 查看对话 | </button> | <button class=\"export-message-btn\" data-message-id=\"${message.id}\">"
        }
      ],
      "codePreview": [
        "📄 查看对话",
        "</button>",
        "<button class=\"export-message-btn\" data-message-id=\"${message.id}\">",
        "📤 导出",
        "</button>",
        "</div>",
        "</div>",
        "<div class=\"result-content\">",
        "<div class=\"message-content\">",
        "${message.message_type === 'text' ? highlightedContent : this.formatNonTextMessage(message)}"
      ]
    },
    {
      "id": "07754226",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "481-490",
          "preview": "formatNonTextMessage(message) { | switch (message.message_type) { | case 'image':"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "481-490",
          "preview": "formatNonTextMessage(message) { | switch (message.message_type) { | case 'image':"
        }
      ],
      "codePreview": [
        "formatNonTextMessage(message) {",
        "switch (message.message_type) {",
        "case 'image':",
        "return `🖼️ 图片: ${message.file_name || '未知'}`;",
        "case 'file':",
        "return `📄 文件: ${message.file_name || '未知'}`;",
        "case 'audio':",
        "return `🎵 音频: ${message.file_name || '未知'}`;",
        "case 'video':",
        "return `🎬 视频: ${message.file_name || '未知'}`;"
      ]
    },
    {
      "id": "7452518b",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "541-550",
          "preview": "<div class=\"suggestion-item\" data-query=\"${suggestion.search_query}\"> | <span class=\"suggestion-text\">${suggestion.search_query}</span> | <span class=\"suggestion-count\">${suggestion.result_count} 条结果</span>"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "541-550",
          "preview": "<div class=\"suggestion-item\" data-query=\"${suggestion.search_query}\"> | <span class=\"suggestion-text\">${suggestion.search_query}</span> | <span class=\"suggestion-count\">${suggestion.result_count} 条结果</span>"
        }
      ],
      "codePreview": [
        "<div class=\"suggestion-item\" data-query=\"${suggestion.search_query}\">",
        "<span class=\"suggestion-text\">${suggestion.search_query}</span>",
        "<span class=\"suggestion-count\">${suggestion.result_count} 条结果</span>",
        "</div>",
        "`).join('');",
        "suggestionsPanel.querySelectorAll('.suggestion-item').forEach(item => {",
        "item.addEventListener('click', (e) => {",
        "const query = e.currentTarget.dataset.query;"
      ]
    },
    {
      "id": "65ad1c7b",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "621-630",
          "preview": "<span class=\"history-meta\"> | ${item.search_count} 次搜索 · ${item.result_count} 条结果 · ${this.formatDate(item.created_at)} | </span>"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "621-630",
          "preview": "<span class=\"history-meta\"> | ${item.search_count} 次搜索 · ${item.result_count} 条结果 · ${this.formatDate(item.created_at)} | </span>"
        }
      ],
      "codePreview": [
        "<span class=\"history-meta\">",
        "${item.search_count} 次搜索 · ${item.result_count} 条结果 · ${this.formatDate(item.created_at)}",
        "</span>",
        "</div>",
        "<button class=\"use-history-btn\">使用</button>",
        "</div>",
        "`).join('');",
        "historyList.querySelectorAll('.use-history-btn').forEach((btn, index) => {"
      ]
    },
    {
      "id": "1359590a",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "791-800",
          "preview": "<button class=\"close-stats-btn\">✖</button> | </div> | <div class=\"stats-body\">"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "791-800",
          "preview": "<button class=\"close-stats-btn\">✖</button> | </div> | <div class=\"stats-body\">"
        }
      ],
      "codePreview": [
        "<button class=\"close-stats-btn\">✖</button>",
        "</div>",
        "<div class=\"stats-body\">",
        "<div class=\"stats-grid\">",
        "<div class=\"stat-item\">",
        "<div class=\"stat-value\">${stats.totalSearches}</div>",
        "<div class=\"stat-label\">总搜索次数</div>",
        "</div>",
        "<div class=\"stat-item\">",
        "<div class=\"stat-value\">${stats.uniqueUsers}</div>"
      ]
    },
    {
      "id": "b96b26bc",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "801-810",
          "preview": "<div class=\"stat-label\">活跃用户</div> | </div> | <div class=\"stat-item\">"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "801-810",
          "preview": "<div class=\"stat-label\">活跃用户</div> | </div> | <div class=\"stat-item\">"
        }
      ],
      "codePreview": [
        "<div class=\"stat-label\">活跃用户</div>",
        "</div>",
        "<div class=\"stat-item\">",
        "<div class=\"stat-value\">${stats.avgSearchTime}ms</div>",
        "<div class=\"stat-label\">平均响应时间</div>",
        "</div>",
        "<div class=\"stat-item\">",
        "<div class=\"stat-value\">${stats.avgResultCount}</div>",
        "<div class=\"stat-label\">平均结果数</div>",
        "</div>"
      ]
    },
    {
      "id": "2b894b2e",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "811-820",
          "preview": "</div> | <div class=\"top-queries\">"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "811-820",
          "preview": "</div> | <div class=\"top-queries\">"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"top-queries\">",
        "<h4>🔥 热门搜索</h4>",
        "${stats.topQueries.map(query => `",
        "<div class=\"query-item\">",
        "<span class=\"query-text\">${query.search_query}</span>",
        "<span class=\"query-count\">${query.search_count} 次</span>",
        "</div>",
        "`).join('')}"
      ]
    },
    {
      "id": "b10653f1",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "851-860",
          "preview": "headers: { 'Content-Type': 'application/json' }, | body: JSON.stringify({ daysToKeep: 0 }) | });"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "851-860",
          "preview": "headers: { 'Content-Type': 'application/json' }, | body: JSON.stringify({ daysToKeep: 0 }) | });"
        }
      ],
      "codePreview": [
        "headers: { 'Content-Type': 'application/json' },",
        "body: JSON.stringify({ daysToKeep: 0 })",
        "});",
        "const result = await response.json();",
        "if (result.success) {",
        "this.searchHistory = [];",
        "this.displaySearchHistory();",
        "this.showMessage('搜索历史已清除', 'success');"
      ]
    },
    {
      "id": "c60091dc",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "11-20",
          "preview": "class MobileCustomerService { | constructor() { | this.currentUser = null;"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "11-20",
          "preview": "class MobileCustomerService { | constructor() { | this.currentUser = null;"
        }
      ],
      "codePreview": [
        "class MobileCustomerService {",
        "constructor() {",
        "this.currentUser = null;",
        "this.shops = [];",
        "this.conversations = {};",
        "this.currentShop = null;",
        "this.currentConversation = null;",
        "this.unreadCounts = {};",
        "this.websocket = null;",
        "this.pageStack = ['home'];"
      ]
    },
    {
      "id": "4989b49e",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "291-300",
          "preview": "<div class=\"stats-summary\"> | <div class=\"stats-item\"> | <div class=\"stats-number\">${this.shops.length}</div>"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "291-300",
          "preview": "<div class=\"stats-summary\"> | <div class=\"stats-item\"> | <div class=\"stats-number\">${this.shops.length}</div>"
        }
      ],
      "codePreview": [
        "<div class=\"stats-summary\">",
        "<div class=\"stats-item\">",
        "<div class=\"stats-number\">${this.shops.length}</div>",
        "<div class=\"stats-label\">总店铺</div>",
        "</div>",
        "<div class=\"stats-item highlight\">",
        "<div class=\"stats-number\">${totalUnread}</div>",
        "<div class=\"stats-label\">未读消息</div>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "a6f96901",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "321-330",
          "preview": "<div class=\"shop-avatar\"> | <div class=\"avatar-text\">${shop.name.charAt(0)}</div> | ${hasUnread ? `<div class=\"unread-badge\">${unreadCount > 99 ? '99+' : unreadCount}</div>` : ''}"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "321-330",
          "preview": "<div class=\"shop-avatar\"> | <div class=\"avatar-text\">${shop.name.charAt(0)}</div> | ${hasUnread ? `<div class=\"unread-badge\">${unreadCount > 99 ? '99+' : unreadCount}</div>` : ''}"
        }
      ],
      "codePreview": [
        "<div class=\"shop-avatar\">",
        "<div class=\"avatar-text\">${shop.name.charAt(0)}</div>",
        "${hasUnread ? `<div class=\"unread-badge\">${unreadCount > 99 ? '99+' : unreadCount}</div>` : ''}",
        "</div>",
        "<div class=\"shop-info\">",
        "<div class=\"shop-name\">${shop.name}</div>",
        "<div class=\"shop-domain\">${shop.domain}</div>",
        "<div class=\"shop-status ${shop.status}\">${this.getShopStatusText(shop.status)}</div>",
        "</div>",
        "<div class=\"shop-meta\">"
      ]
    },
    {
      "id": "886d0d9b",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "401-410",
          "preview": "const content = document.getElementById('messagesContent'); | const conversations = this.conversations[this.currentShop.id] || [];"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "401-410",
          "preview": "const content = document.getElementById('messagesContent'); | const conversations = this.conversations[this.currentShop.id] || [];"
        }
      ],
      "codePreview": [
        "const content = document.getElementById('messagesContent');",
        "const conversations = this.conversations[this.currentShop.id] || [];",
        "if (conversations.length === 0) {",
        "content.innerHTML = `",
        "<div class=\"empty-state\">",
        "<div class=\"empty-icon\">💬</div>",
        "<div class=\"empty-title\">暂无对话</div>",
        "<div class=\"empty-subtitle\">等待客户发起对话</div>",
        "</div>"
      ]
    },
    {
      "id": "5d5325c5",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "431-440",
          "preview": "return ` | <div class=\"conversation-item ${hasUnread ? 'has-unread' : ''}\" | onclick=\"window.mobileCustomerService.openChat('${conversation.userId}')\">"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "431-440",
          "preview": "return ` | <div class=\"conversation-item ${hasUnread ? 'has-unread' : ''}\" | onclick=\"window.mobileCustomerService.openChat('${conversation.userId}')\">"
        }
      ],
      "codePreview": [
        "return `",
        "<div class=\"conversation-item ${hasUnread ? 'has-unread' : ''}\"",
        "onclick=\"window.mobileCustomerService.openChat('${conversation.userId}')\">",
        "<div class=\"user-avatar\">",
        "<div class=\"avatar-text\">${conversation.userName.charAt(0)}</div>",
        "${hasUnread ? `<div class=\"unread-badge\">${conversation.unreadCount > 99 ? '99+' : conversation.unreadCount}</div>` : ''}",
        "</div>",
        "<div class=\"conversation-info\">",
        "<div class=\"conversation-meta\">",
        "<div class=\"user-name\">${conversation.userName}</div>"
      ]
    },
    {
      "id": "de412350",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "441-450",
          "preview": "<div class=\"message-time\">${lastMessageTime}</div> | </div> | <div class=\"last-message\">${conversation.lastMessage || '暂无消息'}</div>"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "441-450",
          "preview": "<div class=\"message-time\">${lastMessageTime}</div> | </div> | <div class=\"last-message\">${conversation.lastMessage || '暂无消息'}</div>"
        }
      ],
      "codePreview": [
        "<div class=\"message-time\">${lastMessageTime}</div>",
        "</div>",
        "<div class=\"last-message\">${conversation.lastMessage || '暂无消息'}</div>",
        "</div>",
        "<div class=\"conversation-actions\">",
        "<div class=\"chevron\">›</div>",
        "</div>",
        "</div>",
        "`;",
        "}"
      ]
    },
    {
      "id": "7bfe633f",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "11-20",
          "preview": "this.currentUser = null; | this.shops = []; | this.conversations = {};"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "11-20",
          "preview": "this.currentUser = null; | this.shops = []; | this.conversations = {};"
        }
      ],
      "codePreview": [
        "this.currentUser = null;",
        "this.shops = [];",
        "this.conversations = {};",
        "this.currentShop = null;",
        "this.currentConversation = null;",
        "this.unreadCounts = {};",
        "this.websocket = null;",
        "this.pageStack = ['home'];",
        "this.isInitialized = false;"
      ]
    },
    {
      "id": "d739b66d",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "91-100",
          "preview": "const capabilities = { | camera: false, | microphone: false,"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "91-100",
          "preview": "const capabilities = { | camera: false, | microphone: false,"
        }
      ],
      "codePreview": [
        "const capabilities = {",
        "camera: false,",
        "microphone: false,",
        "geolocation: false,",
        "touchscreen: false,",
        "vibration: false,",
        "notification: false,",
        "orientation: false,",
        "battery: false",
        "};"
      ]
    },
    {
      "id": "866e6fa6",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "241-250",
          "preview": "showPullToRefreshIndicator(distance) { | let indicator = document.getElementById('pullToRefreshIndicator'); | if (!indicator) {"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "241-250",
          "preview": "showPullToRefreshIndicator(distance) { | let indicator = document.getElementById('pullToRefreshIndicator'); | if (!indicator) {"
        }
      ],
      "codePreview": [
        "showPullToRefreshIndicator(distance) {",
        "let indicator = document.getElementById('pullToRefreshIndicator');",
        "if (!indicator) {",
        "indicator = document.createElement('div');",
        "indicator.id = 'pullToRefreshIndicator';",
        "indicator.innerHTML = `",
        "<div class=\"pull-indicator\">",
        "<div class=\"pull-icon\">⬇️</div>",
        "<div class=\"pull-text\">下拉刷新</div>",
        "</div>"
      ]
    },
    {
      "id": "182c89b1",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "291-300",
          "preview": "case 'home': | await this.loadShops(); | await this.loadUnreadCounts();"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "291-300",
          "preview": "case 'home': | await this.loadShops(); | await this.loadUnreadCounts();"
        }
      ],
      "codePreview": [
        "case 'home':",
        "await this.loadShops();",
        "await this.loadUnreadCounts();",
        "break;",
        "case 'shop':",
        "await this.loadConversations(this.currentShop.id);",
        "break;",
        "case 'chat':",
        "await this.loadMessages(this.currentConversation.id);",
        "break;"
      ]
    },
    {
      "id": "10294b21",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "341-350",
          "preview": "*/ | showCameraModal(stream) { | const modal = document.createElement('div');"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "341-350",
          "preview": "*/ | showCameraModal(stream) { | const modal = document.createElement('div');"
        }
      ],
      "codePreview": [
        "showCameraModal(stream) {",
        "const modal = document.createElement('div');",
        "modal.className = 'camera-modal';",
        "modal.innerHTML = `",
        "<div class=\"camera-container\">",
        "<video id=\"cameraPreview\" autoplay playsinline></video>",
        "<canvas id=\"photoCanvas\" style=\"display: none;\"></canvas>",
        "<div class=\"camera-controls\">",
        "<button class=\"camera-btn cancel-btn\" onclick=\"this.closest('.camera-modal').remove()\">取消</button>"
      ]
    },
    {
      "id": "6e9be6b9",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "481-490",
          "preview": "<div class=\"recording-animation\">🎤</div> | <div class=\"recording-text\">正在录音...</div> | <div class=\"recording-timer\">00:00</div>"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "481-490",
          "preview": "<div class=\"recording-animation\">🎤</div> | <div class=\"recording-text\">正在录音...</div> | <div class=\"recording-timer\">00:00</div>"
        }
      ],
      "codePreview": [
        "<div class=\"recording-animation\">🎤</div>",
        "<div class=\"recording-text\">正在录音...</div>",
        "<div class=\"recording-timer\">00:00</div>",
        "</div>",
        "<div class=\"recording-controls\">",
        "<button class=\"recording-btn cancel-btn\" onclick=\"enhancedMobileService.cancelVoiceRecording()\">取消</button>",
        "<button class=\"recording-btn stop-btn\" onclick=\"enhancedMobileService.stopVoiceRecording()\">发送</button>",
        "</div>",
        "`;"
      ]
    },
    {
      "id": "96827653",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "601-610",
          "preview": "* 显示位置确认对话框 | */ | showLocationConfirmDialog(latitude, longitude, address) {"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "601-610",
          "preview": "* 显示位置确认对话框 | */ | showLocationConfirmDialog(latitude, longitude, address) {"
        }
      ],
      "codePreview": [
        "showLocationConfirmDialog(latitude, longitude, address) {",
        "const modal = document.createElement('div');",
        "modal.className = 'location-modal';",
        "modal.innerHTML = `",
        "<div class=\"location-container\">",
        "<div class=\"location-header\">",
        "<h3>分享位置</h3>",
        "</div>"
      ]
    },
    {
      "id": "861cb778",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "611-620",
          "preview": "<div class=\"location-content\"> | <div class=\"location-icon\">📍</div> | <div class=\"location-info\">"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "611-620",
          "preview": "<div class=\"location-content\"> | <div class=\"location-icon\">📍</div> | <div class=\"location-info\">"
        }
      ],
      "codePreview": [
        "<div class=\"location-content\">",
        "<div class=\"location-icon\">📍</div>",
        "<div class=\"location-info\">",
        "<div class=\"location-address\">${address}</div>",
        "<div class=\"location-coords\">坐标: ${latitude.toFixed(4)}, ${longitude.toFixed(4)}</div>",
        "</div>",
        "</div>",
        "<div class=\"location-controls\">",
        "<button class=\"location-btn cancel-btn\" onclick=\"this.closest('.location-modal').remove()\">取消</button>",
        "<button class=\"location-btn send-btn\" onclick=\"enhancedMobileService.sendLocation(${latitude}, ${longitude}, '${address}')\">发送位置</button>"
      ]
    },
    {
      "id": "0e3eda70",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "631-640",
          "preview": "async sendLocation(latitude, longitude, address) { | const locationData = { | type: 'location',"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "631-640",
          "preview": "async sendLocation(latitude, longitude, address) { | const locationData = { | type: 'location',"
        }
      ],
      "codePreview": [
        "async sendLocation(latitude, longitude, address) {",
        "const locationData = {",
        "type: 'location',",
        "latitude: latitude,",
        "longitude: longitude,",
        "address: address,",
        "timestamp: Date.now()",
        "};",
        "await this.sendMessage(JSON.stringify(locationData), 'location');"
      ]
    },
    {
      "id": "b2baad34",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "651-660",
          "preview": "*/ | getLocationErrorMessage(error) { | switch (error.code) {"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "651-660",
          "preview": "*/ | getLocationErrorMessage(error) { | switch (error.code) {"
        }
      ],
      "codePreview": [
        "getLocationErrorMessage(error) {",
        "switch (error.code) {",
        "case error.PERMISSION_DENIED:",
        "return '用户拒绝了地理定位请求';",
        "case error.POSITION_UNAVAILABLE:",
        "return '位置信息不可用';",
        "case error.TIMEOUT:",
        "return '请求位置信息超时';",
        "default:"
      ]
    },
    {
      "id": "4031d6a8",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "771-780",
          "preview": "lastTapTime = currentTime; | });"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "771-780",
          "preview": "lastTapTime = currentTime; | });"
        }
      ],
      "codePreview": [
        "lastTapTime = currentTime;",
        "});",
        "let pressTimer;",
        "document.addEventListener('touchstart', (e) => {",
        "pressTimer = setTimeout(() => {",
        "this.handleLongPress(e);",
        "}, 500);",
        "});"
      ]
    },
    {
      "id": "56b68429",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "11-20",
          "preview": "class MobileEcommerceCustomerService { | constructor() {"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "11-20",
          "preview": "class MobileEcommerceCustomerService { | constructor() {"
        }
      ],
      "codePreview": [
        "class MobileEcommerceCustomerService {",
        "constructor() {",
        "this.currentUser = null;",
        "this.shops = [];",
        "this.conversations = {};",
        "this.currentShop = null;",
        "this.currentConversation = null;",
        "this.unreadCounts = {};",
        "this.totalUnreadCount = 0;"
      ]
    },
    {
      "id": "80cbf850",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "151-160",
          "preview": "this.handleNewMessage(data); | break; | case 'message_read':"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "151-160",
          "preview": "this.handleNewMessage(data); | break; | case 'message_read':"
        }
      ],
      "codePreview": [
        "this.handleNewMessage(data);",
        "break;",
        "case 'message_read':",
        "this.handleMessageRead(data);",
        "break;",
        "case 'typing':",
        "this.handleTyping(data);",
        "break;",
        "case 'user_online':",
        "this.handleUserOnline(data);"
      ]
    },
    {
      "id": "84437070",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "271-280",
          "preview": "<div class=\"mobile-customer-service\"> | <!-- 页面头部 --> | <div class=\"page-header\" id=\"pageHeader\">"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "271-280",
          "preview": "<div class=\"mobile-customer-service\"> | <!-- 页面头部 --> | <div class=\"page-header\" id=\"pageHeader\">"
        }
      ],
      "codePreview": [
        "<div class=\"mobile-customer-service\">",
        "<!-- 页面头部 -->",
        "<div class=\"page-header\" id=\"pageHeader\">",
        "<button class=\"back-btn\" id=\"backBtn\" style=\"display: none;\" onclick=\"mobileCustomerService.goBack()\">",
        "← 返回",
        "</button>",
        "<div class=\"page-title\" id=\"pageTitle\">消息中心</div>",
        "<button class=\"refresh-btn\" id=\"refreshBtn\" onclick=\"mobileCustomerService.refresh()\">",
        "🔄",
        "</button>"
      ]
    },
    {
      "id": "35d4498b",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "281-290",
          "preview": "</div> | <!-- 页面内容 -->"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "281-290",
          "preview": "</div> | <!-- 页面内容 -->"
        }
      ],
      "codePreview": [
        "</div>",
        "<!-- 页面内容 -->",
        "<div class=\"page-content\" id=\"pageContent\">",
        "<div class=\"loading\">正在加载...</div>",
        "</div>",
        "<!-- 聊天输入框（仅在聊天页面显示） -->",
        "<div class=\"chat-input-container\" id=\"chatInputContainer\" style=\"display: none;\">",
        "<div class=\"chat-input\">"
      ]
    },
    {
      "id": "c8bb5ea4",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "311-320",
          "preview": "flex-direction: column; | background: #f5f5f5; | }"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "311-320",
          "preview": "flex-direction: column; | background: #f5f5f5; | }"
        }
      ],
      "codePreview": [
        "flex-direction: column;",
        "background: #f5f5f5;",
        "}",
        ".page-header {",
        "height: 50px;",
        "background: #fff;",
        "border-bottom: 1px solid #e9ecef;",
        "display: flex;",
        "align-items: center;"
      ]
    },
    {
      "id": "0d0cdfe3",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "321-330",
          "preview": "padding: 0 15px; | position: relative; | }"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "321-330",
          "preview": "padding: 0 15px; | position: relative; | }"
        }
      ],
      "codePreview": [
        "padding: 0 15px;",
        "position: relative;",
        "}",
        ".back-btn {",
        "background: none;",
        "border: none;",
        "font-size: 16px;",
        "color: #007AFF;",
        "cursor: pointer;"
      ]
    },
    {
      "id": "88d1eca8",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "341-350",
          "preview": ".refresh-btn { | background: none; | border: none;"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "341-350",
          "preview": ".refresh-btn { | background: none; | border: none;"
        }
      ],
      "codePreview": [
        ".refresh-btn {",
        "background: none;",
        "border: none;",
        "font-size: 16px;",
        "cursor: pointer;",
        "}",
        ".page-content {",
        "flex: 1;",
        "overflow-y: auto;"
      ]
    },
    {
      "id": "2a30393a",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "381-390",
          "preview": ".shop-item { | display: flex; | align-items: center;"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "381-390",
          "preview": ".shop-item { | display: flex; | align-items: center;"
        }
      ],
      "codePreview": [
        ".shop-item {",
        "display: flex;",
        "align-items: center;",
        "padding: 15px;",
        "border-bottom: 1px solid #f0f0f0;",
        "cursor: pointer;",
        "transition: background 0.2s;",
        "}",
        ".shop-item:hover {"
      ]
    },
    {
      "id": "f4640873",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "401-410",
          "preview": "height: 50px; | border-radius: 25px; | background: linear-gradient(135deg, #FF6B6B 0%, #4ECDC4 100%);"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "401-410",
          "preview": "height: 50px; | border-radius: 25px; | background: linear-gradient(135deg, #FF6B6B 0%, #4ECDC4 100%);"
        }
      ],
      "codePreview": [
        "height: 50px;",
        "border-radius: 25px;",
        "background: linear-gradient(135deg, #FF6B6B 0%, #4ECDC4 100%);",
        "display: flex;",
        "align-items: center;",
        "justify-content: center;",
        "color: white;",
        "font-weight: bold;",
        "font-size: 18px;",
        "}"
      ]
    },
    {
      "id": "cf669d41",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "411-420",
          "preview": ".unread-badge { | position: absolute;"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "411-420",
          "preview": ".unread-badge { | position: absolute;"
        }
      ],
      "codePreview": [
        ".unread-badge {",
        "position: absolute;",
        "top: -5px;",
        "right: -5px;",
        "background: #FF3B30;",
        "color: white;",
        "border-radius: 12px;",
        "min-width: 24px;",
        "height: 24px;"
      ]
    },
    {
      "id": "a3d25a85",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "421-430",
          "preview": "display: flex; | align-items: center; | justify-content: center;"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "421-430",
          "preview": "display: flex; | align-items: center; | justify-content: center;"
        }
      ],
      "codePreview": [
        "display: flex;",
        "align-items: center;",
        "justify-content: center;",
        "font-size: 12px;",
        "font-weight: bold;",
        "}",
        ".shop-info {",
        "flex: 1;",
        "min-width: 0;"
      ]
    },
    {
      "id": "a0baa026",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "431-440",
          "preview": "} | .shop-name {"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "431-440",
          "preview": "} | .shop-name {"
        }
      ],
      "codePreview": [
        "}",
        ".shop-name {",
        "font-size: 16px;",
        "font-weight: 600;",
        "color: #333;",
        "margin-bottom: 5px;",
        "overflow: hidden;",
        "text-overflow: ellipsis;",
        "white-space: nowrap;"
      ]
    },
    {
      "id": "65a3c3c7",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "451-460",
          "preview": "color: #999; | overflow: hidden; | text-overflow: ellipsis;"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "451-460",
          "preview": "color: #999; | overflow: hidden; | text-overflow: ellipsis;"
        }
      ],
      "codePreview": [
        "color: #999;",
        "overflow: hidden;",
        "text-overflow: ellipsis;",
        "white-space: nowrap;",
        "}",
        ".shop-meta {",
        "text-align: right;",
        "color: #999;",
        "font-size: 12px;"
      ]
    },
    {
      "id": "1b3ab99a",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "471-480",
          "preview": "padding: 0; | }"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "471-480",
          "preview": "padding: 0; | }"
        }
      ],
      "codePreview": [
        "padding: 0;",
        "}",
        ".conversation-item {",
        "display: flex;",
        "align-items: center;",
        "padding: 15px;",
        "border-bottom: 1px solid #f0f0f0;",
        "cursor: pointer;",
        "transition: background 0.2s;"
      ]
    },
    {
      "id": "975b16b6",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "491-500",
          "preview": "background: linear-gradient(135deg, #4ECDC4 0%, #44A08D 100%); | display: flex; | align-items: center;"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "491-500",
          "preview": "background: linear-gradient(135deg, #4ECDC4 0%, #44A08D 100%); | display: flex; | align-items: center;"
        }
      ],
      "codePreview": [
        "background: linear-gradient(135deg, #4ECDC4 0%, #44A08D 100%);",
        "display: flex;",
        "align-items: center;",
        "justify-content: center;",
        "color: white;",
        "font-weight: bold;",
        "margin-right: 15px;",
        "}",
        ".conversation-info {"
      ]
    },
    {
      "id": "63663a2e",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "561-570",
          "preview": ".message.user .message-bubble { | background: #007AFF; | color: white;"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "561-570",
          "preview": ".message.user .message-bubble { | background: #007AFF; | color: white;"
        }
      ],
      "codePreview": [
        ".message.user .message-bubble {",
        "background: #007AFF;",
        "color: white;",
        "border-bottom-right-radius: 5px;",
        "}",
        ".message.admin .message-bubble {",
        "background: #e9ecef;",
        "color: #333;",
        "border-bottom-left-radius: 5px;"
      ]
    },
    {
      "id": "935237f0",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "581-590",
          "preview": ".chat-input-container { | background: #fff; | border-top: 1px solid #e9ecef;"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "581-590",
          "preview": ".chat-input-container { | background: #fff; | border-top: 1px solid #e9ecef;"
        }
      ],
      "codePreview": [
        ".chat-input-container {",
        "background: #fff;",
        "border-top: 1px solid #e9ecef;",
        "padding: 15px;",
        "}",
        ".chat-input {",
        "display: flex;",
        "align-items: center;",
        "gap: 10px;"
      ]
    },
    {
      "id": "54f8c97c",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "601-610",
          "preview": "#sendBtn { | background: #007AFF;"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "601-610",
          "preview": "#sendBtn { | background: #007AFF;"
        }
      ],
      "codePreview": [
        "#sendBtn {",
        "background: #007AFF;",
        "color: white;",
        "border: none;",
        "border-radius: 25px;",
        "padding: 12px 20px;",
        "font-size: 16px;",
        "cursor: pointer;",
        "}"
      ]
    },
    {
      "id": "143df671",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "611-620",
          "preview": "/* 空状态样式 */ | .empty-state {"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "611-620",
          "preview": "/* 空状态样式 */ | .empty-state {"
        }
      ],
      "codePreview": [
        ".empty-state {",
        "display: flex;",
        "flex-direction: column;",
        "align-items: center;",
        "justify-content: center;",
        "padding: 60px 20px;",
        "color: #999;",
        "text-align: center;"
      ]
    },
    {
      "id": "85815d47",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "671-680",
          "preview": "this.updatePageHeader('消息中心', false); | const content = document.getElementById('pageContent');"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "671-680",
          "preview": "this.updatePageHeader('消息中心', false); | const content = document.getElementById('pageContent');"
        }
      ],
      "codePreview": [
        "this.updatePageHeader('消息中心', false);",
        "const content = document.getElementById('pageContent');",
        "if (!content) return;",
        "const html = `",
        "<div class=\"message-overview\">",
        "<div class=\"overview-stats\">",
        "<div class=\"total-unread\">${this.totalUnreadCount}</div>",
        "<div class=\"stats-label\">条未读消息</div>"
      ]
    },
    {
      "id": "6090ae6b",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "701-710",
          "preview": "return ` | <div class=\"shop-item\" onclick=\"mobileCustomerService.showShopConversations('${shop.id}')\">"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "701-710",
          "preview": "return ` | <div class=\"shop-item\" onclick=\"mobileCustomerService.showShopConversations('${shop.id}')\">"
        }
      ],
      "codePreview": [
        "return `",
        "<div class=\"shop-item\" onclick=\"mobileCustomerService.showShopConversations('${shop.id}')\">",
        "<div class=\"shop-avatar\">",
        "<div class=\"avatar-circle\">${shop.name.charAt(0).toUpperCase()}</div>",
        "${unreadCount > 0 ? `<div class=\"unread-badge\">${unreadCount}</div>` : ''}",
        "</div>",
        "<div class=\"shop-info\">",
        "<div class=\"shop-name\">${shop.name}</div>",
        "<div class=\"shop-domain\">${shop.domain}</div>"
      ]
    },
    {
      "id": "f0bc0408",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "801-810",
          "preview": "*/ | renderConversationItem(conversation) { | const unreadCount = conversation.unread_count || 0;"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "801-810",
          "preview": "*/ | renderConversationItem(conversation) { | const unreadCount = conversation.unread_count || 0;"
        }
      ],
      "codePreview": [
        "renderConversationItem(conversation) {",
        "const unreadCount = conversation.unread_count || 0;",
        "return `",
        "<div class=\"conversation-item\" onclick=\"mobileCustomerService.showChat('${conversation.user_id}')\">",
        "<div class=\"user-avatar\">${(conversation.user_name || 'U').charAt(0).toUpperCase()}</div>",
        "<div class=\"conversation-info\">",
        "<div class=\"conversation-meta\">",
        "<div class=\"user-name\">${conversation.user_name || '匿名用户'}</div>"
      ]
    },
    {
      "id": "40f4fa62",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "931-940",
          "preview": "const response = await fetch('/api/messages/send', { | method: 'POST', | headers: {"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "931-940",
          "preview": "const response = await fetch('/api/messages/send', { | method: 'POST', | headers: {"
        }
      ],
      "codePreview": [
        "const response = await fetch('/api/messages/send', {",
        "method: 'POST',",
        "headers: {",
        "'Content-Type': 'application/json',",
        "'X-Session-Id': sessionId",
        "},",
        "body: JSON.stringify({",
        "shopId: this.currentShop.id,",
        "userId: this.currentConversation.userId,",
        "content: message,"
      ]
    },
    {
      "id": "7945fdbb",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "1021-1030",
          "preview": "this.viewStack.pop(); | const previousView = this.viewStack[this.viewStack.length - 1];"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "1021-1030",
          "preview": "this.viewStack.pop(); | const previousView = this.viewStack[this.viewStack.length - 1];"
        }
      ],
      "codePreview": [
        "this.viewStack.pop();",
        "const previousView = this.viewStack[this.viewStack.length - 1];",
        "switch (previousView) {",
        "case 'overview':",
        "this.showMessageOverview();",
        "break;",
        "case 'shop':",
        "this.renderShopConversations();",
        "this.updatePageHeader(this.currentShop?.name || '店铺', true);"
      ]
    },
    {
      "id": "6b984479",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "1041-1050",
          "preview": "* 刷新当前页面 | */ | async refresh() {"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "1041-1050",
          "preview": "* 刷新当前页面 | */ | async refresh() {"
        }
      ],
      "codePreview": [
        "async refresh() {",
        "switch (this.currentView) {",
        "case 'overview':",
        "await this.loadUnreadCounts();",
        "this.showMessageOverview();",
        "break;",
        "case 'shop':",
        "if (this.currentShop) {"
      ]
    },
    {
      "id": "73363d51",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "1051-1060",
          "preview": "await this.loadShopConversations(this.currentShop.id); | this.renderShopConversations(); | }"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "1051-1060",
          "preview": "await this.loadShopConversations(this.currentShop.id); | this.renderShopConversations(); | }"
        }
      ],
      "codePreview": [
        "await this.loadShopConversations(this.currentShop.id);",
        "this.renderShopConversations();",
        "}",
        "break;",
        "case 'chat':",
        "if (this.currentShop && this.currentConversation) {",
        "await this.loadChatMessages(this.currentShop.id, this.currentConversation.userId);",
        "this.renderChatMessages();",
        "}",
        "break;"
      ]
    },
    {
      "id": "1fefdb17",
      "size": 10,
      "occurrences": 2,
      "duplicateLines": 10,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "1151-1160",
          "preview": "const date = new Date(timestamp); | const now = new Date();"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "1151-1160",
          "preview": "const date = new Date(timestamp); | const now = new Date();"
        }
      ],
      "codePreview": [
        "const date = new Date(timestamp);",
        "const now = new Date();",
        "const diff = now - date;",
        "if (diff < 60000) {",
        "return '刚刚';",
        "} else if (diff < 3600000) {",
        "return `${Math.floor(diff / 60000)}分钟前`;",
        "} else if (date.toDateString() === now.toDateString()) {"
      ]
    },
    {
      "id": "958041ed",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "analyze-code-duplication-improved.js",
          "lines": "15-21",
          "preview": "this.duplicateBlocks = new Map(); | this.statistics = { | totalFiles: 0,"
        },
        {
          "file": "analyze-code-duplication.js",
          "lines": "15-21",
          "preview": "this.duplicateBlocks = new Map(); | this.statistics = { | totalFiles: 0,"
        }
      ],
      "codePreview": [
        "this.duplicateBlocks = new Map();",
        "this.statistics = {",
        "totalFiles: 0,",
        "totalLines: 0,",
        "duplicateLines: 0,",
        "duplicateBlocks: 0,",
        "duplicationRate: 0"
      ]
    },
    {
      "id": "91ed093d",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "scripts\\repair-image-messages.js",
          "lines": "148-154",
          "preview": "(id, original_name, filename, file_path, file_size, mime_type, upload_time, uploader_id) | VALUES (?, ?, ?, ?, ?, ?, ?, ?)`, | ["
        },
        {
          "file": "scripts\\smart-repair-images.js",
          "lines": "134-140",
          "preview": "(id, original_name, filename, file_path, file_size, mime_type, upload_time, uploader_id) | VALUES (?, ?, ?, ?, ?, ?, ?, ?)`, | ["
        }
      ],
      "codePreview": [
        "(id, original_name, filename, file_path, file_size, mime_type, upload_time, uploader_id)",
        "VALUES (?, ?, ?, ?, ?, ?, ?, ?)`,",
        "[",
        "fileId,",
        "filename,",
        "filename,",
        "path.join('uploads/image', filename),"
      ]
    },
    {
      "id": "56dbb0d0",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "scripts\\repair-image-messages.js",
          "lines": "176-182",
          "preview": "const mimeTypes = { | '.jpg': 'image/jpeg', | '.jpeg': 'image/jpeg',"
        },
        {
          "file": "scripts\\smart-repair-images.js",
          "lines": "162-168",
          "preview": "const mimeTypes = { | '.jpg': 'image/jpeg', | '.jpeg': 'image/jpeg',"
        }
      ],
      "codePreview": [
        "const mimeTypes = {",
        "'.jpg': 'image/jpeg',",
        "'.jpeg': 'image/jpeg',",
        "'.png': 'image/png',",
        "'.gif': 'image/gif',",
        "'.webp': 'image/webp'",
        "};"
      ]
    },
    {
      "id": "33cd5a4e",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "src\\client-api\\ClientApiHandler.js",
          "lines": "162-168",
          "preview": "return res.status(401).json({ | success: false, | error: {"
        },
        {
          "file": "src\\client-api\\ClientApiHandler.js",
          "lines": "176-182",
          "preview": "return res.status(401).json({ | success: false, | error: {"
        }
      ],
      "codePreview": [
        "return res.status(401).json({",
        "success: false,",
        "error: {",
        "code: validation.code,",
        "message: validation.message",
        "}",
        "});"
      ]
    },
    {
      "id": "6abf2bd5",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "src\\client-api\\message-handler-v2.js",
          "lines": "190-196",
          "preview": "const lastId = parseInt(req.query.lastId) || 0; | const limit = Math.min(parseInt(req.query.limit) || 50, 100);"
        },
        {
          "file": "src\\client-api\\message-handler.js",
          "lines": "120-126",
          "preview": "const lastId = parseInt(req.query.lastId) || 0; | const limit = Math.min(parseInt(req.query.limit) || 50, 100);"
        }
      ],
      "codePreview": [
        "const lastId = parseInt(req.query.lastId) || 0;",
        "const limit = Math.min(parseInt(req.query.limit) || 50, 100);",
        "if (!userId) {",
        "return res.status(400).json({",
        "success: false,",
        "error: {"
      ]
    },
    {
      "id": "9283558a",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "src\\client-api\\message-handler.js",
          "lines": "148-154",
          "preview": "return res.status(401).json({ | success: false, | error: {"
        },
        {
          "file": "src\\client-api\\message-handler.js",
          "lines": "323-329",
          "preview": "return res.status(401).json({ | success: false, | error: {"
        }
      ],
      "codePreview": [
        "return res.status(401).json({",
        "success: false,",
        "error: {",
        "code: 'AUTHENTICATION_REQUIRED',",
        "message: '需要认证'",
        "}",
        "});"
      ]
    },
    {
      "id": "3dae5583",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "src\\modules\\ComprehensiveSecurityModule.js",
          "lines": "169-175",
          "preview": "is_active INTEGER DEFAULT 1, | last_activity_at TEXT NOT NULL, | expires_at TEXT NOT NULL,"
        },
        {
          "file": "src\\schemas\\SecurityModuleSchemaConfig.js",
          "lines": "43-49",
          "preview": "is_active INTEGER DEFAULT 1, | last_activity_at TEXT NOT NULL, | expires_at TEXT NOT NULL,"
        }
      ],
      "codePreview": [
        "is_active INTEGER DEFAULT 1,",
        "last_activity_at TEXT NOT NULL,",
        "expires_at TEXT NOT NULL,",
        "security_flags TEXT DEFAULT '{}',",
        "created_at TEXT NOT NULL,",
        "INDEX(user_id, is_active),",
        "INDEX(session_token),"
      ]
    },
    {
      "id": "ab77f33e",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "src\\schemas\\AIAssistantSchemaConfig.js",
          "lines": "22-28",
          "preview": "answer TEXT NOT NULL, | keywords TEXT, -- JSON格式存储关键词 | confidence_score REAL DEFAULT 0.8,"
        },
        {
          "file": "src\\services\\KnowledgeBaseService.js",
          "lines": "36-42",
          "preview": "answer TEXT NOT NULL, | keywords TEXT, -- JSON格式存储关键词 | confidence_score REAL DEFAULT 0.8,"
        }
      ],
      "codePreview": [
        "answer TEXT NOT NULL,",
        "keywords TEXT, -- JSON格式存储关键词",
        "confidence_score REAL DEFAULT 0.8,",
        "usage_count INTEGER DEFAULT 0,",
        "effectiveness_score REAL DEFAULT 0.0,",
        "source_type TEXT CHECK(source_type IN ('manual', 'auto_generated', 'learned', 'imported')),",
        "tags TEXT, -- JSON格式存储标签"
      ]
    },
    {
      "id": "ee3a50f6",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "22-28",
          "preview": "maxFileSize: 100 * 1024 * 1024, // 100MB | allowedTypes: ['image/*', 'application/pdf', 'text/*', 'application/msword', 'application/vnd.openxmlformats-officedocument.*'], | enableDragDrop: true,"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "22-28",
          "preview": "maxFileSize: 100 * 1024 * 1024, // 100MB | allowedTypes: ['image/*', 'application/pdf', 'text/*', 'application/msword', 'application/vnd.openxmlformats-officedocument.*'], | enableDragDrop: true,"
        }
      ],
      "codePreview": [
        "maxFileSize: 100 * 1024 * 1024,",
        "allowedTypes: ['image/*', 'application/pdf', 'text/*', 'application/msword', 'application/vnd.openxmlformats-officedocument.*'],",
        "enableDragDrop: true,",
        "enablePreview: true,",
        "enableSharing: true,",
        "enableVersionControl: true,",
        "...options"
      ]
    },
    {
      "id": "cedda178",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "71-77",
          "preview": "<div class=\"file-manager-header\"> | <div class=\"file-manager-toolbar\"> | <div class=\"toolbar-left\">"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "71-77",
          "preview": "<div class=\"file-manager-header\"> | <div class=\"file-manager-toolbar\"> | <div class=\"toolbar-left\">"
        }
      ],
      "codePreview": [
        "<div class=\"file-manager-header\">",
        "<div class=\"file-manager-toolbar\">",
        "<div class=\"toolbar-left\">",
        "<button class=\"btn btn-primary\" id=\"upload-btn\">",
        "<i class=\"icon-upload\"></i> 上传文件",
        "</button>",
        "<div class=\"file-actions\">"
      ]
    },
    {
      "id": "697f3b60",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "78-84",
          "preview": "<button class=\"btn btn-outline\" id=\"download-btn\" disabled> | <i class=\"icon-download\"></i> 下载 | </button>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "78-84",
          "preview": "<button class=\"btn btn-outline\" id=\"download-btn\" disabled> | <i class=\"icon-download\"></i> 下载 | </button>"
        }
      ],
      "codePreview": [
        "<button class=\"btn btn-outline\" id=\"download-btn\" disabled>",
        "<i class=\"icon-download\"></i> 下载",
        "</button>",
        "<button class=\"btn btn-outline\" id=\"share-btn\" disabled>",
        "<i class=\"icon-share\"></i> 共享",
        "</button>",
        "<button class=\"btn btn-outline\" id=\"delete-btn\" disabled>"
      ]
    },
    {
      "id": "f11da0d0",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "85-91",
          "preview": "<i class=\"icon-trash\"></i> 删除 | </button> | </div>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "85-91",
          "preview": "<i class=\"icon-trash\"></i> 删除 | </button> | </div>"
        }
      ],
      "codePreview": [
        "<i class=\"icon-trash\"></i> 删除",
        "</button>",
        "</div>",
        "</div>",
        "<div class=\"toolbar-center\">",
        "<div class=\"search-box\">"
      ]
    },
    {
      "id": "a03b4f2c",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "92-98",
          "preview": "<input type=\"text\" id=\"search-input\" placeholder=\"搜索文件...\" /> | <button id=\"search-btn\"> | <i class=\"icon-search\"></i>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "92-98",
          "preview": "<input type=\"text\" id=\"search-input\" placeholder=\"搜索文件...\" /> | <button id=\"search-btn\"> | <i class=\"icon-search\"></i>"
        }
      ],
      "codePreview": [
        "<input type=\"text\" id=\"search-input\" placeholder=\"搜索文件...\" />",
        "<button id=\"search-btn\">",
        "<i class=\"icon-search\"></i>",
        "</button>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "70bc01bc",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "99-105",
          "preview": "<div class=\"toolbar-right\"> | <div class=\"view-toggle\"> | <button class=\"view-btn active\" data-view=\"grid\">"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "99-105",
          "preview": "<div class=\"toolbar-right\"> | <div class=\"view-toggle\"> | <button class=\"view-btn active\" data-view=\"grid\">"
        }
      ],
      "codePreview": [
        "<div class=\"toolbar-right\">",
        "<div class=\"view-toggle\">",
        "<button class=\"view-btn active\" data-view=\"grid\">",
        "<i class=\"icon-grid\"></i>",
        "</button>",
        "<button class=\"view-btn\" data-view=\"list\">",
        "<i class=\"icon-list\"></i>"
      ]
    },
    {
      "id": "112dee31",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "106-112",
          "preview": "</button> | </div>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "106-112",
          "preview": "</button> | </div>"
        }
      ],
      "codePreview": [
        "</button>",
        "</div>",
        "<div class=\"sort-dropdown\">",
        "<select id=\"sort-select\">",
        "<option value=\"uploadTime-desc\">最新上传</option>",
        "<option value=\"uploadTime-asc\">最早上传</option>"
      ]
    },
    {
      "id": "3e584148",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "113-119",
          "preview": "<option value=\"filename-asc\">文件名 A-Z</option> | <option value=\"filename-desc\">文件名 Z-A</option> | <option value=\"fileSize-desc\">大小(大→小)</option>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "113-119",
          "preview": "<option value=\"filename-asc\">文件名 A-Z</option> | <option value=\"filename-desc\">文件名 Z-A</option> | <option value=\"fileSize-desc\">大小(大→小)</option>"
        }
      ],
      "codePreview": [
        "<option value=\"filename-asc\">文件名 A-Z</option>",
        "<option value=\"filename-desc\">文件名 Z-A</option>",
        "<option value=\"fileSize-desc\">大小(大→小)</option>",
        "<option value=\"fileSize-asc\">大小(小→大)</option>",
        "</select>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "7a94db1b",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "120-126",
          "preview": "</div> | <div class=\"file-manager-filters\">"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "120-126",
          "preview": "</div> | <div class=\"file-manager-filters\">"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"file-manager-filters\">",
        "<div class=\"filter-tabs\">",
        "<button class=\"filter-tab active\" data-category=\"all\">全部</button>",
        "<button class=\"filter-tab\" data-category=\"image\">图片</button>",
        "<button class=\"filter-tab\" data-category=\"document\">文档</button>"
      ]
    },
    {
      "id": "6f17f872",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "127-133",
          "preview": "<button class=\"filter-tab\" data-category=\"video\">视频</button> | <button class=\"filter-tab\" data-category=\"audio\">音频</button> | <button class=\"filter-tab\" data-category=\"other\">其他</button>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "127-133",
          "preview": "<button class=\"filter-tab\" data-category=\"video\">视频</button> | <button class=\"filter-tab\" data-category=\"audio\">音频</button> | <button class=\"filter-tab\" data-category=\"other\">其他</button>"
        }
      ],
      "codePreview": [
        "<button class=\"filter-tab\" data-category=\"video\">视频</button>",
        "<button class=\"filter-tab\" data-category=\"audio\">音频</button>",
        "<button class=\"filter-tab\" data-category=\"other\">其他</button>",
        "</div>",
        "<div class=\"filter-stats\">",
        "<span id=\"file-count\">0 个文件</span>"
      ]
    },
    {
      "id": "45136ba6",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "134-140",
          "preview": "<span id=\"total-size\">0 MB</span> | </div> | </div>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "134-140",
          "preview": "<span id=\"total-size\">0 MB</span> | </div> | </div>"
        }
      ],
      "codePreview": [
        "<span id=\"total-size\">0 MB</span>",
        "</div>",
        "</div>",
        "</div>",
        "<div class=\"file-manager-content\">",
        "<div class=\"file-browser\" id=\"file-browser\">"
      ]
    },
    {
      "id": "20de1f5c",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "141-147",
          "preview": "<!-- 文件列表将在这里动态生成 --> | </div>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "141-147",
          "preview": "<!-- 文件列表将在这里动态生成 --> | </div>"
        }
      ],
      "codePreview": [
        "<!-- 文件列表将在这里动态生成 -->",
        "</div>",
        "<div class=\"upload-area\" id=\"upload-area\" style=\"display: none;\">",
        "<div class=\"upload-drop-zone\">",
        "<i class=\"icon-cloud-upload\"></i>",
        "<h3>拖拽文件到这里或点击选择</h3>"
      ]
    },
    {
      "id": "4d864de6",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "148-154",
          "preview": "<p>支持多文件上传，单个文件最大 100MB</p> | <input type=\"file\" id=\"file-input\" multiple accept=\"${this.options.allowedTypes.join(',')}\" /> | </div>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "148-154",
          "preview": "<p>支持多文件上传，单个文件最大 100MB</p> | <input type=\"file\" id=\"file-input\" multiple accept=\"${this.options.allowedTypes.join(',')}\" /> | </div>"
        }
      ],
      "codePreview": [
        "<p>支持多文件上传，单个文件最大 100MB</p>",
        "<input type=\"file\" id=\"file-input\" multiple accept=\"${this.options.allowedTypes.join(',')}\" />",
        "</div>",
        "<div class=\"upload-progress\" id=\"upload-progress\">",
        "<!-- 上传进度将在这里显示 -->",
        "</div>"
      ]
    },
    {
      "id": "f88f06bd",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "155-161",
          "preview": "</div> | </div>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "155-161",
          "preview": "</div> | </div>"
        }
      ],
      "codePreview": [
        "</div>",
        "</div>",
        "<div class=\"file-manager-sidebar\" id=\"file-sidebar\" style=\"display: none;\">",
        "<div class=\"sidebar-header\">",
        "<h3>文件详情</h3>",
        "<button class=\"close-btn\" id=\"close-sidebar\">×</button>"
      ]
    },
    {
      "id": "9aff61da",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "169-175",
          "preview": "<div class=\"file-info\" id=\"file-info\"> | <!-- 文件信息 --> | </div>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "169-175",
          "preview": "<div class=\"file-info\" id=\"file-info\"> | <!-- 文件信息 --> | </div>"
        }
      ],
      "codePreview": [
        "<div class=\"file-info\" id=\"file-info\">",
        "<!-- 文件信息 -->",
        "</div>",
        "<div class=\"file-actions-panel\">",
        "<button class=\"btn btn-primary btn-block\" id=\"preview-download\">下载文件</button>",
        "<button class=\"btn btn-outline btn-block\" id=\"preview-share\">创建共享链接</button>"
      ]
    },
    {
      "id": "255a5808",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "176-182",
          "preview": "${this.options.enableVersionControl ? '<button class=\"btn btn-outline btn-block\" id=\"preview-versions\">版本历史</button>' : ''} | </div> | </div>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "176-182",
          "preview": "${this.options.enableVersionControl ? '<button class=\"btn btn-outline btn-block\" id=\"preview-versions\">版本历史</button>' : ''} | </div> | </div>"
        }
      ],
      "codePreview": [
        "${this.options.enableVersionControl ? '<button class=\"btn btn-outline btn-block\" id=\"preview-versions\">版本历史</button>' : ''}",
        "</div>",
        "</div>",
        "</div>",
        "<!-- 模态框 -->",
        "<div class=\"modal\" id=\"share-modal\">"
      ]
    },
    {
      "id": "71f0b9a2",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "183-189",
          "preview": "<div class=\"modal-content\"> | <div class=\"modal-header\"> | <h3>创建共享链接</h3>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "183-189",
          "preview": "<div class=\"modal-content\"> | <div class=\"modal-header\"> | <h3>创建共享链接</h3>"
        }
      ],
      "codePreview": [
        "<div class=\"modal-content\">",
        "<div class=\"modal-header\">",
        "<h3>创建共享链接</h3>",
        "<button class=\"close-btn\" data-modal=\"share-modal\">×</button>",
        "</div>",
        "<div class=\"modal-body\">",
        "<form id=\"share-form\">"
      ]
    },
    {
      "id": "4aed797c",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "190-196",
          "preview": "<div class=\"form-group\"> | <label>共享类型</label> | <select name=\"shareType\">"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "190-196",
          "preview": "<div class=\"form-group\"> | <label>共享类型</label> | <select name=\"shareType\">"
        }
      ],
      "codePreview": [
        "<div class=\"form-group\">",
        "<label>共享类型</label>",
        "<select name=\"shareType\">",
        "<option value=\"public\">公开链接</option>",
        "<option value=\"password\">密码保护</option>",
        "<option value=\"time\">时间限制</option>",
        "</select>"
      ]
    },
    {
      "id": "ff5a7a4b",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "204-210",
          "preview": "<div class=\"form-group\" id=\"expiry-group\" style=\"display: none;\"> | <label>过期时间</label> | <input type=\"datetime-local\" name=\"expiresAt\" />"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "204-210",
          "preview": "<div class=\"form-group\" id=\"expiry-group\" style=\"display: none;\"> | <label>过期时间</label> | <input type=\"datetime-local\" name=\"expiresAt\" />"
        }
      ],
      "codePreview": [
        "<div class=\"form-group\" id=\"expiry-group\" style=\"display: none;\">",
        "<label>过期时间</label>",
        "<input type=\"datetime-local\" name=\"expiresAt\" />",
        "</div>",
        "<div class=\"form-group\">",
        "<label>下载限制</label>"
      ]
    },
    {
      "id": "3711c2c5",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "211-217",
          "preview": "<input type=\"number\" name=\"maxDownloads\" placeholder=\"最大下载次数（可选）\" min=\"1\" /> | </div> | </form>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "211-217",
          "preview": "<input type=\"number\" name=\"maxDownloads\" placeholder=\"最大下载次数（可选）\" min=\"1\" /> | </div> | </form>"
        }
      ],
      "codePreview": [
        "<input type=\"number\" name=\"maxDownloads\" placeholder=\"最大下载次数（可选）\" min=\"1\" />",
        "</div>",
        "</form>",
        "</div>",
        "<div class=\"modal-footer\">",
        "<button class=\"btn btn-outline\" data-modal=\"share-modal\">取消</button>",
        "<button class=\"btn btn-primary\" id=\"create-share-link\">创建链接</button>"
      ]
    },
    {
      "id": "8867bb1d",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "218-224",
          "preview": "</div> | </div> | </div>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "218-224",
          "preview": "</div> | </div> | </div>"
        }
      ],
      "codePreview": [
        "</div>",
        "</div>",
        "</div>",
        "<div class=\"modal\" id=\"upload-modal\">",
        "<div class=\"modal-content\">",
        "<div class=\"modal-header\">"
      ]
    },
    {
      "id": "0d85a382",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "225-231",
          "preview": "<h3>文件上传</h3> | <button class=\"close-btn\" data-modal=\"upload-modal\">×</button> | </div>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "225-231",
          "preview": "<h3>文件上传</h3> | <button class=\"close-btn\" data-modal=\"upload-modal\">×</button> | </div>"
        }
      ],
      "codePreview": [
        "<h3>文件上传</h3>",
        "<button class=\"close-btn\" data-modal=\"upload-modal\">×</button>",
        "</div>",
        "<div class=\"modal-body\">",
        "<div class=\"upload-file-list\" id=\"upload-file-list\">",
        "<!-- 待上传文件列表 -->",
        "</div>"
      ]
    },
    {
      "id": "2b1d7c62",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "232-238",
          "preview": "</div> | <div class=\"modal-footer\"> | <button class=\"btn btn-outline\" data-modal=\"upload-modal\">取消</button>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "232-238",
          "preview": "</div> | <div class=\"modal-footer\"> | <button class=\"btn btn-outline\" data-modal=\"upload-modal\">取消</button>"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"modal-footer\">",
        "<button class=\"btn btn-outline\" data-modal=\"upload-modal\">取消</button>",
        "<button class=\"btn btn-primary\" id=\"start-upload\">开始上传</button>",
        "</div>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "72f5d558",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "414-420",
          "preview": "file, | status: 'pending', | progress: 0,"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "414-420",
          "preview": "file, | status: 'pending', | progress: 0,"
        }
      ],
      "codePreview": [
        "file,",
        "status: 'pending',",
        "progress: 0,",
        "error: null",
        "};",
        "this.uploadQueue.push(fileItem);",
        "});"
      ]
    },
    {
      "id": "aa7553e1",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "428-434",
          "preview": "updateUploadList() { | const listContainer = document.getElementById('upload-file-list');"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "428-434",
          "preview": "updateUploadList() { | const listContainer = document.getElementById('upload-file-list');"
        }
      ],
      "codePreview": [
        "updateUploadList() {",
        "const listContainer = document.getElementById('upload-file-list');",
        "listContainer.innerHTML = this.uploadQueue.map(item => `",
        "<div class=\"upload-item\" data-id=\"${item.id}\">",
        "<div class=\"upload-item-info\">",
        "<div class=\"file-icon\">"
      ]
    },
    {
      "id": "8ce8d10b",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "435-441",
          "preview": "<i class=\"icon-${this.getFileIcon(item.file.type)}\"></i> | </div> | <div class=\"file-details\">"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "435-441",
          "preview": "<i class=\"icon-${this.getFileIcon(item.file.type)}\"></i> | </div> | <div class=\"file-details\">"
        }
      ],
      "codePreview": [
        "<i class=\"icon-${this.getFileIcon(item.file.type)}\"></i>",
        "</div>",
        "<div class=\"file-details\">",
        "<div class=\"file-name\">${item.file.name}</div>",
        "<div class=\"file-size\">${this.formatFileSize(item.file.size)}</div>",
        "</div>",
        "<div class=\"upload-status\">"
      ]
    },
    {
      "id": "58b5e0ef",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "442-448",
          "preview": "<span class=\"status-text\">${this.getStatusText(item.status)}</span> | <button class=\"remove-btn\" onclick=\"fileManager.removeFromQueue('${item.id}')\">×</button> | </div>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "442-448",
          "preview": "<span class=\"status-text\">${this.getStatusText(item.status)}</span> | <button class=\"remove-btn\" onclick=\"fileManager.removeFromQueue('${item.id}')\">×</button> | </div>"
        }
      ],
      "codePreview": [
        "<span class=\"status-text\">${this.getStatusText(item.status)}</span>",
        "<button class=\"remove-btn\" onclick=\"fileManager.removeFromQueue('${item.id}')\">×</button>",
        "</div>",
        "</div>",
        "<div class=\"upload-progress-bar\">",
        "<div class=\"progress-fill\" style=\"width: ${item.progress}%\"></div>"
      ]
    },
    {
      "id": "3ec9e68c",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "561-567",
          "preview": "userId: this.options.userId || 'default_user', | page: 1, | limit: 100,"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "561-567",
          "preview": "userId: this.options.userId || 'default_user', | page: 1, | limit: 100,"
        }
      ],
      "codePreview": [
        "userId: this.options.userId || 'default_user',",
        "page: 1,",
        "limit: 100,",
        "sortBy: this.currentSort.field,",
        "sortOrder: this.currentSort.order",
        "});"
      ]
    },
    {
      "id": "a3cad563",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "596-602",
          "preview": "browser.innerHTML = ` | <div class=\"empty-state\"> | <i class=\"icon-folder-open\"></i>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "596-602",
          "preview": "browser.innerHTML = ` | <div class=\"empty-state\"> | <i class=\"icon-folder-open\"></i>"
        }
      ],
      "codePreview": [
        "browser.innerHTML = `",
        "<div class=\"empty-state\">",
        "<i class=\"icon-folder-open\"></i>",
        "<h3>暂无文件</h3>",
        "<p>点击上传按钮或拖拽文件到这里开始使用</p>",
        "</div>",
        "`;"
      ]
    },
    {
      "id": "a19c602e",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "617-623",
          "preview": "const browser = document.getElementById('file-browser'); | browser.className = 'file-browser grid-view';"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "617-623",
          "preview": "const browser = document.getElementById('file-browser'); | browser.className = 'file-browser grid-view';"
        }
      ],
      "codePreview": [
        "const browser = document.getElementById('file-browser');",
        "browser.className = 'file-browser grid-view';",
        "browser.innerHTML = this.currentFiles.map(file => `",
        "<div class=\"file-item\" data-id=\"${file.id}\" onclick=\"fileManager.selectFile('${file.id}')\">",
        "<div class=\"file-thumbnail\">",
        "${this.generateThumbnail(file)}"
      ]
    },
    {
      "id": "47d65dbb",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "624-630",
          "preview": "</div> | <div class=\"file-info\"> | <div class=\"file-name\" title=\"${file.originalName}\">${file.originalName}</div>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "624-630",
          "preview": "</div> | <div class=\"file-info\"> | <div class=\"file-name\" title=\"${file.originalName}\">${file.originalName}</div>"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"file-info\">",
        "<div class=\"file-name\" title=\"${file.originalName}\">${file.originalName}</div>",
        "<div class=\"file-meta\">",
        "<span class=\"file-size\">${this.formatFileSize(file.fileSize)}</span>",
        "<span class=\"file-date\">${this.formatDate(file.uploadTime)}</span>",
        "</div>"
      ]
    },
    {
      "id": "8ddc9b81",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "631-637",
          "preview": "</div> | <div class=\"file-actions\"> | <button class=\"action-btn\" onclick=\"fileManager.previewFile('${file.id}')\" title=\"预览\">"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "631-637",
          "preview": "</div> | <div class=\"file-actions\"> | <button class=\"action-btn\" onclick=\"fileManager.previewFile('${file.id}')\" title=\"预览\">"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"file-actions\">",
        "<button class=\"action-btn\" onclick=\"fileManager.previewFile('${file.id}')\" title=\"预览\">",
        "<i class=\"icon-eye\"></i>",
        "</button>",
        "<button class=\"action-btn\" onclick=\"fileManager.downloadFile('${file.id}')\" title=\"下载\">",
        "<i class=\"icon-download\"></i>"
      ]
    },
    {
      "id": "2e08bacd",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "638-644",
          "preview": "</button> | <button class=\"action-btn\" onclick=\"fileManager.shareFile('${file.id}')\" title=\"共享\"> | <i class=\"icon-share\"></i>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "638-644",
          "preview": "</button> | <button class=\"action-btn\" onclick=\"fileManager.shareFile('${file.id}')\" title=\"共享\"> | <i class=\"icon-share\"></i>"
        }
      ],
      "codePreview": [
        "</button>",
        "<button class=\"action-btn\" onclick=\"fileManager.shareFile('${file.id}')\" title=\"共享\">",
        "<i class=\"icon-share\"></i>",
        "</button>",
        "</div>",
        "</div>",
        "`).join('');"
      ]
    },
    {
      "id": "6039bae0",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "652-658",
          "preview": "browser.className = 'file-browser list-view'; | browser.innerHTML = `"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "652-658",
          "preview": "browser.className = 'file-browser list-view'; | browser.innerHTML = `"
        }
      ],
      "codePreview": [
        "browser.className = 'file-browser list-view';",
        "browser.innerHTML = `",
        "<div class=\"file-list-header\">",
        "<div class=\"col-name\">文件名</div>",
        "<div class=\"col-size\">大小</div>",
        "<div class=\"col-type\">类型</div>"
      ]
    },
    {
      "id": "fef0293b",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "659-665",
          "preview": "<div class=\"col-date\">修改时间</div> | <div class=\"col-actions\">操作</div> | </div>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "659-665",
          "preview": "<div class=\"col-date\">修改时间</div> | <div class=\"col-actions\">操作</div> | </div>"
        }
      ],
      "codePreview": [
        "<div class=\"col-date\">修改时间</div>",
        "<div class=\"col-actions\">操作</div>",
        "</div>",
        "${this.currentFiles.map(file => `",
        "<div class=\"file-list-item\" data-id=\"${file.id}\" onclick=\"fileManager.selectFile('${file.id}')\">",
        "<div class=\"col-name\">"
      ]
    },
    {
      "id": "c30cf95b",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "666-672",
          "preview": "<i class=\"icon-${this.getFileIcon(file.mimeType)}\"></i> | <span title=\"${file.originalName}\">${file.originalName}</span> | </div>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "666-672",
          "preview": "<i class=\"icon-${this.getFileIcon(file.mimeType)}\"></i> | <span title=\"${file.originalName}\">${file.originalName}</span> | </div>"
        }
      ],
      "codePreview": [
        "<i class=\"icon-${this.getFileIcon(file.mimeType)}\"></i>",
        "<span title=\"${file.originalName}\">${file.originalName}</span>",
        "</div>",
        "<div class=\"col-size\">${this.formatFileSize(file.fileSize)}</div>",
        "<div class=\"col-type\">${this.getFileType(file.mimeType)}</div>",
        "<div class=\"col-date\">${this.formatDate(file.uploadTime)}</div>",
        "<div class=\"col-actions\">"
      ]
    },
    {
      "id": "a6f58a45",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "673-679",
          "preview": "<button class=\"action-btn\" onclick=\"fileManager.previewFile('${file.id}')\" title=\"预览\"> | <i class=\"icon-eye\"></i> | </button>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "673-679",
          "preview": "<button class=\"action-btn\" onclick=\"fileManager.previewFile('${file.id}')\" title=\"预览\"> | <i class=\"icon-eye\"></i> | </button>"
        }
      ],
      "codePreview": [
        "<button class=\"action-btn\" onclick=\"fileManager.previewFile('${file.id}')\" title=\"预览\">",
        "<i class=\"icon-eye\"></i>",
        "</button>",
        "<button class=\"action-btn\" onclick=\"fileManager.downloadFile('${file.id}')\" title=\"下载\">",
        "<i class=\"icon-download\"></i>",
        "</button>",
        "<button class=\"action-btn\" onclick=\"fileManager.shareFile('${file.id}')\" title=\"共享\">"
      ]
    },
    {
      "id": "b4b5a7cf",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "701-707",
          "preview": "*/ | getFileIcon(mimeType) { | if (mimeType.startsWith('image/')) return 'image';"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "701-707",
          "preview": "*/ | getFileIcon(mimeType) { | if (mimeType.startsWith('image/')) return 'image';"
        }
      ],
      "codePreview": [
        "getFileIcon(mimeType) {",
        "if (mimeType.startsWith('image/')) return 'image';",
        "if (mimeType.startsWith('video/')) return 'video';",
        "if (mimeType.startsWith('audio/')) return 'music';",
        "if (mimeType.includes('pdf')) return 'file-pdf';",
        "if (mimeType.includes('word')) return 'file-word';"
      ]
    },
    {
      "id": "306607f9",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "722-728",
          "preview": "'application/pdf': 'PDF文档', | 'application/msword': 'Word文档', | 'application/vnd.openxmlformats-officedocument.wordprocessingml.document': 'Word文档',"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "722-728",
          "preview": "'application/pdf': 'PDF文档', | 'application/msword': 'Word文档', | 'application/vnd.openxmlformats-officedocument.wordprocessingml.document': 'Word文档',"
        }
      ],
      "codePreview": [
        "'application/pdf': 'PDF文档',",
        "'application/msword': 'Word文档',",
        "'application/vnd.openxmlformats-officedocument.wordprocessingml.document': 'Word文档',",
        "'application/vnd.ms-excel': 'Excel表格',",
        "'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet': 'Excel表格',",
        "'text/': '文本',",
        "'application/zip': '压缩包',"
      ]
    },
    {
      "id": "4bc3af00",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "757-763",
          "preview": "formatDate(dateString) { | const date = new Date(dateString); | const now = new Date();"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "757-763",
          "preview": "formatDate(dateString) { | const date = new Date(dateString); | const now = new Date();"
        }
      ],
      "codePreview": [
        "formatDate(dateString) {",
        "const date = new Date(dateString);",
        "const now = new Date();",
        "const diffTime = Math.abs(now - date);",
        "const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));",
        "if (diffDays === 1) {"
      ]
    },
    {
      "id": "e7e3306c",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "778-784",
          "preview": "const statusMap = { | 'pending': '等待上传', | 'uploading': '上传中...',"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "778-784",
          "preview": "const statusMap = { | 'pending': '等待上传', | 'uploading': '上传中...',"
        }
      ],
      "codePreview": [
        "const statusMap = {",
        "'pending': '等待上传',",
        "'uploading': '上传中...',",
        "'completed': '上传完成',",
        "'error': '上传失败'",
        "};",
        "return statusMap[status] || status;"
      ]
    },
    {
      "id": "9eb60997",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "792-798",
          "preview": "return function executedFunction(...args) { | const later = () => { | clearTimeout(timeout);"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "792-798",
          "preview": "return function executedFunction(...args) { | const later = () => { | clearTimeout(timeout);"
        }
      ],
      "codePreview": [
        "return function executedFunction(...args) {",
        "const later = () => {",
        "clearTimeout(timeout);",
        "func(...args);",
        "};",
        "clearTimeout(timeout);",
        "timeout = setTimeout(later, wait);"
      ]
    },
    {
      "id": "139d5792",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "8-14",
          "preview": "this.subscriptions = []; | this.stats = {}; | this.currentUser = null;"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "8-14",
          "preview": "this.subscriptions = []; | this.stats = {}; | this.currentUser = null;"
        }
      ],
      "codePreview": [
        "this.subscriptions = [];",
        "this.stats = {};",
        "this.currentUser = null;",
        "this.currentShop = null;",
        "this.initializeUI();",
        "this.setupEventListeners();"
      ]
    },
    {
      "id": "1ceca36d",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "36-42",
          "preview": "const container = document.createElement('div'); | container.id = 'notification-manager'; | container.innerHTML = `"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "36-42",
          "preview": "const container = document.createElement('div'); | container.id = 'notification-manager'; | container.innerHTML = `"
        }
      ],
      "codePreview": [
        "const container = document.createElement('div');",
        "container.id = 'notification-manager';",
        "container.innerHTML = `",
        "<div class=\"notification-manager\">",
        "<div class=\"notification-header\">",
        "<h3>📡 通知管理系统</h3>",
        "<div class=\"notification-controls\">"
      ]
    },
    {
      "id": "c147d9d8",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "43-49",
          "preview": "<button id=\"send-notification-btn\" class=\"btn btn-primary\">发送通知</button> | <button id=\"manage-templates-btn\" class=\"btn btn-secondary\">管理模板</button> | <button id=\"view-stats-btn\" class=\"btn btn-info\">查看统计</button>"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "43-49",
          "preview": "<button id=\"send-notification-btn\" class=\"btn btn-primary\">发送通知</button> | <button id=\"manage-templates-btn\" class=\"btn btn-secondary\">管理模板</button> | <button id=\"view-stats-btn\" class=\"btn btn-info\">查看统计</button>"
        }
      ],
      "codePreview": [
        "<button id=\"send-notification-btn\" class=\"btn btn-primary\">发送通知</button>",
        "<button id=\"manage-templates-btn\" class=\"btn btn-secondary\">管理模板</button>",
        "<button id=\"view-stats-btn\" class=\"btn btn-info\">查看统计</button>",
        "<button id=\"test-notification-btn\" class=\"btn btn-warning\">测试通知</button>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "b3f6d99e",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "50-56",
          "preview": "<div class=\"notification-tabs\"> | <button class=\"tab-btn active\" data-tab=\"send\">发送通知</button> | <button class=\"tab-btn\" data-tab=\"templates\">模板管理</button>"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "50-56",
          "preview": "<div class=\"notification-tabs\"> | <button class=\"tab-btn active\" data-tab=\"send\">发送通知</button> | <button class=\"tab-btn\" data-tab=\"templates\">模板管理</button>"
        }
      ],
      "codePreview": [
        "<div class=\"notification-tabs\">",
        "<button class=\"tab-btn active\" data-tab=\"send\">发送通知</button>",
        "<button class=\"tab-btn\" data-tab=\"templates\">模板管理</button>",
        "<button class=\"tab-btn\" data-tab=\"subscriptions\">订阅管理</button>",
        "<button class=\"tab-btn\" data-tab=\"stats\">统计分析</button>",
        "</div>"
      ]
    },
    {
      "id": "2995b587",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "57-63",
          "preview": "<div class=\"notification-content\"> | <!-- 发送通知标签页 --> | <div id=\"send-tab\" class=\"tab-content active\">"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "57-63",
          "preview": "<div class=\"notification-content\"> | <!-- 发送通知标签页 --> | <div id=\"send-tab\" class=\"tab-content active\">"
        }
      ],
      "codePreview": [
        "<div class=\"notification-content\">",
        "<!-- 发送通知标签页 -->",
        "<div id=\"send-tab\" class=\"tab-content active\">",
        "<div class=\"send-form\">",
        "<div class=\"form-group\">",
        "<label>标题:</label>",
        "<input type=\"text\" id=\"notification-title\" placeholder=\"输入通知标题\">"
      ]
    },
    {
      "id": "82f19ba3",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "64-70",
          "preview": "</div> | <div class=\"form-group\"> | <label>内容:</label>"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "64-70",
          "preview": "</div> | <div class=\"form-group\"> | <label>内容:</label>"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"form-group\">",
        "<label>内容:</label>",
        "<textarea id=\"notification-message\" placeholder=\"输入通知内容\"></textarea>",
        "</div>",
        "<div class=\"form-group\">",
        "<label>类型:</label>"
      ]
    },
    {
      "id": "dc127877",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "71-77",
          "preview": "<select id=\"notification-type\"> | <option value=\"general\">一般通知</option> | <option value=\"message\">消息通知</option>"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "71-77",
          "preview": "<select id=\"notification-type\"> | <option value=\"general\">一般通知</option> | <option value=\"message\">消息通知</option>"
        }
      ],
      "codePreview": [
        "<select id=\"notification-type\">",
        "<option value=\"general\">一般通知</option>",
        "<option value=\"message\">消息通知</option>",
        "<option value=\"order\">订单通知</option>",
        "<option value=\"system\">系统通知</option>",
        "</select>",
        "</div>"
      ]
    },
    {
      "id": "6037e21e",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "78-84",
          "preview": "<div class=\"form-group\"> | <label>优先级:</label> | <select id=\"notification-priority\">"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "78-84",
          "preview": "<div class=\"form-group\"> | <label>优先级:</label> | <select id=\"notification-priority\">"
        }
      ],
      "codePreview": [
        "<div class=\"form-group\">",
        "<label>优先级:</label>",
        "<select id=\"notification-priority\">",
        "<option value=\"normal\">普通</option>",
        "<option value=\"high\">高</option>",
        "<option value=\"urgent\">紧急</option>",
        "</select>"
      ]
    },
    {
      "id": "08d3c88b",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "85-91",
          "preview": "</div> | <div class=\"form-group\"> | <label>发送渠道:</label>"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "85-91",
          "preview": "</div> | <div class=\"form-group\"> | <label>发送渠道:</label>"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"form-group\">",
        "<label>发送渠道:</label>",
        "<div class=\"checkbox-group\">",
        "<label><input type=\"checkbox\" value=\"websocket\" checked> WebSocket实时</label>",
        "<label><input type=\"checkbox\" value=\"email\"> 邮件</label>",
        "<label><input type=\"checkbox\" value=\"push\"> 推送</label>"
      ]
    },
    {
      "id": "9af4a3d0",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "92-98",
          "preview": "<label><input type=\"checkbox\" value=\"sms\"> 短信</label> | </div> | </div>"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "92-98",
          "preview": "<label><input type=\"checkbox\" value=\"sms\"> 短信</label> | </div> | </div>"
        }
      ],
      "codePreview": [
        "<label><input type=\"checkbox\" value=\"sms\"> 短信</label>",
        "</div>",
        "</div>",
        "<div class=\"form-group\">",
        "<label>目标用户 (留空为广播):</label>",
        "<input type=\"text\" id=\"target-user\" placeholder=\"用户ID\">",
        "</div>"
      ]
    },
    {
      "id": "87f5df88",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "99-105",
          "preview": "<div class=\"form-group\"> | <label>定时发送:</label> | <input type=\"datetime-local\" id=\"scheduled-time\">"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "99-105",
          "preview": "<div class=\"form-group\"> | <label>定时发送:</label> | <input type=\"datetime-local\" id=\"scheduled-time\">"
        }
      ],
      "codePreview": [
        "<div class=\"form-group\">",
        "<label>定时发送:</label>",
        "<input type=\"datetime-local\" id=\"scheduled-time\">",
        "</div>",
        "<button id=\"send-now-btn\" class=\"btn btn-primary\">立即发送</button>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "f33d9c39",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "106-112",
          "preview": "<!-- 模板管理标签页 --> | <div id=\"templates-tab\" class=\"tab-content\">"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "106-112",
          "preview": "<!-- 模板管理标签页 --> | <div id=\"templates-tab\" class=\"tab-content\">"
        }
      ],
      "codePreview": [
        "<!-- 模板管理标签页 -->",
        "<div id=\"templates-tab\" class=\"tab-content\">",
        "<div class=\"templates-header\">",
        "<button id=\"create-template-btn\" class=\"btn btn-primary\">创建模板</button>",
        "</div>",
        "<div id=\"templates-list\" class=\"templates-list\">"
      ]
    },
    {
      "id": "07c57c62",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "113-119",
          "preview": "<!-- 模板列表 --> | </div> | </div>"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "113-119",
          "preview": "<!-- 模板列表 --> | </div> | </div>"
        }
      ],
      "codePreview": [
        "<!-- 模板列表 -->",
        "</div>",
        "</div>",
        "<!-- 订阅管理标签页 -->",
        "<div id=\"subscriptions-tab\" class=\"tab-content\">",
        "<div id=\"subscriptions-list\" class=\"subscriptions-list\">"
      ]
    },
    {
      "id": "18794c5f",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "120-126",
          "preview": "<!-- 订阅列表 --> | </div> | </div>"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "120-126",
          "preview": "<!-- 订阅列表 --> | </div> | </div>"
        }
      ],
      "codePreview": [
        "<!-- 订阅列表 -->",
        "</div>",
        "</div>",
        "<!-- 统计分析标签页 -->",
        "<div id=\"stats-tab\" class=\"tab-content\">",
        "<div id=\"stats-dashboard\" class=\"stats-dashboard\">"
      ]
    },
    {
      "id": "ecf21176",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "127-133",
          "preview": "<!-- 统计图表 --> | </div> | </div>"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "127-133",
          "preview": "<!-- 统计图表 --> | </div> | </div>"
        }
      ],
      "codePreview": [
        "<!-- 统计图表 -->",
        "</div>",
        "</div>",
        "</div>",
        "<!-- 通知弹窗 -->",
        "<div id=\"notification-toast\" class=\"notification-toast\">"
      ]
    },
    {
      "id": "51db61b9",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "134-140",
          "preview": "<!-- 实时通知显示区域 --> | </div>"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "134-140",
          "preview": "<!-- 实时通知显示区域 --> | </div>"
        }
      ],
      "codePreview": [
        "<!-- 实时通知显示区域 -->",
        "</div>",
        "<!-- 模态框 -->",
        "<div id=\"notification-modal\" class=\"modal\">",
        "<div class=\"modal-content\">",
        "<span class=\"close\">&times;</span>"
      ]
    },
    {
      "id": "9828c21f",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "246-252",
          "preview": "switch (tabName) { | case 'templates': | this.loadTemplates();"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "246-252",
          "preview": "switch (tabName) { | case 'templates': | this.loadTemplates();"
        }
      ],
      "codePreview": [
        "switch (tabName) {",
        "case 'templates':",
        "this.loadTemplates();",
        "break;",
        "case 'subscriptions':",
        "this.loadSubscriptions();",
        "break;"
      ]
    },
    {
      "id": "98bf1c1c",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "288-294",
          "preview": "shopId: this.currentShop || 'default_shop', | userId: targetUser || null, | title,"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "288-294",
          "preview": "shopId: this.currentShop || 'default_shop', | userId: targetUser || null, | title,"
        }
      ],
      "codePreview": [
        "shopId: this.currentShop || 'default_shop',",
        "userId: targetUser || null,",
        "title,",
        "message,",
        "type,",
        "priority,",
        "channels,"
      ]
    },
    {
      "id": "dc7a7423",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "302-308",
          "preview": "const response = await fetch('/api/notifications/send', { | method: 'POST', | headers: {"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "302-308",
          "preview": "const response = await fetch('/api/notifications/send', { | method: 'POST', | headers: {"
        }
      ],
      "codePreview": [
        "const response = await fetch('/api/notifications/send', {",
        "method: 'POST',",
        "headers: {",
        "'Content-Type': 'application/json'",
        "},",
        "body: JSON.stringify(notificationData)",
        "});"
      ]
    },
    {
      "id": "7e37a839",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "330-336",
          "preview": "const response = await fetch('/api/notifications/test', { | method: 'POST', | headers: {"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "330-336",
          "preview": "const response = await fetch('/api/notifications/test', { | method: 'POST', | headers: {"
        }
      ],
      "codePreview": [
        "const response = await fetch('/api/notifications/test', {",
        "method: 'POST',",
        "headers: {",
        "'Content-Type': 'application/json'",
        "},",
        "body: JSON.stringify({",
        "shopId: this.currentShop || 'test_shop',"
      ]
    },
    {
      "id": "4c6b824f",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "393-399",
          "preview": "<span class=\"template-type\">${template.type}</span> | </div> | <div class=\"template-content\">"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "393-399",
          "preview": "<span class=\"template-type\">${template.type}</span> | </div> | <div class=\"template-content\">"
        }
      ],
      "codePreview": [
        "<span class=\"template-type\">${template.type}</span>",
        "</div>",
        "<div class=\"template-content\">",
        "<p><strong>标题:</strong> ${template.title}</p>",
        "<p><strong>内容:</strong> ${template.content.substring(0, 100)}...</p>",
        "<p><strong>渠道:</strong> ${template.channels.join(', ')}</p>",
        "</div>"
      ]
    },
    {
      "id": "264d5078",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "400-406",
          "preview": "<div class=\"template-actions\"> | <button onclick=\"notificationManager.useTemplate('${template.id}')\" class=\"btn btn-sm btn-primary\">使用</button> | <button onclick=\"notificationManager.editTemplate('${template.id}')\" class=\"btn btn-sm btn-secondary\">编辑</button>"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "400-406",
          "preview": "<div class=\"template-actions\"> | <button onclick=\"notificationManager.useTemplate('${template.id}')\" class=\"btn btn-sm btn-primary\">使用</button> | <button onclick=\"notificationManager.editTemplate('${template.id}')\" class=\"btn btn-sm btn-secondary\">编辑</button>"
        }
      ],
      "codePreview": [
        "<div class=\"template-actions\">",
        "<button onclick=\"notificationManager.useTemplate('${template.id}')\" class=\"btn btn-sm btn-primary\">使用</button>",
        "<button onclick=\"notificationManager.editTemplate('${template.id}')\" class=\"btn btn-sm btn-secondary\">编辑</button>",
        "</div>",
        "</div>",
        "`).join('');",
        "}"
      ]
    },
    {
      "id": "39a523af",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "435-441",
          "preview": "if (!container || !this.stats) return; | container.innerHTML = `"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "435-441",
          "preview": "if (!container || !this.stats) return; | container.innerHTML = `"
        }
      ],
      "codePreview": [
        "if (!container || !this.stats) return;",
        "container.innerHTML = `",
        "<div class=\"stats-grid\">",
        "<div class=\"stats-card\">",
        "<h4>总体统计</h4>",
        "<div class=\"stats-item\">"
      ]
    },
    {
      "id": "824c7ba7",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "442-448",
          "preview": "<span>已发送:</span> | <span class=\"stats-value\">${this.stats.totalStats.sent}</span> | </div>"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "442-448",
          "preview": "<span>已发送:</span> | <span class=\"stats-value\">${this.stats.totalStats.sent}</span> | </div>"
        }
      ],
      "codePreview": [
        "<span>已发送:</span>",
        "<span class=\"stats-value\">${this.stats.totalStats.sent}</span>",
        "</div>",
        "<div class=\"stats-item\">",
        "<span>已送达:</span>",
        "<span class=\"stats-value\">${this.stats.totalStats.delivered}</span>",
        "</div>"
      ]
    },
    {
      "id": "8ee6eccc",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "449-455",
          "preview": "<div class=\"stats-item\"> | <span>失败:</span> | <span class=\"stats-value\">${this.stats.totalStats.failed}</span>"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "449-455",
          "preview": "<div class=\"stats-item\"> | <span>失败:</span> | <span class=\"stats-value\">${this.stats.totalStats.failed}</span>"
        }
      ],
      "codePreview": [
        "<div class=\"stats-item\">",
        "<span>失败:</span>",
        "<span class=\"stats-value\">${this.stats.totalStats.failed}</span>",
        "</div>",
        "<div class=\"stats-item\">",
        "<span>成功率:</span>",
        "<span class=\"stats-value\">${this.stats.totalStats.successRate}</span>"
      ]
    },
    {
      "id": "fbfc010c",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "456-462",
          "preview": "</div> | </div>"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "456-462",
          "preview": "</div> | </div>"
        }
      ],
      "codePreview": [
        "</div>",
        "</div>",
        "<div class=\"stats-card\">",
        "<h4>队列状态</h4>",
        "<div class=\"stats-item\">",
        "<span>待处理:</span>"
      ]
    },
    {
      "id": "7efbeec6",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "463-469",
          "preview": "<span class=\"stats-value\">${this.stats.queueStatus.pending}</span> | </div> | <div class=\"stats-item\">"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "463-469",
          "preview": "<span class=\"stats-value\">${this.stats.queueStatus.pending}</span> | </div> | <div class=\"stats-item\">"
        }
      ],
      "codePreview": [
        "<span class=\"stats-value\">${this.stats.queueStatus.pending}</span>",
        "</div>",
        "<div class=\"stats-item\">",
        "<span>处理中:</span>",
        "<span class=\"stats-value\">${this.stats.queueStatus.processing ? '是' : '否'}</span>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "701f70db",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "470-476",
          "preview": "<div class=\"stats-card\"> | <h4>按类型统计</h4>"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "470-476",
          "preview": "<div class=\"stats-card\"> | <h4>按类型统计</h4>"
        }
      ],
      "codePreview": [
        "<div class=\"stats-card\">",
        "<h4>按类型统计</h4>",
        "${this.stats.typeStats.map(type => `",
        "<div class=\"stats-item\">",
        "<span>${type.type}:</span>",
        "<span class=\"stats-value\">${type.sent}/${type.delivered}</span>"
      ]
    },
    {
      "id": "9cc1aa20",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "477-483",
          "preview": "</div> | `).join('')} | </div>"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "477-483",
          "preview": "</div> | `).join('')} | </div>"
        }
      ],
      "codePreview": [
        "</div>",
        "`).join('')}",
        "</div>",
        "<div class=\"stats-card\">",
        "<h4>按渠道统计</h4>",
        "${this.stats.channelStats.slice(0, 5).map(channel => `"
      ]
    },
    {
      "id": "0f34bf51",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "484-490",
          "preview": "<div class=\"stats-item\"> | <span>${channel.channel}:</span> | <span class=\"stats-value\">${channel.sent}/${channel.delivered}</span>"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "484-490",
          "preview": "<div class=\"stats-item\"> | <span>${channel.channel}:</span> | <span class=\"stats-value\">${channel.sent}/${channel.delivered}</span>"
        }
      ],
      "codePreview": [
        "<div class=\"stats-item\">",
        "<span>${channel.channel}:</span>",
        "<span class=\"stats-value\">${channel.sent}/${channel.delivered}</span>",
        "</div>",
        "`).join('')}",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "fc707fcc",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "498-504",
          "preview": "const toast = document.getElementById('notification-toast'); | if (!toast) return;"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "498-504",
          "preview": "const toast = document.getElementById('notification-toast'); | if (!toast) return;"
        }
      ],
      "codePreview": [
        "const toast = document.getElementById('notification-toast');",
        "if (!toast) return;",
        "const notificationElement = document.createElement('div');",
        "notificationElement.className = `notification-item priority-${notification.priority || 'normal'}`;",
        "notificationElement.innerHTML = `",
        "<div class=\"notification-header\">"
      ]
    },
    {
      "id": "0a10fe65",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "505-511",
          "preview": "<strong>${notification.title}</strong> | <span class=\"notification-time\">${new Date(notification.timestamp).toLocaleTimeString()}</span> | </div>"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "505-511",
          "preview": "<strong>${notification.title}</strong> | <span class=\"notification-time\">${new Date(notification.timestamp).toLocaleTimeString()}</span> | </div>"
        }
      ],
      "codePreview": [
        "<strong>${notification.title}</strong>",
        "<span class=\"notification-time\">${new Date(notification.timestamp).toLocaleTimeString()}</span>",
        "</div>",
        "<div class=\"notification-body\">",
        "${notification.message}",
        "</div>",
        "<button class=\"notification-close\" onclick=\"this.parentElement.remove()\">×</button>"
      ]
    },
    {
      "id": "7192b927",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "15-21",
          "preview": "this.websocket = null; | this.conversationId = this.generateConversationId(); | this.isConnected = false;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "15-21",
          "preview": "this.websocket = null; | this.conversationId = this.generateConversationId(); | this.isConnected = false;"
        }
      ],
      "codePreview": [
        "this.websocket = null;",
        "this.conversationId = this.generateConversationId();",
        "this.isConnected = false;",
        "this.messageHistory = [];",
        "this.currentContext = {};",
        "this.typingIndicator = null;",
        "this.autoReplyEnabled = options.autoReply !== false;"
      ]
    },
    {
      "id": "162b556b",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "64-70",
          "preview": "<!-- 聊天头部 --> | <div class=\"ai-chatbot-header\"> | <div class=\"ai-bot-avatar\">"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "64-70",
          "preview": "<!-- 聊天头部 --> | <div class=\"ai-chatbot-header\"> | <div class=\"ai-bot-avatar\">"
        }
      ],
      "codePreview": [
        "<!-- 聊天头部 -->",
        "<div class=\"ai-chatbot-header\">",
        "<div class=\"ai-bot-avatar\">",
        "<div class=\"bot-status-indicator\" id=\"botStatusIndicator\"></div>",
        "🤖",
        "</div>",
        "<div class=\"ai-bot-info\">"
      ]
    },
    {
      "id": "4d499cef",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "71-77",
          "preview": "<div class=\"ai-bot-name\">AI智能助手</div> | <div class=\"ai-bot-status\" id=\"botStatusText\">正在连接...</div> | </div>"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "71-77",
          "preview": "<div class=\"ai-bot-name\">AI智能助手</div> | <div class=\"ai-bot-status\" id=\"botStatusText\">正在连接...</div> | </div>"
        }
      ],
      "codePreview": [
        "<div class=\"ai-bot-name\">AI智能助手</div>",
        "<div class=\"ai-bot-status\" id=\"botStatusText\">正在连接...</div>",
        "</div>",
        "<div class=\"ai-chatbot-actions\">",
        "<button class=\"btn-icon\" id=\"aiSettingsBtn\" title=\"设置\">⚙️</button>",
        "<button class=\"btn-icon\" id=\"aiMinimizeBtn\" title=\"最小化\">➖</button>",
        "<button class=\"btn-icon\" id=\"aiCloseBtn\" title=\"关闭\">✕</button>"
      ]
    },
    {
      "id": "e3af1df0",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "78-84",
          "preview": "</div> | </div>"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "78-84",
          "preview": "</div> | </div>"
        }
      ],
      "codePreview": [
        "</div>",
        "</div>",
        "<!-- 聊天消息区域 -->",
        "<div class=\"ai-chatbot-messages\" id=\"aiChatMessages\">",
        "<div class=\"ai-message-container\">",
        "<div class=\"ai-system-message\">"
      ]
    },
    {
      "id": "b0330a30",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "85-91",
          "preview": "🤖 AI智能客服已启动，我将为您提供专业的服务！ | </div> | </div>"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "85-91",
          "preview": "🤖 AI智能客服已启动，我将为您提供专业的服务！ | </div> | </div>"
        }
      ],
      "codePreview": [
        "🤖 AI智能客服已启动，我将为您提供专业的服务！",
        "</div>",
        "</div>",
        "</div>",
        "<!-- 智能建议区域 -->",
        "<div class=\"ai-suggestions-container\" id=\"aiSuggestions\" style=\"display: none;\">"
      ]
    },
    {
      "id": "40bcf12a",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "92-98",
          "preview": "<div class=\"ai-suggestions-title\">💡 智能建议：</div> | <div class=\"ai-suggestions-list\" id=\"aiSuggestionsList\"></div> | </div>"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "92-98",
          "preview": "<div class=\"ai-suggestions-title\">💡 智能建议：</div> | <div class=\"ai-suggestions-list\" id=\"aiSuggestionsList\"></div> | </div>"
        }
      ],
      "codePreview": [
        "<div class=\"ai-suggestions-title\">💡 智能建议：</div>",
        "<div class=\"ai-suggestions-list\" id=\"aiSuggestionsList\"></div>",
        "</div>",
        "<!-- 快速回复区域 -->",
        "<div class=\"ai-quick-replies\" id=\"aiQuickReplies\">",
        "<div class=\"ai-quick-reply-item\" data-text=\"查看营业时间\">🕐 营业时间</div>"
      ]
    },
    {
      "id": "334fc77a",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "99-105",
          "preview": "<div class=\"ai-quick-reply-item\" data-text=\"联系方式\">📞 联系方式</div> | <div class=\"ai-quick-reply-item\" data-text=\"退换货政策\">🔄 退换货</div> | <div class=\"ai-quick-reply-item\" data-text=\"转人工客服\">👨‍💼 人工客服</div>"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "99-105",
          "preview": "<div class=\"ai-quick-reply-item\" data-text=\"联系方式\">📞 联系方式</div> | <div class=\"ai-quick-reply-item\" data-text=\"退换货政策\">🔄 退换货</div> | <div class=\"ai-quick-reply-item\" data-text=\"转人工客服\">👨‍💼 人工客服</div>"
        }
      ],
      "codePreview": [
        "<div class=\"ai-quick-reply-item\" data-text=\"联系方式\">📞 联系方式</div>",
        "<div class=\"ai-quick-reply-item\" data-text=\"退换货政策\">🔄 退换货</div>",
        "<div class=\"ai-quick-reply-item\" data-text=\"转人工客服\">👨‍💼 人工客服</div>",
        "</div>",
        "<!-- 输入区域 -->",
        "<div class=\"ai-chatbot-input\">"
      ]
    },
    {
      "id": "4e4c6a59",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "106-112",
          "preview": "<div class=\"ai-input-container\"> | <textarea | id=\"aiMessageInput\""
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "106-112",
          "preview": "<div class=\"ai-input-container\"> | <textarea | id=\"aiMessageInput\""
        }
      ],
      "codePreview": [
        "<div class=\"ai-input-container\">",
        "<textarea",
        "id=\"aiMessageInput\"",
        "placeholder=\"请输入您的问题...\"",
        "rows=\"1\"",
        "maxlength=\"500\"",
        "></textarea>"
      ]
    },
    {
      "id": "1a9f35a0",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "113-119",
          "preview": "<div class=\"ai-input-actions\"> | <button class=\"btn-icon\" id=\"aiEmojiBtn\" title=\"表情\">😊</button> | <button class=\"btn-icon\" id=\"aiVoiceBtn\" title=\"语音\">🎤</button>"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "113-119",
          "preview": "<div class=\"ai-input-actions\"> | <button class=\"btn-icon\" id=\"aiEmojiBtn\" title=\"表情\">😊</button> | <button class=\"btn-icon\" id=\"aiVoiceBtn\" title=\"语音\">🎤</button>"
        }
      ],
      "codePreview": [
        "<div class=\"ai-input-actions\">",
        "<button class=\"btn-icon\" id=\"aiEmojiBtn\" title=\"表情\">😊</button>",
        "<button class=\"btn-icon\" id=\"aiVoiceBtn\" title=\"语音\">🎤</button>",
        "<button class=\"btn-primary\" id=\"aiSendBtn\" title=\"发送\">",
        "<span class=\"btn-text\">发送</span>",
        "<span class=\"btn-icon\">➤</span>",
        "</button>"
      ]
    },
    {
      "id": "eaff519a",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "120-126",
          "preview": "</div> | </div> | <div class=\"ai-input-status\">"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "120-126",
          "preview": "</div> | </div> | <div class=\"ai-input-status\">"
        }
      ],
      "codePreview": [
        "</div>",
        "</div>",
        "<div class=\"ai-input-status\">",
        "<span class=\"ai-char-count\" id=\"aiCharCount\">0/500</span>",
        "<span class=\"ai-typing-status\" id=\"aiTypingStatus\"></span>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "a2b00167",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "127-133",
          "preview": "<!-- AI状态指示器 --> | <div class=\"ai-status-bar\" id=\"aiStatusBar\">"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "127-133",
          "preview": "<!-- AI状态指示器 --> | <div class=\"ai-status-bar\" id=\"aiStatusBar\">"
        }
      ],
      "codePreview": [
        "<!-- AI状态指示器 -->",
        "<div class=\"ai-status-bar\" id=\"aiStatusBar\">",
        "<div class=\"ai-status-item\">",
        "<span class=\"ai-status-label\">智能分析:</span>",
        "<span class=\"ai-status-value\" id=\"aiAnalysisStatus\">待机中</span>",
        "</div>"
      ]
    },
    {
      "id": "9e2b91d5",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "134-140",
          "preview": "<div class=\"ai-status-item\"> | <span class=\"ai-status-label\">置信度:</span> | <span class=\"ai-status-value\" id=\"aiConfidenceScore\">--</span>"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "134-140",
          "preview": "<div class=\"ai-status-item\"> | <span class=\"ai-status-label\">置信度:</span> | <span class=\"ai-status-value\" id=\"aiConfidenceScore\">--</span>"
        }
      ],
      "codePreview": [
        "<div class=\"ai-status-item\">",
        "<span class=\"ai-status-label\">置信度:</span>",
        "<span class=\"ai-status-value\" id=\"aiConfidenceScore\">--</span>",
        "</div>",
        "<div class=\"ai-status-item\">",
        "<span class=\"ai-status-label\">情感:</span>",
        "<span class=\"ai-status-value\" id=\"aiSentimentScore\">中性</span>"
      ]
    },
    {
      "id": "f325ae8e",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "141-147",
          "preview": "</div> | </div> | </div>"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "141-147",
          "preview": "</div> | </div> | </div>"
        }
      ],
      "codePreview": [
        "</div>",
        "</div>",
        "</div>",
        "<!-- AI设置面板 -->",
        "<div class=\"ai-settings-panel\" id=\"aiSettingsPanel\" style=\"display: none;\">",
        "<div class=\"ai-settings-header\">"
      ]
    },
    {
      "id": "f16b4f79",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "148-154",
          "preview": "<h3>🤖 AI设置</h3> | <button class=\"btn-close\" id=\"aiSettingsCloseBtn\">✕</button> | </div>"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "148-154",
          "preview": "<h3>🤖 AI设置</h3> | <button class=\"btn-close\" id=\"aiSettingsCloseBtn\">✕</button> | </div>"
        }
      ],
      "codePreview": [
        "<h3>🤖 AI设置</h3>",
        "<button class=\"btn-close\" id=\"aiSettingsCloseBtn\">✕</button>",
        "</div>",
        "<div class=\"ai-settings-content\">",
        "<div class=\"ai-setting-group\">",
        "<label class=\"ai-setting-label\">",
        "<input type=\"checkbox\" id=\"autoReplyToggle\" checked>"
      ]
    },
    {
      "id": "61697419",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "155-161",
          "preview": "启用自动回复 | </label> | </div>"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "155-161",
          "preview": "启用自动回复 | </label> | </div>"
        }
      ],
      "codePreview": [
        "启用自动回复",
        "</label>",
        "</div>",
        "<div class=\"ai-setting-group\">",
        "<label class=\"ai-setting-label\">",
        "<input type=\"checkbox\" id=\"smartSuggestionsToggle\" checked>",
        "智能建议"
      ]
    },
    {
      "id": "3897c818",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "162-168",
          "preview": "</label> | </div> | <div class=\"ai-setting-group\">"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "162-168",
          "preview": "</label> | </div> | <div class=\"ai-setting-group\">"
        }
      ],
      "codePreview": [
        "</label>",
        "</div>",
        "<div class=\"ai-setting-group\">",
        "<label class=\"ai-setting-label\">",
        "<input type=\"checkbox\" id=\"sentimentAnalysisToggle\" checked>",
        "情感分析",
        "</label>"
      ]
    },
    {
      "id": "c397ae54",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "169-175",
          "preview": "</div> | <div class=\"ai-setting-group\"> | <label class=\"ai-setting-label\">响应延迟 (毫秒):</label>"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "169-175",
          "preview": "</div> | <div class=\"ai-setting-group\"> | <label class=\"ai-setting-label\">响应延迟 (毫秒):</label>"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"ai-setting-group\">",
        "<label class=\"ai-setting-label\">响应延迟 (毫秒):</label>",
        "<input type=\"range\" id=\"responseDelaySlider\" min=\"0\" max=\"3000\" value=\"800\" step=\"100\">",
        "<span id=\"responseDelayValue\">800ms</span>",
        "</div>",
        "<div class=\"ai-setting-group\">"
      ]
    },
    {
      "id": "4045e6ce",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "176-182",
          "preview": "<label class=\"ai-setting-label\">转人工阈值:</label> | <input type=\"range\" id=\"handoffThresholdSlider\" min=\"0\" max=\"1\" value=\"0.3\" step=\"0.1\"> | <span id=\"handoffThresholdValue\">0.3</span>"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "176-182",
          "preview": "<label class=\"ai-setting-label\">转人工阈值:</label> | <input type=\"range\" id=\"handoffThresholdSlider\" min=\"0\" max=\"1\" value=\"0.3\" step=\"0.1\"> | <span id=\"handoffThresholdValue\">0.3</span>"
        }
      ],
      "codePreview": [
        "<label class=\"ai-setting-label\">转人工阈值:</label>",
        "<input type=\"range\" id=\"handoffThresholdSlider\" min=\"0\" max=\"1\" value=\"0.3\" step=\"0.1\">",
        "<span id=\"handoffThresholdValue\">0.3</span>",
        "</div>",
        "</div>",
        "</div>",
        "`;"
      ]
    },
    {
      "id": "c0b29bc3",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "197-203",
          "preview": ".ai-chatbot-container { | width: 100%; | height: 600px;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "197-203",
          "preview": ".ai-chatbot-container { | width: 100%; | height: 600px;"
        }
      ],
      "codePreview": [
        ".ai-chatbot-container {",
        "width: 100%;",
        "height: 600px;",
        "background: #ffffff;",
        "border-radius: 12px;",
        "box-shadow: 0 4px 20px rgba(0,0,0,0.1);",
        "display: flex;"
      ]
    },
    {
      "id": "c4231dc7",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "211-217",
          "preview": "color: white; | padding: 16px; | display: flex;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "211-217",
          "preview": "color: white; | padding: 16px; | display: flex;"
        }
      ],
      "codePreview": [
        "color: white;",
        "padding: 16px;",
        "display: flex;",
        "align-items: center;",
        "gap: 12px;",
        "border-radius: 12px 12px 0 0;",
        "}"
      ]
    },
    {
      "id": "33d4a7da",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "218-224",
          "preview": ".ai-bot-avatar { | width: 40px;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "218-224",
          "preview": ".ai-bot-avatar { | width: 40px;"
        }
      ],
      "codePreview": [
        ".ai-bot-avatar {",
        "width: 40px;",
        "height: 40px;",
        "background: rgba(255,255,255,0.2);",
        "border-radius: 50%;",
        "display: flex;"
      ]
    },
    {
      "id": "3d971943",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "281-287",
          "preview": ".ai-message { | max-width: 80%; | padding: 12px 16px;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "281-287",
          "preview": ".ai-message { | max-width: 80%; | padding: 12px 16px;"
        }
      ],
      "codePreview": [
        ".ai-message {",
        "max-width: 80%;",
        "padding: 12px 16px;",
        "border-radius: 18px;",
        "word-wrap: break-word;",
        "position: relative;",
        "animation: messageSlideIn 0.3s ease-out;"
      ]
    },
    {
      "id": "6d9e1855",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "323-329",
          "preview": ".ai-system-message { | background: #eff6ff; | color: #1d4ed8;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "323-329",
          "preview": ".ai-system-message { | background: #eff6ff; | color: #1d4ed8;"
        }
      ],
      "codePreview": [
        ".ai-system-message {",
        "background: #eff6ff;",
        "color: #1d4ed8;",
        "padding: 12px;",
        "border-radius: 8px;",
        "text-align: center;",
        "font-size: 14px;"
      ]
    },
    {
      "id": "29c06ac5",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "351-357",
          "preview": "align-items: center; | gap: 8px; | padding: 12px 16px;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "351-357",
          "preview": "align-items: center; | gap: 8px; | padding: 12px 16px;"
        }
      ],
      "codePreview": [
        "align-items: center;",
        "gap: 8px;",
        "padding: 12px 16px;",
        "background: white;",
        "border-radius: 18px;",
        "border: 1px solid #e2e8f0;",
        "max-width: 80px;"
      ]
    },
    {
      "id": "101b8918",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "365-371",
          "preview": ".ai-typing-dot { | width: 6px;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "365-371",
          "preview": ".ai-typing-dot { | width: 6px;"
        }
      ],
      "codePreview": [
        ".ai-typing-dot {",
        "width: 6px;",
        "height: 6px;",
        "background: #94a3b8;",
        "border-radius: 50%;",
        "animation: typingPulse 1.4s infinite;"
      ]
    },
    {
      "id": "4fefaefe",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "428-434",
          "preview": "background: #f1f5f9; | border: 1px solid #cbd5e1; | color: #475569;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "428-434",
          "preview": "background: #f1f5f9; | border: 1px solid #cbd5e1; | color: #475569;"
        }
      ],
      "codePreview": [
        "background: #f1f5f9;",
        "border: 1px solid #cbd5e1;",
        "color: #475569;",
        "padding: 8px 12px;",
        "border-radius: 16px;",
        "font-size: 13px;",
        "cursor: pointer;"
      ]
    },
    {
      "id": "fcba7996",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "470-476",
          "preview": "outline: none; | background: transparent; | resize: none;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "470-476",
          "preview": "outline: none; | background: transparent; | resize: none;"
        }
      ],
      "codePreview": [
        "outline: none;",
        "background: transparent;",
        "resize: none;",
        "font-size: 14px;",
        "line-height: 1.5;",
        "padding: 8px 12px;",
        "min-height: 20px;"
      ]
    },
    {
      "id": "71e86c4e",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "519-525",
          "preview": ".ai-settings-panel { | position: absolute; | top: 60px;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "519-525",
          "preview": ".ai-settings-panel { | position: absolute; | top: 60px;"
        }
      ],
      "codePreview": [
        ".ai-settings-panel {",
        "position: absolute;",
        "top: 60px;",
        "right: 16px;",
        "width: 280px;",
        "background: white;",
        "border: 1px solid #e2e8f0;"
      ]
    },
    {
      "id": "9b1e34a1",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "547-553",
          "preview": ".ai-setting-label { | display: flex;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "547-553",
          "preview": ".ai-setting-label { | display: flex;"
        }
      ],
      "codePreview": [
        ".ai-setting-label {",
        "display: flex;",
        "align-items: center;",
        "gap: 8px;",
        "font-size: 14px;",
        "color: #374151;"
      ]
    },
    {
      "id": "b5a4d6ab",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "575-581",
          "preview": "padding: 8px 16px; | border-radius: 20px; | cursor: pointer;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "575-581",
          "preview": "padding: 8px 16px; | border-radius: 20px; | cursor: pointer;"
        }
      ],
      "codePreview": [
        "padding: 8px 16px;",
        "border-radius: 20px;",
        "cursor: pointer;",
        "font-size: 14px;",
        "font-weight: 500;",
        "display: flex;",
        "align-items: center;"
      ]
    },
    {
      "id": "2d585df1",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "631-637",
          "preview": "position: fixed; | top: 0; | right: 0;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "631-637",
          "preview": "position: fixed; | top: 0; | right: 0;"
        }
      ],
      "codePreview": [
        "position: fixed;",
        "top: 0;",
        "right: 0;",
        "left: 0;",
        "bottom: 0;",
        "width: 100%;",
        "border-radius: 0;"
      ]
    },
    {
      "id": "d571dcf7",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "736-742",
          "preview": "*/ | bindEvents() { | const sendBtn = document.getElementById('aiSendBtn');"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "736-742",
          "preview": "*/ | bindEvents() { | const sendBtn = document.getElementById('aiSendBtn');"
        }
      ],
      "codePreview": [
        "bindEvents() {",
        "const sendBtn = document.getElementById('aiSendBtn');",
        "const messageInput = document.getElementById('aiMessageInput');",
        "const settingsBtn = document.getElementById('aiSettingsBtn');",
        "const closeBtn = document.getElementById('aiCloseBtn');",
        "const quickReplies = document.querySelectorAll('.ai-quick-reply-item');"
      ]
    },
    {
      "id": "4706dc83",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "799-805",
          "preview": "document.getElementById('responseDelayValue').textContent = `${value}ms`; | });"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "799-805",
          "preview": "document.getElementById('responseDelayValue').textContent = `${value}ms`; | });"
        }
      ],
      "codePreview": [
        "document.getElementById('responseDelayValue').textContent = `${value}ms`;",
        "});",
        "handoffThresholdSlider?.addEventListener('input', (e) => {",
        "const value = e.target.value;",
        "this.humanHandoffThreshold = parseFloat(value);",
        "document.getElementById('handoffThresholdValue').textContent = value;"
      ]
    },
    {
      "id": "753d7705",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "876-882",
          "preview": "method: 'POST', | headers: { | 'Content-Type': 'application/json'"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "876-882",
          "preview": "method: 'POST', | headers: { | 'Content-Type': 'application/json'"
        }
      ],
      "codePreview": [
        "method: 'POST',",
        "headers: {",
        "'Content-Type': 'application/json'",
        "},",
        "body: JSON.stringify({",
        "message: message,",
        "conversationId: this.conversationId,"
      ]
    },
    {
      "id": "c949a719",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "904-910",
          "preview": "handleWebSocketMessage(data) { | switch (data.type) { | case 'ai_response':"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "904-910",
          "preview": "handleWebSocketMessage(data) { | switch (data.type) { | case 'ai_response':"
        }
      ],
      "codePreview": [
        "handleWebSocketMessage(data) {",
        "switch (data.type) {",
        "case 'ai_response':",
        "this.handleAIResponse(data);",
        "break;",
        "case 'ai_suggestions':",
        "this.showSuggestions(data.suggestions);"
      ]
    },
    {
      "id": "2da5fe2e",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "911-917",
          "preview": "break; | case 'ai_context_update': | this.updateContext(data.context);"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "911-917",
          "preview": "break; | case 'ai_context_update': | this.updateContext(data.context);"
        }
      ],
      "codePreview": [
        "break;",
        "case 'ai_context_update':",
        "this.updateContext(data.context);",
        "break;",
        "case 'ai_error':",
        "this.handleAIError(data.error);",
        "break;"
      ]
    },
    {
      "id": "a8a67a75",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "1002-1008",
          "preview": "metaElement.textContent = metaText; | messageElement.appendChild(metaElement);"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "1002-1008",
          "preview": "metaElement.textContent = metaText; | messageElement.appendChild(metaElement);"
        }
      ],
      "codePreview": [
        "metaElement.textContent = metaText;",
        "messageElement.appendChild(metaElement);",
        "if (meta.confidence) {",
        "const badge = document.createElement('span');",
        "badge.className = 'ai-confidence-badge';",
        "badge.textContent = `${(meta.confidence * 100).toFixed(0)}%`;"
      ]
    },
    {
      "id": "fc923562",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "1037-1043",
          "preview": "this.typingIndicator = document.createElement('div'); | this.typingIndicator.className = 'ai-typing-indicator';"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "1037-1043",
          "preview": "this.typingIndicator = document.createElement('div'); | this.typingIndicator.className = 'ai-typing-indicator';"
        }
      ],
      "codePreview": [
        "this.typingIndicator = document.createElement('div');",
        "this.typingIndicator.className = 'ai-typing-indicator';",
        "this.typingIndicator.innerHTML = `",
        "<div class=\"ai-typing-dots\">",
        "<div class=\"ai-typing-dot\"></div>",
        "<div class=\"ai-typing-dot\"></div>"
      ]
    },
    {
      "id": "d402cde0",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "1079-1085",
          "preview": "item.className = 'ai-suggestion-item'; | item.textContent = suggestion.text || suggestion; | item.addEventListener('click', () => {"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "1079-1085",
          "preview": "item.className = 'ai-suggestion-item'; | item.textContent = suggestion.text || suggestion; | item.addEventListener('click', () => {"
        }
      ],
      "codePreview": [
        "item.className = 'ai-suggestion-item';",
        "item.textContent = suggestion.text || suggestion;",
        "item.addEventListener('click', () => {",
        "document.getElementById('aiMessageInput').value = suggestion.text || suggestion;",
        "this.handleSendMessage();",
        "suggestionsContainer.style.display = 'none';",
        "});"
      ]
    },
    {
      "id": "be611a58",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "1128-1134",
          "preview": "handoffButton.style.color = 'white'; | handoffButton.style.borderColor = '#dc2626'; | handoffButton.textContent = '🆘 转接人工客服';"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "1128-1134",
          "preview": "handoffButton.style.color = 'white'; | handoffButton.style.borderColor = '#dc2626'; | handoffButton.textContent = '🆘 转接人工客服';"
        }
      ],
      "codePreview": [
        "handoffButton.style.color = 'white';",
        "handoffButton.style.borderColor = '#dc2626';",
        "handoffButton.textContent = '🆘 转接人工客服';",
        "handoffButton.addEventListener('click', () => {",
        "this.initiateHumanHandoff();",
        "});"
      ]
    },
    {
      "id": "c822ede2",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "1205-1211",
          "preview": "*/ | getSentimentColor(sentiment) { | switch (sentiment) {"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "1205-1211",
          "preview": "*/ | getSentimentColor(sentiment) { | switch (sentiment) {"
        }
      ],
      "codePreview": [
        "getSentimentColor(sentiment) {",
        "switch (sentiment) {",
        "case 'very_positive':",
        "case 'positive':",
        "return '#059669';",
        "case 'very_negative':"
      ]
    },
    {
      "id": "4cb00247",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "1254-1260",
          "preview": "setTimeout(() => { | this.displayMessage( | '您好！我是AI智能客服助手，很高兴为您服务！\\n\\n我可以帮助您：\\n• 回答常见问题\\n• 提供产品信息\\n• 处理售后咨询\\n• 解决技术问题\\n\\n请输入您的问题，或点击下方快速回复开始对话。',"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "1254-1260",
          "preview": "setTimeout(() => { | this.displayMessage( | '您好！我是AI智能客服助手，很高兴为您服务！\\n\\n我可以帮助您：\\n• 回答常见问题\\n• 提供产品信息\\n• 处理售后咨询\\n• 解决技术问题\\n\\n请输入您的问题，或点击下方快速回复开始对话。',"
        }
      ],
      "codePreview": [
        "setTimeout(() => {",
        "this.displayMessage(",
        "'您好！我是AI智能客服助手，很高兴为您服务！\\n\\n我可以帮助您：\\n• 回答常见问题\\n• 提供产品信息\\n• 处理售后咨询\\n• 解决技术问题\\n\\n请输入您的问题，或点击下方快速回复开始对话。',",
        "'bot',",
        "{ confidence: 1.0, intent: 'greeting' }",
        ");",
        "}, 500);"
      ]
    },
    {
      "id": "4dd4744f",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "1345-1351",
          "preview": "const data = { | conversationId: this.conversationId, | shopId: this.shopId,"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "1345-1351",
          "preview": "const data = { | conversationId: this.conversationId, | shopId: this.shopId,"
        }
      ],
      "codePreview": [
        "const data = {",
        "conversationId: this.conversationId,",
        "shopId: this.shopId,",
        "messages: this.messageHistory,",
        "context: this.currentContext,",
        "exportTime: new Date().toISOString()",
        "};"
      ]
    },
    {
      "id": "7782f5fc",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "71-77",
          "preview": "aiInterface.innerHTML = ` | <div class=\"ai-assistant-header\"> | <div class=\"ai-assistant-title\">"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "71-77",
          "preview": "aiInterface.innerHTML = ` | <div class=\"ai-assistant-header\"> | <div class=\"ai-assistant-title\">"
        }
      ],
      "codePreview": [
        "aiInterface.innerHTML = `",
        "<div class=\"ai-assistant-header\">",
        "<div class=\"ai-assistant-title\">",
        "<i class=\"fas fa-robot\"></i>",
        "<span>AI智能助手</span>",
        "<div class=\"ai-status-indicator\" id=\"ai-status\">",
        "<span class=\"status-dot\"></span>"
      ]
    },
    {
      "id": "260b4b38",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "78-84",
          "preview": "<span class=\"status-text\">就绪</span> | </div> | </div>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "78-84",
          "preview": "<span class=\"status-text\">就绪</span> | </div> | </div>"
        }
      ],
      "codePreview": [
        "<span class=\"status-text\">就绪</span>",
        "</div>",
        "</div>",
        "<div class=\"ai-assistant-controls\">",
        "<button class=\"ai-toggle-btn\" id=\"ai-toggle\">",
        "<i class=\"fas fa-power-off\"></i>",
        "</button>"
      ]
    },
    {
      "id": "23b2632d",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "85-91",
          "preview": "<button class=\"ai-settings-btn\" id=\"ai-settings\"> | <i class=\"fas fa-cog\"></i> | </button>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "85-91",
          "preview": "<button class=\"ai-settings-btn\" id=\"ai-settings\"> | <i class=\"fas fa-cog\"></i> | </button>"
        }
      ],
      "codePreview": [
        "<button class=\"ai-settings-btn\" id=\"ai-settings\">",
        "<i class=\"fas fa-cog\"></i>",
        "</button>",
        "</div>",
        "</div>",
        "<div class=\"ai-assistant-content\" id=\"ai-content\">"
      ]
    },
    {
      "id": "6ffb4ae6",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "92-98",
          "preview": "<!-- 回复建议面板 --> | <div class=\"ai-panel reply-suggestions-panel\"> | <div class=\"panel-header\">"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "92-98",
          "preview": "<!-- 回复建议面板 --> | <div class=\"ai-panel reply-suggestions-panel\"> | <div class=\"panel-header\">"
        }
      ],
      "codePreview": [
        "<!-- 回复建议面板 -->",
        "<div class=\"ai-panel reply-suggestions-panel\">",
        "<div class=\"panel-header\">",
        "<h4><i class=\"fas fa-lightbulb\"></i> 智能回复建议</h4>",
        "<button class=\"refresh-btn\" id=\"refresh-suggestions\">",
        "<i class=\"fas fa-sync-alt\"></i>",
        "</button>"
      ]
    },
    {
      "id": "a7cfd38c",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "99-105",
          "preview": "</div> | <div class=\"panel-content\"> | <div class=\"suggestions-container\" id=\"suggestions-container\">"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "99-105",
          "preview": "</div> | <div class=\"panel-content\"> | <div class=\"suggestions-container\" id=\"suggestions-container\">"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"panel-content\">",
        "<div class=\"suggestions-container\" id=\"suggestions-container\">",
        "<div class=\"no-suggestions\">",
        "<i class=\"fas fa-comment-dots\"></i>",
        "<p>选择对话以获取智能回复建议</p>",
        "</div>"
      ]
    },
    {
      "id": "41383cd8",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "106-112",
          "preview": "</div> | </div> | </div>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "106-112",
          "preview": "</div> | </div> | </div>"
        }
      ],
      "codePreview": [
        "</div>",
        "</div>",
        "</div>",
        "<!-- 消息分析面板 -->",
        "<div class=\"ai-panel message-analysis-panel\" style=\"display: ${this.options.showAnalysis ? 'block' : 'none'};\">",
        "<div class=\"panel-header\">"
      ]
    },
    {
      "id": "aa80f507",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "113-119",
          "preview": "<h4><i class=\"fas fa-analytics\"></i> 消息分析</h4> | <button class=\"toggle-analysis-btn\" id=\"toggle-analysis\"> | <i class=\"fas fa-eye\"></i>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "113-119",
          "preview": "<h4><i class=\"fas fa-analytics\"></i> 消息分析</h4> | <button class=\"toggle-analysis-btn\" id=\"toggle-analysis\"> | <i class=\"fas fa-eye\"></i>"
        }
      ],
      "codePreview": [
        "<h4><i class=\"fas fa-analytics\"></i> 消息分析</h4>",
        "<button class=\"toggle-analysis-btn\" id=\"toggle-analysis\">",
        "<i class=\"fas fa-eye\"></i>",
        "</button>",
        "</div>",
        "<div class=\"panel-content\">",
        "<div class=\"analysis-container\" id=\"analysis-container\">"
      ]
    },
    {
      "id": "d68240b9",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "120-126",
          "preview": "<!-- 意图识别 --> | <div class=\"analysis-item\"> | <label>意图识别:</label>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "120-126",
          "preview": "<!-- 意图识别 --> | <div class=\"analysis-item\"> | <label>意图识别:</label>"
        }
      ],
      "codePreview": [
        "<!-- 意图识别 -->",
        "<div class=\"analysis-item\">",
        "<label>意图识别:</label>",
        "<div class=\"intent-result\" id=\"intent-result\">",
        "<span class=\"intent-label\">未知</span>",
        "<span class=\"confidence-score\">0%</span>",
        "</div>"
      ]
    },
    {
      "id": "34322a69",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "127-133",
          "preview": "</div> | <!-- 情感分析 -->"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "127-133",
          "preview": "</div> | <!-- 情感分析 -->"
        }
      ],
      "codePreview": [
        "</div>",
        "<!-- 情感分析 -->",
        "<div class=\"analysis-item\">",
        "<label>情感分析:</label>",
        "<div class=\"sentiment-result\" id=\"sentiment-result\">",
        "<span class=\"sentiment-label neutral\">中性</span>"
      ]
    },
    {
      "id": "995d3f0f",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "134-140",
          "preview": "<div class=\"sentiment-meter\"> | <div class=\"sentiment-bar\" id=\"sentiment-bar\"></div> | </div>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "134-140",
          "preview": "<div class=\"sentiment-meter\"> | <div class=\"sentiment-bar\" id=\"sentiment-bar\"></div> | </div>"
        }
      ],
      "codePreview": [
        "<div class=\"sentiment-meter\">",
        "<div class=\"sentiment-bar\" id=\"sentiment-bar\"></div>",
        "</div>",
        "</div>",
        "</div>",
        "<!-- 关键词 -->"
      ]
    },
    {
      "id": "0dd67ddb",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "141-147",
          "preview": "<div class=\"analysis-item\"> | <label>关键词:</label> | <div class=\"keywords-container\" id=\"keywords-container\">"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "141-147",
          "preview": "<div class=\"analysis-item\"> | <label>关键词:</label> | <div class=\"keywords-container\" id=\"keywords-container\">"
        }
      ],
      "codePreview": [
        "<div class=\"analysis-item\">",
        "<label>关键词:</label>",
        "<div class=\"keywords-container\" id=\"keywords-container\">",
        "<span class=\"no-keywords\">暂无关键词</span>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "ecf746fc",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "148-154",
          "preview": "<!-- 实体识别 --> | <div class=\"analysis-item\"> | <label>实体识别:</label>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "148-154",
          "preview": "<!-- 实体识别 --> | <div class=\"analysis-item\"> | <label>实体识别:</label>"
        }
      ],
      "codePreview": [
        "<!-- 实体识别 -->",
        "<div class=\"analysis-item\">",
        "<label>实体识别:</label>",
        "<div class=\"entities-container\" id=\"entities-container\">",
        "<span class=\"no-entities\">暂无实体</span>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "78e1cbee",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "155-161",
          "preview": "</div> | </div> | </div>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "155-161",
          "preview": "</div> | </div> | </div>"
        }
      ],
      "codePreview": [
        "</div>",
        "</div>",
        "</div>",
        "<!-- 自动回复面板 -->",
        "<div class=\"ai-panel auto-reply-panel\">",
        "<div class=\"panel-header\">"
      ]
    },
    {
      "id": "9bfdfc57",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "162-168",
          "preview": "<h4><i class=\"fas fa-magic\"></i> 自动回复</h4> | <div class=\"auto-reply-toggle\"> | <input type=\"checkbox\" id=\"auto-reply-enabled\" class=\"toggle-switch\">"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "162-168",
          "preview": "<h4><i class=\"fas fa-magic\"></i> 自动回复</h4> | <div class=\"auto-reply-toggle\"> | <input type=\"checkbox\" id=\"auto-reply-enabled\" class=\"toggle-switch\">"
        }
      ],
      "codePreview": [
        "<h4><i class=\"fas fa-magic\"></i> 自动回复</h4>",
        "<div class=\"auto-reply-toggle\">",
        "<input type=\"checkbox\" id=\"auto-reply-enabled\" class=\"toggle-switch\">",
        "<label for=\"auto-reply-enabled\"></label>",
        "</div>",
        "</div>",
        "<div class=\"panel-content\">"
      ]
    },
    {
      "id": "a027b358",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "169-175",
          "preview": "<div class=\"auto-reply-result\" id=\"auto-reply-result\"> | <div class=\"no-auto-reply\"> | <i class=\"fas fa-robot\"></i>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "169-175",
          "preview": "<div class=\"auto-reply-result\" id=\"auto-reply-result\"> | <div class=\"no-auto-reply\"> | <i class=\"fas fa-robot\"></i>"
        }
      ],
      "codePreview": [
        "<div class=\"auto-reply-result\" id=\"auto-reply-result\">",
        "<div class=\"no-auto-reply\">",
        "<i class=\"fas fa-robot\"></i>",
        "<p>暂无自动回复建议</p>",
        "</div>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "00a1f050",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "176-182",
          "preview": "</div> | <!-- 知识库快速搜索 -->"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "176-182",
          "preview": "</div> | <!-- 知识库快速搜索 -->"
        }
      ],
      "codePreview": [
        "</div>",
        "<!-- 知识库快速搜索 -->",
        "<div class=\"ai-panel knowledge-search-panel\">",
        "<div class=\"panel-header\">",
        "<h4><i class=\"fas fa-search\"></i> 知识库搜索</h4>",
        "</div>"
      ]
    },
    {
      "id": "41f1d464",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "183-189",
          "preview": "<div class=\"panel-content\"> | <div class=\"search-input-container\"> | <input type=\"text\" id=\"kb-search-input\" placeholder=\"搜索知识库...\" class=\"search-input\">"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "183-189",
          "preview": "<div class=\"panel-content\"> | <div class=\"search-input-container\"> | <input type=\"text\" id=\"kb-search-input\" placeholder=\"搜索知识库...\" class=\"search-input\">"
        }
      ],
      "codePreview": [
        "<div class=\"panel-content\">",
        "<div class=\"search-input-container\">",
        "<input type=\"text\" id=\"kb-search-input\" placeholder=\"搜索知识库...\" class=\"search-input\">",
        "<button class=\"search-btn\" id=\"kb-search-btn\">",
        "<i class=\"fas fa-search\"></i>",
        "</button>",
        "</div>"
      ]
    },
    {
      "id": "351bc26e",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "190-196",
          "preview": "<div class=\"search-results\" id=\"kb-search-results\"> | <!-- 搜索结果将在这里显示 --> | </div>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "190-196",
          "preview": "<div class=\"search-results\" id=\"kb-search-results\"> | <!-- 搜索结果将在这里显示 --> | </div>"
        }
      ],
      "codePreview": [
        "<div class=\"search-results\" id=\"kb-search-results\">",
        "<!-- 搜索结果将在这里显示 -->",
        "</div>",
        "</div>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "6df59dd7",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "197-203",
          "preview": "<!-- AI设置模态框 --> | <div class=\"ai-settings-modal\" id=\"ai-settings-modal\" style=\"display: none;\"> | <div class=\"modal-content\">"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "197-203",
          "preview": "<!-- AI设置模态框 --> | <div class=\"ai-settings-modal\" id=\"ai-settings-modal\" style=\"display: none;\"> | <div class=\"modal-content\">"
        }
      ],
      "codePreview": [
        "<!-- AI设置模态框 -->",
        "<div class=\"ai-settings-modal\" id=\"ai-settings-modal\" style=\"display: none;\">",
        "<div class=\"modal-content\">",
        "<div class=\"modal-header\">",
        "<h3>AI助手设置</h3>",
        "<button class=\"close-btn\" id=\"close-settings\">",
        "<i class=\"fas fa-times\"></i>"
      ]
    },
    {
      "id": "8eae9d3f",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "204-210",
          "preview": "</button> | </div> | <div class=\"modal-body\">"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "204-210",
          "preview": "</button> | </div> | <div class=\"modal-body\">"
        }
      ],
      "codePreview": [
        "</button>",
        "</div>",
        "<div class=\"modal-body\">",
        "<div class=\"settings-section\">",
        "<h4>基本设置</h4>",
        "<div class=\"setting-item\">",
        "<label>置信度阈值:</label>"
      ]
    },
    {
      "id": "1ee2fcd8",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "211-217",
          "preview": "<input type=\"range\" id=\"confidence-threshold\" min=\"0.1\" max=\"1\" step=\"0.1\" value=\"0.7\"> | <span class=\"threshold-value\">0.7</span> | </div>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "211-217",
          "preview": "<input type=\"range\" id=\"confidence-threshold\" min=\"0.1\" max=\"1\" step=\"0.1\" value=\"0.7\"> | <span class=\"threshold-value\">0.7</span> | </div>"
        }
      ],
      "codePreview": [
        "<input type=\"range\" id=\"confidence-threshold\" min=\"0.1\" max=\"1\" step=\"0.1\" value=\"0.7\">",
        "<span class=\"threshold-value\">0.7</span>",
        "</div>",
        "<div class=\"setting-item\">",
        "<label>最大建议数量:</label>",
        "<input type=\"number\" id=\"max-suggestions\" min=\"1\" max=\"10\" value=\"5\">",
        "</div>"
      ]
    },
    {
      "id": "78857ec8",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "218-224",
          "preview": "<div class=\"setting-item\"> | <label>自动刷新间隔(秒):</label> | <input type=\"number\" id=\"refresh-interval\" min=\"5\" max=\"60\" value=\"10\">"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "218-224",
          "preview": "<div class=\"setting-item\"> | <label>自动刷新间隔(秒):</label> | <input type=\"number\" id=\"refresh-interval\" min=\"5\" max=\"60\" value=\"10\">"
        }
      ],
      "codePreview": [
        "<div class=\"setting-item\">",
        "<label>自动刷新间隔(秒):</label>",
        "<input type=\"number\" id=\"refresh-interval\" min=\"5\" max=\"60\" value=\"10\">",
        "</div>",
        "</div>",
        "<div class=\"settings-section\">"
      ]
    },
    {
      "id": "d2079fe5",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "225-231",
          "preview": "<h4>显示设置</h4> | <div class=\"setting-item\"> | <label>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "225-231",
          "preview": "<h4>显示设置</h4> | <div class=\"setting-item\"> | <label>"
        }
      ],
      "codePreview": [
        "<h4>显示设置</h4>",
        "<div class=\"setting-item\">",
        "<label>",
        "<input type=\"checkbox\" id=\"show-analysis\" checked>",
        "显示消息分析",
        "</label>",
        "</div>"
      ]
    },
    {
      "id": "fb88f842",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "232-238",
          "preview": "<div class=\"setting-item\"> | <label> | <input type=\"checkbox\" id=\"show-confidence\" checked>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "232-238",
          "preview": "<div class=\"setting-item\"> | <label> | <input type=\"checkbox\" id=\"show-confidence\" checked>"
        }
      ],
      "codePreview": [
        "<div class=\"setting-item\">",
        "<label>",
        "<input type=\"checkbox\" id=\"show-confidence\" checked>",
        "显示置信度",
        "</label>",
        "</div>",
        "<div class=\"setting-item\">"
      ]
    },
    {
      "id": "46a02cd2",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "239-245",
          "preview": "<label> | <input type=\"checkbox\" id=\"enable-sound\" checked> | 启用声音提示"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "239-245",
          "preview": "<label> | <input type=\"checkbox\" id=\"enable-sound\" checked> | 启用声音提示"
        }
      ],
      "codePreview": [
        "<label>",
        "<input type=\"checkbox\" id=\"enable-sound\" checked>",
        "启用声音提示",
        "</label>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "f9bcec5a",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "246-252",
          "preview": "<div class=\"settings-section\"> | <h4>学习设置</h4> | <div class=\"setting-item\">"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "246-252",
          "preview": "<div class=\"settings-section\"> | <h4>学习设置</h4> | <div class=\"setting-item\">"
        }
      ],
      "codePreview": [
        "<div class=\"settings-section\">",
        "<h4>学习设置</h4>",
        "<div class=\"setting-item\">",
        "<label>",
        "<input type=\"checkbox\" id=\"enable-learning\" checked>",
        "启用智能学习",
        "</label>"
      ]
    },
    {
      "id": "d00053c8",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "253-259",
          "preview": "</div> | <div class=\"setting-item\"> | <label>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "253-259",
          "preview": "</div> | <div class=\"setting-item\"> | <label>"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"setting-item\">",
        "<label>",
        "<input type=\"checkbox\" id=\"auto-improve\" checked>",
        "自动改进建议",
        "</label>",
        "</div>"
      ]
    },
    {
      "id": "c9cb288a",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "260-266",
          "preview": "</div> | </div> | <div class=\"modal-footer\">"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "260-266",
          "preview": "</div> | </div> | <div class=\"modal-footer\">"
        }
      ],
      "codePreview": [
        "</div>",
        "</div>",
        "<div class=\"modal-footer\">",
        "<button class=\"btn btn-secondary\" id=\"reset-settings\">重置</button>",
        "<button class=\"btn btn-primary\" id=\"save-settings\">保存设置</button>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "961459c8",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "309-315",
          "preview": "const searchBtn = document.getElementById('kb-search-btn'); | if (searchInput && searchBtn) { | searchBtn.addEventListener('click', () => this.searchKnowledgeBase());"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "309-315",
          "preview": "const searchBtn = document.getElementById('kb-search-btn'); | if (searchInput && searchBtn) { | searchBtn.addEventListener('click', () => this.searchKnowledgeBase());"
        }
      ],
      "codePreview": [
        "const searchBtn = document.getElementById('kb-search-btn');",
        "if (searchInput && searchBtn) {",
        "searchBtn.addEventListener('click', () => this.searchKnowledgeBase());",
        "searchInput.addEventListener('keypress', (e) => {",
        "if (e.key === 'Enter') {",
        "this.searchKnowledgeBase();",
        "}"
      ]
    },
    {
      "id": "2e80047b",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "330-336",
          "preview": "const closeBtn = document.getElementById('close-settings'); | const saveBtn = document.getElementById('save-settings'); | const resetBtn = document.getElementById('reset-settings');"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "330-336",
          "preview": "const closeBtn = document.getElementById('close-settings'); | const saveBtn = document.getElementById('save-settings'); | const resetBtn = document.getElementById('reset-settings');"
        }
      ],
      "codePreview": [
        "const closeBtn = document.getElementById('close-settings');",
        "const saveBtn = document.getElementById('save-settings');",
        "const resetBtn = document.getElementById('reset-settings');",
        "const modal = document.getElementById('ai-settings-modal');",
        "if (closeBtn) {",
        "closeBtn.addEventListener('click', () => this.closeSettings());"
      ]
    },
    {
      "id": "25d54923",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "358-364",
          "preview": "if (thresholdSlider) { | thresholdSlider.addEventListener('input', (e) => { | const valueSpan = document.querySelector('.threshold-value');"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "358-364",
          "preview": "if (thresholdSlider) { | thresholdSlider.addEventListener('input', (e) => { | const valueSpan = document.querySelector('.threshold-value');"
        }
      ],
      "codePreview": [
        "if (thresholdSlider) {",
        "thresholdSlider.addEventListener('input', (e) => {",
        "const valueSpan = document.querySelector('.threshold-value');",
        "if (valueSpan) {",
        "valueSpan.textContent = e.target.value;",
        "}",
        "});"
      ]
    },
    {
      "id": "ed6a61aa",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "393-399",
          "preview": "clearTimeout(debounceTimer); | debounceTimer = setTimeout(() => { | if (this.isEnabled && e.target.value.trim()) {"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "393-399",
          "preview": "clearTimeout(debounceTimer); | debounceTimer = setTimeout(() => { | if (this.isEnabled && e.target.value.trim()) {"
        }
      ],
      "codePreview": [
        "clearTimeout(debounceTimer);",
        "debounceTimer = setTimeout(() => {",
        "if (this.isEnabled && e.target.value.trim()) {",
        "this.analyzeCurrentMessage(e.target.value);",
        "}",
        "}, 500);",
        "});"
      ]
    },
    {
      "id": "2bb6b4a6",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "414-420",
          "preview": "const content = document.getElementById('ai-content'); | if (this.isEnabled) {"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "414-420",
          "preview": "const content = document.getElementById('ai-content'); | if (this.isEnabled) {"
        }
      ],
      "codePreview": [
        "const content = document.getElementById('ai-content');",
        "if (this.isEnabled) {",
        "toggleBtn.classList.add('active');",
        "statusIndicator.querySelector('.status-text').textContent = '已启用';",
        "statusIndicator.querySelector('.status-dot').className = 'status-dot active';",
        "content.style.display = 'block';"
      ]
    },
    {
      "id": "1ec35522",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "491-497",
          "preview": "method: 'POST', | headers: { | 'Content-Type': 'application/json'"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "491-497",
          "preview": "method: 'POST', | headers: { | 'Content-Type': 'application/json'"
        }
      ],
      "codePreview": [
        "method: 'POST',",
        "headers: {",
        "'Content-Type': 'application/json'",
        "},",
        "body: JSON.stringify({",
        "conversationId: this.currentConversationId,",
        "messageText: messageText"
      ]
    },
    {
      "id": "58c36b85",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "519-525",
          "preview": "const response = await fetch('/api/ai/smart-reply-suggestions', { | method: 'POST', | headers: {"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "519-525",
          "preview": "const response = await fetch('/api/ai/smart-reply-suggestions', { | method: 'POST', | headers: {"
        }
      ],
      "codePreview": [
        "const response = await fetch('/api/ai/smart-reply-suggestions', {",
        "method: 'POST',",
        "headers: {",
        "'Content-Type': 'application/json'",
        "},",
        "body: JSON.stringify({",
        "conversationId: this.currentConversationId,"
      ]
    },
    {
      "id": "f199e9b4",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "589-595",
          "preview": "const container = document.getElementById('suggestions-container'); | if (!container) return;"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "589-595",
          "preview": "const container = document.getElementById('suggestions-container'); | if (!container) return;"
        }
      ],
      "codePreview": [
        "const container = document.getElementById('suggestions-container');",
        "if (!container) return;",
        "if (!suggestions || suggestions.length === 0) {",
        "container.innerHTML = `",
        "<div class=\"no-suggestions\">",
        "<i class=\"fas fa-comment-dots\"></i>"
      ]
    },
    {
      "id": "c888a6fc",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "603-609",
          "preview": "<div class=\"suggestion-item\" data-index=\"${index}\"> | <div class=\"suggestion-content\"> | <div class=\"suggestion-text\">${this.escapeHtml(suggestion.text)}</div>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "603-609",
          "preview": "<div class=\"suggestion-item\" data-index=\"${index}\"> | <div class=\"suggestion-content\"> | <div class=\"suggestion-text\">${this.escapeHtml(suggestion.text)}</div>"
        }
      ],
      "codePreview": [
        "<div class=\"suggestion-item\" data-index=\"${index}\">",
        "<div class=\"suggestion-content\">",
        "<div class=\"suggestion-text\">${this.escapeHtml(suggestion.text)}</div>",
        "<div class=\"suggestion-meta\">",
        "<span class=\"suggestion-type\">${this.getSuggestionTypeText(suggestion.type)}</span>",
        "<span class=\"confidence-score\" style=\"display: ${this.options.showConfidence ? 'inline' : 'none'};\">",
        "置信度: ${Math.round(suggestion.confidence * 100)}%"
      ]
    },
    {
      "id": "e010e919",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "610-616",
          "preview": "</span> | </div> | </div>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "610-616",
          "preview": "</span> | </div> | </div>"
        }
      ],
      "codePreview": [
        "</span>",
        "</div>",
        "</div>",
        "<div class=\"suggestion-actions\">",
        "<button class=\"use-suggestion-btn\" onclick=\"aiAssistant.useSuggestion(${index})\">",
        "<i class=\"fas fa-check\"></i>",
        "</button>"
      ]
    },
    {
      "id": "ea05bc88",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "617-623",
          "preview": "<button class=\"edit-suggestion-btn\" onclick=\"aiAssistant.editSuggestion(${index})\"> | <i class=\"fas fa-edit\"></i> | </button>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "617-623",
          "preview": "<button class=\"edit-suggestion-btn\" onclick=\"aiAssistant.editSuggestion(${index})\"> | <i class=\"fas fa-edit\"></i> | </button>"
        }
      ],
      "codePreview": [
        "<button class=\"edit-suggestion-btn\" onclick=\"aiAssistant.editSuggestion(${index})\">",
        "<i class=\"fas fa-edit\"></i>",
        "</button>",
        "<button class=\"feedback-btn positive\" onclick=\"aiAssistant.giveFeedback(${index}, 'positive')\">",
        "<i class=\"fas fa-thumbs-up\"></i>",
        "</button>",
        "<button class=\"feedback-btn negative\" onclick=\"aiAssistant.giveFeedback(${index}, 'negative')\">"
      ]
    },
    {
      "id": "ce37f9fc",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "673-679",
          "preview": "if (analysis.keywords) { | const keywordsContainer = document.getElementById('keywords-container'); | if (keywordsContainer) {"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "673-679",
          "preview": "if (analysis.keywords) { | const keywordsContainer = document.getElementById('keywords-container'); | if (keywordsContainer) {"
        }
      ],
      "codePreview": [
        "if (analysis.keywords) {",
        "const keywordsContainer = document.getElementById('keywords-container');",
        "if (keywordsContainer) {",
        "if (analysis.keywords.length > 0) {",
        "keywordsContainer.innerHTML = analysis.keywords.map(keyword => `",
        "<span class=\"keyword-tag\">${this.escapeHtml(keyword.word)}</span>",
        "`).join('');"
      ]
    },
    {
      "id": "cf853a08",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "687-693",
          "preview": "if (analysis.entities) { | const entitiesContainer = document.getElementById('entities-container'); | if (entitiesContainer) {"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "687-693",
          "preview": "if (analysis.entities) { | const entitiesContainer = document.getElementById('entities-container'); | if (entitiesContainer) {"
        }
      ],
      "codePreview": [
        "if (analysis.entities) {",
        "const entitiesContainer = document.getElementById('entities-container');",
        "if (entitiesContainer) {",
        "if (analysis.entities.length > 0) {",
        "entitiesContainer.innerHTML = analysis.entities.map(entity => `",
        "<span class=\"entity-tag entity-${entity.type}\">${this.escapeHtml(entity.value)}</span>",
        "`).join('');"
      ]
    },
    {
      "id": "098c34e2",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "778-784",
          "preview": "method: 'POST', | headers: { | 'Content-Type': 'application/json'"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "778-784",
          "preview": "method: 'POST', | headers: { | 'Content-Type': 'application/json'"
        }
      ],
      "codePreview": [
        "method: 'POST',",
        "headers: {",
        "'Content-Type': 'application/json'",
        "},",
        "body: JSON.stringify({",
        "conversationId: this.currentConversationId,",
        "suggestion: suggestion,"
      ]
    },
    {
      "id": "0418e8cf",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "855-861",
          "preview": "<div class=\"result-question\">${this.escapeHtml(result.question)}</div> | <div class=\"result-answer\">${this.escapeHtml(result.answer)}</div> | <div class=\"result-meta\">"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "855-861",
          "preview": "<div class=\"result-question\">${this.escapeHtml(result.question)}</div> | <div class=\"result-answer\">${this.escapeHtml(result.answer)}</div> | <div class=\"result-meta\">"
        }
      ],
      "codePreview": [
        "<div class=\"result-question\">${this.escapeHtml(result.question)}</div>",
        "<div class=\"result-answer\">${this.escapeHtml(result.answer)}</div>",
        "<div class=\"result-meta\">",
        "<span class=\"result-category\">${result.category}</span>",
        "<span class=\"result-confidence\">匹配度: ${Math.round(result.confidence * 100)}%</span>",
        "</div>",
        "<div class=\"result-actions\">"
      ]
    },
    {
      "id": "c63375b3",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "862-868",
          "preview": "<button class=\"use-answer-btn\" onclick=\"aiAssistant.useKnowledgeAnswer('${this.escapeHtml(result.answer)}')\"> | 使用答案 | </button>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "862-868",
          "preview": "<button class=\"use-answer-btn\" onclick=\"aiAssistant.useKnowledgeAnswer('${this.escapeHtml(result.answer)}')\"> | 使用答案 | </button>"
        }
      ],
      "codePreview": [
        "<button class=\"use-answer-btn\" onclick=\"aiAssistant.useKnowledgeAnswer('${this.escapeHtml(result.answer)}')\">",
        "使用答案",
        "</button>",
        "</div>",
        "</div>",
        "`).join('');",
        "}"
      ]
    },
    {
      "id": "49eacb9b",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "904-910",
          "preview": "const panel = document.querySelector('.message-analysis-panel'); | const btn = document.getElementById('toggle-analysis');"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "904-910",
          "preview": "const panel = document.querySelector('.message-analysis-panel'); | const btn = document.getElementById('toggle-analysis');"
        }
      ],
      "codePreview": [
        "const panel = document.querySelector('.message-analysis-panel');",
        "const btn = document.getElementById('toggle-analysis');",
        "if (panel && btn) {",
        "const isVisible = panel.style.display !== 'none';",
        "panel.style.display = isVisible ? 'none' : 'block';",
        "btn.querySelector('i').className = isVisible ? 'fas fa-eye-slash' : 'fas fa-eye';"
      ]
    },
    {
      "id": "564f544a",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "1002-1008",
          "preview": "refreshInterval: 10, | showAnalysis: true, | showConfidence: true,"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "1002-1008",
          "preview": "refreshInterval: 10, | showAnalysis: true, | showConfidence: true,"
        }
      ],
      "codePreview": [
        "refreshInterval: 10,",
        "showAnalysis: true,",
        "showConfidence: true,",
        "enableSound: true,",
        "enableLearning: true,",
        "autoImprove: true",
        "};"
      ]
    },
    {
      "id": "a690037d",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "1100-1106",
          "preview": "getSuggestionTypeText(type) { | const typeMap = { | 'intent_based': '意图建议',"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "1100-1106",
          "preview": "getSuggestionTypeText(type) { | const typeMap = { | 'intent_based': '意图建议',"
        }
      ],
      "codePreview": [
        "getSuggestionTypeText(type) {",
        "const typeMap = {",
        "'intent_based': '意图建议',",
        "'knowledge_based': '知识库',",
        "'sentiment_based': '情感建议',",
        "'context_based': '上下文',",
        "'default': '默认'"
      ]
    },
    {
      "id": "906805dc",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "1114-1120",
          "preview": "'question': '提问', | 'complaint': '投诉', | 'compliment': '赞扬',"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "1114-1120",
          "preview": "'question': '提问', | 'complaint': '投诉', | 'compliment': '赞扬',"
        }
      ],
      "codePreview": [
        "'question': '提问',",
        "'complaint': '投诉',",
        "'compliment': '赞扬',",
        "'request': '请求',",
        "'booking': '预订',",
        "'cancellation': '取消',",
        "'unknown': '未知'"
      ]
    },
    {
      "id": "1c51c252",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "15-21",
          "preview": "class AnalyticsDashboard { | constructor() { | this.shopId = null;"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "15-21",
          "preview": "class AnalyticsDashboard { | constructor() { | this.shopId = null;"
        }
      ],
      "codePreview": [
        "class AnalyticsDashboard {",
        "constructor() {",
        "this.shopId = null;",
        "this.refreshInterval = null;",
        "this.charts = {};",
        "this.currentTimeRange = '24h';"
      ]
    },
    {
      "id": "8ff729c7",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "71-77",
          "preview": "createDashboardInterface() { | const container = document.getElementById('analytics-dashboard') || document.body;"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "71-77",
          "preview": "createDashboardInterface() { | const container = document.getElementById('analytics-dashboard') || document.body;"
        }
      ],
      "codePreview": [
        "createDashboardInterface() {",
        "const container = document.getElementById('analytics-dashboard') || document.body;",
        "container.innerHTML = `",
        "<div class=\"analytics-dashboard\">",
        "<!-- 头部控制区域 -->",
        "<div class=\"dashboard-header\">"
      ]
    },
    {
      "id": "9ff65699",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "78-84",
          "preview": "<div class=\"header-title\"> | <h2>📊 数据分析仪表板</h2> | <span class=\"last-updated\">最后更新: <span id=\"last-updated-time\">--</span></span>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "78-84",
          "preview": "<div class=\"header-title\"> | <h2>📊 数据分析仪表板</h2> | <span class=\"last-updated\">最后更新: <span id=\"last-updated-time\">--</span></span>"
        }
      ],
      "codePreview": [
        "<div class=\"header-title\">",
        "<h2>📊 数据分析仪表板</h2>",
        "<span class=\"last-updated\">最后更新: <span id=\"last-updated-time\">--</span></span>",
        "</div>",
        "<div class=\"header-controls\">",
        "<select id=\"time-range-select\" class=\"time-range-select\">",
        "<option value=\"1h\">过去1小时</option>"
      ]
    },
    {
      "id": "c01652fe",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "85-91",
          "preview": "<option value=\"24h\" selected>过去24小时</option> | <option value=\"7d\">过去7天</option> | <option value=\"30d\">过去30天</option>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "85-91",
          "preview": "<option value=\"24h\" selected>过去24小时</option> | <option value=\"7d\">过去7天</option> | <option value=\"30d\">过去30天</option>"
        }
      ],
      "codePreview": [
        "<option value=\"24h\" selected>过去24小时</option>",
        "<option value=\"7d\">过去7天</option>",
        "<option value=\"30d\">过去30天</option>",
        "</select>",
        "<button class=\"refresh-btn\" onclick=\"dashboard.refreshData()\">",
        "🔄 刷新",
        "</button>"
      ]
    },
    {
      "id": "9d1d959b",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "92-98",
          "preview": "<button class=\"export-btn\" onclick=\"dashboard.exportReport()\"> | 📥 导出报告 | </button>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "92-98",
          "preview": "<button class=\"export-btn\" onclick=\"dashboard.exportReport()\"> | 📥 导出报告 | </button>"
        }
      ],
      "codePreview": [
        "<button class=\"export-btn\" onclick=\"dashboard.exportReport()\">",
        "📥 导出报告",
        "</button>",
        "</div>",
        "</div>",
        "<!-- 实时监控卡片区域 -->"
      ]
    },
    {
      "id": "0d67b294",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "99-105",
          "preview": "<div class=\"metrics-cards\"> | <div class=\"metric-card\"> | <div class=\"metric-icon\">💬</div>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "99-105",
          "preview": "<div class=\"metrics-cards\"> | <div class=\"metric-card\"> | <div class=\"metric-icon\">💬</div>"
        }
      ],
      "codePreview": [
        "<div class=\"metrics-cards\">",
        "<div class=\"metric-card\">",
        "<div class=\"metric-icon\">💬</div>",
        "<div class=\"metric-content\">",
        "<div class=\"metric-title\">对话总数</div>",
        "<div class=\"metric-value\" id=\"total-conversations\">--</div>",
        "<div class=\"metric-change\" id=\"conversations-change\">--</div>"
      ]
    },
    {
      "id": "2a9fd896",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "106-112",
          "preview": "</div> | </div>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "106-112",
          "preview": "</div> | </div>"
        }
      ],
      "codePreview": [
        "</div>",
        "</div>",
        "<div class=\"metric-card\">",
        "<div class=\"metric-icon\">📨</div>",
        "<div class=\"metric-content\">",
        "<div class=\"metric-title\">消息总数</div>"
      ]
    },
    {
      "id": "e303a471",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "113-119",
          "preview": "<div class=\"metric-value\" id=\"total-messages\">--</div> | <div class=\"metric-change\" id=\"messages-change\">--</div> | </div>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "113-119",
          "preview": "<div class=\"metric-value\" id=\"total-messages\">--</div> | <div class=\"metric-change\" id=\"messages-change\">--</div> | </div>"
        }
      ],
      "codePreview": [
        "<div class=\"metric-value\" id=\"total-messages\">--</div>",
        "<div class=\"metric-change\" id=\"messages-change\">--</div>",
        "</div>",
        "</div>",
        "<div class=\"metric-card\">",
        "<div class=\"metric-icon\">⚡</div>"
      ]
    },
    {
      "id": "5383ac18",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "120-126",
          "preview": "<div class=\"metric-content\"> | <div class=\"metric-title\">平均响应时间</div> | <div class=\"metric-value\" id=\"avg-response-time\">--</div>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "120-126",
          "preview": "<div class=\"metric-content\"> | <div class=\"metric-title\">平均响应时间</div> | <div class=\"metric-value\" id=\"avg-response-time\">--</div>"
        }
      ],
      "codePreview": [
        "<div class=\"metric-content\">",
        "<div class=\"metric-title\">平均响应时间</div>",
        "<div class=\"metric-value\" id=\"avg-response-time\">--</div>",
        "<div class=\"metric-change\" id=\"response-time-change\">--</div>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "143e5f84",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "127-133",
          "preview": "<div class=\"metric-card\"> | <div class=\"metric-icon\">😊</div> | <div class=\"metric-content\">"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "127-133",
          "preview": "<div class=\"metric-card\"> | <div class=\"metric-icon\">😊</div> | <div class=\"metric-content\">"
        }
      ],
      "codePreview": [
        "<div class=\"metric-card\">",
        "<div class=\"metric-icon\">😊</div>",
        "<div class=\"metric-content\">",
        "<div class=\"metric-title\">客户满意度</div>",
        "<div class=\"metric-value\" id=\"customer-satisfaction\">--</div>",
        "<div class=\"metric-change\" id=\"satisfaction-change\">--</div>",
        "</div>"
      ]
    },
    {
      "id": "d5cad7f0",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "134-140",
          "preview": "</div> | </div>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "134-140",
          "preview": "</div> | </div>"
        }
      ],
      "codePreview": [
        "</div>",
        "</div>",
        "<!-- 图表区域 -->",
        "<div class=\"charts-container\">",
        "<div class=\"chart-row\">",
        "<div class=\"chart-card\">"
      ]
    },
    {
      "id": "e78db867",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "141-147",
          "preview": "<div class=\"chart-header\"> | <h3>📈 对话趋势</h3> | <div class=\"chart-controls\">"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "141-147",
          "preview": "<div class=\"chart-header\"> | <h3>📈 对话趋势</h3> | <div class=\"chart-controls\">"
        }
      ],
      "codePreview": [
        "<div class=\"chart-header\">",
        "<h3>📈 对话趋势</h3>",
        "<div class=\"chart-controls\">",
        "<button class=\"chart-btn\" onclick=\"dashboard.toggleChartType('conversations')\">切换视图</button>",
        "</div>",
        "</div>",
        "<div class=\"chart-content\">"
      ]
    },
    {
      "id": "7ebdc411",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "148-154",
          "preview": "<canvas id=\"conversations-chart\"></canvas> | </div> | </div>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "148-154",
          "preview": "<canvas id=\"conversations-chart\"></canvas> | </div> | </div>"
        }
      ],
      "codePreview": [
        "<canvas id=\"conversations-chart\"></canvas>",
        "</div>",
        "</div>",
        "<div class=\"chart-card\">",
        "<div class=\"chart-header\">",
        "<h3>⏰ 工作负载分布</h3>"
      ]
    },
    {
      "id": "a728f7fd",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "155-161",
          "preview": "<div class=\"chart-controls\"> | <button class=\"chart-btn\" onclick=\"dashboard.toggleChartType('workload')\">切换视图</button> | </div>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "155-161",
          "preview": "<div class=\"chart-controls\"> | <button class=\"chart-btn\" onclick=\"dashboard.toggleChartType('workload')\">切换视图</button> | </div>"
        }
      ],
      "codePreview": [
        "<div class=\"chart-controls\">",
        "<button class=\"chart-btn\" onclick=\"dashboard.toggleChartType('workload')\">切换视图</button>",
        "</div>",
        "</div>",
        "<div class=\"chart-content\">",
        "<canvas id=\"workload-chart\"></canvas>",
        "</div>"
      ]
    },
    {
      "id": "5984fd5d",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "162-168",
          "preview": "</div> | </div>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "162-168",
          "preview": "</div> | </div>"
        }
      ],
      "codePreview": [
        "</div>",
        "</div>",
        "<div class=\"chart-row\">",
        "<div class=\"chart-card\">",
        "<div class=\"chart-header\">",
        "<h3>👥 客服效率排行</h3>"
      ]
    },
    {
      "id": "7109f22a",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "169-175",
          "preview": "<div class=\"chart-controls\"> | <button class=\"chart-btn\" onclick=\"dashboard.showStaffDetails()\">详细信息</button> | </div>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "169-175",
          "preview": "<div class=\"chart-controls\"> | <button class=\"chart-btn\" onclick=\"dashboard.showStaffDetails()\">详细信息</button> | </div>"
        }
      ],
      "codePreview": [
        "<div class=\"chart-controls\">",
        "<button class=\"chart-btn\" onclick=\"dashboard.showStaffDetails()\">详细信息</button>",
        "</div>",
        "</div>",
        "<div class=\"chart-content\">",
        "<div id=\"staff-efficiency-list\" class=\"staff-list\"></div>",
        "</div>"
      ]
    },
    {
      "id": "dfd8c37b",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "176-182",
          "preview": "</div> | <div class=\"chart-card\">"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "176-182",
          "preview": "</div> | <div class=\"chart-card\">"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"chart-card\">",
        "<div class=\"chart-header\">",
        "<h3>⭐ 满意度分布</h3>",
        "<div class=\"chart-controls\">",
        "<button class=\"chart-btn\" onclick=\"dashboard.showSatisfactionDetails()\">详细分析</button>"
      ]
    },
    {
      "id": "40a9fe6e",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "183-189",
          "preview": "</div> | </div> | <div class=\"chart-content\">"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "183-189",
          "preview": "</div> | </div> | <div class=\"chart-content\">"
        }
      ],
      "codePreview": [
        "</div>",
        "</div>",
        "<div class=\"chart-content\">",
        "<canvas id=\"satisfaction-chart\"></canvas>",
        "</div>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "3161f57a",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "190-196",
          "preview": "</div> | <!-- KPI指标区域 -->"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "190-196",
          "preview": "</div> | <!-- KPI指标区域 -->"
        }
      ],
      "codePreview": [
        "</div>",
        "<!-- KPI指标区域 -->",
        "<div class=\"kpi-section\">",
        "<div class=\"section-header\">",
        "<h3>🎯 KPI指标</h3>",
        "<button class=\"kpi-report-btn\" onclick=\"dashboard.generateKpiReport()\">生成完整报告</button>"
      ]
    },
    {
      "id": "4ace2349",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "197-203",
          "preview": "</div> | <div class=\"kpi-grid\"> | <div class=\"kpi-item\">"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "197-203",
          "preview": "</div> | <div class=\"kpi-grid\"> | <div class=\"kpi-item\">"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"kpi-grid\">",
        "<div class=\"kpi-item\">",
        "<div class=\"kpi-title\">响应时间得分</div>",
        "<div class=\"kpi-score\" id=\"response-time-score\">--</div>",
        "<div class=\"kpi-progress\">",
        "<div class=\"progress-bar\" id=\"response-time-progress\"></div>"
      ]
    },
    {
      "id": "7a518bd1",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "204-210",
          "preview": "</div> | </div>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "204-210",
          "preview": "</div> | </div>"
        }
      ],
      "codePreview": [
        "</div>",
        "</div>",
        "<div class=\"kpi-item\">",
        "<div class=\"kpi-title\">客户满意度得分</div>",
        "<div class=\"kpi-score\" id=\"satisfaction-score\">--</div>",
        "<div class=\"kpi-progress\">"
      ]
    },
    {
      "id": "182a1d79",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "211-217",
          "preview": "<div class=\"progress-bar\" id=\"satisfaction-progress\"></div> | </div> | </div>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "211-217",
          "preview": "<div class=\"progress-bar\" id=\"satisfaction-progress\"></div> | </div> | </div>"
        }
      ],
      "codePreview": [
        "<div class=\"progress-bar\" id=\"satisfaction-progress\"></div>",
        "</div>",
        "</div>",
        "<div class=\"kpi-item\">",
        "<div class=\"kpi-title\">客服效率得分</div>",
        "<div class=\"kpi-score\" id=\"efficiency-score\">--</div>"
      ]
    },
    {
      "id": "e98c7109",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "218-224",
          "preview": "<div class=\"kpi-progress\"> | <div class=\"progress-bar\" id=\"efficiency-progress\"></div> | </div>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "218-224",
          "preview": "<div class=\"kpi-progress\"> | <div class=\"progress-bar\" id=\"efficiency-progress\"></div> | </div>"
        }
      ],
      "codePreview": [
        "<div class=\"kpi-progress\">",
        "<div class=\"progress-bar\" id=\"efficiency-progress\"></div>",
        "</div>",
        "</div>",
        "<div class=\"kpi-item\">",
        "<div class=\"kpi-title\">系统性能得分</div>"
      ]
    },
    {
      "id": "3213a59e",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "225-231",
          "preview": "<div class=\"kpi-score\" id=\"performance-score\">--</div> | <div class=\"kpi-progress\"> | <div class=\"progress-bar\" id=\"performance-progress\"></div>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "225-231",
          "preview": "<div class=\"kpi-score\" id=\"performance-score\">--</div> | <div class=\"kpi-progress\"> | <div class=\"progress-bar\" id=\"performance-progress\"></div>"
        }
      ],
      "codePreview": [
        "<div class=\"kpi-score\" id=\"performance-score\">--</div>",
        "<div class=\"kpi-progress\">",
        "<div class=\"progress-bar\" id=\"performance-progress\"></div>",
        "</div>",
        "</div>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "58c35019",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "232-238",
          "preview": "<!-- 加载遮罩 --> | <div id=\"dashboard-loading\" class=\"loading-overlay\" style=\"display: none;\">"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "232-238",
          "preview": "<!-- 加载遮罩 --> | <div id=\"dashboard-loading\" class=\"loading-overlay\" style=\"display: none;\">"
        }
      ],
      "codePreview": [
        "<!-- 加载遮罩 -->",
        "<div id=\"dashboard-loading\" class=\"loading-overlay\" style=\"display: none;\">",
        "<div class=\"loading-spinner\"></div>",
        "<div class=\"loading-text\">正在加载数据...</div>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "e0bc97a2",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "260-266",
          "preview": "if (e.ctrlKey || e.metaKey) { | switch (e.key) { | case 'r':"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "260-266",
          "preview": "if (e.ctrlKey || e.metaKey) { | switch (e.key) { | case 'r':"
        }
      ],
      "codePreview": [
        "if (e.ctrlKey || e.metaKey) {",
        "switch (e.key) {",
        "case 'r':",
        "e.preventDefault();",
        "this.refreshData();",
        "break;",
        "case 'e':"
      ]
    },
    {
      "id": "04d28282",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "295-301",
          "preview": "this.updateMetricCards(realtimeData); | this.updateCharts({ | realtime: realtimeData,"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "295-301",
          "preview": "this.updateMetricCards(realtimeData); | this.updateCharts({ | realtime: realtimeData,"
        }
      ],
      "codePreview": [
        "this.updateMetricCards(realtimeData);",
        "this.updateCharts({",
        "realtime: realtimeData,",
        "staff: staffEfficiency,",
        "satisfaction: customerSatisfaction,",
        "workload: workloadData",
        "});"
      ]
    },
    {
      "id": "f685cda9",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "421-427",
          "preview": "const totalMessages = document.getElementById('total-messages'); | const messagesChange = document.getElementById('messages-change'); | if (totalMessages) {"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "421-427",
          "preview": "const totalMessages = document.getElementById('total-messages'); | const messagesChange = document.getElementById('messages-change'); | if (totalMessages) {"
        }
      ],
      "codePreview": [
        "const totalMessages = document.getElementById('total-messages');",
        "const messagesChange = document.getElementById('messages-change');",
        "if (totalMessages) {",
        "totalMessages.textContent = data.messages.total.toLocaleString();",
        "}",
        "if (messagesChange) {",
        "messagesChange.textContent = `+${data.messages.new} 新增`;"
      ]
    },
    {
      "id": "dc29d5c4",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "491-497",
          "preview": "this.charts.conversations = new Chart(ctx, { | type: 'line',"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "491-497",
          "preview": "this.charts.conversations = new Chart(ctx, { | type: 'line',"
        }
      ],
      "codePreview": [
        "this.charts.conversations = new Chart(ctx, {",
        "type: 'line',",
        "data: {",
        "labels: timeLabels,",
        "datasets: [{",
        "label: '对话数量',"
      ]
    },
    {
      "id": "3b171953",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "498-504",
          "preview": "data: conversationData, | borderColor: '#4CAF50', | backgroundColor: 'rgba(76, 175, 80, 0.1)',"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "498-504",
          "preview": "data: conversationData, | borderColor: '#4CAF50', | backgroundColor: 'rgba(76, 175, 80, 0.1)',"
        }
      ],
      "codePreview": [
        "data: conversationData,",
        "borderColor: '#4CAF50',",
        "backgroundColor: 'rgba(76, 175, 80, 0.1)',",
        "borderWidth: 2,",
        "fill: true,",
        "tension: 0.4",
        "}]"
      ]
    },
    {
      "id": "6d789b63",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "505-511",
          "preview": "}, | options: { | responsive: true,"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "505-511",
          "preview": "}, | options: { | responsive: true,"
        }
      ],
      "codePreview": [
        "},",
        "options: {",
        "responsive: true,",
        "maintainAspectRatio: false,",
        "plugins: {",
        "legend: {",
        "display: false"
      ]
    },
    {
      "id": "85cc26bc",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "547-553",
          "preview": "const workloadData = data.hourlyDistribution ? | data.hourlyDistribution.map(item => item.messageCount) : | this.generateWorkloadData();"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "547-553",
          "preview": "const workloadData = data.hourlyDistribution ? | data.hourlyDistribution.map(item => item.messageCount) : | this.generateWorkloadData();"
        }
      ],
      "codePreview": [
        "const workloadData = data.hourlyDistribution ?",
        "data.hourlyDistribution.map(item => item.messageCount) :",
        "this.generateWorkloadData();",
        "this.charts.workload = new Chart(ctx, {",
        "type: 'bar',",
        "data: {"
      ]
    },
    {
      "id": "63f9a1c6",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "603-609",
          "preview": "<div class=\"staff-rank\">#${index + 1}</div> | <div class=\"staff-info\"> | <div class=\"staff-name\">${staff.staffName}</div>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "603-609",
          "preview": "<div class=\"staff-rank\">#${index + 1}</div> | <div class=\"staff-info\"> | <div class=\"staff-name\">${staff.staffName}</div>"
        }
      ],
      "codePreview": [
        "<div class=\"staff-rank\">#${index + 1}</div>",
        "<div class=\"staff-info\">",
        "<div class=\"staff-name\">${staff.staffName}</div>",
        "<div class=\"staff-stats\">",
        "处理对话: ${staff.conversationsHandled} | 平均响应: ${staff.avgResponseTime}分钟",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "6962b892",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "610-616",
          "preview": "<div class=\"staff-efficiency\"> | <div class=\"efficiency-score\">${staff.efficiency}%</div> | <div class=\"efficiency-bar\">"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "610-616",
          "preview": "<div class=\"staff-efficiency\"> | <div class=\"efficiency-score\">${staff.efficiency}%</div> | <div class=\"efficiency-bar\">"
        }
      ],
      "codePreview": [
        "<div class=\"staff-efficiency\">",
        "<div class=\"efficiency-score\">${staff.efficiency}%</div>",
        "<div class=\"efficiency-bar\">",
        "<div class=\"efficiency-fill\" style=\"width: ${staff.efficiency}%\"></div>",
        "</div>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "651bcf20",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "638-644",
          "preview": "this.charts.satisfaction = new Chart(ctx, { | type: 'doughnut', | data: {"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "638-644",
          "preview": "this.charts.satisfaction = new Chart(ctx, { | type: 'doughnut', | data: {"
        }
      ],
      "codePreview": [
        "this.charts.satisfaction = new Chart(ctx, {",
        "type: 'doughnut',",
        "data: {",
        "labels: ['5星', '4星', '3星', '2星', '1星'],",
        "datasets: [{",
        "data: [",
        "ratingDistribution[5],"
      ]
    },
    {
      "id": "bddae0a1",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "645-651",
          "preview": "ratingDistribution[4], | ratingDistribution[3], | ratingDistribution[2],"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "645-651",
          "preview": "ratingDistribution[4], | ratingDistribution[3], | ratingDistribution[2],"
        }
      ],
      "codePreview": [
        "ratingDistribution[4],",
        "ratingDistribution[3],",
        "ratingDistribution[2],",
        "ratingDistribution[1]",
        "],",
        "backgroundColor: [",
        "'#4CAF50',"
      ]
    },
    {
      "id": "1377bde0",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "659-665",
          "preview": "}, | options: { | responsive: true,"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "659-665",
          "preview": "}, | options: { | responsive: true,"
        }
      ],
      "codePreview": [
        "},",
        "options: {",
        "responsive: true,",
        "maintainAspectRatio: false,",
        "plugins: {",
        "legend: {",
        "position: 'bottom',"
      ]
    },
    {
      "id": "7edea46c",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "855-861",
          "preview": "// 创建模态框显示详细报告 | const modal = document.createElement('div'); | modal.className = 'kpi-report-modal';"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "855-861",
          "preview": "// 创建模态框显示详细报告 | const modal = document.createElement('div'); | modal.className = 'kpi-report-modal';"
        }
      ],
      "codePreview": [
        "const modal = document.createElement('div');",
        "modal.className = 'kpi-report-modal';",
        "modal.innerHTML = `",
        "<div class=\"modal-content\">",
        "<div class=\"modal-header\">",
        "<h3>📊 KPI报告</h3>"
      ]
    },
    {
      "id": "a59166c7",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "862-868",
          "preview": "<button class=\"close-btn\" onclick=\"this.parentElement.parentElement.parentElement.remove()\">✕</button> | </div> | <div class=\"modal-body\">"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "862-868",
          "preview": "<button class=\"close-btn\" onclick=\"this.parentElement.parentElement.parentElement.remove()\">✕</button> | </div> | <div class=\"modal-body\">"
        }
      ],
      "codePreview": [
        "<button class=\"close-btn\" onclick=\"this.parentElement.parentElement.parentElement.remove()\">✕</button>",
        "</div>",
        "<div class=\"modal-body\">",
        "<div class=\"report-summary\">",
        "<h4>报告摘要</h4>",
        "<p>报告类型: ${reportData.reportType}</p>",
        "<p>生成时间: ${new Date(reportData.generatedAt).toLocaleString()}</p>"
      ]
    },
    {
      "id": "230d7469",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "869-875",
          "preview": "<p>总体得分: ${Math.round(reportData.kpiScores.overall)}分</p> | </div> | <div class=\"report-metrics\">"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "869-875",
          "preview": "<p>总体得分: ${Math.round(reportData.kpiScores.overall)}分</p> | </div> | <div class=\"report-metrics\">"
        }
      ],
      "codePreview": [
        "<p>总体得分: ${Math.round(reportData.kpiScores.overall)}分</p>",
        "</div>",
        "<div class=\"report-metrics\">",
        "<h4>详细指标</h4>",
        "<ul>",
        "<li>对话总数: ${reportData.summary.totalConversations}</li>",
        "<li>消息总数: ${reportData.summary.totalMessages}</li>"
      ]
    },
    {
      "id": "975f10a6",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "876-882",
          "preview": "<li>平均评分: ${reportData.summary.averageRating}</li> | <li>客服人员: ${reportData.summary.staffCount}人</li> | </ul>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "876-882",
          "preview": "<li>平均评分: ${reportData.summary.averageRating}</li> | <li>客服人员: ${reportData.summary.staffCount}人</li> | </ul>"
        }
      ],
      "codePreview": [
        "<li>平均评分: ${reportData.summary.averageRating}</li>",
        "<li>客服人员: ${reportData.summary.staffCount}人</li>",
        "</ul>",
        "</div>",
        "<div class=\"report-recommendations\">",
        "<h4>改进建议</h4>",
        "<ul>"
      ]
    },
    {
      "id": "28c0503c",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "883-889",
          "preview": "${reportData.recommendations.map(rec => | `<li><strong>${rec.title}:</strong> ${rec.description}</li>` | ).join('')}"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "883-889",
          "preview": "${reportData.recommendations.map(rec => | `<li><strong>${rec.title}:</strong> ${rec.description}</li>` | ).join('')}"
        }
      ],
      "codePreview": [
        "${reportData.recommendations.map(rec =>",
        "`<li><strong>${rec.title}:</strong> ${rec.description}</li>`",
        ").join('')}",
        "</ul>",
        "</div>",
        "</div>",
        "<div class=\"modal-footer\">"
      ]
    },
    {
      "id": "05e98df6",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "911-917",
          "preview": "const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' }); | const link = document.createElement('a'); | const url = URL.createObjectURL(blob);"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "911-917",
          "preview": "const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' }); | const link = document.createElement('a'); | const url = URL.createObjectURL(blob);"
        }
      ],
      "codePreview": [
        "const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });",
        "const link = document.createElement('a');",
        "const url = URL.createObjectURL(blob);",
        "link.setAttribute('href', url);",
        "link.setAttribute('download', `KPI报告_${new Date().toISOString().split('T')[0]}.csv`);",
        "link.style.visibility = 'hidden';"
      ]
    },
    {
      "id": "c5e15b93",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "953-959",
          "preview": "csv.push(`响应时间得分,${Math.round(data.kpiScores.responseTime)}`); | csv.push(`客户满意度得分,${Math.round(data.kpiScores.customerSatisfaction)}`); | csv.push(`客服效率得分,${Math.round(data.kpiScores.staffEfficiency)}`);"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "953-959",
          "preview": "csv.push(`响应时间得分,${Math.round(data.kpiScores.responseTime)}`); | csv.push(`客户满意度得分,${Math.round(data.kpiScores.customerSatisfaction)}`); | csv.push(`客服效率得分,${Math.round(data.kpiScores.staffEfficiency)}`);"
        }
      ],
      "codePreview": [
        "csv.push(`响应时间得分,${Math.round(data.kpiScores.responseTime)}`);",
        "csv.push(`客户满意度得分,${Math.round(data.kpiScores.customerSatisfaction)}`);",
        "csv.push(`客服效率得分,${Math.round(data.kpiScores.staffEfficiency)}`);",
        "csv.push(`系统性能得分,${Math.round(data.kpiScores.systemPerformance)}`);",
        "csv.push(`总体得分,${Math.round(data.kpiScores.overall)}`);",
        "return csv.join('\\n');"
      ]
    },
    {
      "id": "61f884a9",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "22-28",
          "preview": "this.websocket = null; | this.charts = new Map(); | this.refreshInterval = null;"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "22-28",
          "preview": "this.websocket = null; | this.charts = new Map(); | this.refreshInterval = null;"
        }
      ],
      "codePreview": [
        "this.websocket = null;",
        "this.charts = new Map();",
        "this.refreshInterval = null;",
        "this.currentTimeRange = '24h';",
        "this.dashboardMode = 'overview';",
        "this.isRealTimeEnabled = true;",
        "this.notifications = [];"
      ]
    },
    {
      "id": "ba33b5e0",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "78-84",
          "preview": "container.innerHTML = ` | <div id=\"enhanced-analytics-dashboard\" class=\"enhanced-analytics-dashboard\"> | <!-- 顶部导航栏 -->"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "78-84",
          "preview": "container.innerHTML = ` | <div id=\"enhanced-analytics-dashboard\" class=\"enhanced-analytics-dashboard\"> | <!-- 顶部导航栏 -->"
        }
      ],
      "codePreview": [
        "container.innerHTML = `",
        "<div id=\"enhanced-analytics-dashboard\" class=\"enhanced-analytics-dashboard\">",
        "<!-- 顶部导航栏 -->",
        "<nav class=\"dashboard-nav\">",
        "<div class=\"nav-brand\">",
        "<h1><i class=\"fas fa-chart-line\"></i> 数据分析中心</h1>",
        "<div class=\"nav-status\">"
      ]
    },
    {
      "id": "debd3e8a",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "85-91",
          "preview": "<span class=\"status-indicator\" id=\"connection-status\"></span> | <span class=\"status-text\">实时连接</span> | </div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "85-91",
          "preview": "<span class=\"status-indicator\" id=\"connection-status\"></span> | <span class=\"status-text\">实时连接</span> | </div>"
        }
      ],
      "codePreview": [
        "<span class=\"status-indicator\" id=\"connection-status\"></span>",
        "<span class=\"status-text\">实时连接</span>",
        "</div>",
        "</div>",
        "<div class=\"nav-controls\">",
        "<div class=\"time-range-selector\">"
      ]
    },
    {
      "id": "214db038",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "92-98",
          "preview": "<select id=\"time-range-select\"> | <option value=\"1h\">最近1小时</option> | <option value=\"24h\" selected>最近24小时</option>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "92-98",
          "preview": "<select id=\"time-range-select\"> | <option value=\"1h\">最近1小时</option> | <option value=\"24h\" selected>最近24小时</option>"
        }
      ],
      "codePreview": [
        "<select id=\"time-range-select\">",
        "<option value=\"1h\">最近1小时</option>",
        "<option value=\"24h\" selected>最近24小时</option>",
        "<option value=\"7d\">最近7天</option>",
        "<option value=\"30d\">最近30天</option>",
        "<option value=\"90d\">最近90天</option>",
        "</select>"
      ]
    },
    {
      "id": "38ac6898",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "99-105",
          "preview": "</div> | <div class=\"dashboard-modes\">"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "99-105",
          "preview": "</div> | <div class=\"dashboard-modes\">"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"dashboard-modes\">",
        "<button class=\"mode-btn active\" data-mode=\"overview\">",
        "<i class=\"fas fa-tachometer-alt\"></i> 概览",
        "</button>",
        "<button class=\"mode-btn\" data-mode=\"kpi\">"
      ]
    },
    {
      "id": "6fadeb30",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "106-112",
          "preview": "<i class=\"fas fa-chart-bar\"></i> KPI | </button> | <button class=\"mode-btn\" data-mode=\"performance\">"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "106-112",
          "preview": "<i class=\"fas fa-chart-bar\"></i> KPI | </button> | <button class=\"mode-btn\" data-mode=\"performance\">"
        }
      ],
      "codePreview": [
        "<i class=\"fas fa-chart-bar\"></i> KPI",
        "</button>",
        "<button class=\"mode-btn\" data-mode=\"performance\">",
        "<i class=\"fas fa-users\"></i> 绩效",
        "</button>",
        "<button class=\"mode-btn\" data-mode=\"satisfaction\">",
        "<i class=\"fas fa-smile\"></i> 满意度"
      ]
    },
    {
      "id": "3cfbe894",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "113-119",
          "preview": "</button> | <button class=\"mode-btn\" data-mode=\"revenue\"> | <i class=\"fas fa-dollar-sign\"></i> 收入"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "113-119",
          "preview": "</button> | <button class=\"mode-btn\" data-mode=\"revenue\"> | <i class=\"fas fa-dollar-sign\"></i> 收入"
        }
      ],
      "codePreview": [
        "</button>",
        "<button class=\"mode-btn\" data-mode=\"revenue\">",
        "<i class=\"fas fa-dollar-sign\"></i> 收入",
        "</button>",
        "</div>",
        "<div class=\"action-buttons\">"
      ]
    },
    {
      "id": "28ea1804",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "120-126",
          "preview": "<button id=\"refresh-btn\" class=\"action-btn\" title=\"刷新数据\"> | <i class=\"fas fa-sync-alt\"></i> | </button>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "120-126",
          "preview": "<button id=\"refresh-btn\" class=\"action-btn\" title=\"刷新数据\"> | <i class=\"fas fa-sync-alt\"></i> | </button>"
        }
      ],
      "codePreview": [
        "<button id=\"refresh-btn\" class=\"action-btn\" title=\"刷新数据\">",
        "<i class=\"fas fa-sync-alt\"></i>",
        "</button>",
        "<button id=\"export-btn\" class=\"action-btn\" title=\"导出数据\">",
        "<i class=\"fas fa-download\"></i>",
        "</button>",
        "<button id=\"settings-btn\" class=\"action-btn\" title=\"设置\">"
      ]
    },
    {
      "id": "4aa5ed3e",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "127-133",
          "preview": "<i class=\"fas fa-cog\"></i> | </button> | <button id=\"fullscreen-btn\" class=\"action-btn\" title=\"全屏\">"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "127-133",
          "preview": "<i class=\"fas fa-cog\"></i> | </button> | <button id=\"fullscreen-btn\" class=\"action-btn\" title=\"全屏\">"
        }
      ],
      "codePreview": [
        "<i class=\"fas fa-cog\"></i>",
        "</button>",
        "<button id=\"fullscreen-btn\" class=\"action-btn\" title=\"全屏\">",
        "<i class=\"fas fa-expand\"></i>",
        "</button>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "954dc398",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "134-140",
          "preview": "</nav> | <!-- 主要内容区域 -->"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "134-140",
          "preview": "</nav> | <!-- 主要内容区域 -->"
        }
      ],
      "codePreview": [
        "</nav>",
        "<!-- 主要内容区域 -->",
        "<main class=\"dashboard-main\">",
        "<!-- 侧边栏筛选器 -->",
        "<aside class=\"dashboard-sidebar\" id=\"dashboard-sidebar\">",
        "<div class=\"sidebar-section\">"
      ]
    },
    {
      "id": "573eaff5",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "141-147",
          "preview": "<h3><i class=\"fas fa-filter\"></i> 筛选器</h3> | <div class=\"filter-group\"> | <label>员工</label>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "141-147",
          "preview": "<h3><i class=\"fas fa-filter\"></i> 筛选器</h3> | <div class=\"filter-group\"> | <label>员工</label>"
        }
      ],
      "codePreview": [
        "<h3><i class=\"fas fa-filter\"></i> 筛选器</h3>",
        "<div class=\"filter-group\">",
        "<label>员工</label>",
        "<select id=\"employee-filter\" multiple>",
        "<option value=\"all\">全部员工</option>",
        "</select>",
        "</div>"
      ]
    },
    {
      "id": "89239acf",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "148-154",
          "preview": "<div class=\"filter-group\"> | <label>客户类型</label> | <select id=\"customer-type-filter\">"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "148-154",
          "preview": "<div class=\"filter-group\"> | <label>客户类型</label> | <select id=\"customer-type-filter\">"
        }
      ],
      "codePreview": [
        "<div class=\"filter-group\">",
        "<label>客户类型</label>",
        "<select id=\"customer-type-filter\">",
        "<option value=\"all\">全部客户</option>",
        "<option value=\"new\">新客户</option>",
        "<option value=\"returning\">老客户</option>",
        "</select>"
      ]
    },
    {
      "id": "0c823c07",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "155-161",
          "preview": "</div> | <div class=\"filter-group\"> | <label>对话状态</label>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "155-161",
          "preview": "</div> | <div class=\"filter-group\"> | <label>对话状态</label>"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"filter-group\">",
        "<label>对话状态</label>",
        "<select id=\"conversation-status-filter\">",
        "<option value=\"all\">全部状态</option>",
        "<option value=\"active\">进行中</option>",
        "<option value=\"closed\">已结束</option>"
      ]
    },
    {
      "id": "d1fcf3a8",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "162-168",
          "preview": "</select> | </div> | </div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "162-168",
          "preview": "</select> | </div> | </div>"
        }
      ],
      "codePreview": [
        "</select>",
        "</div>",
        "</div>",
        "<div class=\"sidebar-section\">",
        "<h3><i class=\"fas fa-bell\"></i> 实时警报</h3>",
        "<div id=\"alerts-container\" class=\"alerts-container\">"
      ]
    },
    {
      "id": "1782fd50",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "169-175",
          "preview": "<!-- 动态警报内容 --> | </div> | </div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "169-175",
          "preview": "<!-- 动态警报内容 --> | </div> | </div>"
        }
      ],
      "codePreview": [
        "<!-- 动态警报内容 -->",
        "</div>",
        "</div>",
        "<div class=\"sidebar-section\">",
        "<h3><i class=\"fas fa-star\"></i> 快速指标</h3>",
        "<div id=\"quick-metrics\" class=\"quick-metrics\">"
      ]
    },
    {
      "id": "10df9cfe",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "176-182",
          "preview": "<!-- 快速指标内容 --> | </div> | </div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "176-182",
          "preview": "<!-- 快速指标内容 --> | </div> | </div>"
        }
      ],
      "codePreview": [
        "<!-- 快速指标内容 -->",
        "</div>",
        "</div>",
        "</aside>",
        "<!-- 仪表板内容 -->",
        "<section class=\"dashboard-content\" id=\"dashboard-content\">"
      ]
    },
    {
      "id": "b21e1cb9",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "183-189",
          "preview": "<!-- 动态内容区域 --> | </section> | </main>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "183-189",
          "preview": "<!-- 动态内容区域 --> | </section> | </main>"
        }
      ],
      "codePreview": [
        "<!-- 动态内容区域 -->",
        "</section>",
        "</main>",
        "<!-- 加载遮罩 -->",
        "<div id=\"loading-overlay\" class=\"loading-overlay hidden\">",
        "<div class=\"loading-spinner\">"
      ]
    },
    {
      "id": "739992d5",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "190-196",
          "preview": "<i class=\"fas fa-spinner fa-spin\"></i> | <p>加载数据中...</p> | </div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "190-196",
          "preview": "<i class=\"fas fa-spinner fa-spin\"></i> | <p>加载数据中...</p> | </div>"
        }
      ],
      "codePreview": [
        "<i class=\"fas fa-spinner fa-spin\"></i>",
        "<p>加载数据中...</p>",
        "</div>",
        "</div>",
        "<!-- 模态对话框 -->",
        "<div id=\"modal-overlay\" class=\"modal-overlay hidden\">"
      ]
    },
    {
      "id": "5e878426",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "197-203",
          "preview": "<div class=\"modal-container\"> | <div class=\"modal-header\"> | <h3 id=\"modal-title\">标题</h3>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "197-203",
          "preview": "<div class=\"modal-container\"> | <div class=\"modal-header\"> | <h3 id=\"modal-title\">标题</h3>"
        }
      ],
      "codePreview": [
        "<div class=\"modal-container\">",
        "<div class=\"modal-header\">",
        "<h3 id=\"modal-title\">标题</h3>",
        "<button id=\"modal-close\" class=\"modal-close\">",
        "<i class=\"fas fa-times\"></i>",
        "</button>",
        "</div>"
      ]
    },
    {
      "id": "398399dc",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "204-210",
          "preview": "<div class=\"modal-body\" id=\"modal-body\"> | <!-- 模态内容 --> | </div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "204-210",
          "preview": "<div class=\"modal-body\" id=\"modal-body\"> | <!-- 模态内容 --> | </div>"
        }
      ],
      "codePreview": [
        "<div class=\"modal-body\" id=\"modal-body\">",
        "<!-- 模态内容 -->",
        "</div>",
        "<div class=\"modal-footer\" id=\"modal-footer\">",
        "<button id=\"modal-cancel\" class=\"btn btn-secondary\">取消</button>",
        "<button id=\"modal-confirm\" class=\"btn btn-primary\">确认</button>",
        "</div>"
      ]
    },
    {
      "id": "7ecb99b5",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "211-217",
          "preview": "</div> | </div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "211-217",
          "preview": "</div> | </div>"
        }
      ],
      "codePreview": [
        "</div>",
        "</div>",
        "<!-- 通知容器 -->",
        "<div id=\"notifications-container\" class=\"notifications-container\">",
        "<!-- 通知消息 -->",
        "</div>"
      ]
    },
    {
      "id": "cf6ad631",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "295-301",
          "preview": "this.createKPIDashboard(contentArea); | break; | case 'performance':"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "295-301",
          "preview": "this.createKPIDashboard(contentArea); | break; | case 'performance':"
        }
      ],
      "codePreview": [
        "this.createKPIDashboard(contentArea);",
        "break;",
        "case 'performance':",
        "this.createPerformanceDashboard(contentArea);",
        "break;",
        "case 'satisfaction':",
        "this.createSatisfactionDashboard(contentArea);"
      ]
    },
    {
      "id": "e5b2670c",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "316-322",
          "preview": "<div class=\"metrics-grid\"> | <div class=\"metric-card\" id=\"conversations-card\"> | <div class=\"metric-header\">"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "316-322",
          "preview": "<div class=\"metrics-grid\"> | <div class=\"metric-card\" id=\"conversations-card\"> | <div class=\"metric-header\">"
        }
      ],
      "codePreview": [
        "<div class=\"metrics-grid\">",
        "<div class=\"metric-card\" id=\"conversations-card\">",
        "<div class=\"metric-header\">",
        "<h3>对话总数</h3>",
        "<i class=\"fas fa-comments metric-icon\"></i>",
        "</div>",
        "<div class=\"metric-value\" id=\"total-conversations\">-</div>"
      ]
    },
    {
      "id": "971b03bd",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "323-329",
          "preview": "<div class=\"metric-change\" id=\"conversations-change\">-</div> | </div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "323-329",
          "preview": "<div class=\"metric-change\" id=\"conversations-change\">-</div> | </div>"
        }
      ],
      "codePreview": [
        "<div class=\"metric-change\" id=\"conversations-change\">-</div>",
        "</div>",
        "<div class=\"metric-card\" id=\"response-time-card\">",
        "<div class=\"metric-header\">",
        "<h3>平均响应时间</h3>",
        "<i class=\"fas fa-clock metric-icon\"></i>"
      ]
    },
    {
      "id": "d10c0f1c",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "330-336",
          "preview": "</div> | <div class=\"metric-value\" id=\"avg-response-time\">-</div> | <div class=\"metric-change\" id=\"response-time-change\">-</div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "330-336",
          "preview": "</div> | <div class=\"metric-value\" id=\"avg-response-time\">-</div> | <div class=\"metric-change\" id=\"response-time-change\">-</div>"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"metric-value\" id=\"avg-response-time\">-</div>",
        "<div class=\"metric-change\" id=\"response-time-change\">-</div>",
        "</div>",
        "<div class=\"metric-card\" id=\"satisfaction-card\">",
        "<div class=\"metric-header\">"
      ]
    },
    {
      "id": "2d66b9f0",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "337-343",
          "preview": "<h3>客户满意度</h3> | <i class=\"fas fa-smile metric-icon\"></i> | </div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "337-343",
          "preview": "<h3>客户满意度</h3> | <i class=\"fas fa-smile metric-icon\"></i> | </div>"
        }
      ],
      "codePreview": [
        "<h3>客户满意度</h3>",
        "<i class=\"fas fa-smile metric-icon\"></i>",
        "</div>",
        "<div class=\"metric-value\" id=\"avg-satisfaction\">-</div>",
        "<div class=\"metric-change\" id=\"satisfaction-change\">-</div>",
        "</div>"
      ]
    },
    {
      "id": "543a8cca",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "344-350",
          "preview": "<div class=\"metric-card\" id=\"revenue-card\"> | <div class=\"metric-header\"> | <h3>总收入</h3>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "344-350",
          "preview": "<div class=\"metric-card\" id=\"revenue-card\"> | <div class=\"metric-header\"> | <h3>总收入</h3>"
        }
      ],
      "codePreview": [
        "<div class=\"metric-card\" id=\"revenue-card\">",
        "<div class=\"metric-header\">",
        "<h3>总收入</h3>",
        "<i class=\"fas fa-dollar-sign metric-icon\"></i>",
        "</div>",
        "<div class=\"metric-value\" id=\"total-revenue\">-</div>",
        "<div class=\"metric-change\" id=\"revenue-change\">-</div>"
      ]
    },
    {
      "id": "20183fbf",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "351-357",
          "preview": "</div> | </div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "351-357",
          "preview": "</div> | </div>"
        }
      ],
      "codePreview": [
        "</div>",
        "</div>",
        "<!-- 图表区域 -->",
        "<div class=\"charts-grid\">",
        "<div class=\"chart-container\">",
        "<div class=\"chart-header\">"
      ]
    },
    {
      "id": "5e1d1553",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "358-364",
          "preview": "<h3>对话趋势</h3> | <div class=\"chart-controls\"> | <select class=\"chart-type-select\">"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "358-364",
          "preview": "<h3>对话趋势</h3> | <div class=\"chart-controls\"> | <select class=\"chart-type-select\">"
        }
      ],
      "codePreview": [
        "<h3>对话趋势</h3>",
        "<div class=\"chart-controls\">",
        "<select class=\"chart-type-select\">",
        "<option value=\"line\">线图</option>",
        "<option value=\"bar\">柱图</option>",
        "<option value=\"area\">面积图</option>",
        "</select>"
      ]
    },
    {
      "id": "662be97e",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "365-371",
          "preview": "</div> | </div> | <div class=\"chart-content\">"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "365-371",
          "preview": "</div> | </div> | <div class=\"chart-content\">"
        }
      ],
      "codePreview": [
        "</div>",
        "</div>",
        "<div class=\"chart-content\">",
        "<canvas id=\"conversations-trend-chart\"></canvas>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "4db42313",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "372-378",
          "preview": "<div class=\"chart-container\"> | <div class=\"chart-header\"> | <h3>响应时间分布</h3>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "372-378",
          "preview": "<div class=\"chart-container\"> | <div class=\"chart-header\"> | <h3>响应时间分布</h3>"
        }
      ],
      "codePreview": [
        "<div class=\"chart-container\">",
        "<div class=\"chart-header\">",
        "<h3>响应时间分布</h3>",
        "</div>",
        "<div class=\"chart-content\">",
        "<canvas id=\"response-time-chart\"></canvas>",
        "</div>"
      ]
    },
    {
      "id": "078ee63d",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "379-385",
          "preview": "</div> | <div class=\"chart-container\">"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "379-385",
          "preview": "</div> | <div class=\"chart-container\">"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"chart-container\">",
        "<div class=\"chart-header\">",
        "<h3>员工绩效排名</h3>",
        "</div>",
        "<div class=\"chart-content\">"
      ]
    },
    {
      "id": "ace16fb0",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "386-392",
          "preview": "<canvas id=\"employee-ranking-chart\"></canvas> | </div> | </div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "386-392",
          "preview": "<canvas id=\"employee-ranking-chart\"></canvas> | </div> | </div>"
        }
      ],
      "codePreview": [
        "<canvas id=\"employee-ranking-chart\"></canvas>",
        "</div>",
        "</div>",
        "<div class=\"chart-container\">",
        "<div class=\"chart-header\">",
        "<h3>客户满意度分布</h3>"
      ]
    },
    {
      "id": "1a34b9ea",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "393-399",
          "preview": "</div> | <div class=\"chart-content\"> | <canvas id=\"satisfaction-distribution-chart\"></canvas>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "393-399",
          "preview": "</div> | <div class=\"chart-content\"> | <canvas id=\"satisfaction-distribution-chart\"></canvas>"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"chart-content\">",
        "<canvas id=\"satisfaction-distribution-chart\"></canvas>",
        "</div>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "e5acab15",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "400-406",
          "preview": "<!-- 详细数据表格 --> | <div class=\"data-tables\"> | <div class=\"table-container\">"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "400-406",
          "preview": "<!-- 详细数据表格 --> | <div class=\"data-tables\"> | <div class=\"table-container\">"
        }
      ],
      "codePreview": [
        "<!-- 详细数据表格 -->",
        "<div class=\"data-tables\">",
        "<div class=\"table-container\">",
        "<div class=\"table-header\">",
        "<h3>最新对话</h3>",
        "<button class=\"btn btn-sm btn-primary\">查看全部</button>",
        "</div>"
      ]
    },
    {
      "id": "0de5638c",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "407-413",
          "preview": "<div class=\"table-content\"> | <table id=\"recent-conversations-table\" class=\"data-table\"> | <thead>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "407-413",
          "preview": "<div class=\"table-content\"> | <table id=\"recent-conversations-table\" class=\"data-table\"> | <thead>"
        }
      ],
      "codePreview": [
        "<div class=\"table-content\">",
        "<table id=\"recent-conversations-table\" class=\"data-table\">",
        "<thead>",
        "<tr>",
        "<th>客户</th>",
        "<th>员工</th>",
        "<th>开始时间</th>"
      ]
    },
    {
      "id": "ab1167f2",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "414-420",
          "preview": "<th>状态</th> | <th>消息数</th> | <th>满意度</th>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "414-420",
          "preview": "<th>状态</th> | <th>消息数</th> | <th>满意度</th>"
        }
      ],
      "codePreview": [
        "<th>状态</th>",
        "<th>消息数</th>",
        "<th>满意度</th>",
        "</tr>",
        "</thead>",
        "<tbody>",
        "<!-- 动态数据 -->"
      ]
    },
    {
      "id": "3e078afa",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "421-427",
          "preview": "</tbody> | </table> | </div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "421-427",
          "preview": "</tbody> | </table> | </div>"
        }
      ],
      "codePreview": [
        "</tbody>",
        "</table>",
        "</div>",
        "</div>",
        "</div>",
        "</div>",
        "`;"
      ]
    },
    {
      "id": "fbce9b05",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "435-441",
          "preview": "*/ | createKPIDashboard(container) { | container.innerHTML = `"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "435-441",
          "preview": "*/ | createKPIDashboard(container) { | container.innerHTML = `"
        }
      ],
      "codePreview": [
        "createKPIDashboard(container) {",
        "container.innerHTML = `",
        "<div class=\"kpi-dashboard\">",
        "<div class=\"kpi-categories\">",
        "<div class=\"category-tabs\">",
        "<button class=\"tab-btn active\" data-category=\"all\">全部</button>"
      ]
    },
    {
      "id": "cfc6e939",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "442-448",
          "preview": "<button class=\"tab-btn\" data-category=\"performance\">性能</button> | <button class=\"tab-btn\" data-category=\"customer\">客户</button> | <button class=\"tab-btn\" data-category=\"business\">业务</button>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "442-448",
          "preview": "<button class=\"tab-btn\" data-category=\"performance\">性能</button> | <button class=\"tab-btn\" data-category=\"customer\">客户</button> | <button class=\"tab-btn\" data-category=\"business\">业务</button>"
        }
      ],
      "codePreview": [
        "<button class=\"tab-btn\" data-category=\"performance\">性能</button>",
        "<button class=\"tab-btn\" data-category=\"customer\">客户</button>",
        "<button class=\"tab-btn\" data-category=\"business\">业务</button>",
        "<button class=\"tab-btn\" data-category=\"employee\">员工</button>",
        "<button class=\"tab-btn\" data-category=\"system\">系统</button>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "22900278",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "470-476",
          "preview": "container.innerHTML = ` | <div class=\"performance-dashboard\"> | <div class=\"performance-summary\">"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "470-476",
          "preview": "container.innerHTML = ` | <div class=\"performance-dashboard\"> | <div class=\"performance-summary\">"
        }
      ],
      "codePreview": [
        "container.innerHTML = `",
        "<div class=\"performance-dashboard\">",
        "<div class=\"performance-summary\">",
        "<div class=\"summary-cards\">",
        "<div class=\"summary-card\">",
        "<h3>总员工数</h3>",
        "<div class=\"summary-value\" id=\"total-employees\">-</div>"
      ]
    },
    {
      "id": "a7ad45fd",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "477-483",
          "preview": "</div> | <div class=\"summary-card\"> | <h3>活跃员工</h3>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "477-483",
          "preview": "</div> | <div class=\"summary-card\"> | <h3>活跃员工</h3>"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"summary-card\">",
        "<h3>活跃员工</h3>",
        "<div class=\"summary-value\" id=\"active-employees\">-</div>",
        "</div>",
        "<div class=\"summary-card\">",
        "<h3>平均生产力</h3>"
      ]
    },
    {
      "id": "354d81e0",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "484-490",
          "preview": "<div class=\"summary-value\" id=\"avg-productivity\">-</div> | </div> | <div class=\"summary-card\">"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "484-490",
          "preview": "<div class=\"summary-value\" id=\"avg-productivity\">-</div> | </div> | <div class=\"summary-card\">"
        }
      ],
      "codePreview": [
        "<div class=\"summary-value\" id=\"avg-productivity\">-</div>",
        "</div>",
        "<div class=\"summary-card\">",
        "<h3>平均质量分</h3>",
        "<div class=\"summary-value\" id=\"avg-quality\">-</div>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "504e78a2",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "491-497",
          "preview": "</div> | <div class=\"performance-charts\">"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "491-497",
          "preview": "</div> | <div class=\"performance-charts\">"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"performance-charts\">",
        "<div class=\"chart-container\">",
        "<h3>员工绩效排名</h3>",
        "<canvas id=\"employee-performance-chart\"></canvas>",
        "</div>"
      ]
    },
    {
      "id": "5e2e9801",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "498-504",
          "preview": "<div class=\"chart-container\"> | <h3>绩效趋势</h3> | <canvas id=\"performance-trend-chart\"></canvas>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "498-504",
          "preview": "<div class=\"chart-container\"> | <h3>绩效趋势</h3> | <canvas id=\"performance-trend-chart\"></canvas>"
        }
      ],
      "codePreview": [
        "<div class=\"chart-container\">",
        "<h3>绩效趋势</h3>",
        "<canvas id=\"performance-trend-chart\"></canvas>",
        "</div>",
        "</div>",
        "<div class=\"performance-table\">"
      ]
    },
    {
      "id": "788b5eb7",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "505-511",
          "preview": "<h3>详细绩效数据</h3> | <table id=\"performance-data-table\" class=\"data-table\"> | <thead>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "505-511",
          "preview": "<h3>详细绩效数据</h3> | <table id=\"performance-data-table\" class=\"data-table\"> | <thead>"
        }
      ],
      "codePreview": [
        "<h3>详细绩效数据</h3>",
        "<table id=\"performance-data-table\" class=\"data-table\">",
        "<thead>",
        "<tr>",
        "<th>员工</th>",
        "<th>对话数</th>",
        "<th>响应时间</th>"
      ]
    },
    {
      "id": "96411be8",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "512-518",
          "preview": "<th>满意度</th> | <th>生产力分</th> | <th>质量分</th>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "512-518",
          "preview": "<th>满意度</th> | <th>生产力分</th> | <th>质量分</th>"
        }
      ],
      "codePreview": [
        "<th>满意度</th>",
        "<th>生产力分</th>",
        "<th>质量分</th>",
        "<th>排名</th>",
        "</tr>",
        "</thead>",
        "<tbody>"
      ]
    },
    {
      "id": "49c71d5c",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "533-539",
          "preview": "container.innerHTML = ` | <div class=\"satisfaction-dashboard\"> | <div class=\"satisfaction-overview\">"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "533-539",
          "preview": "container.innerHTML = ` | <div class=\"satisfaction-dashboard\"> | <div class=\"satisfaction-overview\">"
        }
      ],
      "codePreview": [
        "container.innerHTML = `",
        "<div class=\"satisfaction-dashboard\">",
        "<div class=\"satisfaction-overview\">",
        "<div class=\"satisfaction-gauge\">",
        "<h3>整体满意度</h3>",
        "<canvas id=\"satisfaction-gauge-chart\"></canvas>",
        "</div>"
      ]
    },
    {
      "id": "29bd6e7d",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "540-546",
          "preview": "<div class=\"satisfaction-distribution\"> | <h3>满意度分布</h3> | <canvas id=\"satisfaction-pie-chart\"></canvas>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "540-546",
          "preview": "<div class=\"satisfaction-distribution\"> | <h3>满意度分布</h3> | <canvas id=\"satisfaction-pie-chart\"></canvas>"
        }
      ],
      "codePreview": [
        "<div class=\"satisfaction-distribution\">",
        "<h3>满意度分布</h3>",
        "<canvas id=\"satisfaction-pie-chart\"></canvas>",
        "</div>",
        "</div>",
        "<div class=\"satisfaction-details\">"
      ]
    },
    {
      "id": "bc8ab21a",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "547-553",
          "preview": "<div class=\"details-section\"> | <h3>满意度趋势</h3> | <canvas id=\"satisfaction-trend-chart\"></canvas>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "547-553",
          "preview": "<div class=\"details-section\"> | <h3>满意度趋势</h3> | <canvas id=\"satisfaction-trend-chart\"></canvas>"
        }
      ],
      "codePreview": [
        "<div class=\"details-section\">",
        "<h3>满意度趋势</h3>",
        "<canvas id=\"satisfaction-trend-chart\"></canvas>",
        "</div>",
        "<div class=\"details-section\">",
        "<h3>各维度评分</h3>",
        "<canvas id=\"satisfaction-radar-chart\"></canvas>"
      ]
    },
    {
      "id": "8fbad018",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "554-560",
          "preview": "</div> | </div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "554-560",
          "preview": "</div> | </div>"
        }
      ],
      "codePreview": [
        "</div>",
        "</div>",
        "<div class=\"feedback-analysis\">",
        "<h3>客户反馈分析</h3>",
        "<div id=\"feedback-table-container\">",
        "<table id=\"feedback-table\" class=\"data-table\">"
      ]
    },
    {
      "id": "43fe3a90",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "561-567",
          "preview": "<thead> | <tr> | <th>客户</th>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "561-567",
          "preview": "<thead> | <tr> | <th>客户</th>"
        }
      ],
      "codePreview": [
        "<thead>",
        "<tr>",
        "<th>客户</th>",
        "<th>评分</th>",
        "<th>反馈内容</th>",
        "<th>情感</th>",
        "<th>时间</th>"
      ]
    },
    {
      "id": "66c19d11",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "568-574",
          "preview": "<th>处理员工</th> | </tr> | </thead>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "568-574",
          "preview": "<th>处理员工</th> | </tr> | </thead>"
        }
      ],
      "codePreview": [
        "<th>处理员工</th>",
        "</tr>",
        "</thead>",
        "<tbody>",
        "<!-- 动态反馈数据 -->",
        "</tbody>",
        "</table>"
      ]
    },
    {
      "id": "7579da83",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "589-595",
          "preview": "<div class=\"revenue-summary\"> | <div class=\"revenue-cards\"> | <div class=\"revenue-card\">"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "589-595",
          "preview": "<div class=\"revenue-summary\"> | <div class=\"revenue-cards\"> | <div class=\"revenue-card\">"
        }
      ],
      "codePreview": [
        "<div class=\"revenue-summary\">",
        "<div class=\"revenue-cards\">",
        "<div class=\"revenue-card\">",
        "<h3>总收入</h3>",
        "<div class=\"revenue-value\" id=\"total-revenue-display\">-</div>",
        "<div class=\"revenue-change\" id=\"revenue-growth\">-</div>",
        "</div>"
      ]
    },
    {
      "id": "cf9f4207",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "596-602",
          "preview": "<div class=\"revenue-card\"> | <h3>月度经常性收入(MRR)</h3> | <div class=\"revenue-value\" id=\"mrr-display\">-</div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "596-602",
          "preview": "<div class=\"revenue-card\"> | <h3>月度经常性收入(MRR)</h3> | <div class=\"revenue-value\" id=\"mrr-display\">-</div>"
        }
      ],
      "codePreview": [
        "<div class=\"revenue-card\">",
        "<h3>月度经常性收入(MRR)</h3>",
        "<div class=\"revenue-value\" id=\"mrr-display\">-</div>",
        "</div>",
        "<div class=\"revenue-card\">",
        "<h3>年度经常性收入(ARR)</h3>",
        "<div class=\"revenue-value\" id=\"arr-display\">-</div>"
      ]
    },
    {
      "id": "a24cf7b7",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "603-609",
          "preview": "</div> | <div class=\"revenue-card\"> | <h3>客户生命周期价值(LTV)</h3>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "603-609",
          "preview": "</div> | <div class=\"revenue-card\"> | <h3>客户生命周期价值(LTV)</h3>"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"revenue-card\">",
        "<h3>客户生命周期价值(LTV)</h3>",
        "<div class=\"revenue-value\" id=\"ltv-display\">-</div>",
        "</div>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "1d6c733a",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "610-616",
          "preview": "<div class=\"revenue-charts\"> | <div class=\"chart-container\">"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "610-616",
          "preview": "<div class=\"revenue-charts\"> | <div class=\"chart-container\">"
        }
      ],
      "codePreview": [
        "<div class=\"revenue-charts\">",
        "<div class=\"chart-container\">",
        "<h3>收入趋势</h3>",
        "<canvas id=\"revenue-trend-chart\"></canvas>",
        "</div>",
        "<div class=\"chart-container\">"
      ]
    },
    {
      "id": "f009bd6e",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "617-623",
          "preview": "<h3>订阅类型分布</h3> | <canvas id=\"subscription-chart\"></canvas> | </div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "617-623",
          "preview": "<h3>订阅类型分布</h3> | <canvas id=\"subscription-chart\"></canvas> | </div>"
        }
      ],
      "codePreview": [
        "<h3>订阅类型分布</h3>",
        "<canvas id=\"subscription-chart\"></canvas>",
        "</div>",
        "</div>",
        "<div class=\"revenue-analysis\">",
        "<div class=\"analysis-section\">"
      ]
    },
    {
      "id": "6ca46b7d",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "624-630",
          "preview": "<h3>收入预测</h3> | <canvas id=\"revenue-forecast-chart\"></canvas> | </div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "624-630",
          "preview": "<h3>收入预测</h3> | <canvas id=\"revenue-forecast-chart\"></canvas> | </div>"
        }
      ],
      "codePreview": [
        "<h3>收入预测</h3>",
        "<canvas id=\"revenue-forecast-chart\"></canvas>",
        "</div>",
        "<div class=\"analysis-section\">",
        "<h3>客户获取与流失</h3>",
        "<canvas id=\"churn-retention-chart\"></canvas>",
        "</div>"
      ]
    },
    {
      "id": "b1098b0b",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "694-700",
          "preview": "*/ | handleWebSocketMessage(data) { | switch (data.type) {"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "694-700",
          "preview": "*/ | handleWebSocketMessage(data) { | switch (data.type) {"
        }
      ],
      "codePreview": [
        "handleWebSocketMessage(data) {",
        "switch (data.type) {",
        "case 'analytics_update':",
        "this.handleAnalyticsUpdate(data.payload);",
        "break;",
        "case 'kpi_alert':"
      ]
    },
    {
      "id": "2ac1451f",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "764-770",
          "preview": "alerts | ] = await Promise.all([ | this.fetchDashboardData(),"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "764-770",
          "preview": "alerts | ] = await Promise.all([ | this.fetchDashboardData(),"
        }
      ],
      "codePreview": [
        "alerts",
        "] = await Promise.all([",
        "this.fetchDashboardData(),",
        "this.fetchEmployeeList(),",
        "this.fetchAlerts()",
        "]);"
      ]
    },
    {
      "id": "67ff9734",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "827-833",
          "preview": "async fetchAlerts() { | const response = await fetch(`/api/analytics/alerts/${this.shopId}`, { | method: 'GET',"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "827-833",
          "preview": "async fetchAlerts() { | const response = await fetch(`/api/analytics/alerts/${this.shopId}`, { | method: 'GET',"
        }
      ],
      "codePreview": [
        "async fetchAlerts() {",
        "const response = await fetch(`/api/analytics/alerts/${this.shopId}`, {",
        "method: 'GET',",
        "headers: {",
        "'Content-Type': 'application/json',",
        "'Authorization': `Bearer ${localStorage.getItem('authToken') || ''}`",
        "}"
      ]
    },
    {
      "id": "1b4e72f4",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "911-917",
          "preview": "updateMetricChanges(metrics) { | if (metrics.trend) { | // 根据趋势更新变化指示器"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "911-917",
          "preview": "updateMetricChanges(metrics) { | if (metrics.trend) { | // 根据趋势更新变化指示器"
        }
      ],
      "codePreview": [
        "updateMetricChanges(metrics) {",
        "if (metrics.trend) {",
        "const changeElements = {",
        "'conversations-change': metrics.trend.conversations,",
        "'response-time-change': metrics.trend.responseTime,",
        "'satisfaction-change': metrics.trend.satisfaction,"
      ]
    },
    {
      "id": "5bf07685",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "939-945",
          "preview": "this.charts.set('conversations-trend', new Chart(conversationsTrendCtx, { | type: 'line', | data: {"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "939-945",
          "preview": "this.charts.set('conversations-trend', new Chart(conversationsTrendCtx, { | type: 'line', | data: {"
        }
      ],
      "codePreview": [
        "this.charts.set('conversations-trend', new Chart(conversationsTrendCtx, {",
        "type: 'line',",
        "data: {",
        "labels: [],",
        "datasets: [{",
        "label: '对话数量',",
        "data: [],"
      ]
    },
    {
      "id": "28525ba3",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "960-966",
          "preview": "data: { | labels: [], | datasets: [{"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "960-966",
          "preview": "data: { | labels: [], | datasets: [{"
        }
      ],
      "codePreview": [
        "data: {",
        "labels: [],",
        "datasets: [{",
        "label: '响应时间(分钟)',",
        "data: [],",
        "backgroundColor: '#764ba2'",
        "}]"
      ]
    },
    {
      "id": "5d6f8d58",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "974-980",
          "preview": "if (employeeRankingCtx) { | this.charts.set('employee-ranking', new Chart(employeeRankingCtx, { | type: 'horizontalBar',"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "974-980",
          "preview": "if (employeeRankingCtx) { | this.charts.set('employee-ranking', new Chart(employeeRankingCtx, { | type: 'horizontalBar',"
        }
      ],
      "codePreview": [
        "if (employeeRankingCtx) {",
        "this.charts.set('employee-ranking', new Chart(employeeRankingCtx, {",
        "type: 'horizontalBar',",
        "data: {",
        "labels: [],",
        "datasets: [{",
        "label: '绩效分数',"
      ]
    },
    {
      "id": "748d45cc",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1016-1022",
          "preview": "return { | responsive: true, | maintainAspectRatio: false,"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1016-1022",
          "preview": "return { | responsive: true, | maintainAspectRatio: false,"
        }
      ],
      "codePreview": [
        "return {",
        "responsive: true,",
        "maintainAspectRatio: false,",
        "plugins: {",
        "legend: {",
        "display: true,",
        "position: 'top'"
      ]
    },
    {
      "id": "646cfcff",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1065-1071",
          "preview": "const chart = this.charts.get('conversations-trend'); | if (chart && dailyData) { | const labels = dailyData.map(d => this.formatDate(d.metric_date));"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1065-1071",
          "preview": "const chart = this.charts.get('conversations-trend'); | if (chart && dailyData) { | const labels = dailyData.map(d => this.formatDate(d.metric_date));"
        }
      ],
      "codePreview": [
        "const chart = this.charts.get('conversations-trend');",
        "if (chart && dailyData) {",
        "const labels = dailyData.map(d => this.formatDate(d.metric_date));",
        "const data = dailyData.map(d => d.total_conversations || 0);",
        "chart.data.labels = labels;",
        "chart.data.datasets[0].data = data;"
      ]
    },
    {
      "id": "78eb0a33",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1079-1085",
          "preview": "updateEmployeeRankingChart(rankings) { | const chart = this.charts.get('employee-ranking'); | if (chart && rankings) {"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1079-1085",
          "preview": "updateEmployeeRankingChart(rankings) { | const chart = this.charts.get('employee-ranking'); | if (chart && rankings) {"
        }
      ],
      "codePreview": [
        "updateEmployeeRankingChart(rankings) {",
        "const chart = this.charts.get('employee-ranking');",
        "if (chart && rankings) {",
        "const topEmployees = rankings.slice(0, 10);",
        "const labels = topEmployees.map(e => e.employee_name || '未知');",
        "const data = topEmployees.map(e => e.productivity_score || 0);"
      ]
    },
    {
      "id": "1231b3fb",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1128-1134",
          "preview": "btn.classList.remove('active'); | }); | document.querySelector(`[data-mode=\"${mode}\"]`).classList.add('active');"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1128-1134",
          "preview": "btn.classList.remove('active'); | }); | document.querySelector(`[data-mode=\"${mode}\"]`).classList.add('active');"
        }
      ],
      "codePreview": [
        "btn.classList.remove('active');",
        "});",
        "document.querySelector(`[data-mode=\"${mode}\"]`).classList.add('active');",
        "this.dashboardMode = mode;",
        "this.createDashboardContent();",
        "this.loadModeSpecificData(mode);"
      ]
    },
    {
      "id": "bc6984be",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1142-1148",
          "preview": "this.showLoading(true); | let data;"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1142-1148",
          "preview": "this.showLoading(true); | let data;"
        }
      ],
      "codePreview": [
        "this.showLoading(true);",
        "let data;",
        "switch (mode) {",
        "case 'kpi':",
        "data = await this.fetchKPIData();",
        "this.updateKPIDashboard(data);"
      ]
    },
    {
      "id": "08171e9e",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1149-1155",
          "preview": "break; | case 'performance': | data = await this.fetchPerformanceData();"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1149-1155",
          "preview": "break; | case 'performance': | data = await this.fetchPerformanceData();"
        }
      ],
      "codePreview": [
        "break;",
        "case 'performance':",
        "data = await this.fetchPerformanceData();",
        "this.updatePerformanceDashboard(data);",
        "break;",
        "case 'satisfaction':",
        "data = await this.fetchSatisfactionData();"
      ]
    },
    {
      "id": "0103f074",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1156-1162",
          "preview": "this.updateSatisfactionDashboard(data); | break; | case 'revenue':"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1156-1162",
          "preview": "this.updateSatisfactionDashboard(data); | break; | case 'revenue':"
        }
      ],
      "codePreview": [
        "this.updateSatisfactionDashboard(data);",
        "break;",
        "case 'revenue':",
        "data = await this.fetchRevenueData();",
        "this.updateRevenueDashboard(data);",
        "break;",
        "}"
      ]
    },
    {
      "id": "661051c6",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1219-1225",
          "preview": "*/ | async fetchQuickMetrics() { | const response = await fetch(`/api/analytics/quick-metrics/${this.shopId}`, {"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1219-1225",
          "preview": "*/ | async fetchQuickMetrics() { | const response = await fetch(`/api/analytics/quick-metrics/${this.shopId}`, {"
        }
      ],
      "codePreview": [
        "async fetchQuickMetrics() {",
        "const response = await fetch(`/api/analytics/quick-metrics/${this.shopId}`, {",
        "method: 'GET',",
        "headers: {",
        "'Content-Type': 'application/json',",
        "'Authorization': `Bearer ${localStorage.getItem('authToken') || ''}`"
      ]
    },
    {
      "id": "c2b0a439",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1240-1246",
          "preview": "const container = document.getElementById('quick-metrics'); | if (!container || !metrics) return;"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1240-1246",
          "preview": "const container = document.getElementById('quick-metrics'); | if (!container || !metrics) return;"
        }
      ],
      "codePreview": [
        "const container = document.getElementById('quick-metrics');",
        "if (!container || !metrics) return;",
        "container.innerHTML = `",
        "<div class=\"quick-metric\">",
        "<span class=\"metric-label\">活跃对话</span>",
        "<span class=\"metric-value\">${metrics.activeConversations || 0}</span>"
      ]
    },
    {
      "id": "42d898f6",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1247-1253",
          "preview": "</div> | <div class=\"quick-metric\"> | <span class=\"metric-label\">在线员工</span>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1247-1253",
          "preview": "</div> | <div class=\"quick-metric\"> | <span class=\"metric-label\">在线员工</span>"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"quick-metric\">",
        "<span class=\"metric-label\">在线员工</span>",
        "<span class=\"metric-value\">${metrics.onlineEmployees || 0}</span>",
        "</div>",
        "<div class=\"quick-metric\">",
        "<span class=\"metric-label\">响应时间</span>"
      ]
    },
    {
      "id": "fbfb9bd1",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1254-1260",
          "preview": "<span class=\"metric-value\">${this.formatTime(metrics.avgResponseTime || 0)}</span> | </div> | <div class=\"quick-metric\">"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1254-1260",
          "preview": "<span class=\"metric-value\">${this.formatTime(metrics.avgResponseTime || 0)}</span> | </div> | <div class=\"quick-metric\">"
        }
      ],
      "codePreview": [
        "<span class=\"metric-value\">${this.formatTime(metrics.avgResponseTime || 0)}</span>",
        "</div>",
        "<div class=\"quick-metric\">",
        "<span class=\"metric-label\">今日收入</span>",
        "<span class=\"metric-value\">${this.formatCurrency(metrics.todayRevenue || 0)}</span>",
        "</div>",
        "`;"
      ]
    },
    {
      "id": "90d29df5",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1268-1274",
          "preview": "const title = document.getElementById('modal-title'); | const body = document.getElementById('modal-body'); | const confirmBtn = document.getElementById('modal-confirm');"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1268-1274",
          "preview": "const title = document.getElementById('modal-title'); | const body = document.getElementById('modal-body'); | const confirmBtn = document.getElementById('modal-confirm');"
        }
      ],
      "codePreview": [
        "const title = document.getElementById('modal-title');",
        "const body = document.getElementById('modal-body');",
        "const confirmBtn = document.getElementById('modal-confirm');",
        "title.textContent = '导出数据';",
        "body.innerHTML = `",
        "<form id=\"export-form\">"
      ]
    },
    {
      "id": "72aee33b",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1275-1281",
          "preview": "<div class=\"form-group\"> | <label>导出类型</label> | <select name=\"reportType\" required>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1275-1281",
          "preview": "<div class=\"form-group\"> | <label>导出类型</label> | <select name=\"reportType\" required>"
        }
      ],
      "codePreview": [
        "<div class=\"form-group\">",
        "<label>导出类型</label>",
        "<select name=\"reportType\" required>",
        "<option value=\"dashboard\">完整仪表板</option>",
        "<option value=\"kpi\">KPI指标</option>",
        "<option value=\"performance\">员工绩效</option>",
        "<option value=\"satisfaction\">客户满意度</option>"
      ]
    },
    {
      "id": "3b900ba1",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1282-1288",
          "preview": "<option value=\"revenue\">收入分析</option> | </select> | </div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1282-1288",
          "preview": "<option value=\"revenue\">收入分析</option> | </select> | </div>"
        }
      ],
      "codePreview": [
        "<option value=\"revenue\">收入分析</option>",
        "</select>",
        "</div>",
        "<div class=\"form-group\">",
        "<label>导出格式</label>",
        "<select name=\"format\" required>",
        "<option value=\"json\">JSON</option>"
      ]
    },
    {
      "id": "2ea21866",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1289-1295",
          "preview": "<option value=\"csv\">CSV</option> | <option value=\"excel\">Excel</option> | </select>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1289-1295",
          "preview": "<option value=\"csv\">CSV</option> | <option value=\"excel\">Excel</option> | </select>"
        }
      ],
      "codePreview": [
        "<option value=\"csv\">CSV</option>",
        "<option value=\"excel\">Excel</option>",
        "</select>",
        "</div>",
        "<div class=\"form-group\">",
        "<label>时间范围</label>",
        "<select name=\"timeRange\" required>"
      ]
    },
    {
      "id": "aa2ddcac",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1296-1302",
          "preview": "<option value=\"24h\">最近24小时</option> | <option value=\"7d\">最近7天</option> | <option value=\"30d\">最近30天</option>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1296-1302",
          "preview": "<option value=\"24h\">最近24小时</option> | <option value=\"7d\">最近7天</option> | <option value=\"30d\">最近30天</option>"
        }
      ],
      "codePreview": [
        "<option value=\"24h\">最近24小时</option>",
        "<option value=\"7d\">最近7天</option>",
        "<option value=\"30d\">最近30天</option>",
        "<option value=\"90d\">最近90天</option>",
        "</select>",
        "</div>",
        "</form>"
      ]
    },
    {
      "id": "d31ab63a",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1366-1372",
          "preview": "a.href = url; | a.download = filename; | document.body.appendChild(a);"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1366-1372",
          "preview": "a.href = url; | a.download = filename; | document.body.appendChild(a);"
        }
      ],
      "codePreview": [
        "a.href = url;",
        "a.download = filename;",
        "document.body.appendChild(a);",
        "a.click();",
        "document.body.removeChild(a);",
        "URL.revokeObjectURL(url);",
        "}"
      ]
    },
    {
      "id": "aeefc232",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1380-1386",
          "preview": "const body = document.getElementById('modal-body'); | const confirmBtn = document.getElementById('modal-confirm');"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1380-1386",
          "preview": "const body = document.getElementById('modal-body'); | const confirmBtn = document.getElementById('modal-confirm');"
        }
      ],
      "codePreview": [
        "const body = document.getElementById('modal-body');",
        "const confirmBtn = document.getElementById('modal-confirm');",
        "title.textContent = '仪表板设置';",
        "body.innerHTML = `",
        "<form id=\"settings-form\">",
        "<div class=\"form-group\">"
      ]
    },
    {
      "id": "40e8f04f",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1387-1393",
          "preview": "<label> | <input type=\"checkbox\" name=\"realTimeEnabled\" ${this.isRealTimeEnabled ? 'checked' : ''}> | 启用实时更新"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1387-1393",
          "preview": "<label> | <input type=\"checkbox\" name=\"realTimeEnabled\" ${this.isRealTimeEnabled ? 'checked' : ''}> | 启用实时更新"
        }
      ],
      "codePreview": [
        "<label>",
        "<input type=\"checkbox\" name=\"realTimeEnabled\" ${this.isRealTimeEnabled ? 'checked' : ''}>",
        "启用实时更新",
        "</label>",
        "</div>",
        "<div class=\"form-group\">",
        "<label>自动刷新间隔(秒)</label>"
      ]
    },
    {
      "id": "0e4a3cf0",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1394-1400",
          "preview": "<input type=\"number\" name=\"refreshInterval\" value=\"30\" min=\"10\" max=\"300\"> | </div> | <div class=\"form-group\">"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1394-1400",
          "preview": "<input type=\"number\" name=\"refreshInterval\" value=\"30\" min=\"10\" max=\"300\"> | </div> | <div class=\"form-group\">"
        }
      ],
      "codePreview": [
        "<input type=\"number\" name=\"refreshInterval\" value=\"30\" min=\"10\" max=\"300\">",
        "</div>",
        "<div class=\"form-group\">",
        "<label>默认时间范围</label>",
        "<select name=\"defaultTimeRange\">",
        "<option value=\"1h\">1小时</option>",
        "<option value=\"24h\" selected>24小时</option>"
      ]
    },
    {
      "id": "7c300ae7",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1471-1477",
          "preview": "break; | case 'disconnected': | statusText.textContent = '连接断开';"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1471-1477",
          "preview": "break; | case 'disconnected': | statusText.textContent = '连接断开';"
        }
      ],
      "codePreview": [
        "break;",
        "case 'disconnected':",
        "statusText.textContent = '连接断开';",
        "break;",
        "case 'error':",
        "statusText.textContent = '连接错误';",
        "break;"
      ]
    },
    {
      "id": "8f63d739",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1499-1505",
          "preview": "showNotification(message, type = 'info') { | const container = document.getElementById('notifications-container'); | if (!container) return;"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1499-1505",
          "preview": "showNotification(message, type = 'info') { | const container = document.getElementById('notifications-container'); | if (!container) return;"
        }
      ],
      "codePreview": [
        "showNotification(message, type = 'info') {",
        "const container = document.getElementById('notifications-container');",
        "if (!container) return;",
        "const notification = document.createElement('div');",
        "notification.className = `notification notification-${type}`;",
        "notification.innerHTML = `"
      ]
    },
    {
      "id": "3bfe108a",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1506-1512",
          "preview": "<div class=\"notification-content\"> | <span class=\"notification-message\">${message}</span> | <button class=\"notification-close\" onclick=\"this.parentElement.parentElement.remove()\">"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1506-1512",
          "preview": "<div class=\"notification-content\"> | <span class=\"notification-message\">${message}</span> | <button class=\"notification-close\" onclick=\"this.parentElement.parentElement.remove()\">"
        }
      ],
      "codePreview": [
        "<div class=\"notification-content\">",
        "<span class=\"notification-message\">${message}</span>",
        "<button class=\"notification-close\" onclick=\"this.parentElement.parentElement.remove()\">",
        "<i class=\"fas fa-times\"></i>",
        "</button>",
        "</div>",
        "`;"
      ]
    },
    {
      "id": "839c391d",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1597-1603",
          "preview": "formatTime(minutes) { | if (minutes >= 60) { | const hours = Math.floor(minutes / 60);"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1597-1603",
          "preview": "formatTime(minutes) { | if (minutes >= 60) { | const hours = Math.floor(minutes / 60);"
        }
      ],
      "codePreview": [
        "formatTime(minutes) {",
        "if (minutes >= 60) {",
        "const hours = Math.floor(minutes / 60);",
        "const mins = Math.round(minutes % 60);",
        "return `${hours}小时${mins}分钟`;",
        "}",
        "return `${Math.round(minutes)}分钟`;"
      ]
    },
    {
      "id": "7d0922fe",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1618-1624",
          "preview": "*/ | formatDate(dateString) { | const date = new Date(dateString);"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1618-1624",
          "preview": "*/ | formatDate(dateString) { | const date = new Date(dateString);"
        }
      ],
      "codePreview": [
        "formatDate(dateString) {",
        "const date = new Date(dateString);",
        "return date.toLocaleDateString('zh-CN', {",
        "month: 'short',",
        "day: 'numeric'",
        "});"
      ]
    },
    {
      "id": "2b69adb3",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "8-14",
          "preview": "class MessageSearchManager { | constructor() {"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "8-14",
          "preview": "class MessageSearchManager { | constructor() {"
        }
      ],
      "codePreview": [
        "class MessageSearchManager {",
        "constructor() {",
        "this.searchHistory = [];",
        "this.currentResults = [];",
        "this.searchFilters = {",
        "dateRange: { from: '', to: '' },"
      ]
    },
    {
      "id": "d6f3d037",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "92-98",
          "preview": "<button class=\"toggle-search-btn\" id=\"toggleSearchBtn\"> | <span class=\"toggle-icon\">▼</span> | </button>"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "92-98",
          "preview": "<button class=\"toggle-search-btn\" id=\"toggleSearchBtn\"> | <span class=\"toggle-icon\">▼</span> | </button>"
        }
      ],
      "codePreview": [
        "<button class=\"toggle-search-btn\" id=\"toggleSearchBtn\">",
        "<span class=\"toggle-icon\">▼</span>",
        "</button>",
        "</div>",
        "</div>",
        "<div class=\"search-content\" id=\"searchContent\">"
      ]
    },
    {
      "id": "a2708498",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "99-105",
          "preview": "<!-- 基础搜索 --> | <div class=\"basic-search\"> | <div class=\"search-input-group\">"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "99-105",
          "preview": "<!-- 基础搜索 --> | <div class=\"basic-search\"> | <div class=\"search-input-group\">"
        }
      ],
      "codePreview": [
        "<!-- 基础搜索 -->",
        "<div class=\"basic-search\">",
        "<div class=\"search-input-group\">",
        "<input type=\"text\" id=\"searchInput\" placeholder=\"搜索消息内容、发送者姓名或文件名...\" class=\"search-input\">",
        "<button id=\"searchBtn\" class=\"search-btn\">🔍 搜索</button>",
        "<button id=\"clearSearchBtn\" class=\"clear-btn\">✖ 清除</button>",
        "</div>"
      ]
    },
    {
      "id": "a99b86c0",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "113-119",
          "preview": "<div class=\"advanced-search\" id=\"advancedSearch\" style=\"display: none;\"> | <div class=\"filter-row\"> | <div class=\"filter-group\">"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "113-119",
          "preview": "<div class=\"advanced-search\" id=\"advancedSearch\" style=\"display: none;\"> | <div class=\"filter-row\"> | <div class=\"filter-group\">"
        }
      ],
      "codePreview": [
        "<div class=\"advanced-search\" id=\"advancedSearch\" style=\"display: none;\">",
        "<div class=\"filter-row\">",
        "<div class=\"filter-group\">",
        "<label>日期范围:</label>",
        "<input type=\"date\" id=\"dateFrom\" class=\"date-input\">",
        "<span>至</span>",
        "<input type=\"date\" id=\"dateTo\" class=\"date-input\">"
      ]
    },
    {
      "id": "d8e85285",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "120-126",
          "preview": "</div> | <div class=\"filter-group\">"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "120-126",
          "preview": "</div> | <div class=\"filter-group\">"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"filter-group\">",
        "<label>发送者类型:</label>",
        "<select id=\"senderTypeFilter\" class=\"filter-select\">",
        "<option value=\"\">全部</option>",
        "<option value=\"customer\">客户</option>"
      ]
    },
    {
      "id": "95f4bfd6",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "127-133",
          "preview": "<option value=\"staff\">客服</option> | <option value=\"system\">系统</option> | </select>"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "127-133",
          "preview": "<option value=\"staff\">客服</option> | <option value=\"system\">系统</option> | </select>"
        }
      ],
      "codePreview": [
        "<option value=\"staff\">客服</option>",
        "<option value=\"system\">系统</option>",
        "</select>",
        "</div>",
        "</div>",
        "<div class=\"filter-row\">"
      ]
    },
    {
      "id": "925064f9",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "134-140",
          "preview": "<div class=\"filter-group\"> | <label>消息类型:</label> | <select id=\"messageTypeFilter\" class=\"filter-select\">"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "134-140",
          "preview": "<div class=\"filter-group\"> | <label>消息类型:</label> | <select id=\"messageTypeFilter\" class=\"filter-select\">"
        }
      ],
      "codePreview": [
        "<div class=\"filter-group\">",
        "<label>消息类型:</label>",
        "<select id=\"messageTypeFilter\" class=\"filter-select\">",
        "<option value=\"\">全部</option>",
        "<option value=\"text\">文本</option>",
        "<option value=\"image\">图片</option>",
        "<option value=\"file\">文件</option>"
      ]
    },
    {
      "id": "0ec9a253",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "141-147",
          "preview": "<option value=\"audio\">音频</option> | <option value=\"video\">视频</option> | <option value=\"emoji\">表情</option>"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "141-147",
          "preview": "<option value=\"audio\">音频</option> | <option value=\"video\">视频</option> | <option value=\"emoji\">表情</option>"
        }
      ],
      "codePreview": [
        "<option value=\"audio\">音频</option>",
        "<option value=\"video\">视频</option>",
        "<option value=\"emoji\">表情</option>",
        "</select>",
        "</div>",
        "<div class=\"filter-group\">"
      ]
    },
    {
      "id": "646a617f",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "148-154",
          "preview": "<label>对话ID:</label> | <input type=\"text\" id=\"conversationIdFilter\" placeholder=\"指定对话ID\" class=\"filter-input\"> | </div>"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "148-154",
          "preview": "<label>对话ID:</label> | <input type=\"text\" id=\"conversationIdFilter\" placeholder=\"指定对话ID\" class=\"filter-input\"> | </div>"
        }
      ],
      "codePreview": [
        "<label>对话ID:</label>",
        "<input type=\"text\" id=\"conversationIdFilter\" placeholder=\"指定对话ID\" class=\"filter-input\">",
        "</div>",
        "</div>",
        "<div class=\"filter-actions\">",
        "<button id=\"advancedSearchBtn\" class=\"advanced-search-btn\">🔍 高级搜索</button>"
      ]
    },
    {
      "id": "34950e07",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "155-161",
          "preview": "<button id=\"resetFiltersBtn\" class=\"reset-filters-btn\">🔄 重置筛选</button> | <button id=\"saveFiltersBtn\" class=\"save-filters-btn\">💾 保存筛选</button> | </div>"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "155-161",
          "preview": "<button id=\"resetFiltersBtn\" class=\"reset-filters-btn\">🔄 重置筛选</button> | <button id=\"saveFiltersBtn\" class=\"save-filters-btn\">💾 保存筛选</button> | </div>"
        }
      ],
      "codePreview": [
        "<button id=\"resetFiltersBtn\" class=\"reset-filters-btn\">🔄 重置筛选</button>",
        "<button id=\"saveFiltersBtn\" class=\"save-filters-btn\">💾 保存筛选</button>",
        "</div>",
        "</div>",
        "<!-- 搜索历史 -->",
        "<div class=\"search-history\" id=\"searchHistoryPanel\" style=\"display: none;\">"
      ]
    },
    {
      "id": "92013f33",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "162-168",
          "preview": "<div class=\"history-header\"> | <h4>📝 搜索历史</h4> | <button id=\"clearHistoryBtn\" class=\"clear-history-btn\">🗑️ 清除历史</button>"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "162-168",
          "preview": "<div class=\"history-header\"> | <h4>📝 搜索历史</h4> | <button id=\"clearHistoryBtn\" class=\"clear-history-btn\">🗑️ 清除历史</button>"
        }
      ],
      "codePreview": [
        "<div class=\"history-header\">",
        "<h4>📝 搜索历史</h4>",
        "<button id=\"clearHistoryBtn\" class=\"clear-history-btn\">🗑️ 清除历史</button>",
        "</div>",
        "<div class=\"history-list\" id=\"historyList\">",
        "<!-- 搜索历史将在这里显示 -->",
        "</div>"
      ]
    },
    {
      "id": "21415567",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "169-175",
          "preview": "</div> | <!-- 工具栏 -->"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "169-175",
          "preview": "</div> | <!-- 工具栏 -->"
        }
      ],
      "codePreview": [
        "</div>",
        "<!-- 工具栏 -->",
        "<div class=\"search-toolbar\">",
        "<button id=\"toggleAdvancedBtn\" class=\"toolbar-btn\">⚙️ 高级搜索</button>",
        "<button id=\"toggleHistoryBtn\" class=\"toolbar-btn\">📝 搜索历史</button>",
        "<button id=\"exportResultsBtn\" class=\"toolbar-btn\">📤 导出结果</button>"
      ]
    },
    {
      "id": "c16e85fd",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "176-182",
          "preview": "<button id=\"searchStatsBtn\" class=\"toolbar-btn\">📊 搜索统计</button> | </div> | </div>"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "176-182",
          "preview": "<button id=\"searchStatsBtn\" class=\"toolbar-btn\">📊 搜索统计</button> | </div> | </div>"
        }
      ],
      "codePreview": [
        "<button id=\"searchStatsBtn\" class=\"toolbar-btn\">📊 搜索统计</button>",
        "</div>",
        "</div>",
        "<!-- 搜索结果 -->",
        "<div class=\"search-results\" id=\"searchResults\" style=\"display: none;\">",
        "<div class=\"results-header\">"
      ]
    },
    {
      "id": "a816cfde",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "183-189",
          "preview": "<h4 id=\"resultsTitle\">搜索结果</h4> | <div class=\"results-info\"> | <span id=\"resultsCount\">0 条结果</span>"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "183-189",
          "preview": "<h4 id=\"resultsTitle\">搜索结果</h4> | <div class=\"results-info\"> | <span id=\"resultsCount\">0 条结果</span>"
        }
      ],
      "codePreview": [
        "<h4 id=\"resultsTitle\">搜索结果</h4>",
        "<div class=\"results-info\">",
        "<span id=\"resultsCount\">0 条结果</span>",
        "<span id=\"searchTime\">0ms</span>",
        "</div>",
        "</div>",
        "<div class=\"results-list\" id=\"resultsList\">"
      ]
    },
    {
      "id": "867a3d39",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "190-196",
          "preview": "<!-- 搜索结果将在这里显示 --> | </div> | <div class=\"results-pagination\" id=\"resultsPagination\">"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "190-196",
          "preview": "<!-- 搜索结果将在这里显示 --> | </div> | <div class=\"results-pagination\" id=\"resultsPagination\">"
        }
      ],
      "codePreview": [
        "<!-- 搜索结果将在这里显示 -->",
        "</div>",
        "<div class=\"results-pagination\" id=\"resultsPagination\">",
        "<!-- 分页将在这里显示 -->",
        "</div>",
        "</div>",
        "`;"
      ]
    },
    {
      "id": "1009f118",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "295-301",
          "preview": "body: JSON.stringify({ | query, | shopId: 'shop_1',"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "295-301",
          "preview": "body: JSON.stringify({ | query, | shopId: 'shop_1',"
        }
      ],
      "codePreview": [
        "body: JSON.stringify({",
        "query,",
        "shopId: 'shop_1',",
        "userId: 'user_1',",
        "limit: 50,",
        "offset: 0",
        "})"
      ]
    },
    {
      "id": "e9fbc819",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "330-336",
          "preview": "const response = await fetch('/api/search/messages', { | method: 'POST',"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "330-336",
          "preview": "const response = await fetch('/api/search/messages', { | method: 'POST',"
        }
      ],
      "codePreview": [
        "const response = await fetch('/api/search/messages', {",
        "method: 'POST',",
        "headers: { 'Content-Type': 'application/json' },",
        "body: JSON.stringify({",
        "query,",
        "shopId: 'shop_1',"
      ]
    },
    {
      "id": "05dda098",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "365-371",
          "preview": "return { | dateFrom: document.getElementById('dateFrom').value, | dateTo: document.getElementById('dateTo').value,"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "365-371",
          "preview": "return { | dateFrom: document.getElementById('dateFrom').value, | dateTo: document.getElementById('dateTo').value,"
        }
      ],
      "codePreview": [
        "return {",
        "dateFrom: document.getElementById('dateFrom').value,",
        "dateTo: document.getElementById('dateTo').value,",
        "senderType: document.getElementById('senderTypeFilter').value,",
        "messageType: document.getElementById('messageTypeFilter').value,",
        "conversationId: document.getElementById('conversationIdFilter').value",
        "};"
      ]
    },
    {
      "id": "83ae757c",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "421-427",
          "preview": "<div class=\"result-header\"> | <div class=\"result-meta\"> | <span class=\"sender-info\">"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "421-427",
          "preview": "<div class=\"result-header\"> | <div class=\"result-meta\"> | <span class=\"sender-info\">"
        }
      ],
      "codePreview": [
        "<div class=\"result-header\">",
        "<div class=\"result-meta\">",
        "<span class=\"sender-info\">",
        "<span class=\"sender-type ${message.sender_type}\">${this.getSenderTypeLabel(message.sender_type)}</span>",
        "<span class=\"sender-name\">${message.sender_name || '未知'}</span>",
        "</span>",
        "<span class=\"message-time\">${this.formatDate(message.created_at)}</span>"
      ]
    },
    {
      "id": "77a1d794",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "428-434",
          "preview": "</div> | <div class=\"result-actions\"> | <button class=\"view-conversation-btn\" data-conversation-id=\"${message.conversation_id}\">"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "428-434",
          "preview": "</div> | <div class=\"result-actions\"> | <button class=\"view-conversation-btn\" data-conversation-id=\"${message.conversation_id}\">"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"result-actions\">",
        "<button class=\"view-conversation-btn\" data-conversation-id=\"${message.conversation_id}\">",
        "📄 查看对话",
        "</button>",
        "<button class=\"export-message-btn\" data-message-id=\"${message.id}\">",
        "📤 导出"
      ]
    },
    {
      "id": "45e6a3ff",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "435-441",
          "preview": "</button> | </div> | </div>"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "435-441",
          "preview": "</button> | </div> | </div>"
        }
      ],
      "codePreview": [
        "</button>",
        "</div>",
        "</div>",
        "<div class=\"result-content\">",
        "<div class=\"message-content\">",
        "${message.message_type === 'text' ? highlightedContent : this.formatNonTextMessage(message)}",
        "</div>"
      ]
    },
    {
      "id": "dcf2e5eb",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "484-490",
          "preview": "return `🖼️ 图片: ${message.file_name || '未知'}`; | case 'file': | return `📄 文件: ${message.file_name || '未知'}`;"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "484-490",
          "preview": "return `🖼️ 图片: ${message.file_name || '未知'}`; | case 'file': | return `📄 文件: ${message.file_name || '未知'}`;"
        }
      ],
      "codePreview": [
        "return `🖼️ 图片: ${message.file_name || '未知'}`;",
        "case 'file':",
        "return `📄 文件: ${message.file_name || '未知'}`;",
        "case 'audio':",
        "return `🎵 音频: ${message.file_name || '未知'}`;",
        "case 'video':",
        "return `🎬 视频: ${message.file_name || '未知'}`;"
      ]
    },
    {
      "id": "92b80c43",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "540-546",
          "preview": "suggestionsPanel.innerHTML = suggestions.map(suggestion => ` | <div class=\"suggestion-item\" data-query=\"${suggestion.search_query}\"> | <span class=\"suggestion-text\">${suggestion.search_query}</span>"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "540-546",
          "preview": "suggestionsPanel.innerHTML = suggestions.map(suggestion => ` | <div class=\"suggestion-item\" data-query=\"${suggestion.search_query}\"> | <span class=\"suggestion-text\">${suggestion.search_query}</span>"
        }
      ],
      "codePreview": [
        "suggestionsPanel.innerHTML = suggestions.map(suggestion => `",
        "<div class=\"suggestion-item\" data-query=\"${suggestion.search_query}\">",
        "<span class=\"suggestion-text\">${suggestion.search_query}</span>",
        "<span class=\"suggestion-count\">${suggestion.result_count} 条结果</span>",
        "</div>",
        "`).join('');"
      ]
    },
    {
      "id": "07647a8c",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "547-553",
          "preview": "// 绑定点击事件 | suggestionsPanel.querySelectorAll('.suggestion-item').forEach(item => { | item.addEventListener('click', (e) => {"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "547-553",
          "preview": "// 绑定点击事件 | suggestionsPanel.querySelectorAll('.suggestion-item').forEach(item => { | item.addEventListener('click', (e) => {"
        }
      ],
      "codePreview": [
        "suggestionsPanel.querySelectorAll('.suggestion-item').forEach(item => {",
        "item.addEventListener('click', (e) => {",
        "const query = e.currentTarget.dataset.query;",
        "document.getElementById('searchInput').value = query;",
        "this.performBasicSearch();",
        "suggestionsPanel.style.display = 'none';"
      ]
    },
    {
      "id": "079f972a",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "617-623",
          "preview": "historyList.innerHTML = this.searchHistory.map(item => ` | <div class=\"history-item\" data-query=\"${item.search_query}\"> | <div class=\"history-content\">"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "617-623",
          "preview": "historyList.innerHTML = this.searchHistory.map(item => ` | <div class=\"history-item\" data-query=\"${item.search_query}\"> | <div class=\"history-content\">"
        }
      ],
      "codePreview": [
        "historyList.innerHTML = this.searchHistory.map(item => `",
        "<div class=\"history-item\" data-query=\"${item.search_query}\">",
        "<div class=\"history-content\">",
        "<span class=\"history-query\">${item.search_query}</span>",
        "<span class=\"history-meta\">",
        "${item.search_count} 次搜索 · ${item.result_count} 条结果 · ${this.formatDate(item.created_at)}",
        "</span>"
      ]
    },
    {
      "id": "b91b2724",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "631-637",
          "preview": "btn.addEventListener('click', () => { | const item = this.searchHistory[index]; | document.getElementById('searchInput').value = item.search_query;"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "631-637",
          "preview": "btn.addEventListener('click', () => { | const item = this.searchHistory[index]; | document.getElementById('searchInput').value = item.search_query;"
        }
      ],
      "codePreview": [
        "btn.addEventListener('click', () => {",
        "const item = this.searchHistory[index];",
        "document.getElementById('searchInput').value = item.search_query;",
        "this.performBasicSearch();",
        "});",
        "});",
        "}"
      ]
    },
    {
      "id": "3f416bea",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "680-686",
          "preview": "resetFilters() { | document.getElementById('dateFrom').value = ''; | document.getElementById('dateTo').value = '';"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "680-686",
          "preview": "resetFilters() { | document.getElementById('dateFrom').value = ''; | document.getElementById('dateTo').value = '';"
        }
      ],
      "codePreview": [
        "resetFilters() {",
        "document.getElementById('dateFrom').value = '';",
        "document.getElementById('dateTo').value = '';",
        "document.getElementById('senderTypeFilter').value = '';",
        "document.getElementById('messageTypeFilter').value = '';",
        "document.getElementById('conversationIdFilter').value = '';",
        "}"
      ]
    },
    {
      "id": "730464f2",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "785-791",
          "preview": "const modal = document.createElement('div'); | modal.className = 'stats-modal'; | modal.innerHTML = `"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "785-791",
          "preview": "const modal = document.createElement('div'); | modal.className = 'stats-modal'; | modal.innerHTML = `"
        }
      ],
      "codePreview": [
        "const modal = document.createElement('div');",
        "modal.className = 'stats-modal';",
        "modal.innerHTML = `",
        "<div class=\"stats-modal-content\">",
        "<div class=\"stats-header\">",
        "<h3>📊 搜索统计 (${stats.period})</h3>",
        "<button class=\"close-stats-btn\">✖</button>"
      ]
    },
    {
      "id": "959e9b0d",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "792-798",
          "preview": "</div> | <div class=\"stats-body\"> | <div class=\"stats-grid\">"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "792-798",
          "preview": "</div> | <div class=\"stats-body\"> | <div class=\"stats-grid\">"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"stats-body\">",
        "<div class=\"stats-grid\">",
        "<div class=\"stat-item\">",
        "<div class=\"stat-value\">${stats.totalSearches}</div>",
        "<div class=\"stat-label\">总搜索次数</div>",
        "</div>"
      ]
    },
    {
      "id": "29c17594",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "799-805",
          "preview": "<div class=\"stat-item\"> | <div class=\"stat-value\">${stats.uniqueUsers}</div> | <div class=\"stat-label\">活跃用户</div>"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "799-805",
          "preview": "<div class=\"stat-item\"> | <div class=\"stat-value\">${stats.uniqueUsers}</div> | <div class=\"stat-label\">活跃用户</div>"
        }
      ],
      "codePreview": [
        "<div class=\"stat-item\">",
        "<div class=\"stat-value\">${stats.uniqueUsers}</div>",
        "<div class=\"stat-label\">活跃用户</div>",
        "</div>",
        "<div class=\"stat-item\">",
        "<div class=\"stat-value\">${stats.avgSearchTime}ms</div>",
        "<div class=\"stat-label\">平均响应时间</div>"
      ]
    },
    {
      "id": "004b2ffc",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "806-812",
          "preview": "</div> | <div class=\"stat-item\"> | <div class=\"stat-value\">${stats.avgResultCount}</div>"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "806-812",
          "preview": "</div> | <div class=\"stat-item\"> | <div class=\"stat-value\">${stats.avgResultCount}</div>"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"stat-item\">",
        "<div class=\"stat-value\">${stats.avgResultCount}</div>",
        "<div class=\"stat-label\">平均结果数</div>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "521325c7",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "813-819",
          "preview": "<div class=\"top-queries\"> | <h4>🔥 热门搜索</h4> | ${stats.topQueries.map(query => `"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "813-819",
          "preview": "<div class=\"top-queries\"> | <h4>🔥 热门搜索</h4> | ${stats.topQueries.map(query => `"
        }
      ],
      "codePreview": [
        "<div class=\"top-queries\">",
        "<h4>🔥 热门搜索</h4>",
        "${stats.topQueries.map(query => `",
        "<div class=\"query-item\">",
        "<span class=\"query-text\">${query.search_query}</span>",
        "<span class=\"query-count\">${query.search_count} 次</span>",
        "</div>"
      ]
    },
    {
      "id": "0adf706c",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "15-21",
          "preview": "this.conversations = {};  // 按店铺ID分组的对话 | this.currentShop = null; | this.currentConversation = null;"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "15-21",
          "preview": "this.conversations = {};  // 按店铺ID分组的对话 | this.currentShop = null; | this.currentConversation = null;"
        }
      ],
      "codePreview": [
        "this.conversations = {};",
        "this.currentShop = null;",
        "this.currentConversation = null;",
        "this.unreadCounts = {};",
        "this.websocket = null;",
        "this.pageStack = ['home'];",
        "this.isInitialized = false;"
      ]
    },
    {
      "id": "f18c82f6",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "190-196",
          "preview": "this.handleMessageRead(data); | break; | case 'conversation_update':"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "190-196",
          "preview": "this.handleMessageRead(data); | break; | case 'conversation_update':"
        }
      ],
      "codePreview": [
        "this.handleMessageRead(data);",
        "break;",
        "case 'conversation_update':",
        "this.handleConversationUpdate(data);",
        "break;",
        "case 'unread_count_update':",
        "this.handleUnreadCountUpdate(data);"
      ]
    },
    {
      "id": "1bf33a12",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "274-280",
          "preview": "if (this.shops.length === 0) { | content.innerHTML = `"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "274-280",
          "preview": "if (this.shops.length === 0) { | content.innerHTML = `"
        }
      ],
      "codePreview": [
        "if (this.shops.length === 0) {",
        "content.innerHTML = `",
        "<div class=\"empty-state\">",
        "<div class=\"empty-icon\">🏪</div>",
        "<div class=\"empty-title\">暂无店铺</div>",
        "<div class=\"empty-subtitle\">请先创建店铺来接收消息</div>"
      ]
    },
    {
      "id": "e6916ea3",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "288-294",
          "preview": "const html = ` | <div class=\"message-overview\">"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "288-294",
          "preview": "const html = ` | <div class=\"message-overview\">"
        }
      ],
      "codePreview": [
        "const html = `",
        "<div class=\"message-overview\">",
        "<div class=\"stats-summary\">",
        "<div class=\"stats-item\">",
        "<div class=\"stats-number\">${this.shops.length}</div>",
        "<div class=\"stats-label\">总店铺</div>"
      ]
    },
    {
      "id": "bc4275d4",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "295-301",
          "preview": "</div> | <div class=\"stats-item highlight\"> | <div class=\"stats-number\">${totalUnread}</div>"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "295-301",
          "preview": "</div> | <div class=\"stats-item highlight\"> | <div class=\"stats-number\">${totalUnread}</div>"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"stats-item highlight\">",
        "<div class=\"stats-number\">${totalUnread}</div>",
        "<div class=\"stats-label\">未读消息</div>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "44bcf8f0",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "316-322",
          "preview": "const hasUnread = unreadCount > 0; | return `"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "316-322",
          "preview": "const hasUnread = unreadCount > 0; | return `"
        }
      ],
      "codePreview": [
        "const hasUnread = unreadCount > 0;",
        "return `",
        "<div class=\"shop-item ${hasUnread ? 'has-unread' : ''}\"",
        "onclick=\"window.mobileCustomerService.showShopConversations('${shop.id}')\">",
        "<div class=\"shop-avatar\">",
        "<div class=\"avatar-text\">${shop.name.charAt(0)}</div>"
      ]
    },
    {
      "id": "3ac792a9",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "323-329",
          "preview": "${hasUnread ? `<div class=\"unread-badge\">${unreadCount > 99 ? '99+' : unreadCount}</div>` : ''} | </div> | <div class=\"shop-info\">"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "323-329",
          "preview": "${hasUnread ? `<div class=\"unread-badge\">${unreadCount > 99 ? '99+' : unreadCount}</div>` : ''} | </div> | <div class=\"shop-info\">"
        }
      ],
      "codePreview": [
        "${hasUnread ? `<div class=\"unread-badge\">${unreadCount > 99 ? '99+' : unreadCount}</div>` : ''}",
        "</div>",
        "<div class=\"shop-info\">",
        "<div class=\"shop-name\">${shop.name}</div>",
        "<div class=\"shop-domain\">${shop.domain}</div>",
        "<div class=\"shop-status ${shop.status}\">${this.getShopStatusText(shop.status)}</div>",
        "</div>"
      ]
    },
    {
      "id": "87d06097",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "379-385",
          "preview": "const response = await fetch(`/api/shops/${shopId}/conversations`, { | headers: { 'X-Session-Id': sessionId } | });"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "379-385",
          "preview": "const response = await fetch(`/api/shops/${shopId}/conversations`, { | headers: { 'X-Session-Id': sessionId } | });"
        }
      ],
      "codePreview": [
        "const response = await fetch(`/api/shops/${shopId}/conversations`, {",
        "headers: { 'X-Session-Id': sessionId }",
        "});",
        "if (response.ok) {",
        "const conversations = await response.json();",
        "this.conversations[shopId] = conversations;"
      ]
    },
    {
      "id": "02f799b8",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "400-406",
          "preview": "renderShopConversations() { | const content = document.getElementById('messagesContent'); | const conversations = this.conversations[this.currentShop.id] || [];"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "400-406",
          "preview": "renderShopConversations() { | const content = document.getElementById('messagesContent'); | const conversations = this.conversations[this.currentShop.id] || [];"
        }
      ],
      "codePreview": [
        "renderShopConversations() {",
        "const content = document.getElementById('messagesContent');",
        "const conversations = this.conversations[this.currentShop.id] || [];",
        "if (conversations.length === 0) {",
        "content.innerHTML = `",
        "<div class=\"empty-state\">"
      ]
    },
    {
      "id": "78af12ce",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "428-434",
          "preview": "const hasUnread = conversation.unreadCount > 0; | const lastMessageTime = this.formatTime(conversation.lastMessageTime);"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "428-434",
          "preview": "const hasUnread = conversation.unreadCount > 0; | const lastMessageTime = this.formatTime(conversation.lastMessageTime);"
        }
      ],
      "codePreview": [
        "const hasUnread = conversation.unreadCount > 0;",
        "const lastMessageTime = this.formatTime(conversation.lastMessageTime);",
        "return `",
        "<div class=\"conversation-item ${hasUnread ? 'has-unread' : ''}\"",
        "onclick=\"window.mobileCustomerService.openChat('${conversation.userId}')\">",
        "<div class=\"user-avatar\">"
      ]
    },
    {
      "id": "dadd7f97",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "435-441",
          "preview": "<div class=\"avatar-text\">${conversation.userName.charAt(0)}</div> | ${hasUnread ? `<div class=\"unread-badge\">${conversation.unreadCount > 99 ? '99+' : conversation.unreadCount}</div>` : ''} | </div>"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "435-441",
          "preview": "<div class=\"avatar-text\">${conversation.userName.charAt(0)}</div> | ${hasUnread ? `<div class=\"unread-badge\">${conversation.unreadCount > 99 ? '99+' : conversation.unreadCount}</div>` : ''} | </div>"
        }
      ],
      "codePreview": [
        "<div class=\"avatar-text\">${conversation.userName.charAt(0)}</div>",
        "${hasUnread ? `<div class=\"unread-badge\">${conversation.unreadCount > 99 ? '99+' : conversation.unreadCount}</div>` : ''}",
        "</div>",
        "<div class=\"conversation-info\">",
        "<div class=\"conversation-meta\">",
        "<div class=\"user-name\">${conversation.userName}</div>",
        "<div class=\"message-time\">${lastMessageTime}</div>"
      ]
    },
    {
      "id": "4f82e158",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "442-448",
          "preview": "</div> | <div class=\"last-message\">${conversation.lastMessage || '暂无消息'}</div> | </div>"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "442-448",
          "preview": "</div> | <div class=\"last-message\">${conversation.lastMessage || '暂无消息'}</div> | </div>"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"last-message\">${conversation.lastMessage || '暂无消息'}</div>",
        "</div>",
        "<div class=\"conversation-actions\">",
        "<div class=\"chevron\">›</div>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "d14e221a",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "498-504",
          "preview": "chatMessages.innerHTML = ` | <div class=\"error-state\"> | <div class=\"error-icon\">❌</div>"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "498-504",
          "preview": "chatMessages.innerHTML = ` | <div class=\"error-state\"> | <div class=\"error-icon\">❌</div>"
        }
      ],
      "codePreview": [
        "chatMessages.innerHTML = `",
        "<div class=\"error-state\">",
        "<div class=\"error-icon\">❌</div>",
        "<div class=\"error-title\">加载失败</div>",
        "<button class=\"retry-btn\" onclick=\"window.mobileCustomerService.loadChatMessages('${userId}')\">",
        "重试",
        "</button>"
      ]
    },
    {
      "id": "0a576056",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "540-546",
          "preview": "return ` | <div class=\"message ${isUser ? 'user' : 'admin'}\"> | <div class=\"message-content\">"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "540-546",
          "preview": "return ` | <div class=\"message ${isUser ? 'user' : 'admin'}\"> | <div class=\"message-content\">"
        }
      ],
      "codePreview": [
        "return `",
        "<div class=\"message ${isUser ? 'user' : 'admin'}\">",
        "<div class=\"message-content\">",
        "<div class=\"message-text\">${message.content}</div>",
        "<div class=\"message-time\">${time}</div>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "6a2a8a23",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "708-714",
          "preview": "bindEvents() { | // 消息输入框回车发送 | const messageInput = document.getElementById('messageInput');"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "708-714",
          "preview": "bindEvents() { | // 消息输入框回车发送 | const messageInput = document.getElementById('messageInput');"
        }
      ],
      "codePreview": [
        "bindEvents() {",
        "const messageInput = document.getElementById('messageInput');",
        "if (messageInput) {",
        "messageInput.addEventListener('keypress', (e) => {",
        "if (e.key === 'Enter') {",
        "this.sendMessage();"
      ]
    },
    {
      "id": "972f4bdc",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "8-14",
          "preview": "class EnhancedMobileCustomerService { | constructor() {"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "8-14",
          "preview": "class EnhancedMobileCustomerService { | constructor() {"
        }
      ],
      "codePreview": [
        "class EnhancedMobileCustomerService {",
        "constructor() {",
        "this.currentUser = null;",
        "this.shops = [];",
        "this.conversations = {};",
        "this.currentShop = null;"
      ]
    },
    {
      "id": "983edd7e",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "197-203",
          "preview": "let currentY = 0; | let isDragging = false;"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "197-203",
          "preview": "let currentY = 0; | let isDragging = false;"
        }
      ],
      "codePreview": [
        "let currentY = 0;",
        "let isDragging = false;",
        "container.addEventListener('touchstart', (e) => {",
        "if (container.scrollTop === 0) {",
        "startY = e.touches[0].clientY;",
        "isDragging = true;"
      ]
    },
    {
      "id": "09d4d9d7",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "246-252",
          "preview": "indicator.innerHTML = ` | <div class=\"pull-indicator\"> | <div class=\"pull-icon\">⬇️</div>"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "246-252",
          "preview": "indicator.innerHTML = ` | <div class=\"pull-indicator\"> | <div class=\"pull-icon\">⬇️</div>"
        }
      ],
      "codePreview": [
        "indicator.innerHTML = `",
        "<div class=\"pull-indicator\">",
        "<div class=\"pull-icon\">⬇️</div>",
        "<div class=\"pull-text\">下拉刷新</div>",
        "</div>",
        "`;",
        "document.body.appendChild(indicator);"
      ]
    },
    {
      "id": "c13f8590",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "288-294",
          "preview": "// 根据当前页面刷新对应数据 | const currentPage = this.getCurrentPage(); | switch (currentPage) {"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "288-294",
          "preview": "// 根据当前页面刷新对应数据 | const currentPage = this.getCurrentPage(); | switch (currentPage) {"
        }
      ],
      "codePreview": [
        "const currentPage = this.getCurrentPage();",
        "switch (currentPage) {",
        "case 'home':",
        "await this.loadShops();",
        "await this.loadUnreadCounts();",
        "break;"
      ]
    },
    {
      "id": "aaa8722e",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "295-301",
          "preview": "case 'shop': | await this.loadConversations(this.currentShop.id); | break;"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "295-301",
          "preview": "case 'shop': | await this.loadConversations(this.currentShop.id); | break;"
        }
      ],
      "codePreview": [
        "case 'shop':",
        "await this.loadConversations(this.currentShop.id);",
        "break;",
        "case 'chat':",
        "await this.loadMessages(this.currentConversation.id);",
        "break;",
        "}"
      ]
    },
    {
      "id": "4d388480",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "344-350",
          "preview": "modal.className = 'camera-modal'; | modal.innerHTML = ` | <div class=\"camera-container\">"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "344-350",
          "preview": "modal.className = 'camera-modal'; | modal.innerHTML = ` | <div class=\"camera-container\">"
        }
      ],
      "codePreview": [
        "modal.className = 'camera-modal';",
        "modal.innerHTML = `",
        "<div class=\"camera-container\">",
        "<video id=\"cameraPreview\" autoplay playsinline></video>",
        "<canvas id=\"photoCanvas\" style=\"display: none;\"></canvas>",
        "<div class=\"camera-controls\">",
        "<button class=\"camera-btn cancel-btn\" onclick=\"this.closest('.camera-modal').remove()\">取消</button>"
      ]
    },
    {
      "id": "a1d91683",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "372-378",
          "preview": "capturePhoto() { | const video = document.getElementById('cameraPreview'); | const canvas = document.getElementById('photoCanvas');"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "372-378",
          "preview": "capturePhoto() { | const video = document.getElementById('cameraPreview'); | const canvas = document.getElementById('photoCanvas');"
        }
      ],
      "codePreview": [
        "capturePhoto() {",
        "const video = document.getElementById('cameraPreview');",
        "const canvas = document.getElementById('photoCanvas');",
        "const context = canvas.getContext('2d');",
        "canvas.width = video.videoWidth;",
        "canvas.height = video.videoHeight;"
      ]
    },
    {
      "id": "ec85338e",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "477-483",
          "preview": "recordingUI.id = 'voiceRecordingUI'; | recordingUI.className = 'voice-recording-ui'; | recordingUI.innerHTML = `"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "477-483",
          "preview": "recordingUI.id = 'voiceRecordingUI'; | recordingUI.className = 'voice-recording-ui'; | recordingUI.innerHTML = `"
        }
      ],
      "codePreview": [
        "recordingUI.id = 'voiceRecordingUI';",
        "recordingUI.className = 'voice-recording-ui';",
        "recordingUI.innerHTML = `",
        "<div class=\"recording-indicator\">",
        "<div class=\"recording-animation\">🎤</div>",
        "<div class=\"recording-text\">正在录音...</div>",
        "<div class=\"recording-timer\">00:00</div>"
      ]
    },
    {
      "id": "8f2d9ba9",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "603-609",
          "preview": "showLocationConfirmDialog(latitude, longitude, address) { | const modal = document.createElement('div'); | modal.className = 'location-modal';"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "603-609",
          "preview": "showLocationConfirmDialog(latitude, longitude, address) { | const modal = document.createElement('div'); | modal.className = 'location-modal';"
        }
      ],
      "codePreview": [
        "showLocationConfirmDialog(latitude, longitude, address) {",
        "const modal = document.createElement('div');",
        "modal.className = 'location-modal';",
        "modal.innerHTML = `",
        "<div class=\"location-container\">",
        "<div class=\"location-header\">",
        "<h3>分享位置</h3>"
      ]
    },
    {
      "id": "64dff928",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "610-616",
          "preview": "</div> | <div class=\"location-content\"> | <div class=\"location-icon\">📍</div>"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "610-616",
          "preview": "</div> | <div class=\"location-content\"> | <div class=\"location-icon\">📍</div>"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"location-content\">",
        "<div class=\"location-icon\">📍</div>",
        "<div class=\"location-info\">",
        "<div class=\"location-address\">${address}</div>",
        "<div class=\"location-coords\">坐标: ${latitude.toFixed(4)}, ${longitude.toFixed(4)}</div>",
        "</div>"
      ]
    },
    {
      "id": "d86079d4",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "617-623",
          "preview": "</div> | <div class=\"location-controls\"> | <button class=\"location-btn cancel-btn\" onclick=\"this.closest('.location-modal').remove()\">取消</button>"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "617-623",
          "preview": "</div> | <div class=\"location-controls\"> | <button class=\"location-btn cancel-btn\" onclick=\"this.closest('.location-modal').remove()\">取消</button>"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"location-controls\">",
        "<button class=\"location-btn cancel-btn\" onclick=\"this.closest('.location-modal').remove()\">取消</button>",
        "<button class=\"location-btn send-btn\" onclick=\"enhancedMobileService.sendLocation(${latitude}, ${longitude}, '${address}')\">发送位置</button>",
        "</div>",
        "</div>",
        "`;"
      ]
    },
    {
      "id": "4d8ede04",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "631-637",
          "preview": "async sendLocation(latitude, longitude, address) { | const locationData = { | type: 'location',"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "631-637",
          "preview": "async sendLocation(latitude, longitude, address) { | const locationData = { | type: 'location',"
        }
      ],
      "codePreview": [
        "async sendLocation(latitude, longitude, address) {",
        "const locationData = {",
        "type: 'location',",
        "latitude: latitude,",
        "longitude: longitude,",
        "address: address,",
        "timestamp: Date.now()"
      ]
    },
    {
      "id": "0dfba1ca",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "652-658",
          "preview": "getLocationErrorMessage(error) { | switch (error.code) { | case error.PERMISSION_DENIED:"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "652-658",
          "preview": "getLocationErrorMessage(error) { | switch (error.code) { | case error.PERMISSION_DENIED:"
        }
      ],
      "codePreview": [
        "getLocationErrorMessage(error) {",
        "switch (error.code) {",
        "case error.PERMISSION_DENIED:",
        "return '用户拒绝了地理定位请求';",
        "case error.POSITION_UNAVAILABLE:",
        "return '位置信息不可用';",
        "case error.TIMEOUT:"
      ]
    },
    {
      "id": "0d86bc52",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "778-784",
          "preview": "this.handleLongPress(e); | }, 500); | });"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "778-784",
          "preview": "this.handleLongPress(e); | }, 500); | });"
        }
      ],
      "codePreview": [
        "this.handleLongPress(e);",
        "}, 500);",
        "});",
        "document.addEventListener('touchend', () => {",
        "clearTimeout(pressTimer);",
        "});"
      ]
    },
    {
      "id": "fe31e0b2",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "848-854",
          "preview": "window.addEventListener('online', () => { | this.handleNetworkOnline(); | });"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "848-854",
          "preview": "window.addEventListener('online', () => { | this.handleNetworkOnline(); | });"
        }
      ],
      "codePreview": [
        "window.addEventListener('online', () => {",
        "this.handleNetworkOnline();",
        "});",
        "window.addEventListener('offline', () => {",
        "this.handleNetworkOffline();",
        "});"
      ]
    },
    {
      "id": "84865a59",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "890-896",
          "preview": "let indicator = document.getElementById('offlineIndicator'); | if (!indicator) { | indicator = document.createElement('div');"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "890-896",
          "preview": "let indicator = document.getElementById('offlineIndicator'); | if (!indicator) { | indicator = document.createElement('div');"
        }
      ],
      "codePreview": [
        "let indicator = document.getElementById('offlineIndicator');",
        "if (!indicator) {",
        "indicator = document.createElement('div');",
        "indicator.id = 'offlineIndicator';",
        "indicator.className = 'offline-indicator';",
        "indicator.textContent = '📶 网络已断开';",
        "document.body.appendChild(indicator);"
      ]
    },
    {
      "id": "0c81e7ff",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "918-924",
          "preview": "loader.id = 'loadingIndicator'; | loader.className = 'loading-indicator'; | loader.innerHTML = `"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "918-924",
          "preview": "loader.id = 'loadingIndicator'; | loader.className = 'loading-indicator'; | loader.innerHTML = `"
        }
      ],
      "codePreview": [
        "loader.id = 'loadingIndicator';",
        "loader.className = 'loading-indicator';",
        "loader.innerHTML = `",
        "<div class=\"loading-spinner\"></div>",
        "<div class=\"loading-text\">${message}</div>",
        "`;",
        "document.body.appendChild(loader);"
      ]
    },
    {
      "id": "054dc43e",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "15-21",
          "preview": "this.shops = []; | this.conversations = {};  // 按店铺ID分组的对话 | this.currentShop = null;"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "15-21",
          "preview": "this.shops = []; | this.conversations = {};  // 按店铺ID分组的对话 | this.currentShop = null;"
        }
      ],
      "codePreview": [
        "this.shops = [];",
        "this.conversations = {};",
        "this.currentShop = null;",
        "this.currentConversation = null;",
        "this.unreadCounts = {};",
        "this.totalUnreadCount = 0;",
        "this.websocket = null;"
      ]
    },
    {
      "id": "97e1f8ff",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "148-154",
          "preview": "handleWebSocketMessage(data) { | switch (data.type) { | case 'new_message':"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "148-154",
          "preview": "handleWebSocketMessage(data) { | switch (data.type) { | case 'new_message':"
        }
      ],
      "codePreview": [
        "handleWebSocketMessage(data) {",
        "switch (data.type) {",
        "case 'new_message':",
        "this.handleNewMessage(data);",
        "break;",
        "case 'message_read':",
        "this.handleMessageRead(data);"
      ]
    },
    {
      "id": "353aa056",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "155-161",
          "preview": "break; | case 'typing': | this.handleTyping(data);"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "155-161",
          "preview": "break; | case 'typing': | this.handleTyping(data);"
        }
      ],
      "codePreview": [
        "break;",
        "case 'typing':",
        "this.handleTyping(data);",
        "break;",
        "case 'user_online':",
        "this.handleUserOnline(data);",
        "break;"
      ]
    },
    {
      "id": "102c4d85",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "274-280",
          "preview": "<button class=\"back-btn\" id=\"backBtn\" style=\"display: none;\" onclick=\"mobileCustomerService.goBack()\"> | ← 返回 | </button>"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "274-280",
          "preview": "<button class=\"back-btn\" id=\"backBtn\" style=\"display: none;\" onclick=\"mobileCustomerService.goBack()\"> | ← 返回 | </button>"
        }
      ],
      "codePreview": [
        "<button class=\"back-btn\" id=\"backBtn\" style=\"display: none;\" onclick=\"mobileCustomerService.goBack()\">",
        "← 返回",
        "</button>",
        "<div class=\"page-title\" id=\"pageTitle\">消息中心</div>",
        "<button class=\"refresh-btn\" id=\"refreshBtn\" onclick=\"mobileCustomerService.refresh()\">",
        "🔄",
        "</button>"
      ]
    },
    {
      "id": "446000b2",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "288-294",
          "preview": "<!-- 聊天输入框（仅在聊天页面显示） --> | <div class=\"chat-input-container\" id=\"chatInputContainer\" style=\"display: none;\"> | <div class=\"chat-input\">"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "288-294",
          "preview": "<!-- 聊天输入框（仅在聊天页面显示） --> | <div class=\"chat-input-container\" id=\"chatInputContainer\" style=\"display: none;\"> | <div class=\"chat-input\">"
        }
      ],
      "codePreview": [
        "<!-- 聊天输入框（仅在聊天页面显示） -->",
        "<div class=\"chat-input-container\" id=\"chatInputContainer\" style=\"display: none;\">",
        "<div class=\"chat-input\">",
        "<input type=\"text\" id=\"messageInput\" placeholder=\"输入消息...\" />",
        "<button id=\"sendBtn\" onclick=\"mobileCustomerService.sendMessage()\">发送</button>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "cc60c3b5",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "316-322",
          "preview": "height: 50px; | background: #fff; | border-bottom: 1px solid #e9ecef;"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "316-322",
          "preview": "height: 50px; | background: #fff; | border-bottom: 1px solid #e9ecef;"
        }
      ],
      "codePreview": [
        "height: 50px;",
        "background: #fff;",
        "border-bottom: 1px solid #e9ecef;",
        "display: flex;",
        "align-items: center;",
        "padding: 0 15px;",
        "position: relative;"
      ]
    },
    {
      "id": "e59af990",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "400-406",
          "preview": "width: 50px; | height: 50px; | border-radius: 25px;"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "400-406",
          "preview": "width: 50px; | height: 50px; | border-radius: 25px;"
        }
      ],
      "codePreview": [
        "width: 50px;",
        "height: 50px;",
        "border-radius: 25px;",
        "background: linear-gradient(135deg, #FF6B6B 0%, #4ECDC4 100%);",
        "display: flex;",
        "align-items: center;",
        "justify-content: center;"
      ]
    },
    {
      "id": "6c826def",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "414-420",
          "preview": "top: -5px; | right: -5px; | background: #FF3B30;"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "414-420",
          "preview": "top: -5px; | right: -5px; | background: #FF3B30;"
        }
      ],
      "codePreview": [
        "top: -5px;",
        "right: -5px;",
        "background: #FF3B30;",
        "color: white;",
        "border-radius: 12px;",
        "min-width: 24px;",
        "height: 24px;"
      ]
    },
    {
      "id": "213cfe98",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "435-441",
          "preview": "font-weight: 600; | color: #333; | margin-bottom: 5px;"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "435-441",
          "preview": "font-weight: 600; | color: #333; | margin-bottom: 5px;"
        }
      ],
      "codePreview": [
        "font-weight: 600;",
        "color: #333;",
        "margin-bottom: 5px;",
        "overflow: hidden;",
        "text-overflow: ellipsis;",
        "white-space: nowrap;",
        "}"
      ]
    },
    {
      "id": "2b4f364e",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "449-455",
          "preview": ".last-message { | font-size: 14px; | color: #999;"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "449-455",
          "preview": ".last-message { | font-size: 14px; | color: #999;"
        }
      ],
      "codePreview": [
        ".last-message {",
        "font-size: 14px;",
        "color: #999;",
        "overflow: hidden;",
        "text-overflow: ellipsis;",
        "white-space: nowrap;",
        "}"
      ]
    },
    {
      "id": "c2b5868d",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "491-497",
          "preview": "background: linear-gradient(135deg, #4ECDC4 0%, #44A08D 100%); | display: flex; | align-items: center;"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "491-497",
          "preview": "background: linear-gradient(135deg, #4ECDC4 0%, #44A08D 100%); | display: flex; | align-items: center;"
        }
      ],
      "codePreview": [
        "background: linear-gradient(135deg, #4ECDC4 0%, #44A08D 100%);",
        "display: flex;",
        "align-items: center;",
        "justify-content: center;",
        "color: white;",
        "font-weight: bold;",
        "margin-right: 15px;"
      ]
    },
    {
      "id": "bb5c663b",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "603-609",
          "preview": "background: #007AFF; | color: white; | border: none;"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "603-609",
          "preview": "background: #007AFF; | color: white; | border: none;"
        }
      ],
      "codePreview": [
        "background: #007AFF;",
        "color: white;",
        "border: none;",
        "border-radius: 25px;",
        "padding: 12px 20px;",
        "font-size: 16px;",
        "cursor: pointer;"
      ]
    },
    {
      "id": "13673eb6",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "673-679",
          "preview": "const content = document.getElementById('pageContent'); | if (!content) return;"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "673-679",
          "preview": "const content = document.getElementById('pageContent'); | if (!content) return;"
        }
      ],
      "codePreview": [
        "const content = document.getElementById('pageContent');",
        "if (!content) return;",
        "const html = `",
        "<div class=\"message-overview\">",
        "<div class=\"overview-stats\">",
        "<div class=\"total-unread\">${this.totalUnreadCount}</div>"
      ]
    },
    {
      "id": "ec6cb24d",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "701-707",
          "preview": "return ` | <div class=\"shop-item\" onclick=\"mobileCustomerService.showShopConversations('${shop.id}')\">"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "701-707",
          "preview": "return ` | <div class=\"shop-item\" onclick=\"mobileCustomerService.showShopConversations('${shop.id}')\">"
        }
      ],
      "codePreview": [
        "return `",
        "<div class=\"shop-item\" onclick=\"mobileCustomerService.showShopConversations('${shop.id}')\">",
        "<div class=\"shop-avatar\">",
        "<div class=\"avatar-circle\">${shop.name.charAt(0).toUpperCase()}</div>",
        "${unreadCount > 0 ? `<div class=\"unread-badge\">${unreadCount}</div>` : ''}",
        "</div>"
      ]
    },
    {
      "id": "426a1dbe",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "708-714",
          "preview": "<div class=\"shop-info\"> | <div class=\"shop-name\">${shop.name}</div> | <div class=\"shop-domain\">${shop.domain}</div>"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "708-714",
          "preview": "<div class=\"shop-info\"> | <div class=\"shop-name\">${shop.name}</div> | <div class=\"shop-domain\">${shop.domain}</div>"
        }
      ],
      "codePreview": [
        "<div class=\"shop-info\">",
        "<div class=\"shop-name\">${shop.name}</div>",
        "<div class=\"shop-domain\">${shop.domain}</div>",
        "<div class=\"last-message\">${lastMessage?.content || '暂无消息'}</div>",
        "</div>",
        "<div class=\"shop-meta\">",
        "<div class=\"timestamp\">${lastMessage ? this.formatTime(lastMessage.timestamp) : ''}</div>"
      ]
    },
    {
      "id": "44400c51",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "757-763",
          "preview": "const sessionId = localStorage.getItem('sessionId'); | const response = await fetch(`/api/shops/${shopId}/conversations`, { | headers: { 'X-Session-Id': sessionId }"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "757-763",
          "preview": "const sessionId = localStorage.getItem('sessionId'); | const response = await fetch(`/api/shops/${shopId}/conversations`, { | headers: { 'X-Session-Id': sessionId }"
        }
      ],
      "codePreview": [
        "const sessionId = localStorage.getItem('sessionId');",
        "const response = await fetch(`/api/shops/${shopId}/conversations`, {",
        "headers: { 'X-Session-Id': sessionId }",
        "});",
        "if (response.ok) {",
        "const data = await response.json();"
      ]
    },
    {
      "id": "614be51d",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "806-812",
          "preview": "<div class=\"conversation-item\" onclick=\"mobileCustomerService.showChat('${conversation.user_id}')\"> | <div class=\"user-avatar\">${(conversation.user_name || 'U').charAt(0).toUpperCase()}</div> | <div class=\"conversation-info\">"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "806-812",
          "preview": "<div class=\"conversation-item\" onclick=\"mobileCustomerService.showChat('${conversation.user_id}')\"> | <div class=\"user-avatar\">${(conversation.user_name || 'U').charAt(0).toUpperCase()}</div> | <div class=\"conversation-info\">"
        }
      ],
      "codePreview": [
        "<div class=\"conversation-item\" onclick=\"mobileCustomerService.showChat('${conversation.user_id}')\">",
        "<div class=\"user-avatar\">${(conversation.user_name || 'U').charAt(0).toUpperCase()}</div>",
        "<div class=\"conversation-info\">",
        "<div class=\"conversation-meta\">",
        "<div class=\"user-name\">${conversation.user_name || '匿名用户'}</div>",
        "<div class=\"message-time\">${this.formatTime(conversation.last_message_time)}</div>",
        "</div>"
      ]
    },
    {
      "id": "0400824b",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "932-938",
          "preview": "method: 'POST', | headers: { | 'Content-Type': 'application/json',"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "932-938",
          "preview": "method: 'POST', | headers: { | 'Content-Type': 'application/json',"
        }
      ],
      "codePreview": [
        "method: 'POST',",
        "headers: {",
        "'Content-Type': 'application/json',",
        "'X-Session-Id': sessionId",
        "},",
        "body: JSON.stringify({",
        "shopId: this.currentShop.id,"
      ]
    },
    {
      "id": "2d377d0f",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "1023-1029",
          "preview": "switch (previousView) { | case 'overview':"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "1023-1029",
          "preview": "switch (previousView) { | case 'overview':"
        }
      ],
      "codePreview": [
        "switch (previousView) {",
        "case 'overview':",
        "this.showMessageOverview();",
        "break;",
        "case 'shop':",
        "this.renderShopConversations();"
      ]
    },
    {
      "id": "b411f984",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "1044-1050",
          "preview": "switch (this.currentView) { | case 'overview': | await this.loadUnreadCounts();"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "1044-1050",
          "preview": "switch (this.currentView) { | case 'overview': | await this.loadUnreadCounts();"
        }
      ],
      "codePreview": [
        "switch (this.currentView) {",
        "case 'overview':",
        "await this.loadUnreadCounts();",
        "this.showMessageOverview();",
        "break;",
        "case 'shop':",
        "if (this.currentShop) {"
      ]
    },
    {
      "id": "b775173c",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "1051-1057",
          "preview": "await this.loadShopConversations(this.currentShop.id); | this.renderShopConversations(); | }"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "1051-1057",
          "preview": "await this.loadShopConversations(this.currentShop.id); | this.renderShopConversations(); | }"
        }
      ],
      "codePreview": [
        "await this.loadShopConversations(this.currentShop.id);",
        "this.renderShopConversations();",
        "}",
        "break;",
        "case 'chat':",
        "if (this.currentShop && this.currentConversation) {",
        "await this.loadChatMessages(this.currentShop.id, this.currentConversation.userId);"
      ]
    },
    {
      "id": "865b0e3c",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "1107-1113",
          "preview": "const messageInput = document.getElementById('messageInput'); | if (messageInput) { | messageInput.addEventListener('keypress', (e) => {"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "1107-1113",
          "preview": "const messageInput = document.getElementById('messageInput'); | if (messageInput) { | messageInput.addEventListener('keypress', (e) => {"
        }
      ],
      "codePreview": [
        "const messageInput = document.getElementById('messageInput');",
        "if (messageInput) {",
        "messageInput.addEventListener('keypress', (e) => {",
        "if (e.key === 'Enter') {",
        "this.sendMessage();",
        "}",
        "});"
      ]
    },
    {
      "id": "4abfc80c",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "1170-1176",
          "preview": "renderEmptyState(icon, message, description) { | return ` | <div class=\"empty-state\">"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "1170-1176",
          "preview": "renderEmptyState(icon, message, description) { | return ` | <div class=\"empty-state\">"
        }
      ],
      "codePreview": [
        "renderEmptyState(icon, message, description) {",
        "return `",
        "<div class=\"empty-state\">",
        "<div class=\"empty-icon\">${icon}</div>",
        "<div class=\"empty-message\">${message}</div>",
        "<div class=\"empty-description\">${description}</div>",
        "</div>"
      ]
    },
    {
      "id": "324e4ae7",
      "size": 7,
      "occurrences": 2,
      "duplicateLines": 7,
      "locations": [
        {
          "file": "static\\tests\\unit\\api-client.test.js",
          "lines": "225-231",
          "preview": "window.fetch = jest.fn().mockResolvedValue({ | ok: true, | headers: {"
        },
        {
          "file": "static\\tests\\unit\\api-client.test.js",
          "lines": "428-434",
          "preview": "window.fetch = jest.fn().mockResolvedValue({ | ok: true, | headers: {"
        }
      ],
      "codePreview": [
        "window.fetch = jest.fn().mockResolvedValue({",
        "ok: true,",
        "headers: {",
        "get: jest.fn().mockReturnValue('application/json')",
        "},",
        "json: jest.fn().mockResolvedValue({})",
        "});"
      ]
    },
    {
      "id": "4a99e06d",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "analyze-code-duplication-improved.js",
          "lines": "16-20",
          "preview": "this.statistics = { | totalFiles: 0, | totalLines: 0,"
        },
        {
          "file": "analyze-code-duplication.js",
          "lines": "16-20",
          "preview": "this.statistics = { | totalFiles: 0, | totalLines: 0,"
        }
      ],
      "codePreview": [
        "this.statistics = {",
        "totalFiles: 0,",
        "totalLines: 0,",
        "duplicateLines: 0,",
        "duplicateBlocks: 0,"
      ]
    },
    {
      "id": "8e2c2f72",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "analyze-code-duplication-improved.js",
          "lines": "46-50",
          "preview": "'.csv', | '.xml', | '.html',"
        },
        {
          "file": "analyze-code-duplication.js",
          "lines": "46-50",
          "preview": "'.csv', | '.xml', | '.html',"
        }
      ],
      "codePreview": [
        "'.csv',",
        "'.xml',",
        "'.html',",
        "'.css'",
        "];"
      ]
    },
    {
      "id": "6d7c0191",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "analyze-code-duplication-improved.js",
          "lines": "336-340",
          "preview": "*/ | generateReport() { | const report = {"
        },
        {
          "file": "analyze-code-duplication.js",
          "lines": "266-270",
          "preview": "*/ | generateReport() { | const report = {"
        }
      ],
      "codePreview": [
        "generateReport() {",
        "const report = {",
        "metadata: {",
        "projectPath: this.projectRoot,"
      ]
    },
    {
      "id": "04effb93",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "analyze-code-duplication-improved.js",
          "lines": "431-435",
          "preview": "for (const [, blockData] of this.duplicateBlocks) { | const duplicateLines = blockData.size * (blockData.files.length - 1); | if (duplicateLines > maxDuplicateLines) {"
        },
        {
          "file": "analyze-code-duplication.js",
          "lines": "356-360",
          "preview": "for (const [, blockData] of this.duplicateBlocks) { | const duplicateLines = blockData.size * (blockData.files.length - 1); | if (duplicateLines > maxDuplicateLines) {"
        }
      ],
      "codePreview": [
        "for (const [, blockData] of this.duplicateBlocks) {",
        "const duplicateLines = blockData.size * (blockData.files.length - 1);",
        "if (duplicateLines > maxDuplicateLines) {",
        "maxDuplicateLines = duplicateLines;",
        "}"
      ]
    },
    {
      "id": "1db72da8",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "analyze-code-duplication-improved.js",
          "lines": "446-450",
          "preview": "if (this.statistics.duplicationRate < 10) { | recommendations.push({"
        },
        {
          "file": "analyze-code-duplication.js",
          "lines": "371-375",
          "preview": "if (this.statistics.duplicationRate < 10) { | recommendations.push({"
        }
      ],
      "codePreview": [
        "if (this.statistics.duplicationRate < 10) {",
        "recommendations.push({",
        "priority: 'INFO',",
        "category: 'Phase 7 Success',"
      ]
    },
    {
      "id": "b8608967",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "analyze-code-duplication-improved.js",
          "lines": "461-465",
          "preview": "*/ | analyzeArchitecture() { | const analysis = {"
        },
        {
          "file": "analyze-code-duplication.js",
          "lines": "386-390",
          "preview": "*/ | analyzeArchitecture() { | const analysis = {"
        }
      ],
      "codePreview": [
        "analyzeArchitecture() {",
        "const analysis = {",
        "serviceLayerFiles: [],",
        "controllerFiles: [],"
      ]
    },
    {
      "id": "536c133e",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "analyze-file-structure.js",
          "lines": "151-155",
          "preview": "for (const item of items) { | const fullPath = path.join(dirPath, item);"
        },
        {
          "file": "reorganize-js-modules.js",
          "lines": "101-105",
          "preview": "for (const item of items) { | const fullPath = path.join(dirPath, item);"
        }
      ],
      "codePreview": [
        "for (const item of items) {",
        "const fullPath = path.join(dirPath, item);",
        "const relativeFilePath = path.join(relativePath, item);",
        "const stat = fs.statSync(fullPath);"
      ]
    },
    {
      "id": "e4a29e96",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "auth-routes.js",
          "lines": "811-815",
          "preview": "for (const shop of userShops) { | if (conversationId.startsWith(shop.id + '_')) { | shopId = shop.id;"
        },
        {
          "file": "auth-routes.js",
          "lines": "1136-1140",
          "preview": "for (const shop of userShops) { | if (conversationId.startsWith(shop.id + '_')) { | shopId = shop.id;"
        }
      ],
      "codePreview": [
        "for (const shop of userShops) {",
        "if (conversationId.startsWith(shop.id + '_')) {",
        "shopId = shop.id;",
        "userId = conversationId.substring(shop.id.length + 1);",
        "break;"
      ]
    },
    {
      "id": "6cb47ca0",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "scripts\\smart-repair-images.js",
          "lines": "161-165",
          "preview": "const ext = path.extname(filename).toLowerCase(); | const mimeTypes = { | '.jpg': 'image/jpeg',"
        },
        {
          "file": "src\\utils\\EnhancedFileManager.js",
          "lines": "321-325",
          "preview": "const ext = path.extname(filename).toLowerCase(); | const mimeTypes = { | '.jpg': 'image/jpeg',"
        }
      ],
      "codePreview": [
        "const ext = path.extname(filename).toLowerCase();",
        "const mimeTypes = {",
        "'.jpg': 'image/jpeg',",
        "'.jpeg': 'image/jpeg',",
        "'.png': 'image/png',"
      ]
    },
    {
      "id": "f3ca0aa5",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "server-v2.js",
          "lines": "171-175",
          "preview": "app.use((req, res, next) => { | res.header('Access-Control-Allow-Origin', '*'); | res.header('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE, OPTIONS');"
        },
        {
          "file": "server.js",
          "lines": "86-90",
          "preview": "app.use((req, res, next) => { | res.header('Access-Control-Allow-Origin', '*'); | res.header('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE, OPTIONS');"
        }
      ],
      "codePreview": [
        "app.use((req, res, next) => {",
        "res.header('Access-Control-Allow-Origin', '*');",
        "res.header('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE, OPTIONS');",
        "res.header('Access-Control-Allow-Headers', 'Origin, X-Requested-With, Content-Type, Accept, X-Session-Id, X-Shop-Key, X-Shop-Id, X-User-Id');",
        "if (req.method === 'OPTIONS') {"
      ]
    },
    {
      "id": "b957c826",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "server-v2.js",
          "lines": "176-180",
          "preview": "res.status(200).end(); | return; | }"
        },
        {
          "file": "server.js",
          "lines": "91-95",
          "preview": "res.status(200).end(); | return; | }"
        }
      ],
      "codePreview": [
        "res.status(200).end();",
        "return;",
        "}",
        "next();",
        "});"
      ]
    },
    {
      "id": "9aeca119",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "server-v2.js",
          "lines": "231-235",
          "preview": "res.status(500).json({ | success: false, | error: error.message"
        },
        {
          "file": "src\\websocket\\WebSocketRouter.js",
          "lines": "126-130",
          "preview": "res.status(500).json({ | success: false, | error: error.message"
        }
      ],
      "codePreview": [
        "res.status(500).json({",
        "success: false,",
        "error: error.message",
        "});",
        "}"
      ]
    },
    {
      "id": "9fd1cd6a",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "src\\analytics-dashboard-manager.js",
          "lines": "251-255",
          "preview": "// 缓存结果 | this.cache.set(cacheKey, { | data: result,"
        },
        {
          "file": "src\\modules\\EnhancedAnalyticsDashboard.js",
          "lines": "1236-1240",
          "preview": "// 缓存结果 | this.cache.set(cacheKey, { | data: result,"
        }
      ],
      "codePreview": [
        "this.cache.set(cacheKey, {",
        "data: result,",
        "timestamp: Date.now()",
        "});"
      ]
    },
    {
      "id": "f228f1ad",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "src\\analytics-dashboard-manager.js",
          "lines": "761-765",
          "preview": "switch (timeRange) { | case '1h': | startTime = new Date(now.getTime() - 60 * 60 * 1000);"
        },
        {
          "file": "src\\modules\\EnhancedAnalyticsDashboard.js",
          "lines": "1441-1445",
          "preview": "switch (timeRange) { | case '1h': | startTime = new Date(now.getTime() - 60 * 60 * 1000);"
        }
      ],
      "codePreview": [
        "switch (timeRange) {",
        "case '1h':",
        "startTime = new Date(now.getTime() - 60 * 60 * 1000);",
        "break;",
        "case '24h':"
      ]
    },
    {
      "id": "06675451",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "src\\analytics-dashboard-manager.js",
          "lines": "766-770",
          "preview": "startTime = new Date(now.getTime() - 24 * 60 * 60 * 1000); | break; | case '7d':"
        },
        {
          "file": "src\\modules\\EnhancedAnalyticsDashboard.js",
          "lines": "1446-1450",
          "preview": "startTime = new Date(now.getTime() - 24 * 60 * 60 * 1000); | break; | case '7d':"
        }
      ],
      "codePreview": [
        "startTime = new Date(now.getTime() - 24 * 60 * 60 * 1000);",
        "break;",
        "case '7d':",
        "startTime = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);",
        "break;"
      ]
    },
    {
      "id": "5699ceb0",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "src\\client-api\\connection-handler.js",
          "lines": "311-315",
          "preview": "*/ | getClientIp(req) { | return req.ip ||"
        },
        {
          "file": "src\\security\\security-logger.js",
          "lines": "226-230",
          "preview": "*/ | getClientIp(req) { | return req.ip ||"
        }
      ],
      "codePreview": [
        "getClientIp(req) {",
        "return req.ip ||",
        "req.connection?.remoteAddress ||",
        "req.headers['x-forwarded-for']?.split(',')[0]?.trim() ||"
      ]
    },
    {
      "id": "a0e56557",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "src\\client-api\\message-handler-v2.js",
          "lines": "36-40",
          "preview": "message, | shopKey, | apiKey, // 兼容旧版本"
        },
        {
          "file": "src\\client-api\\message-handler.js",
          "lines": "21-25",
          "preview": "message, | shopKey, | apiKey, // 兼容旧版本"
        }
      ],
      "codePreview": [
        "message,",
        "shopKey,",
        "apiKey,",
        "timestamp,",
        "messageType = 'text',"
      ]
    },
    {
      "id": "344d58bd",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "src\\client-api\\message-handler-v2.js",
          "lines": "191-195",
          "preview": "const limit = Math.min(parseInt(req.query.limit) || 50, 100); | if (!userId) {"
        },
        {
          "file": "src\\client-api\\message-handler.js",
          "lines": "121-125",
          "preview": "const limit = Math.min(parseInt(req.query.limit) || 50, 100); | if (!userId) {"
        }
      ],
      "codePreview": [
        "const limit = Math.min(parseInt(req.query.limit) || 50, 100);",
        "if (!userId) {",
        "return res.status(400).json({",
        "success: false,"
      ]
    },
    {
      "id": "64afae12",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "src\\client-api\\message-handler-v2.js",
          "lines": "196-200",
          "preview": "error: { | code: 'MISSING_USER_ID', | message: '缺少用户ID'"
        },
        {
          "file": "src\\client-api\\message-handler.js",
          "lines": "126-130",
          "preview": "error: { | code: 'MISSING_USER_ID', | message: '缺少用户ID'"
        }
      ],
      "codePreview": [
        "error: {",
        "code: 'MISSING_USER_ID',",
        "message: '缺少用户ID'",
        "}",
        "});"
      ]
    },
    {
      "id": "1318d2f5",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "src\\client-api\\message-handler-v2.js",
          "lines": "226-230",
          "preview": "if (!shop) { | return res.status(401).json({"
        },
        {
          "file": "src\\client-api\\message-handler.js",
          "lines": "146-150",
          "preview": "if (!shop) { | return res.status(401).json({"
        }
      ],
      "codePreview": [
        "if (!shop) {",
        "return res.status(401).json({",
        "success: false,",
        "error: {"
      ]
    },
    {
      "id": "8561ec0c",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "src\\client-api\\message-handler-v2.js",
          "lines": "296-300",
          "preview": "res.json({ | success: true,"
        },
        {
          "file": "src\\client-api\\message-handler.js",
          "lines": "291-295",
          "preview": "res.json({ | success: true,"
        }
      ],
      "codePreview": [
        "res.json({",
        "success: true,",
        "data: {",
        "messages: formattedMessages,"
      ]
    },
    {
      "id": "6e4c7e61",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "src\\client-api\\message-handler.js",
          "lines": "186-190",
          "preview": "const formattedMessages = messages.map(msg => ({ | id: msg.id, | type: msg.sender_type === 'user' ? 'user_message' : 'staff_message',"
        },
        {
          "file": "src\\client-api\\message-handler.js",
          "lines": "276-280",
          "preview": "const formattedMessages = messages.map(msg => ({ | id: msg.id, | type: msg.sender_type === 'user' ? 'user_message' : 'staff_message',"
        }
      ],
      "codePreview": [
        "const formattedMessages = messages.map(msg => ({",
        "id: msg.id,",
        "type: msg.sender_type === 'user' ? 'user_message' : 'staff_message',",
        "message: msg.message,",
        "sender: {"
      ]
    },
    {
      "id": "ed1547a2",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "src\\client-api\\message-handler.js",
          "lines": "191-195",
          "preview": "type: msg.sender_type, | id: msg.sender_id, | name: msg.sender_name"
        },
        {
          "file": "src\\client-api\\message-handler.js",
          "lines": "281-285",
          "preview": "type: msg.sender_type, | id: msg.sender_id, | name: msg.sender_name"
        }
      ],
      "codePreview": [
        "type: msg.sender_type,",
        "id: msg.sender_id,",
        "name: msg.sender_name",
        "},",
        "timestamp: msg.created_at,"
      ]
    },
    {
      "id": "1980925e",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "src\\client-api\\message-handler.js",
          "lines": "241-245",
          "preview": "if (!req.shop) { | return res.status(401).json({"
        },
        {
          "file": "src\\client-api\\message-handler.js",
          "lines": "321-325",
          "preview": "if (!req.shop) { | return res.status(401).json({"
        }
      ],
      "codePreview": [
        "if (!req.shop) {",
        "return res.status(401).json({",
        "success: false,",
        "error: {"
      ]
    },
    {
      "id": "f9dc854d",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "src\\controllers\\MessageController.js",
          "lines": "291-295",
          "preview": "if (!messageId || !userId) { | return res.status(400).json({ | success: false,"
        },
        {
          "file": "src\\controllers\\MessageController.js",
          "lines": "331-335",
          "preview": "if (!messageId || !userId) { | return res.status(400).json({ | success: false,"
        }
      ],
      "codePreview": [
        "if (!messageId || !userId) {",
        "return res.status(400).json({",
        "success: false,",
        "error: '缺少必需参数: messageId, userId'",
        "});"
      ]
    },
    {
      "id": "e45dec8f",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "src\\database\\shop-repository.js",
          "lines": "136-140",
          "preview": "if (shop.settings) { | shop.settings = JSON.parse(shop.settings); | }"
        },
        {
          "file": "src\\database\\shop-repository.js",
          "lines": "151-155",
          "preview": "if (shop.settings) { | shop.settings = JSON.parse(shop.settings); | }"
        }
      ],
      "codePreview": [
        "if (shop.settings) {",
        "shop.settings = JSON.parse(shop.settings);",
        "}",
        "return shop;",
        "});"
      ]
    },
    {
      "id": "4555125d",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "src\\modules\\ComprehensiveSecurityModule.js",
          "lines": "236-240",
          "preview": "id TEXT PRIMARY KEY, | shop_id TEXT NOT NULL, | policy_name TEXT NOT NULL,"
        },
        {
          "file": "src\\schemas\\SecurityModuleSchemaConfig.js",
          "lines": "126-130",
          "preview": "id TEXT PRIMARY KEY, | shop_id TEXT NOT NULL, | policy_name TEXT NOT NULL,"
        }
      ],
      "codePreview": [
        "id TEXT PRIMARY KEY,",
        "shop_id TEXT NOT NULL,",
        "policy_name TEXT NOT NULL,",
        "policy_type TEXT NOT NULL,",
        "policy_config TEXT NOT NULL,"
      ]
    },
    {
      "id": "c2862909",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "src\\modules\\ComprehensiveSecurityModule.js",
          "lines": "241-245",
          "preview": "is_active INTEGER DEFAULT 1, | priority INTEGER DEFAULT 0, | created_by TEXT NOT NULL,"
        },
        {
          "file": "src\\schemas\\SecurityModuleSchemaConfig.js",
          "lines": "131-135",
          "preview": "is_active INTEGER DEFAULT 1, | priority INTEGER DEFAULT 0, | created_by TEXT NOT NULL,"
        }
      ],
      "codePreview": [
        "is_active INTEGER DEFAULT 1,",
        "priority INTEGER DEFAULT 0,",
        "created_by TEXT NOT NULL,",
        "created_at TEXT NOT NULL,",
        "updated_at TEXT NOT NULL,"
      ]
    },
    {
      "id": "cae7614c",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "src\\modules\\PaymentActivationSystem.js",
          "lines": "116-120",
          "preview": "</div> | </div> | </div>"
        },
        {
          "file": "static\\js\\core\\IntegrationManager.js",
          "lines": "96-100",
          "preview": "</div> | </div> | </div>"
        }
      ],
      "codePreview": [
        "</div>",
        "</div>",
        "</div>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "9798a740",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "src\\modules\\PaymentActivationSystem.js",
          "lines": "256-260",
          "preview": "method: 'POST', | headers: { | 'Content-Type': 'application/json',"
        },
        {
          "file": "static\\assets\\js\\modules\\message\\mobile-manager.js",
          "lines": "931-935",
          "preview": "method: 'POST', | headers: { | 'Content-Type': 'application/json',"
        }
      ],
      "codePreview": [
        "method: 'POST',",
        "headers: {",
        "'Content-Type': 'application/json',",
        "'X-Session-Id': sessionId",
        "},"
      ]
    },
    {
      "id": "1a25afea",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "src\\schemas\\AIAssistantSchemaConfig.js",
          "lines": "31-35",
          "preview": "created_at DATETIME DEFAULT CURRENT_TIMESTAMP, | updated_at DATETIME DEFAULT CURRENT_TIMESTAMP,"
        },
        {
          "file": "src\\schemas\\AIAssistantSchemaConfig.js",
          "lines": "96-100",
          "preview": "created_at DATETIME DEFAULT CURRENT_TIMESTAMP, | updated_at DATETIME DEFAULT CURRENT_TIMESTAMP,"
        }
      ],
      "codePreview": [
        "created_at DATETIME DEFAULT CURRENT_TIMESTAMP,",
        "updated_at DATETIME DEFAULT CURRENT_TIMESTAMP,",
        "FOREIGN KEY (shop_id) REFERENCES shops(id) ON DELETE CASCADE",
        ")`,"
      ]
    },
    {
      "id": "f2bc58e2",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "src\\search-history-manager.js",
          "lines": "561-565",
          "preview": "// 获取所有消息 | const messages = await this.db.all(` | SELECT * FROM messages"
        },
        {
          "file": "src\\search-history-manager.js",
          "lines": "636-640",
          "preview": "const messages = await this.db.all(` | SELECT * FROM messages"
        }
      ],
      "codePreview": [
        "const messages = await this.db.all(`",
        "SELECT * FROM messages",
        "WHERE conversation_id = ?",
        "ORDER BY created_at ASC"
      ]
    },
    {
      "id": "53ba46e9",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "src\\security\\domain-validator.js",
          "lines": "16-20",
          "preview": "return domain.toLowerCase() | .replace(/^https?:\\/\\//, '')  // 移除协议 | .replace(/:\\d+$/, '')         // 移除端口"
        },
        {
          "file": "src\\security\\SecurityManager.js",
          "lines": "126-130",
          "preview": "return domain.toLowerCase() | .replace(/^https?:\\/\\//, '')  // 移除协议 | .replace(/:\\d+$/, '')         // 移除端口号"
        }
      ],
      "codePreview": [
        "return domain.toLowerCase()",
        ".replace(/^https?:\\/\\",
        ".replace(/:\\d+$/, '')",
        ".split('/')[0]",
        ".replace(/^www\\./, '');"
      ]
    },
    {
      "id": "ab832496",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "src\\websocket\\WebSocketAPI.js",
          "lines": "81-85",
          "preview": "if (!shopId || !message) { | return res.status(400).json({ | success: false,"
        },
        {
          "file": "src\\websocket\\WebSocketRouter.js",
          "lines": "106-110",
          "preview": "if (!shopId || !message) { | return res.status(400).json({ | success: false,"
        }
      ],
      "codePreview": [
        "if (!shopId || !message) {",
        "return res.status(400).json({",
        "success: false,",
        "error: '缺少必要参数：shopId 和 message'",
        "});"
      ]
    },
    {
      "id": "672b5ceb",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\components\\index.js",
          "lines": "21-25",
          "preview": "Form, | Button, | Navigation,"
        },
        {
          "file": "static\\assets\\js\\components\\index.js",
          "lines": "41-45",
          "preview": "Form, | Button, | Navigation,"
        }
      ],
      "codePreview": [
        "Form,",
        "Button,",
        "Navigation,",
        "Notification",
        "};"
      ]
    },
    {
      "id": "8c270f4d",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "16-20",
          "preview": "class EnhancedFileManagerUI { | constructor(options = {}) {"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "16-20",
          "preview": "class EnhancedFileManagerUI { | constructor(options = {}) {"
        }
      ],
      "codePreview": [
        "class EnhancedFileManagerUI {",
        "constructor(options = {}) {",
        "this.options = {",
        "containerId: 'file-manager-container',"
      ]
    },
    {
      "id": "fc1b56d6",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "31-35",
          "preview": "this.container = null; | this.currentFiles = []; | this.selectedFiles = [];"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "31-35",
          "preview": "this.container = null; | this.currentFiles = []; | this.selectedFiles = [];"
        }
      ],
      "codePreview": [
        "this.container = null;",
        "this.currentFiles = [];",
        "this.selectedFiles = [];",
        "this.currentView = 'grid';",
        "this.currentSort = { field: 'uploadTime', order: 'desc' };"
      ]
    },
    {
      "id": "485e3de9",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "56-60",
          "preview": "this.bindEvents(); | this.loadFiles();"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "56-60",
          "preview": "this.bindEvents(); | this.loadFiles();"
        }
      ],
      "codePreview": [
        "this.bindEvents();",
        "this.loadFiles();",
        "if (this.options.enableDragDrop) {",
        "this.setupDragDrop();"
      ]
    },
    {
      "id": "cd70e7ce",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "71-75",
          "preview": "<div class=\"file-manager-header\"> | <div class=\"file-manager-toolbar\"> | <div class=\"toolbar-left\">"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "71-75",
          "preview": "<div class=\"file-manager-header\"> | <div class=\"file-manager-toolbar\"> | <div class=\"toolbar-left\">"
        }
      ],
      "codePreview": [
        "<div class=\"file-manager-header\">",
        "<div class=\"file-manager-toolbar\">",
        "<div class=\"toolbar-left\">",
        "<button class=\"btn btn-primary\" id=\"upload-btn\">",
        "<i class=\"icon-upload\"></i> 上传文件"
      ]
    },
    {
      "id": "adacc5e4",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "76-80",
          "preview": "</button> | <div class=\"file-actions\"> | <button class=\"btn btn-outline\" id=\"download-btn\" disabled>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "76-80",
          "preview": "</button> | <div class=\"file-actions\"> | <button class=\"btn btn-outline\" id=\"download-btn\" disabled>"
        }
      ],
      "codePreview": [
        "</button>",
        "<div class=\"file-actions\">",
        "<button class=\"btn btn-outline\" id=\"download-btn\" disabled>",
        "<i class=\"icon-download\"></i> 下载",
        "</button>"
      ]
    },
    {
      "id": "9a499491",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "81-85",
          "preview": "<button class=\"btn btn-outline\" id=\"share-btn\" disabled> | <i class=\"icon-share\"></i> 共享 | </button>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "81-85",
          "preview": "<button class=\"btn btn-outline\" id=\"share-btn\" disabled> | <i class=\"icon-share\"></i> 共享 | </button>"
        }
      ],
      "codePreview": [
        "<button class=\"btn btn-outline\" id=\"share-btn\" disabled>",
        "<i class=\"icon-share\"></i> 共享",
        "</button>",
        "<button class=\"btn btn-outline\" id=\"delete-btn\" disabled>",
        "<i class=\"icon-trash\"></i> 删除"
      ]
    },
    {
      "id": "3c3cfe6e",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "86-90",
          "preview": "</button> | </div> | </div>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "86-90",
          "preview": "</button> | </div> | </div>"
        }
      ],
      "codePreview": [
        "</button>",
        "</div>",
        "</div>",
        "<div class=\"toolbar-center\">"
      ]
    },
    {
      "id": "92428cfc",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "91-95",
          "preview": "<div class=\"search-box\"> | <input type=\"text\" id=\"search-input\" placeholder=\"搜索文件...\" /> | <button id=\"search-btn\">"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "91-95",
          "preview": "<div class=\"search-box\"> | <input type=\"text\" id=\"search-input\" placeholder=\"搜索文件...\" /> | <button id=\"search-btn\">"
        }
      ],
      "codePreview": [
        "<div class=\"search-box\">",
        "<input type=\"text\" id=\"search-input\" placeholder=\"搜索文件...\" />",
        "<button id=\"search-btn\">",
        "<i class=\"icon-search\"></i>",
        "</button>"
      ]
    },
    {
      "id": "52b4b7fa",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "96-100",
          "preview": "</div> | </div>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "96-100",
          "preview": "</div> | </div>"
        }
      ],
      "codePreview": [
        "</div>",
        "</div>",
        "<div class=\"toolbar-right\">",
        "<div class=\"view-toggle\">"
      ]
    },
    {
      "id": "fd5228d7",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "101-105",
          "preview": "<button class=\"view-btn active\" data-view=\"grid\"> | <i class=\"icon-grid\"></i> | </button>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "101-105",
          "preview": "<button class=\"view-btn active\" data-view=\"grid\"> | <i class=\"icon-grid\"></i> | </button>"
        }
      ],
      "codePreview": [
        "<button class=\"view-btn active\" data-view=\"grid\">",
        "<i class=\"icon-grid\"></i>",
        "</button>",
        "<button class=\"view-btn\" data-view=\"list\">",
        "<i class=\"icon-list\"></i>"
      ]
    },
    {
      "id": "c518e40a",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "106-110",
          "preview": "</button> | </div>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "106-110",
          "preview": "</button> | </div>"
        }
      ],
      "codePreview": [
        "</button>",
        "</div>",
        "<div class=\"sort-dropdown\">",
        "<select id=\"sort-select\">"
      ]
    },
    {
      "id": "c06d1ee8",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "111-115",
          "preview": "<option value=\"uploadTime-desc\">最新上传</option> | <option value=\"uploadTime-asc\">最早上传</option> | <option value=\"filename-asc\">文件名 A-Z</option>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "111-115",
          "preview": "<option value=\"uploadTime-desc\">最新上传</option> | <option value=\"uploadTime-asc\">最早上传</option> | <option value=\"filename-asc\">文件名 A-Z</option>"
        }
      ],
      "codePreview": [
        "<option value=\"uploadTime-desc\">最新上传</option>",
        "<option value=\"uploadTime-asc\">最早上传</option>",
        "<option value=\"filename-asc\">文件名 A-Z</option>",
        "<option value=\"filename-desc\">文件名 Z-A</option>",
        "<option value=\"fileSize-desc\">大小(大→小)</option>"
      ]
    },
    {
      "id": "0c8e8441",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "116-120",
          "preview": "<option value=\"fileSize-asc\">大小(小→大)</option> | </select> | </div>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "116-120",
          "preview": "<option value=\"fileSize-asc\">大小(小→大)</option> | </select> | </div>"
        }
      ],
      "codePreview": [
        "<option value=\"fileSize-asc\">大小(小→大)</option>",
        "</select>",
        "</div>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "1c79db1c",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "121-125",
          "preview": "<div class=\"file-manager-filters\"> | <div class=\"filter-tabs\">"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "121-125",
          "preview": "<div class=\"file-manager-filters\"> | <div class=\"filter-tabs\">"
        }
      ],
      "codePreview": [
        "<div class=\"file-manager-filters\">",
        "<div class=\"filter-tabs\">",
        "<button class=\"filter-tab active\" data-category=\"all\">全部</button>",
        "<button class=\"filter-tab\" data-category=\"image\">图片</button>"
      ]
    },
    {
      "id": "8be3a9c5",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "126-130",
          "preview": "<button class=\"filter-tab\" data-category=\"document\">文档</button> | <button class=\"filter-tab\" data-category=\"video\">视频</button> | <button class=\"filter-tab\" data-category=\"audio\">音频</button>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "126-130",
          "preview": "<button class=\"filter-tab\" data-category=\"document\">文档</button> | <button class=\"filter-tab\" data-category=\"video\">视频</button> | <button class=\"filter-tab\" data-category=\"audio\">音频</button>"
        }
      ],
      "codePreview": [
        "<button class=\"filter-tab\" data-category=\"document\">文档</button>",
        "<button class=\"filter-tab\" data-category=\"video\">视频</button>",
        "<button class=\"filter-tab\" data-category=\"audio\">音频</button>",
        "<button class=\"filter-tab\" data-category=\"other\">其他</button>",
        "</div>"
      ]
    },
    {
      "id": "a9b4b3fc",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "131-135",
          "preview": "<div class=\"filter-stats\"> | <span id=\"file-count\">0 个文件</span>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "131-135",
          "preview": "<div class=\"filter-stats\"> | <span id=\"file-count\">0 个文件</span>"
        }
      ],
      "codePreview": [
        "<div class=\"filter-stats\">",
        "<span id=\"file-count\">0 个文件</span>",
        "<span id=\"total-size\">0 MB</span>",
        "</div>"
      ]
    },
    {
      "id": "b2486fcd",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "136-140",
          "preview": "</div> | </div>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "136-140",
          "preview": "</div> | </div>"
        }
      ],
      "codePreview": [
        "</div>",
        "</div>",
        "<div class=\"file-manager-content\">",
        "<div class=\"file-browser\" id=\"file-browser\">"
      ]
    },
    {
      "id": "d0b5d886",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "141-145",
          "preview": "<!-- 文件列表将在这里动态生成 --> | </div>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "141-145",
          "preview": "<!-- 文件列表将在这里动态生成 --> | </div>"
        }
      ],
      "codePreview": [
        "<!-- 文件列表将在这里动态生成 -->",
        "</div>",
        "<div class=\"upload-area\" id=\"upload-area\" style=\"display: none;\">",
        "<div class=\"upload-drop-zone\">"
      ]
    },
    {
      "id": "0150e5f0",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "146-150",
          "preview": "<i class=\"icon-cloud-upload\"></i> | <h3>拖拽文件到这里或点击选择</h3> | <p>支持多文件上传，单个文件最大 100MB</p>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "146-150",
          "preview": "<i class=\"icon-cloud-upload\"></i> | <h3>拖拽文件到这里或点击选择</h3> | <p>支持多文件上传，单个文件最大 100MB</p>"
        }
      ],
      "codePreview": [
        "<i class=\"icon-cloud-upload\"></i>",
        "<h3>拖拽文件到这里或点击选择</h3>",
        "<p>支持多文件上传，单个文件最大 100MB</p>",
        "<input type=\"file\" id=\"file-input\" multiple accept=\"${this.options.allowedTypes.join(',')}\" />",
        "</div>"
      ]
    },
    {
      "id": "56643325",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "151-155",
          "preview": "<div class=\"upload-progress\" id=\"upload-progress\"> | <!-- 上传进度将在这里显示 -->"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "151-155",
          "preview": "<div class=\"upload-progress\" id=\"upload-progress\"> | <!-- 上传进度将在这里显示 -->"
        }
      ],
      "codePreview": [
        "<div class=\"upload-progress\" id=\"upload-progress\">",
        "<!-- 上传进度将在这里显示 -->",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "8cfc3f92",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "156-160",
          "preview": "</div> | <div class=\"file-manager-sidebar\" id=\"file-sidebar\" style=\"display: none;\">"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "156-160",
          "preview": "</div> | <div class=\"file-manager-sidebar\" id=\"file-sidebar\" style=\"display: none;\">"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"file-manager-sidebar\" id=\"file-sidebar\" style=\"display: none;\">",
        "<div class=\"sidebar-header\">",
        "<h3>文件详情</h3>"
      ]
    },
    {
      "id": "bdf190c9",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "161-165",
          "preview": "<button class=\"close-btn\" id=\"close-sidebar\">×</button> | </div>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "161-165",
          "preview": "<button class=\"close-btn\" id=\"close-sidebar\">×</button> | </div>"
        }
      ],
      "codePreview": [
        "<button class=\"close-btn\" id=\"close-sidebar\">×</button>",
        "</div>",
        "<div class=\"sidebar-content\">",
        "<div class=\"file-preview\" id=\"file-preview\">"
      ]
    },
    {
      "id": "fee63376",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "166-170",
          "preview": "<!-- 文件预览 --> | </div>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "166-170",
          "preview": "<!-- 文件预览 --> | </div>"
        }
      ],
      "codePreview": [
        "<!-- 文件预览 -->",
        "</div>",
        "<div class=\"file-info\" id=\"file-info\">",
        "<!-- 文件信息 -->"
      ]
    },
    {
      "id": "8c25ef62",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "171-175",
          "preview": "</div> | <div class=\"file-actions-panel\">"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "171-175",
          "preview": "</div> | <div class=\"file-actions-panel\">"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"file-actions-panel\">",
        "<button class=\"btn btn-primary btn-block\" id=\"preview-download\">下载文件</button>",
        "<button class=\"btn btn-outline btn-block\" id=\"preview-share\">创建共享链接</button>"
      ]
    },
    {
      "id": "402b71a2",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "176-180",
          "preview": "${this.options.enableVersionControl ? '<button class=\"btn btn-outline btn-block\" id=\"preview-versions\">版本历史</button>' : ''} | </div> | </div>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "176-180",
          "preview": "${this.options.enableVersionControl ? '<button class=\"btn btn-outline btn-block\" id=\"preview-versions\">版本历史</button>' : ''} | </div> | </div>"
        }
      ],
      "codePreview": [
        "${this.options.enableVersionControl ? '<button class=\"btn btn-outline btn-block\" id=\"preview-versions\">版本历史</button>' : ''}",
        "</div>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "b36ffe8b",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "181-185",
          "preview": "<!-- 模态框 --> | <div class=\"modal\" id=\"share-modal\"> | <div class=\"modal-content\">"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "181-185",
          "preview": "<!-- 模态框 --> | <div class=\"modal\" id=\"share-modal\"> | <div class=\"modal-content\">"
        }
      ],
      "codePreview": [
        "<!-- 模态框 -->",
        "<div class=\"modal\" id=\"share-modal\">",
        "<div class=\"modal-content\">",
        "<div class=\"modal-header\">",
        "<h3>创建共享链接</h3>"
      ]
    },
    {
      "id": "31c8b881",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "186-190",
          "preview": "<button class=\"close-btn\" data-modal=\"share-modal\">×</button> | </div> | <div class=\"modal-body\">"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "186-190",
          "preview": "<button class=\"close-btn\" data-modal=\"share-modal\">×</button> | </div> | <div class=\"modal-body\">"
        }
      ],
      "codePreview": [
        "<button class=\"close-btn\" data-modal=\"share-modal\">×</button>",
        "</div>",
        "<div class=\"modal-body\">",
        "<form id=\"share-form\">",
        "<div class=\"form-group\">"
      ]
    },
    {
      "id": "aafb3ff3",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "191-195",
          "preview": "<label>共享类型</label> | <select name=\"shareType\"> | <option value=\"public\">公开链接</option>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "191-195",
          "preview": "<label>共享类型</label> | <select name=\"shareType\"> | <option value=\"public\">公开链接</option>"
        }
      ],
      "codePreview": [
        "<label>共享类型</label>",
        "<select name=\"shareType\">",
        "<option value=\"public\">公开链接</option>",
        "<option value=\"password\">密码保护</option>",
        "<option value=\"time\">时间限制</option>"
      ]
    },
    {
      "id": "1966c3f8",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "196-200",
          "preview": "</select> | </div>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "196-200",
          "preview": "</select> | </div>"
        }
      ],
      "codePreview": [
        "</select>",
        "</div>",
        "<div class=\"form-group\" id=\"password-group\" style=\"display: none;\">",
        "<label>访问密码</label>"
      ]
    },
    {
      "id": "9278a6a5",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "201-205",
          "preview": "<input type=\"password\" name=\"password\" placeholder=\"设置访问密码\" /> | </div>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "201-205",
          "preview": "<input type=\"password\" name=\"password\" placeholder=\"设置访问密码\" /> | </div>"
        }
      ],
      "codePreview": [
        "<input type=\"password\" name=\"password\" placeholder=\"设置访问密码\" />",
        "</div>",
        "<div class=\"form-group\" id=\"expiry-group\" style=\"display: none;\">",
        "<label>过期时间</label>"
      ]
    },
    {
      "id": "dffe65d1",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "206-210",
          "preview": "<input type=\"datetime-local\" name=\"expiresAt\" /> | </div>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "206-210",
          "preview": "<input type=\"datetime-local\" name=\"expiresAt\" /> | </div>"
        }
      ],
      "codePreview": [
        "<input type=\"datetime-local\" name=\"expiresAt\" />",
        "</div>",
        "<div class=\"form-group\">",
        "<label>下载限制</label>"
      ]
    },
    {
      "id": "2c96f161",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "211-215",
          "preview": "<input type=\"number\" name=\"maxDownloads\" placeholder=\"最大下载次数（可选）\" min=\"1\" /> | </div> | </form>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "211-215",
          "preview": "<input type=\"number\" name=\"maxDownloads\" placeholder=\"最大下载次数（可选）\" min=\"1\" /> | </div> | </form>"
        }
      ],
      "codePreview": [
        "<input type=\"number\" name=\"maxDownloads\" placeholder=\"最大下载次数（可选）\" min=\"1\" />",
        "</div>",
        "</form>",
        "</div>",
        "<div class=\"modal-footer\">"
      ]
    },
    {
      "id": "2dde5296",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "216-220",
          "preview": "<button class=\"btn btn-outline\" data-modal=\"share-modal\">取消</button> | <button class=\"btn btn-primary\" id=\"create-share-link\">创建链接</button> | </div>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "216-220",
          "preview": "<button class=\"btn btn-outline\" data-modal=\"share-modal\">取消</button> | <button class=\"btn btn-primary\" id=\"create-share-link\">创建链接</button> | </div>"
        }
      ],
      "codePreview": [
        "<button class=\"btn btn-outline\" data-modal=\"share-modal\">取消</button>",
        "<button class=\"btn btn-primary\" id=\"create-share-link\">创建链接</button>",
        "</div>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "e73a810d",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "221-225",
          "preview": "<div class=\"modal\" id=\"upload-modal\"> | <div class=\"modal-content\">"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "221-225",
          "preview": "<div class=\"modal\" id=\"upload-modal\"> | <div class=\"modal-content\">"
        }
      ],
      "codePreview": [
        "<div class=\"modal\" id=\"upload-modal\">",
        "<div class=\"modal-content\">",
        "<div class=\"modal-header\">",
        "<h3>文件上传</h3>"
      ]
    },
    {
      "id": "82902db4",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "226-230",
          "preview": "<button class=\"close-btn\" data-modal=\"upload-modal\">×</button> | </div> | <div class=\"modal-body\">"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "226-230",
          "preview": "<button class=\"close-btn\" data-modal=\"upload-modal\">×</button> | </div> | <div class=\"modal-body\">"
        }
      ],
      "codePreview": [
        "<button class=\"close-btn\" data-modal=\"upload-modal\">×</button>",
        "</div>",
        "<div class=\"modal-body\">",
        "<div class=\"upload-file-list\" id=\"upload-file-list\">",
        "<!-- 待上传文件列表 -->"
      ]
    },
    {
      "id": "fa5c82fc",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "231-235",
          "preview": "</div> | </div> | <div class=\"modal-footer\">"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "231-235",
          "preview": "</div> | </div> | <div class=\"modal-footer\">"
        }
      ],
      "codePreview": [
        "</div>",
        "</div>",
        "<div class=\"modal-footer\">",
        "<button class=\"btn btn-outline\" data-modal=\"upload-modal\">取消</button>",
        "<button class=\"btn btn-primary\" id=\"start-upload\">开始上传</button>"
      ]
    },
    {
      "id": "dc26b96b",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "266-270",
          "preview": "document.querySelectorAll('.view-btn').forEach(btn => { | btn.addEventListener('click', (e) => { | this.switchView(e.target.dataset.view);"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "266-270",
          "preview": "document.querySelectorAll('.view-btn').forEach(btn => { | btn.addEventListener('click', (e) => { | this.switchView(e.target.dataset.view);"
        }
      ],
      "codePreview": [
        "document.querySelectorAll('.view-btn').forEach(btn => {",
        "btn.addEventListener('click', (e) => {",
        "this.switchView(e.target.dataset.view);",
        "});",
        "});"
      ]
    },
    {
      "id": "87658ffd",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "286-290",
          "preview": "document.getElementById('download-btn').addEventListener('click', () => { | this.downloadSelected(); | });"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "286-290",
          "preview": "document.getElementById('download-btn').addEventListener('click', () => { | this.downloadSelected(); | });"
        }
      ],
      "codePreview": [
        "document.getElementById('download-btn').addEventListener('click', () => {",
        "this.downloadSelected();",
        "});",
        "document.getElementById('share-btn').addEventListener('click', () => {"
      ]
    },
    {
      "id": "e4c5d563",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "291-295",
          "preview": "this.shareSelected(); | });"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "291-295",
          "preview": "this.shareSelected(); | });"
        }
      ],
      "codePreview": [
        "this.shareSelected();",
        "});",
        "document.getElementById('delete-btn').addEventListener('click', () => {",
        "this.deleteSelected();"
      ]
    },
    {
      "id": "db079dd2",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "311-315",
          "preview": "// 关闭模态框 | document.querySelectorAll('[data-modal]').forEach(btn => { | btn.addEventListener('click', (e) => {"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "311-315",
          "preview": "// 关闭模态框 | document.querySelectorAll('[data-modal]').forEach(btn => { | btn.addEventListener('click', (e) => {"
        }
      ],
      "codePreview": [
        "document.querySelectorAll('[data-modal]').forEach(btn => {",
        "btn.addEventListener('click', (e) => {",
        "this.closeModal(e.target.dataset.modal);",
        "});"
      ]
    },
    {
      "id": "523e90be",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "341-345",
          "preview": "['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => { | this.container.addEventListener(eventName, (e) => { | e.preventDefault();"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "341-345",
          "preview": "['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => { | this.container.addEventListener(eventName, (e) => { | e.preventDefault();"
        }
      ],
      "codePreview": [
        "['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {",
        "this.container.addEventListener(eventName, (e) => {",
        "e.preventDefault();",
        "e.stopPropagation();",
        "});"
      ]
    },
    {
      "id": "f7e492be",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "361-365",
          "preview": "this.container.addEventListener('drop', (e) => { | this.container.classList.remove('drag-over'); | this.handleFileSelect(e.dataTransfer.files);"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "361-365",
          "preview": "this.container.addEventListener('drop', (e) => { | this.container.classList.remove('drag-over'); | this.handleFileSelect(e.dataTransfer.files);"
        }
      ],
      "codePreview": [
        "this.container.addEventListener('drop', (e) => {",
        "this.container.classList.remove('drag-over');",
        "this.handleFileSelect(e.dataTransfer.files);",
        "});",
        "}"
      ]
    },
    {
      "id": "48ef2be6",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "386-390",
          "preview": "return file.type === type; | });"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "386-390",
          "preview": "return file.type === type; | });"
        }
      ],
      "codePreview": [
        "return file.type === type;",
        "});",
        "if (!isValidType) {",
        "errors.push(`${file.name}: 不支持的文件类型`);"
      ]
    },
    {
      "id": "926eebd9",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "411-415",
          "preview": "files.forEach(file => { | const fileItem = { | id: 'upload_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9),"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "411-415",
          "preview": "files.forEach(file => { | const fileItem = { | id: 'upload_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9),"
        }
      ],
      "codePreview": [
        "files.forEach(file => {",
        "const fileItem = {",
        "id: 'upload_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9),",
        "file,",
        "status: 'pending',"
      ]
    },
    {
      "id": "7bbb5305",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "416-420",
          "preview": "progress: 0, | error: null | };"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "416-420",
          "preview": "progress: 0, | error: null | };"
        }
      ],
      "codePreview": [
        "progress: 0,",
        "error: null",
        "};",
        "this.uploadQueue.push(fileItem);",
        "});"
      ]
    },
    {
      "id": "64048752",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "431-435",
          "preview": "listContainer.innerHTML = this.uploadQueue.map(item => ` | <div class=\"upload-item\" data-id=\"${item.id}\"> | <div class=\"upload-item-info\">"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "431-435",
          "preview": "listContainer.innerHTML = this.uploadQueue.map(item => ` | <div class=\"upload-item\" data-id=\"${item.id}\"> | <div class=\"upload-item-info\">"
        }
      ],
      "codePreview": [
        "listContainer.innerHTML = this.uploadQueue.map(item => `",
        "<div class=\"upload-item\" data-id=\"${item.id}\">",
        "<div class=\"upload-item-info\">",
        "<div class=\"file-icon\">",
        "<i class=\"icon-${this.getFileIcon(item.file.type)}\"></i>"
      ]
    },
    {
      "id": "c0b8e6b4",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "436-440",
          "preview": "</div> | <div class=\"file-details\"> | <div class=\"file-name\">${item.file.name}</div>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "436-440",
          "preview": "</div> | <div class=\"file-details\"> | <div class=\"file-name\">${item.file.name}</div>"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"file-details\">",
        "<div class=\"file-name\">${item.file.name}</div>",
        "<div class=\"file-size\">${this.formatFileSize(item.file.size)}</div>",
        "</div>"
      ]
    },
    {
      "id": "7da08c38",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "441-445",
          "preview": "<div class=\"upload-status\"> | <span class=\"status-text\">${this.getStatusText(item.status)}</span> | <button class=\"remove-btn\" onclick=\"fileManager.removeFromQueue('${item.id}')\">×</button>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "441-445",
          "preview": "<div class=\"upload-status\"> | <span class=\"status-text\">${this.getStatusText(item.status)}</span> | <button class=\"remove-btn\" onclick=\"fileManager.removeFromQueue('${item.id}')\">×</button>"
        }
      ],
      "codePreview": [
        "<div class=\"upload-status\">",
        "<span class=\"status-text\">${this.getStatusText(item.status)}</span>",
        "<button class=\"remove-btn\" onclick=\"fileManager.removeFromQueue('${item.id}')\">×</button>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "9a37f191",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "516-520",
          "preview": "const uploadData = { | filename: file.name, | fileData: base64Data.split(',')[1], // 移除 data:type;base64, 前缀"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "516-520",
          "preview": "const uploadData = { | filename: file.name, | fileData: base64Data.split(',')[1], // 移除 data:type;base64, 前缀"
        }
      ],
      "codePreview": [
        "const uploadData = {",
        "filename: file.name,",
        "fileData: base64Data.split(',')[1],",
        "shopId: this.options.shopId || 'default_shop',",
        "userId: this.options.userId || 'default_user',"
      ]
    },
    {
      "id": "4f19dbfa",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "526-530",
          "preview": "method: 'POST', | headers: { | 'Content-Type': 'application/json'"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "526-530",
          "preview": "method: 'POST', | headers: { | 'Content-Type': 'application/json'"
        }
      ],
      "codePreview": [
        "method: 'POST',",
        "headers: {",
        "'Content-Type': 'application/json'",
        "},",
        "body: JSON.stringify(uploadData)"
      ]
    },
    {
      "id": "3016696b",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "546-550",
          "preview": "return new Promise((resolve, reject) => { | const reader = new FileReader(); | reader.onload = () => resolve(reader.result);"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "546-550",
          "preview": "return new Promise((resolve, reject) => { | const reader = new FileReader(); | reader.onload = () => resolve(reader.result);"
        }
      ],
      "codePreview": [
        "return new Promise((resolve, reject) => {",
        "const reader = new FileReader();",
        "reader.onload = () => resolve(reader.result);",
        "reader.onerror = reject;",
        "reader.readAsDataURL(file);"
      ]
    },
    {
      "id": "2c2c7088",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "596-600",
          "preview": "browser.innerHTML = ` | <div class=\"empty-state\"> | <i class=\"icon-folder-open\"></i>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "596-600",
          "preview": "browser.innerHTML = ` | <div class=\"empty-state\"> | <i class=\"icon-folder-open\"></i>"
        }
      ],
      "codePreview": [
        "browser.innerHTML = `",
        "<div class=\"empty-state\">",
        "<i class=\"icon-folder-open\"></i>",
        "<h3>暂无文件</h3>",
        "<p>点击上传按钮或拖拽文件到这里开始使用</p>"
      ]
    },
    {
      "id": "1db0a2f1",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "616-620",
          "preview": "renderGridView() { | const browser = document.getElementById('file-browser'); | browser.className = 'file-browser grid-view';"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "616-620",
          "preview": "renderGridView() { | const browser = document.getElementById('file-browser'); | browser.className = 'file-browser grid-view';"
        }
      ],
      "codePreview": [
        "renderGridView() {",
        "const browser = document.getElementById('file-browser');",
        "browser.className = 'file-browser grid-view';",
        "browser.innerHTML = this.currentFiles.map(file => `"
      ]
    },
    {
      "id": "19e22d3c",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "621-625",
          "preview": "<div class=\"file-item\" data-id=\"${file.id}\" onclick=\"fileManager.selectFile('${file.id}')\"> | <div class=\"file-thumbnail\"> | ${this.generateThumbnail(file)}"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "621-625",
          "preview": "<div class=\"file-item\" data-id=\"${file.id}\" onclick=\"fileManager.selectFile('${file.id}')\"> | <div class=\"file-thumbnail\"> | ${this.generateThumbnail(file)}"
        }
      ],
      "codePreview": [
        "<div class=\"file-item\" data-id=\"${file.id}\" onclick=\"fileManager.selectFile('${file.id}')\">",
        "<div class=\"file-thumbnail\">",
        "${this.generateThumbnail(file)}",
        "</div>",
        "<div class=\"file-info\">"
      ]
    },
    {
      "id": "4cf5cce0",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "626-630",
          "preview": "<div class=\"file-name\" title=\"${file.originalName}\">${file.originalName}</div> | <div class=\"file-meta\"> | <span class=\"file-size\">${this.formatFileSize(file.fileSize)}</span>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "626-630",
          "preview": "<div class=\"file-name\" title=\"${file.originalName}\">${file.originalName}</div> | <div class=\"file-meta\"> | <span class=\"file-size\">${this.formatFileSize(file.fileSize)}</span>"
        }
      ],
      "codePreview": [
        "<div class=\"file-name\" title=\"${file.originalName}\">${file.originalName}</div>",
        "<div class=\"file-meta\">",
        "<span class=\"file-size\">${this.formatFileSize(file.fileSize)}</span>",
        "<span class=\"file-date\">${this.formatDate(file.uploadTime)}</span>",
        "</div>"
      ]
    },
    {
      "id": "e4d2d30c",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "631-635",
          "preview": "</div> | <div class=\"file-actions\"> | <button class=\"action-btn\" onclick=\"fileManager.previewFile('${file.id}')\" title=\"预览\">"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "631-635",
          "preview": "</div> | <div class=\"file-actions\"> | <button class=\"action-btn\" onclick=\"fileManager.previewFile('${file.id}')\" title=\"预览\">"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"file-actions\">",
        "<button class=\"action-btn\" onclick=\"fileManager.previewFile('${file.id}')\" title=\"预览\">",
        "<i class=\"icon-eye\"></i>",
        "</button>"
      ]
    },
    {
      "id": "bc2e84a3",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "641-645",
          "preview": "</button> | </div> | </div>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "641-645",
          "preview": "</button> | </div> | </div>"
        }
      ],
      "codePreview": [
        "</button>",
        "</div>",
        "</div>",
        "`).join('');",
        "}"
      ]
    },
    {
      "id": "df2f214c",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "651-655",
          "preview": "const browser = document.getElementById('file-browser'); | browser.className = 'file-browser list-view';"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "651-655",
          "preview": "const browser = document.getElementById('file-browser'); | browser.className = 'file-browser list-view';"
        }
      ],
      "codePreview": [
        "const browser = document.getElementById('file-browser');",
        "browser.className = 'file-browser list-view';",
        "browser.innerHTML = `",
        "<div class=\"file-list-header\">"
      ]
    },
    {
      "id": "ac6cca09",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "656-660",
          "preview": "<div class=\"col-name\">文件名</div> | <div class=\"col-size\">大小</div> | <div class=\"col-type\">类型</div>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "656-660",
          "preview": "<div class=\"col-name\">文件名</div> | <div class=\"col-size\">大小</div> | <div class=\"col-type\">类型</div>"
        }
      ],
      "codePreview": [
        "<div class=\"col-name\">文件名</div>",
        "<div class=\"col-size\">大小</div>",
        "<div class=\"col-type\">类型</div>",
        "<div class=\"col-date\">修改时间</div>",
        "<div class=\"col-actions\">操作</div>"
      ]
    },
    {
      "id": "9e81edda",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "661-665",
          "preview": "</div> | ${this.currentFiles.map(file => `"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "661-665",
          "preview": "</div> | ${this.currentFiles.map(file => `"
        }
      ],
      "codePreview": [
        "</div>",
        "${this.currentFiles.map(file => `",
        "<div class=\"file-list-item\" data-id=\"${file.id}\" onclick=\"fileManager.selectFile('${file.id}')\">",
        "<div class=\"col-name\">"
      ]
    },
    {
      "id": "d902c0b3",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "666-670",
          "preview": "<i class=\"icon-${this.getFileIcon(file.mimeType)}\"></i> | <span title=\"${file.originalName}\">${file.originalName}</span> | </div>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "666-670",
          "preview": "<i class=\"icon-${this.getFileIcon(file.mimeType)}\"></i> | <span title=\"${file.originalName}\">${file.originalName}</span> | </div>"
        }
      ],
      "codePreview": [
        "<i class=\"icon-${this.getFileIcon(file.mimeType)}\"></i>",
        "<span title=\"${file.originalName}\">${file.originalName}</span>",
        "</div>",
        "<div class=\"col-size\">${this.formatFileSize(file.fileSize)}</div>",
        "<div class=\"col-type\">${this.getFileType(file.mimeType)}</div>"
      ]
    },
    {
      "id": "07c80618",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "671-675",
          "preview": "<div class=\"col-date\">${this.formatDate(file.uploadTime)}</div> | <div class=\"col-actions\"> | <button class=\"action-btn\" onclick=\"fileManager.previewFile('${file.id}')\" title=\"预览\">"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "671-675",
          "preview": "<div class=\"col-date\">${this.formatDate(file.uploadTime)}</div> | <div class=\"col-actions\"> | <button class=\"action-btn\" onclick=\"fileManager.previewFile('${file.id}')\" title=\"预览\">"
        }
      ],
      "codePreview": [
        "<div class=\"col-date\">${this.formatDate(file.uploadTime)}</div>",
        "<div class=\"col-actions\">",
        "<button class=\"action-btn\" onclick=\"fileManager.previewFile('${file.id}')\" title=\"预览\">",
        "<i class=\"icon-eye\"></i>",
        "</button>"
      ]
    },
    {
      "id": "40c64e2f",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "681-685",
          "preview": "</button> | </div> | </div>"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "681-685",
          "preview": "</button> | </div> | </div>"
        }
      ],
      "codePreview": [
        "</button>",
        "</div>",
        "</div>",
        "`).join('')}",
        "`;"
      ]
    },
    {
      "id": "e0d2fe97",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "701-705",
          "preview": "*/ | getFileIcon(mimeType) { | if (mimeType.startsWith('image/')) return 'image';"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "701-705",
          "preview": "*/ | getFileIcon(mimeType) { | if (mimeType.startsWith('image/')) return 'image';"
        }
      ],
      "codePreview": [
        "getFileIcon(mimeType) {",
        "if (mimeType.startsWith('image/')) return 'image';",
        "if (mimeType.startsWith('video/')) return 'video';",
        "if (mimeType.startsWith('audio/')) return 'music';"
      ]
    },
    {
      "id": "ef8d9ece",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "706-710",
          "preview": "if (mimeType.includes('pdf')) return 'file-pdf'; | if (mimeType.includes('word')) return 'file-word'; | if (mimeType.includes('excel')) return 'file-excel';"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "706-710",
          "preview": "if (mimeType.includes('pdf')) return 'file-pdf'; | if (mimeType.includes('word')) return 'file-word'; | if (mimeType.includes('excel')) return 'file-excel';"
        }
      ],
      "codePreview": [
        "if (mimeType.includes('pdf')) return 'file-pdf';",
        "if (mimeType.includes('word')) return 'file-word';",
        "if (mimeType.includes('excel')) return 'file-excel';",
        "if (mimeType.includes('zip') || mimeType.includes('rar')) return 'archive';",
        "if (mimeType.startsWith('text/')) return 'file-text';"
      ]
    },
    {
      "id": "13569af1",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "716-720",
          "preview": "*/ | getFileType(mimeType) { | const types = {"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "716-720",
          "preview": "*/ | getFileType(mimeType) { | const types = {"
        }
      ],
      "codePreview": [
        "getFileType(mimeType) {",
        "const types = {",
        "'image/': '图片',",
        "'video/': '视频',"
      ]
    },
    {
      "id": "34f7827d",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "721-725",
          "preview": "'audio/': '音频', | 'application/pdf': 'PDF文档', | 'application/msword': 'Word文档',"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "721-725",
          "preview": "'audio/': '音频', | 'application/pdf': 'PDF文档', | 'application/msword': 'Word文档',"
        }
      ],
      "codePreview": [
        "'audio/': '音频',",
        "'application/pdf': 'PDF文档',",
        "'application/msword': 'Word文档',",
        "'application/vnd.openxmlformats-officedocument.wordprocessingml.document': 'Word文档',",
        "'application/vnd.ms-excel': 'Excel表格',"
      ]
    },
    {
      "id": "d5fd0299",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "726-730",
          "preview": "'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet': 'Excel表格', | 'text/': '文本', | 'application/zip': '压缩包',"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "726-730",
          "preview": "'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet': 'Excel表格', | 'text/': '文本', | 'application/zip': '压缩包',"
        }
      ],
      "codePreview": [
        "'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet': 'Excel表格',",
        "'text/': '文本',",
        "'application/zip': '压缩包',",
        "'application/x-rar-compressed': '压缩包'",
        "};"
      ]
    },
    {
      "id": "a2fdf44c",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "756-760",
          "preview": "*/ | formatDate(dateString) { | const date = new Date(dateString);"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "756-760",
          "preview": "*/ | formatDate(dateString) { | const date = new Date(dateString);"
        }
      ],
      "codePreview": [
        "formatDate(dateString) {",
        "const date = new Date(dateString);",
        "const now = new Date();",
        "const diffTime = Math.abs(now - date);"
      ]
    },
    {
      "id": "4cbe16cf",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "761-765",
          "preview": "const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24)); | if (diffDays === 1) {"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "761-765",
          "preview": "const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24)); | if (diffDays === 1) {"
        }
      ],
      "codePreview": [
        "const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));",
        "if (diffDays === 1) {",
        "return '今天';",
        "} else if (diffDays === 2) {"
      ]
    },
    {
      "id": "3c60022a",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "776-780",
          "preview": "*/ | getStatusText(status) { | const statusMap = {"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "776-780",
          "preview": "*/ | getStatusText(status) { | const statusMap = {"
        }
      ],
      "codePreview": [
        "getStatusText(status) {",
        "const statusMap = {",
        "'pending': '等待上传',",
        "'uploading': '上传中...',"
      ]
    },
    {
      "id": "443220ef",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "791-795",
          "preview": "let timeout; | return function executedFunction(...args) { | const later = () => {"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "791-795",
          "preview": "let timeout; | return function executedFunction(...args) { | const later = () => {"
        }
      ],
      "codePreview": [
        "let timeout;",
        "return function executedFunction(...args) {",
        "const later = () => {",
        "clearTimeout(timeout);",
        "func(...args);"
      ]
    },
    {
      "id": "3e300ab0",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "811-815",
          "preview": "document.body.appendChild(notification); | setTimeout(() => {"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "811-815",
          "preview": "document.body.appendChild(notification); | setTimeout(() => {"
        }
      ],
      "codePreview": [
        "document.body.appendChild(notification);",
        "setTimeout(() => {",
        "notification.remove();",
        "}, 3000);"
      ]
    },
    {
      "id": "6ed9f907",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "821-825",
          "preview": "showModal(modalId) { | const modal = document.getElementById(modalId); | if (modal) {"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "821-825",
          "preview": "showModal(modalId) { | const modal = document.getElementById(modalId); | if (modal) {"
        }
      ],
      "codePreview": [
        "showModal(modalId) {",
        "const modal = document.getElementById(modalId);",
        "if (modal) {",
        "modal.style.display = 'flex';",
        "}"
      ]
    },
    {
      "id": "fa9d188c",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "831-835",
          "preview": "closeModal(modalId) { | const modal = document.getElementById(modalId); | if (modal) {"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "831-835",
          "preview": "closeModal(modalId) { | const modal = document.getElementById(modalId); | if (modal) {"
        }
      ],
      "codePreview": [
        "closeModal(modalId) {",
        "const modal = document.getElementById(modalId);",
        "if (modal) {",
        "modal.style.display = 'none';",
        "}"
      ]
    },
    {
      "id": "b88581c7",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "916-920",
          "preview": "const query = document.getElementById('search-input').value.trim(); | if (!query) {"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "916-920",
          "preview": "const query = document.getElementById('search-input').value.trim(); | if (!query) {"
        }
      ],
      "codePreview": [
        "const query = document.getElementById('search-input').value.trim();",
        "if (!query) {",
        "this.loadFiles();",
        "return;"
      ]
    },
    {
      "id": "d56ee460",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\file-manager.js",
          "lines": "926-930",
          "preview": "if (result.success) { | this.currentFiles = result.files;"
        },
        {
          "file": "static\\js\\enhanced-file-manager.js",
          "lines": "926-930",
          "preview": "if (result.success) { | this.currentFiles = result.files;"
        }
      ],
      "codePreview": [
        "if (result.success) {",
        "this.currentFiles = result.files;",
        "this.renderFiles();",
        "this.updateStats();"
      ]
    },
    {
      "id": "d17c479d",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "6-10",
          "preview": "this.notifications = []; | this.templates = []; | this.subscriptions = [];"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "6-10",
          "preview": "this.notifications = []; | this.templates = []; | this.subscriptions = [];"
        }
      ],
      "codePreview": [
        "this.notifications = [];",
        "this.templates = [];",
        "this.subscriptions = [];",
        "this.stats = {};",
        "this.currentUser = null;"
      ]
    },
    {
      "id": "108aad15",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "36-40",
          "preview": "const container = document.createElement('div'); | container.id = 'notification-manager'; | container.innerHTML = `"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "36-40",
          "preview": "const container = document.createElement('div'); | container.id = 'notification-manager'; | container.innerHTML = `"
        }
      ],
      "codePreview": [
        "const container = document.createElement('div');",
        "container.id = 'notification-manager';",
        "container.innerHTML = `",
        "<div class=\"notification-manager\">",
        "<div class=\"notification-header\">"
      ]
    },
    {
      "id": "7f002c4f",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "41-45",
          "preview": "<h3>📡 通知管理系统</h3> | <div class=\"notification-controls\"> | <button id=\"send-notification-btn\" class=\"btn btn-primary\">发送通知</button>"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "41-45",
          "preview": "<h3>📡 通知管理系统</h3> | <div class=\"notification-controls\"> | <button id=\"send-notification-btn\" class=\"btn btn-primary\">发送通知</button>"
        }
      ],
      "codePreview": [
        "<h3>📡 通知管理系统</h3>",
        "<div class=\"notification-controls\">",
        "<button id=\"send-notification-btn\" class=\"btn btn-primary\">发送通知</button>",
        "<button id=\"manage-templates-btn\" class=\"btn btn-secondary\">管理模板</button>",
        "<button id=\"view-stats-btn\" class=\"btn btn-info\">查看统计</button>"
      ]
    },
    {
      "id": "9e9aff9c",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "46-50",
          "preview": "<button id=\"test-notification-btn\" class=\"btn btn-warning\">测试通知</button> | </div> | </div>"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "46-50",
          "preview": "<button id=\"test-notification-btn\" class=\"btn btn-warning\">测试通知</button> | </div> | </div>"
        }
      ],
      "codePreview": [
        "<button id=\"test-notification-btn\" class=\"btn btn-warning\">测试通知</button>",
        "</div>",
        "</div>",
        "<div class=\"notification-tabs\">"
      ]
    },
    {
      "id": "82db9153",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "51-55",
          "preview": "<button class=\"tab-btn active\" data-tab=\"send\">发送通知</button> | <button class=\"tab-btn\" data-tab=\"templates\">模板管理</button> | <button class=\"tab-btn\" data-tab=\"subscriptions\">订阅管理</button>"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "51-55",
          "preview": "<button class=\"tab-btn active\" data-tab=\"send\">发送通知</button> | <button class=\"tab-btn\" data-tab=\"templates\">模板管理</button> | <button class=\"tab-btn\" data-tab=\"subscriptions\">订阅管理</button>"
        }
      ],
      "codePreview": [
        "<button class=\"tab-btn active\" data-tab=\"send\">发送通知</button>",
        "<button class=\"tab-btn\" data-tab=\"templates\">模板管理</button>",
        "<button class=\"tab-btn\" data-tab=\"subscriptions\">订阅管理</button>",
        "<button class=\"tab-btn\" data-tab=\"stats\">统计分析</button>",
        "</div>"
      ]
    },
    {
      "id": "c890eb30",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "56-60",
          "preview": "<div class=\"notification-content\"> | <!-- 发送通知标签页 -->"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "56-60",
          "preview": "<div class=\"notification-content\"> | <!-- 发送通知标签页 -->"
        }
      ],
      "codePreview": [
        "<div class=\"notification-content\">",
        "<!-- 发送通知标签页 -->",
        "<div id=\"send-tab\" class=\"tab-content active\">",
        "<div class=\"send-form\">"
      ]
    },
    {
      "id": "7cf0ef83",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "61-65",
          "preview": "<div class=\"form-group\"> | <label>标题:</label> | <input type=\"text\" id=\"notification-title\" placeholder=\"输入通知标题\">"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "61-65",
          "preview": "<div class=\"form-group\"> | <label>标题:</label> | <input type=\"text\" id=\"notification-title\" placeholder=\"输入通知标题\">"
        }
      ],
      "codePreview": [
        "<div class=\"form-group\">",
        "<label>标题:</label>",
        "<input type=\"text\" id=\"notification-title\" placeholder=\"输入通知标题\">",
        "</div>",
        "<div class=\"form-group\">"
      ]
    },
    {
      "id": "2beb0388",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "66-70",
          "preview": "<label>内容:</label> | <textarea id=\"notification-message\" placeholder=\"输入通知内容\"></textarea> | </div>"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "66-70",
          "preview": "<label>内容:</label> | <textarea id=\"notification-message\" placeholder=\"输入通知内容\"></textarea> | </div>"
        }
      ],
      "codePreview": [
        "<label>内容:</label>",
        "<textarea id=\"notification-message\" placeholder=\"输入通知内容\"></textarea>",
        "</div>",
        "<div class=\"form-group\">",
        "<label>类型:</label>"
      ]
    },
    {
      "id": "4f891323",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "71-75",
          "preview": "<select id=\"notification-type\"> | <option value=\"general\">一般通知</option> | <option value=\"message\">消息通知</option>"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "71-75",
          "preview": "<select id=\"notification-type\"> | <option value=\"general\">一般通知</option> | <option value=\"message\">消息通知</option>"
        }
      ],
      "codePreview": [
        "<select id=\"notification-type\">",
        "<option value=\"general\">一般通知</option>",
        "<option value=\"message\">消息通知</option>",
        "<option value=\"order\">订单通知</option>",
        "<option value=\"system\">系统通知</option>"
      ]
    },
    {
      "id": "4187fa10",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "76-80",
          "preview": "</select> | </div> | <div class=\"form-group\">"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "76-80",
          "preview": "</select> | </div> | <div class=\"form-group\">"
        }
      ],
      "codePreview": [
        "</select>",
        "</div>",
        "<div class=\"form-group\">",
        "<label>优先级:</label>",
        "<select id=\"notification-priority\">"
      ]
    },
    {
      "id": "a4f71993",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "81-85",
          "preview": "<option value=\"normal\">普通</option> | <option value=\"high\">高</option> | <option value=\"urgent\">紧急</option>"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "81-85",
          "preview": "<option value=\"normal\">普通</option> | <option value=\"high\">高</option> | <option value=\"urgent\">紧急</option>"
        }
      ],
      "codePreview": [
        "<option value=\"normal\">普通</option>",
        "<option value=\"high\">高</option>",
        "<option value=\"urgent\">紧急</option>",
        "</select>",
        "</div>"
      ]
    },
    {
      "id": "cc8165f8",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "86-90",
          "preview": "<div class=\"form-group\"> | <label>发送渠道:</label> | <div class=\"checkbox-group\">"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "86-90",
          "preview": "<div class=\"form-group\"> | <label>发送渠道:</label> | <div class=\"checkbox-group\">"
        }
      ],
      "codePreview": [
        "<div class=\"form-group\">",
        "<label>发送渠道:</label>",
        "<div class=\"checkbox-group\">",
        "<label><input type=\"checkbox\" value=\"websocket\" checked> WebSocket实时</label>",
        "<label><input type=\"checkbox\" value=\"email\"> 邮件</label>"
      ]
    },
    {
      "id": "cb9d8224",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "91-95",
          "preview": "<label><input type=\"checkbox\" value=\"push\"> 推送</label> | <label><input type=\"checkbox\" value=\"sms\"> 短信</label> | </div>"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "91-95",
          "preview": "<label><input type=\"checkbox\" value=\"push\"> 推送</label> | <label><input type=\"checkbox\" value=\"sms\"> 短信</label> | </div>"
        }
      ],
      "codePreview": [
        "<label><input type=\"checkbox\" value=\"push\"> 推送</label>",
        "<label><input type=\"checkbox\" value=\"sms\"> 短信</label>",
        "</div>",
        "</div>",
        "<div class=\"form-group\">"
      ]
    },
    {
      "id": "6d0a3634",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "96-100",
          "preview": "<label>目标用户 (留空为广播):</label> | <input type=\"text\" id=\"target-user\" placeholder=\"用户ID\"> | </div>"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "96-100",
          "preview": "<label>目标用户 (留空为广播):</label> | <input type=\"text\" id=\"target-user\" placeholder=\"用户ID\"> | </div>"
        }
      ],
      "codePreview": [
        "<label>目标用户 (留空为广播):</label>",
        "<input type=\"text\" id=\"target-user\" placeholder=\"用户ID\">",
        "</div>",
        "<div class=\"form-group\">",
        "<label>定时发送:</label>"
      ]
    },
    {
      "id": "a6f54a7e",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "101-105",
          "preview": "<input type=\"datetime-local\" id=\"scheduled-time\"> | </div> | <button id=\"send-now-btn\" class=\"btn btn-primary\">立即发送</button>"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "101-105",
          "preview": "<input type=\"datetime-local\" id=\"scheduled-time\"> | </div> | <button id=\"send-now-btn\" class=\"btn btn-primary\">立即发送</button>"
        }
      ],
      "codePreview": [
        "<input type=\"datetime-local\" id=\"scheduled-time\">",
        "</div>",
        "<button id=\"send-now-btn\" class=\"btn btn-primary\">立即发送</button>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "af76d27e",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "106-110",
          "preview": "<!-- 模板管理标签页 --> | <div id=\"templates-tab\" class=\"tab-content\">"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "106-110",
          "preview": "<!-- 模板管理标签页 --> | <div id=\"templates-tab\" class=\"tab-content\">"
        }
      ],
      "codePreview": [
        "<!-- 模板管理标签页 -->",
        "<div id=\"templates-tab\" class=\"tab-content\">",
        "<div class=\"templates-header\">",
        "<button id=\"create-template-btn\" class=\"btn btn-primary\">创建模板</button>"
      ]
    },
    {
      "id": "1e2b6e62",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "111-115",
          "preview": "</div> | <div id=\"templates-list\" class=\"templates-list\"> | <!-- 模板列表 -->"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "111-115",
          "preview": "</div> | <div id=\"templates-list\" class=\"templates-list\"> | <!-- 模板列表 -->"
        }
      ],
      "codePreview": [
        "</div>",
        "<div id=\"templates-list\" class=\"templates-list\">",
        "<!-- 模板列表 -->",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "acb9c6e2",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "116-120",
          "preview": "<!-- 订阅管理标签页 --> | <div id=\"subscriptions-tab\" class=\"tab-content\">"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "116-120",
          "preview": "<!-- 订阅管理标签页 --> | <div id=\"subscriptions-tab\" class=\"tab-content\">"
        }
      ],
      "codePreview": [
        "<!-- 订阅管理标签页 -->",
        "<div id=\"subscriptions-tab\" class=\"tab-content\">",
        "<div id=\"subscriptions-list\" class=\"subscriptions-list\">",
        "<!-- 订阅列表 -->"
      ]
    },
    {
      "id": "0825adaf",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "121-125",
          "preview": "</div> | </div>"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "121-125",
          "preview": "</div> | </div>"
        }
      ],
      "codePreview": [
        "</div>",
        "</div>",
        "<!-- 统计分析标签页 -->",
        "<div id=\"stats-tab\" class=\"tab-content\">"
      ]
    },
    {
      "id": "5dc0d665",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "126-130",
          "preview": "<div id=\"stats-dashboard\" class=\"stats-dashboard\"> | <!-- 统计图表 --> | </div>"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "126-130",
          "preview": "<div id=\"stats-dashboard\" class=\"stats-dashboard\"> | <!-- 统计图表 --> | </div>"
        }
      ],
      "codePreview": [
        "<div id=\"stats-dashboard\" class=\"stats-dashboard\">",
        "<!-- 统计图表 -->",
        "</div>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "3da60b4e",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "131-135",
          "preview": "<!-- 通知弹窗 --> | <div id=\"notification-toast\" class=\"notification-toast\">"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "131-135",
          "preview": "<!-- 通知弹窗 --> | <div id=\"notification-toast\" class=\"notification-toast\">"
        }
      ],
      "codePreview": [
        "<!-- 通知弹窗 -->",
        "<div id=\"notification-toast\" class=\"notification-toast\">",
        "<!-- 实时通知显示区域 -->",
        "</div>"
      ]
    },
    {
      "id": "533ef1db",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "136-140",
          "preview": "<!-- 模态框 --> | <div id=\"notification-modal\" class=\"modal\">"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "136-140",
          "preview": "<!-- 模态框 --> | <div id=\"notification-modal\" class=\"modal\">"
        }
      ],
      "codePreview": [
        "<!-- 模态框 -->",
        "<div id=\"notification-modal\" class=\"modal\">",
        "<div class=\"modal-content\">",
        "<span class=\"close\">&times;</span>"
      ]
    },
    {
      "id": "3e4a94bb",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "141-145",
          "preview": "<div id=\"modal-body\"></div> | </div> | </div>"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "141-145",
          "preview": "<div id=\"modal-body\"></div> | </div> | </div>"
        }
      ],
      "codePreview": [
        "<div id=\"modal-body\"></div>",
        "</div>",
        "</div>",
        "</div>",
        "`;"
      ]
    },
    {
      "id": "790d1500",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "156-160",
          "preview": "btn.addEventListener('click', (e) => { | this.switchTab(e.target.dataset.tab); | });"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "156-160",
          "preview": "btn.addEventListener('click', (e) => { | this.switchTab(e.target.dataset.tab); | });"
        }
      ],
      "codePreview": [
        "btn.addEventListener('click', (e) => {",
        "this.switchTab(e.target.dataset.tab);",
        "});",
        "});"
      ]
    },
    {
      "id": "cd587517",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "181-185",
          "preview": "// 点击模态框外部关闭 | window.addEventListener('click', (e) => { | const modal = document.getElementById('notification-modal');"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "181-185",
          "preview": "// 点击模态框外部关闭 | window.addEventListener('click', (e) => { | const modal = document.getElementById('notification-modal');"
        }
      ],
      "codePreview": [
        "window.addEventListener('click', (e) => {",
        "const modal = document.getElementById('notification-modal');",
        "if (e.target === modal) {",
        "this.closeModal();"
      ]
    },
    {
      "id": "cc06f77a",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "246-250",
          "preview": "switch (tabName) { | case 'templates': | this.loadTemplates();"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "246-250",
          "preview": "switch (tabName) { | case 'templates': | this.loadTemplates();"
        }
      ],
      "codePreview": [
        "switch (tabName) {",
        "case 'templates':",
        "this.loadTemplates();",
        "break;",
        "case 'subscriptions':"
      ]
    },
    {
      "id": "d4c56a96",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "251-255",
          "preview": "this.loadSubscriptions(); | break; | case 'stats':"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "251-255",
          "preview": "this.loadSubscriptions(); | break; | case 'stats':"
        }
      ],
      "codePreview": [
        "this.loadSubscriptions();",
        "break;",
        "case 'stats':",
        "this.loadStats();",
        "break;"
      ]
    },
    {
      "id": "7565f35e",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "266-270",
          "preview": "const type = document.getElementById('notification-type').value; | const priority = document.getElementById('notification-priority').value; | const targetUser = document.getElementById('target-user').value;"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "266-270",
          "preview": "const type = document.getElementById('notification-type').value; | const priority = document.getElementById('notification-priority').value; | const targetUser = document.getElementById('target-user').value;"
        }
      ],
      "codePreview": [
        "const type = document.getElementById('notification-type').value;",
        "const priority = document.getElementById('notification-priority').value;",
        "const targetUser = document.getElementById('target-user').value;",
        "const scheduledTime = document.getElementById('scheduled-time').value;"
      ]
    },
    {
      "id": "c3ce626d",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "271-275",
          "preview": "// 获取选中的渠道 | const channels = []; | document.querySelectorAll('.checkbox-group input[type=\"checkbox\"]:checked').forEach(cb => {"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "271-275",
          "preview": "// 获取选中的渠道 | const channels = []; | document.querySelectorAll('.checkbox-group input[type=\"checkbox\"]:checked').forEach(cb => {"
        }
      ],
      "codePreview": [
        "const channels = [];",
        "document.querySelectorAll('.checkbox-group input[type=\"checkbox\"]:checked').forEach(cb => {",
        "channels.push(cb.value);",
        "});"
      ]
    },
    {
      "id": "4beb672b",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "286-290",
          "preview": "const notificationData = { | shopId: this.currentShop || 'default_shop',"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "286-290",
          "preview": "const notificationData = { | shopId: this.currentShop || 'default_shop',"
        }
      ],
      "codePreview": [
        "const notificationData = {",
        "shopId: this.currentShop || 'default_shop',",
        "userId: targetUser || null,",
        "title,"
      ]
    },
    {
      "id": "81ab2da2",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "291-295",
          "preview": "message, | type, | priority,"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "291-295",
          "preview": "message, | type, | priority,"
        }
      ],
      "codePreview": [
        "message,",
        "type,",
        "priority,",
        "channels,",
        "scheduledAt: scheduledTime || null,"
      ]
    },
    {
      "id": "bfef8b64",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "301-305",
          "preview": "const response = await fetch('/api/notifications/send', { | method: 'POST',"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "301-305",
          "preview": "const response = await fetch('/api/notifications/send', { | method: 'POST',"
        }
      ],
      "codePreview": [
        "const response = await fetch('/api/notifications/send', {",
        "method: 'POST',",
        "headers: {",
        "'Content-Type': 'application/json'"
      ]
    },
    {
      "id": "4a0de2ef",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "361-365",
          "preview": "const response = await fetch(`/api/notifications/templates/${shopId}`); | const result = await response.json();"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "361-365",
          "preview": "const response = await fetch(`/api/notifications/templates/${shopId}`); | const result = await response.json();"
        }
      ],
      "codePreview": [
        "const response = await fetch(`/api/notifications/templates/${shopId}`);",
        "const result = await response.json();",
        "if (result.success) {",
        "this.templates = result.templates;"
      ]
    },
    {
      "id": "e24e9438",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "381-385",
          "preview": "const container = document.getElementById('templates-list'); | if (!container) return;"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "381-385",
          "preview": "const container = document.getElementById('templates-list'); | if (!container) return;"
        }
      ],
      "codePreview": [
        "const container = document.getElementById('templates-list');",
        "if (!container) return;",
        "if (this.templates.length === 0) {",
        "container.innerHTML = '<p class=\"no-data\">暂无模板</p>';"
      ]
    },
    {
      "id": "107655cc",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "391-395",
          "preview": "<div class=\"template-header\"> | <h4>${template.name}</h4> | <span class=\"template-type\">${template.type}</span>"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "391-395",
          "preview": "<div class=\"template-header\"> | <h4>${template.name}</h4> | <span class=\"template-type\">${template.type}</span>"
        }
      ],
      "codePreview": [
        "<div class=\"template-header\">",
        "<h4>${template.name}</h4>",
        "<span class=\"template-type\">${template.type}</span>",
        "</div>",
        "<div class=\"template-content\">"
      ]
    },
    {
      "id": "6c9ef971",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "396-400",
          "preview": "<p><strong>标题:</strong> ${template.title}</p> | <p><strong>内容:</strong> ${template.content.substring(0, 100)}...</p> | <p><strong>渠道:</strong> ${template.channels.join(', ')}</p>"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "396-400",
          "preview": "<p><strong>标题:</strong> ${template.title}</p> | <p><strong>内容:</strong> ${template.content.substring(0, 100)}...</p> | <p><strong>渠道:</strong> ${template.channels.join(', ')}</p>"
        }
      ],
      "codePreview": [
        "<p><strong>标题:</strong> ${template.title}</p>",
        "<p><strong>内容:</strong> ${template.content.substring(0, 100)}...</p>",
        "<p><strong>渠道:</strong> ${template.channels.join(', ')}</p>",
        "</div>",
        "<div class=\"template-actions\">"
      ]
    },
    {
      "id": "963a6b91",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "401-405",
          "preview": "<button onclick=\"notificationManager.useTemplate('${template.id}')\" class=\"btn btn-sm btn-primary\">使用</button> | <button onclick=\"notificationManager.editTemplate('${template.id}')\" class=\"btn btn-sm btn-secondary\">编辑</button> | </div>"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "401-405",
          "preview": "<button onclick=\"notificationManager.useTemplate('${template.id}')\" class=\"btn btn-sm btn-primary\">使用</button> | <button onclick=\"notificationManager.editTemplate('${template.id}')\" class=\"btn btn-sm btn-secondary\">编辑</button> | </div>"
        }
      ],
      "codePreview": [
        "<button onclick=\"notificationManager.useTemplate('${template.id}')\" class=\"btn btn-sm btn-primary\">使用</button>",
        "<button onclick=\"notificationManager.editTemplate('${template.id}')\" class=\"btn btn-sm btn-secondary\">编辑</button>",
        "</div>",
        "</div>",
        "`).join('');"
      ]
    },
    {
      "id": "29bcf199",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "436-440",
          "preview": "container.innerHTML = ` | <div class=\"stats-grid\">"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "436-440",
          "preview": "container.innerHTML = ` | <div class=\"stats-grid\">"
        }
      ],
      "codePreview": [
        "container.innerHTML = `",
        "<div class=\"stats-grid\">",
        "<div class=\"stats-card\">",
        "<h4>总体统计</h4>"
      ]
    },
    {
      "id": "7b1f51cf",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "441-445",
          "preview": "<div class=\"stats-item\"> | <span>已发送:</span> | <span class=\"stats-value\">${this.stats.totalStats.sent}</span>"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "441-445",
          "preview": "<div class=\"stats-item\"> | <span>已发送:</span> | <span class=\"stats-value\">${this.stats.totalStats.sent}</span>"
        }
      ],
      "codePreview": [
        "<div class=\"stats-item\">",
        "<span>已发送:</span>",
        "<span class=\"stats-value\">${this.stats.totalStats.sent}</span>",
        "</div>",
        "<div class=\"stats-item\">"
      ]
    },
    {
      "id": "0592b3aa",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "446-450",
          "preview": "<span>已送达:</span> | <span class=\"stats-value\">${this.stats.totalStats.delivered}</span> | </div>"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "446-450",
          "preview": "<span>已送达:</span> | <span class=\"stats-value\">${this.stats.totalStats.delivered}</span> | </div>"
        }
      ],
      "codePreview": [
        "<span>已送达:</span>",
        "<span class=\"stats-value\">${this.stats.totalStats.delivered}</span>",
        "</div>",
        "<div class=\"stats-item\">",
        "<span>失败:</span>"
      ]
    },
    {
      "id": "aa7bff4e",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "451-455",
          "preview": "<span class=\"stats-value\">${this.stats.totalStats.failed}</span> | </div> | <div class=\"stats-item\">"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "451-455",
          "preview": "<span class=\"stats-value\">${this.stats.totalStats.failed}</span> | </div> | <div class=\"stats-item\">"
        }
      ],
      "codePreview": [
        "<span class=\"stats-value\">${this.stats.totalStats.failed}</span>",
        "</div>",
        "<div class=\"stats-item\">",
        "<span>成功率:</span>",
        "<span class=\"stats-value\">${this.stats.totalStats.successRate}</span>"
      ]
    },
    {
      "id": "0fd4cafe",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "456-460",
          "preview": "</div> | </div>"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "456-460",
          "preview": "</div> | </div>"
        }
      ],
      "codePreview": [
        "</div>",
        "</div>",
        "<div class=\"stats-card\">",
        "<h4>队列状态</h4>"
      ]
    },
    {
      "id": "445e16b1",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "461-465",
          "preview": "<div class=\"stats-item\"> | <span>待处理:</span> | <span class=\"stats-value\">${this.stats.queueStatus.pending}</span>"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "461-465",
          "preview": "<div class=\"stats-item\"> | <span>待处理:</span> | <span class=\"stats-value\">${this.stats.queueStatus.pending}</span>"
        }
      ],
      "codePreview": [
        "<div class=\"stats-item\">",
        "<span>待处理:</span>",
        "<span class=\"stats-value\">${this.stats.queueStatus.pending}</span>",
        "</div>",
        "<div class=\"stats-item\">"
      ]
    },
    {
      "id": "2d64ad9e",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "466-470",
          "preview": "<span>处理中:</span> | <span class=\"stats-value\">${this.stats.queueStatus.processing ? '是' : '否'}</span> | </div>"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "466-470",
          "preview": "<span>处理中:</span> | <span class=\"stats-value\">${this.stats.queueStatus.processing ? '是' : '否'}</span> | </div>"
        }
      ],
      "codePreview": [
        "<span>处理中:</span>",
        "<span class=\"stats-value\">${this.stats.queueStatus.processing ? '是' : '否'}</span>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "5f5cfe9a",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "471-475",
          "preview": "<div class=\"stats-card\"> | <h4>按类型统计</h4> | ${this.stats.typeStats.map(type => `"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "471-475",
          "preview": "<div class=\"stats-card\"> | <h4>按类型统计</h4> | ${this.stats.typeStats.map(type => `"
        }
      ],
      "codePreview": [
        "<div class=\"stats-card\">",
        "<h4>按类型统计</h4>",
        "${this.stats.typeStats.map(type => `",
        "<div class=\"stats-item\">",
        "<span>${type.type}:</span>"
      ]
    },
    {
      "id": "e08fe733",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "476-480",
          "preview": "<span class=\"stats-value\">${type.sent}/${type.delivered}</span> | </div> | `).join('')}"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "476-480",
          "preview": "<span class=\"stats-value\">${type.sent}/${type.delivered}</span> | </div> | `).join('')}"
        }
      ],
      "codePreview": [
        "<span class=\"stats-value\">${type.sent}/${type.delivered}</span>",
        "</div>",
        "`).join('')}",
        "</div>"
      ]
    },
    {
      "id": "19c0ad41",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "481-485",
          "preview": "<div class=\"stats-card\"> | <h4>按渠道统计</h4> | ${this.stats.channelStats.slice(0, 5).map(channel => `"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "481-485",
          "preview": "<div class=\"stats-card\"> | <h4>按渠道统计</h4> | ${this.stats.channelStats.slice(0, 5).map(channel => `"
        }
      ],
      "codePreview": [
        "<div class=\"stats-card\">",
        "<h4>按渠道统计</h4>",
        "${this.stats.channelStats.slice(0, 5).map(channel => `",
        "<div class=\"stats-item\">",
        "<span>${channel.channel}:</span>"
      ]
    },
    {
      "id": "156dd289",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "486-490",
          "preview": "<span class=\"stats-value\">${channel.sent}/${channel.delivered}</span> | </div> | `).join('')}"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "486-490",
          "preview": "<span class=\"stats-value\">${channel.sent}/${channel.delivered}</span> | </div> | `).join('')}"
        }
      ],
      "codePreview": [
        "<span class=\"stats-value\">${channel.sent}/${channel.delivered}</span>",
        "</div>",
        "`).join('')}",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "8cd1a16a",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "501-505",
          "preview": "const notificationElement = document.createElement('div'); | notificationElement.className = `notification-item priority-${notification.priority || 'normal'}`; | notificationElement.innerHTML = `"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "501-505",
          "preview": "const notificationElement = document.createElement('div'); | notificationElement.className = `notification-item priority-${notification.priority || 'normal'}`; | notificationElement.innerHTML = `"
        }
      ],
      "codePreview": [
        "const notificationElement = document.createElement('div');",
        "notificationElement.className = `notification-item priority-${notification.priority || 'normal'}`;",
        "notificationElement.innerHTML = `",
        "<div class=\"notification-header\">",
        "<strong>${notification.title}</strong>"
      ]
    },
    {
      "id": "c27531e2",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "506-510",
          "preview": "<span class=\"notification-time\">${new Date(notification.timestamp).toLocaleTimeString()}</span> | </div> | <div class=\"notification-body\">"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "506-510",
          "preview": "<span class=\"notification-time\">${new Date(notification.timestamp).toLocaleTimeString()}</span> | </div> | <div class=\"notification-body\">"
        }
      ],
      "codePreview": [
        "<span class=\"notification-time\">${new Date(notification.timestamp).toLocaleTimeString()}</span>",
        "</div>",
        "<div class=\"notification-body\">",
        "${notification.message}",
        "</div>"
      ]
    },
    {
      "id": "0eaa04eb",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "541-545",
          "preview": "showMessage(message, type = 'info') { | const toast = document.getElementById('notification-toast'); | if (!toast) return;"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "541-545",
          "preview": "showMessage(message, type = 'info') { | const toast = document.getElementById('notification-toast'); | if (!toast) return;"
        }
      ],
      "codePreview": [
        "showMessage(message, type = 'info') {",
        "const toast = document.getElementById('notification-toast');",
        "if (!toast) return;",
        "const messageElement = document.createElement('div');"
      ]
    },
    {
      "id": "e58605b5",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "546-550",
          "preview": "messageElement.className = `message-item message-${type}`; | messageElement.innerHTML = ` | <div class=\"message-content\">${message}</div>"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "546-550",
          "preview": "messageElement.className = `message-item message-${type}`; | messageElement.innerHTML = ` | <div class=\"message-content\">${message}</div>"
        }
      ],
      "codePreview": [
        "messageElement.className = `message-item message-${type}`;",
        "messageElement.innerHTML = `",
        "<div class=\"message-content\">${message}</div>",
        "<button class=\"message-close\" onclick=\"this.parentElement.remove()\">×</button>",
        "`;"
      ]
    },
    {
      "id": "0f075413",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\admin\\notification-manager.js",
          "lines": "566-570",
          "preview": "document.getElementById('notification-message').value = ''; | document.getElementById('target-user').value = ''; | document.getElementById('scheduled-time').value = '';"
        },
        {
          "file": "static\\js\\notification-manager.js",
          "lines": "566-570",
          "preview": "document.getElementById('notification-message').value = ''; | document.getElementById('target-user').value = ''; | document.getElementById('scheduled-time').value = '';"
        }
      ],
      "codePreview": [
        "document.getElementById('notification-message').value = '';",
        "document.getElementById('target-user').value = '';",
        "document.getElementById('scheduled-time').value = '';",
        "document.getElementById('notification-type').value = 'general';",
        "document.getElementById('notification-priority').value = 'normal';"
      ]
    },
    {
      "id": "62645939",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "11-15",
          "preview": "constructor(options = {}) { | this.shopId = options.shopId || 'default'; | this.containerId = options.containerId || 'ai-chatbot';"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "11-15",
          "preview": "constructor(options = {}) { | this.shopId = options.shopId || 'default'; | this.containerId = options.containerId || 'ai-chatbot';"
        }
      ],
      "codePreview": [
        "constructor(options = {}) {",
        "this.shopId = options.shopId || 'default';",
        "this.containerId = options.containerId || 'ai-chatbot';",
        "this.apiEndpoint = options.apiEndpoint || '/api/ai';",
        "this.websocket = null;"
      ]
    },
    {
      "id": "d44f7a27",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "16-20",
          "preview": "this.conversationId = this.generateConversationId(); | this.isConnected = false; | this.messageHistory = [];"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "16-20",
          "preview": "this.conversationId = this.generateConversationId(); | this.isConnected = false; | this.messageHistory = [];"
        }
      ],
      "codePreview": [
        "this.conversationId = this.generateConversationId();",
        "this.isConnected = false;",
        "this.messageHistory = [];",
        "this.currentContext = {};",
        "this.typingIndicator = null;"
      ]
    },
    {
      "id": "f95035fa",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "61-65",
          "preview": "container.innerHTML = ` | <div class=\"ai-chatbot-container\">"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "61-65",
          "preview": "container.innerHTML = ` | <div class=\"ai-chatbot-container\">"
        }
      ],
      "codePreview": [
        "container.innerHTML = `",
        "<div class=\"ai-chatbot-container\">",
        "<!-- 聊天头部 -->",
        "<div class=\"ai-chatbot-header\">"
      ]
    },
    {
      "id": "bf83d0d9",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "66-70",
          "preview": "<div class=\"ai-bot-avatar\"> | <div class=\"bot-status-indicator\" id=\"botStatusIndicator\"></div> | 🤖"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "66-70",
          "preview": "<div class=\"ai-bot-avatar\"> | <div class=\"bot-status-indicator\" id=\"botStatusIndicator\"></div> | 🤖"
        }
      ],
      "codePreview": [
        "<div class=\"ai-bot-avatar\">",
        "<div class=\"bot-status-indicator\" id=\"botStatusIndicator\"></div>",
        "🤖",
        "</div>",
        "<div class=\"ai-bot-info\">"
      ]
    },
    {
      "id": "9980ff75",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "71-75",
          "preview": "<div class=\"ai-bot-name\">AI智能助手</div> | <div class=\"ai-bot-status\" id=\"botStatusText\">正在连接...</div> | </div>"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "71-75",
          "preview": "<div class=\"ai-bot-name\">AI智能助手</div> | <div class=\"ai-bot-status\" id=\"botStatusText\">正在连接...</div> | </div>"
        }
      ],
      "codePreview": [
        "<div class=\"ai-bot-name\">AI智能助手</div>",
        "<div class=\"ai-bot-status\" id=\"botStatusText\">正在连接...</div>",
        "</div>",
        "<div class=\"ai-chatbot-actions\">",
        "<button class=\"btn-icon\" id=\"aiSettingsBtn\" title=\"设置\">⚙️</button>"
      ]
    },
    {
      "id": "15c08659",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "76-80",
          "preview": "<button class=\"btn-icon\" id=\"aiMinimizeBtn\" title=\"最小化\">➖</button> | <button class=\"btn-icon\" id=\"aiCloseBtn\" title=\"关闭\">✕</button> | </div>"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "76-80",
          "preview": "<button class=\"btn-icon\" id=\"aiMinimizeBtn\" title=\"最小化\">➖</button> | <button class=\"btn-icon\" id=\"aiCloseBtn\" title=\"关闭\">✕</button> | </div>"
        }
      ],
      "codePreview": [
        "<button class=\"btn-icon\" id=\"aiMinimizeBtn\" title=\"最小化\">➖</button>",
        "<button class=\"btn-icon\" id=\"aiCloseBtn\" title=\"关闭\">✕</button>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "5131d9d9",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "81-85",
          "preview": "<!-- 聊天消息区域 --> | <div class=\"ai-chatbot-messages\" id=\"aiChatMessages\"> | <div class=\"ai-message-container\">"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "81-85",
          "preview": "<!-- 聊天消息区域 --> | <div class=\"ai-chatbot-messages\" id=\"aiChatMessages\"> | <div class=\"ai-message-container\">"
        }
      ],
      "codePreview": [
        "<!-- 聊天消息区域 -->",
        "<div class=\"ai-chatbot-messages\" id=\"aiChatMessages\">",
        "<div class=\"ai-message-container\">",
        "<div class=\"ai-system-message\">",
        "🤖 AI智能客服已启动，我将为您提供专业的服务！"
      ]
    },
    {
      "id": "a9a72fac",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "86-90",
          "preview": "</div> | </div> | </div>"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "86-90",
          "preview": "</div> | </div> | </div>"
        }
      ],
      "codePreview": [
        "</div>",
        "</div>",
        "</div>",
        "<!-- 智能建议区域 -->"
      ]
    },
    {
      "id": "52b30633",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "91-95",
          "preview": "<div class=\"ai-suggestions-container\" id=\"aiSuggestions\" style=\"display: none;\"> | <div class=\"ai-suggestions-title\">💡 智能建议：</div> | <div class=\"ai-suggestions-list\" id=\"aiSuggestionsList\"></div>"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "91-95",
          "preview": "<div class=\"ai-suggestions-container\" id=\"aiSuggestions\" style=\"display: none;\"> | <div class=\"ai-suggestions-title\">💡 智能建议：</div> | <div class=\"ai-suggestions-list\" id=\"aiSuggestionsList\"></div>"
        }
      ],
      "codePreview": [
        "<div class=\"ai-suggestions-container\" id=\"aiSuggestions\" style=\"display: none;\">",
        "<div class=\"ai-suggestions-title\">💡 智能建议：</div>",
        "<div class=\"ai-suggestions-list\" id=\"aiSuggestionsList\"></div>",
        "</div>"
      ]
    },
    {
      "id": "7eb4e7fb",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "96-100",
          "preview": "<!-- 快速回复区域 --> | <div class=\"ai-quick-replies\" id=\"aiQuickReplies\"> | <div class=\"ai-quick-reply-item\" data-text=\"查看营业时间\">🕐 营业时间</div>"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "96-100",
          "preview": "<!-- 快速回复区域 --> | <div class=\"ai-quick-replies\" id=\"aiQuickReplies\"> | <div class=\"ai-quick-reply-item\" data-text=\"查看营业时间\">🕐 营业时间</div>"
        }
      ],
      "codePreview": [
        "<!-- 快速回复区域 -->",
        "<div class=\"ai-quick-replies\" id=\"aiQuickReplies\">",
        "<div class=\"ai-quick-reply-item\" data-text=\"查看营业时间\">🕐 营业时间</div>",
        "<div class=\"ai-quick-reply-item\" data-text=\"联系方式\">📞 联系方式</div>",
        "<div class=\"ai-quick-reply-item\" data-text=\"退换货政策\">🔄 退换货</div>"
      ]
    },
    {
      "id": "0a9883ce",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "101-105",
          "preview": "<div class=\"ai-quick-reply-item\" data-text=\"转人工客服\">👨‍💼 人工客服</div> | </div>"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "101-105",
          "preview": "<div class=\"ai-quick-reply-item\" data-text=\"转人工客服\">👨‍💼 人工客服</div> | </div>"
        }
      ],
      "codePreview": [
        "<div class=\"ai-quick-reply-item\" data-text=\"转人工客服\">👨‍💼 人工客服</div>",
        "</div>",
        "<!-- 输入区域 -->",
        "<div class=\"ai-chatbot-input\">"
      ]
    },
    {
      "id": "aac5b323",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "106-110",
          "preview": "<div class=\"ai-input-container\"> | <textarea | id=\"aiMessageInput\""
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "106-110",
          "preview": "<div class=\"ai-input-container\"> | <textarea | id=\"aiMessageInput\""
        }
      ],
      "codePreview": [
        "<div class=\"ai-input-container\">",
        "<textarea",
        "id=\"aiMessageInput\"",
        "placeholder=\"请输入您的问题...\"",
        "rows=\"1\""
      ]
    },
    {
      "id": "68bb020d",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "111-115",
          "preview": "maxlength=\"500\" | ></textarea> | <div class=\"ai-input-actions\">"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "111-115",
          "preview": "maxlength=\"500\" | ></textarea> | <div class=\"ai-input-actions\">"
        }
      ],
      "codePreview": [
        "maxlength=\"500\"",
        "></textarea>",
        "<div class=\"ai-input-actions\">",
        "<button class=\"btn-icon\" id=\"aiEmojiBtn\" title=\"表情\">😊</button>",
        "<button class=\"btn-icon\" id=\"aiVoiceBtn\" title=\"语音\">🎤</button>"
      ]
    },
    {
      "id": "c7d57121",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "116-120",
          "preview": "<button class=\"btn-primary\" id=\"aiSendBtn\" title=\"发送\"> | <span class=\"btn-text\">发送</span> | <span class=\"btn-icon\">➤</span>"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "116-120",
          "preview": "<button class=\"btn-primary\" id=\"aiSendBtn\" title=\"发送\"> | <span class=\"btn-text\">发送</span> | <span class=\"btn-icon\">➤</span>"
        }
      ],
      "codePreview": [
        "<button class=\"btn-primary\" id=\"aiSendBtn\" title=\"发送\">",
        "<span class=\"btn-text\">发送</span>",
        "<span class=\"btn-icon\">➤</span>",
        "</button>",
        "</div>"
      ]
    },
    {
      "id": "0ee0295c",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "121-125",
          "preview": "</div> | <div class=\"ai-input-status\"> | <span class=\"ai-char-count\" id=\"aiCharCount\">0/500</span>"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "121-125",
          "preview": "</div> | <div class=\"ai-input-status\"> | <span class=\"ai-char-count\" id=\"aiCharCount\">0/500</span>"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"ai-input-status\">",
        "<span class=\"ai-char-count\" id=\"aiCharCount\">0/500</span>",
        "<span class=\"ai-typing-status\" id=\"aiTypingStatus\"></span>",
        "</div>"
      ]
    },
    {
      "id": "ad83cfe0",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "126-130",
          "preview": "</div> | <!-- AI状态指示器 -->"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "126-130",
          "preview": "</div> | <!-- AI状态指示器 -->"
        }
      ],
      "codePreview": [
        "</div>",
        "<!-- AI状态指示器 -->",
        "<div class=\"ai-status-bar\" id=\"aiStatusBar\">",
        "<div class=\"ai-status-item\">"
      ]
    },
    {
      "id": "401d7d47",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "131-135",
          "preview": "<span class=\"ai-status-label\">智能分析:</span> | <span class=\"ai-status-value\" id=\"aiAnalysisStatus\">待机中</span> | </div>"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "131-135",
          "preview": "<span class=\"ai-status-label\">智能分析:</span> | <span class=\"ai-status-value\" id=\"aiAnalysisStatus\">待机中</span> | </div>"
        }
      ],
      "codePreview": [
        "<span class=\"ai-status-label\">智能分析:</span>",
        "<span class=\"ai-status-value\" id=\"aiAnalysisStatus\">待机中</span>",
        "</div>",
        "<div class=\"ai-status-item\">",
        "<span class=\"ai-status-label\">置信度:</span>"
      ]
    },
    {
      "id": "568a21df",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "136-140",
          "preview": "<span class=\"ai-status-value\" id=\"aiConfidenceScore\">--</span> | </div> | <div class=\"ai-status-item\">"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "136-140",
          "preview": "<span class=\"ai-status-value\" id=\"aiConfidenceScore\">--</span> | </div> | <div class=\"ai-status-item\">"
        }
      ],
      "codePreview": [
        "<span class=\"ai-status-value\" id=\"aiConfidenceScore\">--</span>",
        "</div>",
        "<div class=\"ai-status-item\">",
        "<span class=\"ai-status-label\">情感:</span>",
        "<span class=\"ai-status-value\" id=\"aiSentimentScore\">中性</span>"
      ]
    },
    {
      "id": "b95c12d8",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "141-145",
          "preview": "</div> | </div> | </div>"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "141-145",
          "preview": "</div> | </div> | </div>"
        }
      ],
      "codePreview": [
        "</div>",
        "</div>",
        "</div>",
        "<!-- AI设置面板 -->"
      ]
    },
    {
      "id": "8e657820",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "146-150",
          "preview": "<div class=\"ai-settings-panel\" id=\"aiSettingsPanel\" style=\"display: none;\"> | <div class=\"ai-settings-header\"> | <h3>🤖 AI设置</h3>"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "146-150",
          "preview": "<div class=\"ai-settings-panel\" id=\"aiSettingsPanel\" style=\"display: none;\"> | <div class=\"ai-settings-header\"> | <h3>🤖 AI设置</h3>"
        }
      ],
      "codePreview": [
        "<div class=\"ai-settings-panel\" id=\"aiSettingsPanel\" style=\"display: none;\">",
        "<div class=\"ai-settings-header\">",
        "<h3>🤖 AI设置</h3>",
        "<button class=\"btn-close\" id=\"aiSettingsCloseBtn\">✕</button>",
        "</div>"
      ]
    },
    {
      "id": "1a3d03a6",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "151-155",
          "preview": "<div class=\"ai-settings-content\"> | <div class=\"ai-setting-group\"> | <label class=\"ai-setting-label\">"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "151-155",
          "preview": "<div class=\"ai-settings-content\"> | <div class=\"ai-setting-group\"> | <label class=\"ai-setting-label\">"
        }
      ],
      "codePreview": [
        "<div class=\"ai-settings-content\">",
        "<div class=\"ai-setting-group\">",
        "<label class=\"ai-setting-label\">",
        "<input type=\"checkbox\" id=\"autoReplyToggle\" checked>",
        "启用自动回复"
      ]
    },
    {
      "id": "a3c3474d",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "156-160",
          "preview": "</label> | </div> | <div class=\"ai-setting-group\">"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "156-160",
          "preview": "</label> | </div> | <div class=\"ai-setting-group\">"
        }
      ],
      "codePreview": [
        "</label>",
        "</div>",
        "<div class=\"ai-setting-group\">",
        "<label class=\"ai-setting-label\">",
        "<input type=\"checkbox\" id=\"smartSuggestionsToggle\" checked>"
      ]
    },
    {
      "id": "1d2db2b1",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "161-165",
          "preview": "智能建议 | </label> | </div>"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "161-165",
          "preview": "智能建议 | </label> | </div>"
        }
      ],
      "codePreview": [
        "智能建议",
        "</label>",
        "</div>",
        "<div class=\"ai-setting-group\">",
        "<label class=\"ai-setting-label\">"
      ]
    },
    {
      "id": "7a580c15",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "166-170",
          "preview": "<input type=\"checkbox\" id=\"sentimentAnalysisToggle\" checked> | 情感分析 | </label>"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "166-170",
          "preview": "<input type=\"checkbox\" id=\"sentimentAnalysisToggle\" checked> | 情感分析 | </label>"
        }
      ],
      "codePreview": [
        "<input type=\"checkbox\" id=\"sentimentAnalysisToggle\" checked>",
        "情感分析",
        "</label>",
        "</div>",
        "<div class=\"ai-setting-group\">"
      ]
    },
    {
      "id": "ed01db4e",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "171-175",
          "preview": "<label class=\"ai-setting-label\">响应延迟 (毫秒):</label> | <input type=\"range\" id=\"responseDelaySlider\" min=\"0\" max=\"3000\" value=\"800\" step=\"100\"> | <span id=\"responseDelayValue\">800ms</span>"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "171-175",
          "preview": "<label class=\"ai-setting-label\">响应延迟 (毫秒):</label> | <input type=\"range\" id=\"responseDelaySlider\" min=\"0\" max=\"3000\" value=\"800\" step=\"100\"> | <span id=\"responseDelayValue\">800ms</span>"
        }
      ],
      "codePreview": [
        "<label class=\"ai-setting-label\">响应延迟 (毫秒):</label>",
        "<input type=\"range\" id=\"responseDelaySlider\" min=\"0\" max=\"3000\" value=\"800\" step=\"100\">",
        "<span id=\"responseDelayValue\">800ms</span>",
        "</div>",
        "<div class=\"ai-setting-group\">"
      ]
    },
    {
      "id": "27030a57",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "176-180",
          "preview": "<label class=\"ai-setting-label\">转人工阈值:</label> | <input type=\"range\" id=\"handoffThresholdSlider\" min=\"0\" max=\"1\" value=\"0.3\" step=\"0.1\"> | <span id=\"handoffThresholdValue\">0.3</span>"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "176-180",
          "preview": "<label class=\"ai-setting-label\">转人工阈值:</label> | <input type=\"range\" id=\"handoffThresholdSlider\" min=\"0\" max=\"1\" value=\"0.3\" step=\"0.1\"> | <span id=\"handoffThresholdValue\">0.3</span>"
        }
      ],
      "codePreview": [
        "<label class=\"ai-setting-label\">转人工阈值:</label>",
        "<input type=\"range\" id=\"handoffThresholdSlider\" min=\"0\" max=\"1\" value=\"0.3\" step=\"0.1\">",
        "<span id=\"handoffThresholdValue\">0.3</span>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "5390fbb5",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "191-195",
          "preview": "addChatBotStyles() { | if (document.getElementById('ai-chatbot-styles')) return;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "191-195",
          "preview": "addChatBotStyles() { | if (document.getElementById('ai-chatbot-styles')) return;"
        }
      ],
      "codePreview": [
        "addChatBotStyles() {",
        "if (document.getElementById('ai-chatbot-styles')) return;",
        "const style = document.createElement('style');",
        "style.id = 'ai-chatbot-styles';"
      ]
    },
    {
      "id": "a4b081bd",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "196-200",
          "preview": "style.textContent = ` | .ai-chatbot-container { | width: 100%;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "196-200",
          "preview": "style.textContent = ` | .ai-chatbot-container { | width: 100%;"
        }
      ],
      "codePreview": [
        "style.textContent = `",
        ".ai-chatbot-container {",
        "width: 100%;",
        "height: 600px;",
        "background: #ffffff;"
      ]
    },
    {
      "id": "ee6c6aea",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "201-205",
          "preview": "border-radius: 12px; | box-shadow: 0 4px 20px rgba(0,0,0,0.1); | display: flex;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "201-205",
          "preview": "border-radius: 12px; | box-shadow: 0 4px 20px rgba(0,0,0,0.1); | display: flex;"
        }
      ],
      "codePreview": [
        "border-radius: 12px;",
        "box-shadow: 0 4px 20px rgba(0,0,0,0.1);",
        "display: flex;",
        "flex-direction: column;",
        "overflow: hidden;"
      ]
    },
    {
      "id": "b482f47b",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "211-215",
          "preview": "color: white; | padding: 16px; | display: flex;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "211-215",
          "preview": "color: white; | padding: 16px; | display: flex;"
        }
      ],
      "codePreview": [
        "color: white;",
        "padding: 16px;",
        "display: flex;",
        "align-items: center;",
        "gap: 12px;"
      ]
    },
    {
      "id": "d04e8603",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "221-225",
          "preview": "height: 40px; | background: rgba(255,255,255,0.2); | border-radius: 50%;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "221-225",
          "preview": "height: 40px; | background: rgba(255,255,255,0.2); | border-radius: 50%;"
        }
      ],
      "codePreview": [
        "height: 40px;",
        "background: rgba(255,255,255,0.2);",
        "border-radius: 50%;",
        "display: flex;",
        "align-items: center;"
      ]
    },
    {
      "id": "c007a751",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "231-235",
          "preview": ".bot-status-indicator { | position: absolute; | top: -2px;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "231-235",
          "preview": ".bot-status-indicator { | position: absolute; | top: -2px;"
        }
      ],
      "codePreview": [
        ".bot-status-indicator {",
        "position: absolute;",
        "top: -2px;",
        "right: -2px;",
        "width: 12px;"
      ]
    },
    {
      "id": "2396fd37",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "236-240",
          "preview": "height: 12px; | background: #4ade80; | border: 2px solid white;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "236-240",
          "preview": "height: 12px; | background: #4ade80; | border: 2px solid white;"
        }
      ],
      "codePreview": [
        "height: 12px;",
        "background: #4ade80;",
        "border: 2px solid white;",
        "border-radius: 50%;",
        "animation: pulse 2s infinite;"
      ]
    },
    {
      "id": "0d449fda",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "251-255",
          "preview": ".ai-bot-name { | font-weight: 600;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "251-255",
          "preview": ".ai-bot-name { | font-weight: 600;"
        }
      ],
      "codePreview": [
        ".ai-bot-name {",
        "font-weight: 600;",
        "font-size: 16px;",
        "margin-bottom: 2px;"
      ]
    },
    {
      "id": "4293dbfc",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "281-285",
          "preview": ".ai-message { | max-width: 80%; | padding: 12px 16px;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "281-285",
          "preview": ".ai-message { | max-width: 80%; | padding: 12px 16px;"
        }
      ],
      "codePreview": [
        ".ai-message {",
        "max-width: 80%;",
        "padding: 12px 16px;",
        "border-radius: 18px;",
        "word-wrap: break-word;"
      ]
    },
    {
      "id": "6cf38a67",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "291-295",
          "preview": "from { | opacity: 0; | transform: translateY(10px);"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "291-295",
          "preview": "from { | opacity: 0; | transform: translateY(10px);"
        }
      ],
      "codePreview": [
        "from {",
        "opacity: 0;",
        "transform: translateY(10px);",
        "}",
        "to {"
      ]
    },
    {
      "id": "107d6b88",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "301-305",
          "preview": ".ai-message.user { | align-self: flex-end; | background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "301-305",
          "preview": ".ai-message.user { | align-self: flex-end; | background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);"
        }
      ],
      "codePreview": [
        ".ai-message.user {",
        "align-self: flex-end;",
        "background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);",
        "color: white;",
        "}"
      ]
    },
    {
      "id": "e8b37c81",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "306-310",
          "preview": ".ai-message.bot { | align-self: flex-start;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "306-310",
          "preview": ".ai-message.bot { | align-self: flex-start;"
        }
      ],
      "codePreview": [
        ".ai-message.bot {",
        "align-self: flex-start;",
        "background: white;",
        "border: 1px solid #e2e8f0;"
      ]
    },
    {
      "id": "ade3479d",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "316-320",
          "preview": "background: #f1f5f9; | color: #64748b; | font-size: 14px;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "316-320",
          "preview": "background: #f1f5f9; | color: #64748b; | font-size: 14px;"
        }
      ],
      "codePreview": [
        "background: #f1f5f9;",
        "color: #64748b;",
        "font-size: 14px;",
        "text-align: center;",
        "border-radius: 12px;"
      ]
    },
    {
      "id": "4472e076",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "326-330",
          "preview": "padding: 12px; | border-radius: 8px; | text-align: center;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "326-330",
          "preview": "padding: 12px; | border-radius: 8px; | text-align: center;"
        }
      ],
      "codePreview": [
        "padding: 12px;",
        "border-radius: 8px;",
        "text-align: center;",
        "font-size: 14px;",
        "border-left: 4px solid #3b82f6;"
      ]
    },
    {
      "id": "3de6f844",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "336-340",
          "preview": "margin-top: 4px; | display: flex; | justify-content: space-between;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "336-340",
          "preview": "margin-top: 4px; | display: flex; | justify-content: space-between;"
        }
      ],
      "codePreview": [
        "margin-top: 4px;",
        "display: flex;",
        "justify-content: space-between;",
        "align-items: center;",
        "}"
      ]
    },
    {
      "id": "44ee94cb",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "341-345",
          "preview": ".ai-confidence-badge { | background: rgba(0,0,0,0.1);"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "341-345",
          "preview": ".ai-confidence-badge { | background: rgba(0,0,0,0.1);"
        }
      ],
      "codePreview": [
        ".ai-confidence-badge {",
        "background: rgba(0,0,0,0.1);",
        "padding: 2px 6px;",
        "border-radius: 10px;"
      ]
    },
    {
      "id": "918cc747",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "351-355",
          "preview": "align-items: center; | gap: 8px; | padding: 12px 16px;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "351-355",
          "preview": "align-items: center; | gap: 8px; | padding: 12px 16px;"
        }
      ],
      "codePreview": [
        "align-items: center;",
        "gap: 8px;",
        "padding: 12px 16px;",
        "background: white;",
        "border-radius: 18px;"
      ]
    },
    {
      "id": "654d3071",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "366-370",
          "preview": ".ai-typing-dot { | width: 6px; | height: 6px;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "366-370",
          "preview": ".ai-typing-dot { | width: 6px; | height: 6px;"
        }
      ],
      "codePreview": [
        ".ai-typing-dot {",
        "width: 6px;",
        "height: 6px;",
        "background: #94a3b8;",
        "border-radius: 50%;"
      ]
    },
    {
      "id": "507bdd4d",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "381-385",
          "preview": ".ai-suggestions-container { | background: #fef3c7;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "381-385",
          "preview": ".ai-suggestions-container { | background: #fef3c7;"
        }
      ],
      "codePreview": [
        ".ai-suggestions-container {",
        "background: #fef3c7;",
        "border-left: 4px solid #f59e0b;",
        "padding: 12px;"
      ]
    },
    {
      "id": "ea251391",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "396-400",
          "preview": ".ai-suggestions-list { | display: flex; | flex-wrap: wrap;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "396-400",
          "preview": ".ai-suggestions-list { | display: flex; | flex-wrap: wrap;"
        }
      ],
      "codePreview": [
        ".ai-suggestions-list {",
        "display: flex;",
        "flex-wrap: wrap;",
        "gap: 8px;",
        "}"
      ]
    },
    {
      "id": "498c11fb",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "401-405",
          "preview": ".ai-suggestion-item { | background: white;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "401-405",
          "preview": ".ai-suggestion-item { | background: white;"
        }
      ],
      "codePreview": [
        ".ai-suggestion-item {",
        "background: white;",
        "border: 1px solid #f59e0b;",
        "color: #92400e;"
      ]
    },
    {
      "id": "d79099ba",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "406-410",
          "preview": "padding: 6px 12px; | border-radius: 16px; | font-size: 13px;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "406-410",
          "preview": "padding: 6px 12px; | border-radius: 16px; | font-size: 13px;"
        }
      ],
      "codePreview": [
        "padding: 6px 12px;",
        "border-radius: 16px;",
        "font-size: 13px;",
        "cursor: pointer;",
        "transition: all 0.2s;"
      ]
    },
    {
      "id": "dd917dfe",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "421-425",
          "preview": "gap: 8px; | padding: 12px 16px; | background: white;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "421-425",
          "preview": "gap: 8px; | padding: 12px 16px; | background: white;"
        }
      ],
      "codePreview": [
        "gap: 8px;",
        "padding: 12px 16px;",
        "background: white;",
        "border-top: 1px solid #e2e8f0;",
        "}"
      ]
    },
    {
      "id": "382354b4",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "426-430",
          "preview": ".ai-quick-reply-item { | background: #f1f5f9;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "426-430",
          "preview": ".ai-quick-reply-item { | background: #f1f5f9;"
        }
      ],
      "codePreview": [
        ".ai-quick-reply-item {",
        "background: #f1f5f9;",
        "border: 1px solid #cbd5e1;",
        "color: #475569;"
      ]
    },
    {
      "id": "5958e4d6",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "431-435",
          "preview": "padding: 8px 12px; | border-radius: 16px; | font-size: 13px;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "431-435",
          "preview": "padding: 8px 12px; | border-radius: 16px; | font-size: 13px;"
        }
      ],
      "codePreview": [
        "padding: 8px 12px;",
        "border-radius: 16px;",
        "font-size: 13px;",
        "cursor: pointer;",
        "transition: all 0.2s;"
      ]
    },
    {
      "id": "adecc0f4",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "451-455",
          "preview": ".ai-input-container { | display: flex; | align-items: flex-end;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "451-455",
          "preview": ".ai-input-container { | display: flex; | align-items: flex-end;"
        }
      ],
      "codePreview": [
        ".ai-input-container {",
        "display: flex;",
        "align-items: flex-end;",
        "gap: 12px;",
        "background: #f8fafc;"
      ]
    },
    {
      "id": "cf837c3c",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "456-460",
          "preview": "border: 1px solid #e2e8f0; | border-radius: 24px; | padding: 8px;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "456-460",
          "preview": "border: 1px solid #e2e8f0; | border-radius: 24px; | padding: 8px;"
        }
      ],
      "codePreview": [
        "border: 1px solid #e2e8f0;",
        "border-radius: 24px;",
        "padding: 8px;",
        "transition: all 0.2s;",
        "}"
      ]
    },
    {
      "id": "0012383d",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "466-470",
          "preview": "#aiMessageInput { | flex: 1;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "466-470",
          "preview": "#aiMessageInput { | flex: 1;"
        }
      ],
      "codePreview": [
        "#aiMessageInput {",
        "flex: 1;",
        "border: none;",
        "outline: none;"
      ]
    },
    {
      "id": "c992069e",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "471-475",
          "preview": "background: transparent; | resize: none; | font-size: 14px;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "471-475",
          "preview": "background: transparent; | resize: none; | font-size: 14px;"
        }
      ],
      "codePreview": [
        "background: transparent;",
        "resize: none;",
        "font-size: 14px;",
        "line-height: 1.5;",
        "padding: 8px 12px;"
      ]
    },
    {
      "id": "a9270e3c",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "481-485",
          "preview": ".ai-input-actions { | display: flex; | gap: 4px;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "481-485",
          "preview": ".ai-input-actions { | display: flex; | gap: 4px;"
        }
      ],
      "codePreview": [
        ".ai-input-actions {",
        "display: flex;",
        "gap: 4px;",
        "align-items: center;",
        "}"
      ]
    },
    {
      "id": "8e912ea5",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "486-490",
          "preview": ".ai-input-status { | display: flex;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "486-490",
          "preview": ".ai-input-status { | display: flex;"
        }
      ],
      "codePreview": [
        ".ai-input-status {",
        "display: flex;",
        "justify-content: space-between;",
        "align-items: center;"
      ]
    },
    {
      "id": "4c7a28ac",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "496-500",
          "preview": ".ai-status-bar { | background: #f8fafc; | border-top: 1px solid #e2e8f0;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "496-500",
          "preview": ".ai-status-bar { | background: #f8fafc; | border-top: 1px solid #e2e8f0;"
        }
      ],
      "codePreview": [
        ".ai-status-bar {",
        "background: #f8fafc;",
        "border-top: 1px solid #e2e8f0;",
        "padding: 8px 16px;",
        "display: flex;"
      ]
    },
    {
      "id": "fb9511a9",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "531-535",
          "preview": ".ai-settings-header { | background: #f8fafc; | padding: 16px;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "531-535",
          "preview": ".ai-settings-header { | background: #f8fafc; | padding: 16px;"
        }
      ],
      "codePreview": [
        ".ai-settings-header {",
        "background: #f8fafc;",
        "padding: 16px;",
        "border-bottom: 1px solid #e2e8f0;",
        "display: flex;"
      ]
    },
    {
      "id": "4fb449a1",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "551-555",
          "preview": "gap: 8px; | font-size: 14px; | color: #374151;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "551-555",
          "preview": "gap: 8px; | font-size: 14px; | color: #374151;"
        }
      ],
      "codePreview": [
        "gap: 8px;",
        "font-size: 14px;",
        "color: #374151;",
        "cursor: pointer;",
        "}"
      ]
    },
    {
      "id": "63364eb7",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "556-560",
          "preview": ".btn-icon { | background: transparent;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "556-560",
          "preview": ".btn-icon { | background: transparent;"
        }
      ],
      "codePreview": [
        ".btn-icon {",
        "background: transparent;",
        "border: none;",
        "padding: 8px;"
      ]
    },
    {
      "id": "cfca1ea0",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "561-565",
          "preview": "border-radius: 6px; | cursor: pointer; | font-size: 14px;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "561-565",
          "preview": "border-radius: 6px; | cursor: pointer; | font-size: 14px;"
        }
      ],
      "codePreview": [
        "border-radius: 6px;",
        "cursor: pointer;",
        "font-size: 14px;",
        "transition: all 0.2s;",
        "}"
      ]
    },
    {
      "id": "da737a69",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "571-575",
          "preview": ".btn-primary { | background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); | color: white;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "571-575",
          "preview": ".btn-primary { | background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); | color: white;"
        }
      ],
      "codePreview": [
        ".btn-primary {",
        "background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);",
        "color: white;",
        "border: none;",
        "padding: 8px 16px;"
      ]
    },
    {
      "id": "1de59d80",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "576-580",
          "preview": "border-radius: 20px; | cursor: pointer; | font-size: 14px;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "576-580",
          "preview": "border-radius: 20px; | cursor: pointer; | font-size: 14px;"
        }
      ],
      "codePreview": [
        "border-radius: 20px;",
        "cursor: pointer;",
        "font-size: 14px;",
        "font-weight: 500;",
        "display: flex;"
      ]
    },
    {
      "id": "1ebe1d93",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "591-595",
          "preview": ".btn-primary:disabled { | opacity: 0.6; | cursor: not-allowed;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "591-595",
          "preview": ".btn-primary:disabled { | opacity: 0.6; | cursor: not-allowed;"
        }
      ],
      "codePreview": [
        ".btn-primary:disabled {",
        "opacity: 0.6;",
        "cursor: not-allowed;",
        "transform: none;",
        "box-shadow: none;"
      ]
    },
    {
      "id": "07712607",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "601-605",
          "preview": "font-size: 16px; | cursor: pointer; | color: #64748b;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "601-605",
          "preview": "font-size: 16px; | cursor: pointer; | color: #64748b;"
        }
      ],
      "codePreview": [
        "font-size: 16px;",
        "cursor: pointer;",
        "color: #64748b;",
        "padding: 4px;",
        "}"
      ]
    },
    {
      "id": "1ec9ef5d",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "611-615",
          "preview": "/* 响应式设计 */ | @media (max-width: 768px) { | .ai-chatbot-container {"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "611-615",
          "preview": "/* 响应式设计 */ | @media (max-width: 768px) { | .ai-chatbot-container {"
        }
      ],
      "codePreview": [
        "@media (max-width: 768px) {",
        ".ai-chatbot-container {",
        "height: 100vh;",
        "border-radius: 0;"
      ]
    },
    {
      "id": "e672c489",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "641-645",
          "preview": "/* 深色主题支持 */ | @media (prefers-color-scheme: dark) { | .ai-chatbot-container {"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "641-645",
          "preview": "/* 深色主题支持 */ | @media (prefers-color-scheme: dark) { | .ai-chatbot-container {"
        }
      ],
      "codePreview": [
        "@media (prefers-color-scheme: dark) {",
        ".ai-chatbot-container {",
        "background: #1e293b;",
        "color: #f1f5f9;"
      ]
    },
    {
      "id": "d87fcfa7",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "656-660",
          "preview": ".ai-system-message { | background: #1e3a8a;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "656-660",
          "preview": ".ai-system-message { | background: #1e3a8a;"
        }
      ],
      "codePreview": [
        ".ai-system-message {",
        "background: #1e3a8a;",
        "color: #93c5fd;",
        "border-color: #3b82f6;"
      ]
    },
    {
      "id": "517cdcf8",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "716-720",
          "preview": "setTimeout(() => { | if (!this.isConnected) { | this.connectWebSocket();"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "716-720",
          "preview": "setTimeout(() => { | if (!this.isConnected) { | this.connectWebSocket();"
        }
      ],
      "codePreview": [
        "setTimeout(() => {",
        "if (!this.isConnected) {",
        "this.connectWebSocket();",
        "}",
        "}, 3000);"
      ]
    },
    {
      "id": "7b1ccb82",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "736-740",
          "preview": "*/ | bindEvents() { | const sendBtn = document.getElementById('aiSendBtn');"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "736-740",
          "preview": "*/ | bindEvents() { | const sendBtn = document.getElementById('aiSendBtn');"
        }
      ],
      "codePreview": [
        "bindEvents() {",
        "const sendBtn = document.getElementById('aiSendBtn');",
        "const messageInput = document.getElementById('aiMessageInput');",
        "const settingsBtn = document.getElementById('aiSettingsBtn');"
      ]
    },
    {
      "id": "58eebaae",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "761-765",
          "preview": "quickReplies.forEach(item => { | item.addEventListener('click', () => { | const text = item.getAttribute('data-text');"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "761-765",
          "preview": "quickReplies.forEach(item => { | item.addEventListener('click', () => { | const text = item.getAttribute('data-text');"
        }
      ],
      "codePreview": [
        "quickReplies.forEach(item => {",
        "item.addEventListener('click', () => {",
        "const text = item.getAttribute('data-text');",
        "if (text) {",
        "document.getElementById('aiMessageInput').value = text;"
      ]
    },
    {
      "id": "22654306",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "786-790",
          "preview": "const autoReplyToggle = document.getElementById('autoReplyToggle'); | const responseDelaySlider = document.getElementById('responseDelaySlider'); | const handoffThresholdSlider = document.getElementById('handoffThresholdSlider');"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "786-790",
          "preview": "const autoReplyToggle = document.getElementById('autoReplyToggle'); | const responseDelaySlider = document.getElementById('responseDelaySlider'); | const handoffThresholdSlider = document.getElementById('handoffThresholdSlider');"
        }
      ],
      "codePreview": [
        "const autoReplyToggle = document.getElementById('autoReplyToggle');",
        "const responseDelaySlider = document.getElementById('responseDelaySlider');",
        "const handoffThresholdSlider = document.getElementById('handoffThresholdSlider');",
        "settingsCloseBtn?.addEventListener('click', () => this.toggleSettingsPanel());"
      ]
    },
    {
      "id": "ba56965f",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "796-800",
          "preview": "responseDelaySlider?.addEventListener('input', (e) => { | const value = e.target.value;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "796-800",
          "preview": "responseDelaySlider?.addEventListener('input', (e) => { | const value = e.target.value;"
        }
      ],
      "codePreview": [
        "responseDelaySlider?.addEventListener('input', (e) => {",
        "const value = e.target.value;",
        "document.getElementById('responseDelayValue').textContent = `${value}ms`;",
        "});"
      ]
    },
    {
      "id": "c4b22f52",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "801-805",
          "preview": "handoffThresholdSlider?.addEventListener('input', (e) => { | const value = e.target.value;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "801-805",
          "preview": "handoffThresholdSlider?.addEventListener('input', (e) => { | const value = e.target.value;"
        }
      ],
      "codePreview": [
        "handoffThresholdSlider?.addEventListener('input', (e) => {",
        "const value = e.target.value;",
        "this.humanHandoffThreshold = parseFloat(value);",
        "document.getElementById('handoffThresholdValue').textContent = value;"
      ]
    },
    {
      "id": "ee352f73",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "851-855",
          "preview": "this.sendWebSocketMessage({ | type: 'ai_message', | conversationId: this.conversationId,"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "851-855",
          "preview": "this.sendWebSocketMessage({ | type: 'ai_message', | conversationId: this.conversationId,"
        }
      ],
      "codePreview": [
        "this.sendWebSocketMessage({",
        "type: 'ai_message',",
        "conversationId: this.conversationId,",
        "shopId: this.shopId,",
        "message: message,"
      ]
    },
    {
      "id": "7b016ead",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "881-885",
          "preview": "message: message, | conversationId: this.conversationId, | shopId: this.shopId"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "881-885",
          "preview": "message: message, | conversationId: this.conversationId, | shopId: this.shopId"
        }
      ],
      "codePreview": [
        "message: message,",
        "conversationId: this.conversationId,",
        "shopId: this.shopId",
        "})",
        "});"
      ]
    },
    {
      "id": "bc7bdc68",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "906-910",
          "preview": "case 'ai_response': | this.handleAIResponse(data); | break;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "906-910",
          "preview": "case 'ai_response': | this.handleAIResponse(data); | break;"
        }
      ],
      "codePreview": [
        "case 'ai_response':",
        "this.handleAIResponse(data);",
        "break;",
        "case 'ai_suggestions':",
        "this.showSuggestions(data.suggestions);"
      ]
    },
    {
      "id": "7a8a4e4e",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "911-915",
          "preview": "break; | case 'ai_context_update': | this.updateContext(data.context);"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "911-915",
          "preview": "break; | case 'ai_context_update': | this.updateContext(data.context);"
        }
      ],
      "codePreview": [
        "break;",
        "case 'ai_context_update':",
        "this.updateContext(data.context);",
        "break;",
        "case 'ai_error':"
      ]
    },
    {
      "id": "16fe0757",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "936-940",
          "preview": "confidence: confidence, | intent: intent?.name, | sentiment: sentiment?.sentiment_label"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "936-940",
          "preview": "confidence: confidence, | intent: intent?.name, | sentiment: sentiment?.sentiment_label"
        }
      ],
      "codePreview": [
        "confidence: confidence,",
        "intent: intent?.name,",
        "sentiment: sentiment?.sentiment_label",
        "});"
      ]
    },
    {
      "id": "961721b0",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "941-945",
          "preview": "// 更新AI状态 | this.updateAIStatus( | intent?.name || '未知',"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "941-945",
          "preview": "// 更新AI状态 | this.updateAIStatus( | intent?.name || '未知',"
        }
      ],
      "codePreview": [
        "this.updateAIStatus(",
        "intent?.name || '未知',",
        "confidence?.toFixed(2) || '--',",
        "sentiment?.sentiment_label || '中性'"
      ]
    },
    {
      "id": "1fd8ae2e",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "991-995",
          "preview": "const metaElement = document.createElement('div'); | metaElement.className = 'ai-message-meta';"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "991-995",
          "preview": "const metaElement = document.createElement('div'); | metaElement.className = 'ai-message-meta';"
        }
      ],
      "codePreview": [
        "const metaElement = document.createElement('div');",
        "metaElement.className = 'ai-message-meta';",
        "let metaText = new Date().toLocaleTimeString();",
        "if (meta.confidence) {"
      ]
    },
    {
      "id": "5001b592",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "1006-1010",
          "preview": "const badge = document.createElement('span'); | badge.className = 'ai-confidence-badge'; | badge.textContent = `${(meta.confidence * 100).toFixed(0)}%`;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "1006-1010",
          "preview": "const badge = document.createElement('span'); | badge.className = 'ai-confidence-badge'; | badge.textContent = `${(meta.confidence * 100).toFixed(0)}%`;"
        }
      ],
      "codePreview": [
        "const badge = document.createElement('span');",
        "badge.className = 'ai-confidence-badge';",
        "badge.textContent = `${(meta.confidence * 100).toFixed(0)}%`;",
        "metaElement.appendChild(badge);",
        "}"
      ]
    },
    {
      "id": "7d3a46b8",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "1021-1025",
          "preview": "type, | meta, | timestamp: new Date()"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "1021-1025",
          "preview": "type, | meta, | timestamp: new Date()"
        }
      ],
      "codePreview": [
        "type,",
        "meta,",
        "timestamp: new Date()",
        "});",
        "}"
      ]
    },
    {
      "id": "cb9fc404",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "1036-1040",
          "preview": "if (!messageContainer) return; | this.typingIndicator = document.createElement('div');"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "1036-1040",
          "preview": "if (!messageContainer) return; | this.typingIndicator = document.createElement('div');"
        }
      ],
      "codePreview": [
        "if (!messageContainer) return;",
        "this.typingIndicator = document.createElement('div');",
        "this.typingIndicator.className = 'ai-typing-indicator';",
        "this.typingIndicator.innerHTML = `"
      ]
    },
    {
      "id": "15ce71ee",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "1041-1045",
          "preview": "<div class=\"ai-typing-dots\"> | <div class=\"ai-typing-dot\"></div> | <div class=\"ai-typing-dot\"></div>"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "1041-1045",
          "preview": "<div class=\"ai-typing-dots\"> | <div class=\"ai-typing-dot\"></div> | <div class=\"ai-typing-dot\"></div>"
        }
      ],
      "codePreview": [
        "<div class=\"ai-typing-dots\">",
        "<div class=\"ai-typing-dot\"></div>",
        "<div class=\"ai-typing-dot\"></div>",
        "<div class=\"ai-typing-dot\"></div>",
        "</div>"
      ]
    },
    {
      "id": "16d25788",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "1056-1060",
          "preview": "hideTypingIndicator() { | if (this.typingIndicator) { | this.typingIndicator.remove();"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "1056-1060",
          "preview": "hideTypingIndicator() { | if (this.typingIndicator) { | this.typingIndicator.remove();"
        }
      ],
      "codePreview": [
        "hideTypingIndicator() {",
        "if (this.typingIndicator) {",
        "this.typingIndicator.remove();",
        "this.typingIndicator = null;",
        "}"
      ]
    },
    {
      "id": "4a35befc",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "1076-1080",
          "preview": "suggestions.forEach(suggestion => { | const item = document.createElement('div');"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "1076-1080",
          "preview": "suggestions.forEach(suggestion => { | const item = document.createElement('div');"
        }
      ],
      "codePreview": [
        "suggestions.forEach(suggestion => {",
        "const item = document.createElement('div');",
        "item.className = 'ai-suggestion-item';",
        "item.textContent = suggestion.text || suggestion;"
      ]
    },
    {
      "id": "2b7494db",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "1081-1085",
          "preview": "item.addEventListener('click', () => { | document.getElementById('aiMessageInput').value = suggestion.text || suggestion; | this.handleSendMessage();"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "1081-1085",
          "preview": "item.addEventListener('click', () => { | document.getElementById('aiMessageInput').value = suggestion.text || suggestion; | this.handleSendMessage();"
        }
      ],
      "codePreview": [
        "item.addEventListener('click', () => {",
        "document.getElementById('aiMessageInput').value = suggestion.text || suggestion;",
        "this.handleSendMessage();",
        "suggestionsContainer.style.display = 'none';",
        "});"
      ]
    },
    {
      "id": "cf0d1a1c",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "1101-1105",
          "preview": "suggestHumanHandoff(sentiment) { | const urgencyText = sentiment.urgency_level >= 4 ? '紧急' : '重要'; | this.displayMessage("
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "1101-1105",
          "preview": "suggestHumanHandoff(sentiment) { | const urgencyText = sentiment.urgency_level >= 4 ? '紧急' : '重要'; | this.displayMessage("
        }
      ],
      "codePreview": [
        "suggestHumanHandoff(sentiment) {",
        "const urgencyText = sentiment.urgency_level >= 4 ? '紧急' : '重要';",
        "this.displayMessage(",
        "`检测到${urgencyText}情况，建议转接人工客服获得更好的帮助。是否需要转接？`,",
        "'system'"
      ]
    },
    {
      "id": "02f54b6e",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "1126-1130",
          "preview": "handoffButton.className = 'ai-quick-reply-item ai-handoff-button'; | handoffButton.style.background = '#dc2626'; | handoffButton.style.color = 'white';"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "1126-1130",
          "preview": "handoffButton.className = 'ai-quick-reply-item ai-handoff-button'; | handoffButton.style.background = '#dc2626'; | handoffButton.style.color = 'white';"
        }
      ],
      "codePreview": [
        "handoffButton.className = 'ai-quick-reply-item ai-handoff-button';",
        "handoffButton.style.background = '#dc2626';",
        "handoffButton.style.color = 'white';",
        "handoffButton.style.borderColor = '#dc2626';",
        "handoffButton.textContent = '🆘 转接人工客服';"
      ]
    },
    {
      "id": "ac4dd77d",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "1146-1150",
          "preview": "if (this.isConnected) { | this.sendWebSocketMessage({ | type: 'request_human_handoff',"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "1146-1150",
          "preview": "if (this.isConnected) { | this.sendWebSocketMessage({ | type: 'request_human_handoff',"
        }
      ],
      "codePreview": [
        "if (this.isConnected) {",
        "this.sendWebSocketMessage({",
        "type: 'request_human_handoff',",
        "conversationId: this.conversationId,",
        "shopId: this.shopId,"
      ]
    },
    {
      "id": "f15763a0",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "1186-1190",
          "preview": "*/ | updateAIStatus(analysis, confidence, sentiment) { | const analysisElement = document.getElementById('aiAnalysisStatus');"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "1186-1190",
          "preview": "*/ | updateAIStatus(analysis, confidence, sentiment) { | const analysisElement = document.getElementById('aiAnalysisStatus');"
        }
      ],
      "codePreview": [
        "updateAIStatus(analysis, confidence, sentiment) {",
        "const analysisElement = document.getElementById('aiAnalysisStatus');",
        "const confidenceElement = document.getElementById('aiConfidenceScore');",
        "const sentimentElement = document.getElementById('aiSentimentScore');"
      ]
    },
    {
      "id": "d9c40d32",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "1191-1195",
          "preview": "if (analysisElement) analysisElement.textContent = analysis; | if (confidenceElement) confidenceElement.textContent = confidence;"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "1191-1195",
          "preview": "if (analysisElement) analysisElement.textContent = analysis; | if (confidenceElement) confidenceElement.textContent = confidence;"
        }
      ],
      "codePreview": [
        "if (analysisElement) analysisElement.textContent = analysis;",
        "if (confidenceElement) confidenceElement.textContent = confidence;",
        "if (sentimentElement) {",
        "sentimentElement.textContent = sentiment;"
      ]
    },
    {
      "id": "284ddfcb",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "1206-1210",
          "preview": "getSentimentColor(sentiment) { | switch (sentiment) { | case 'very_positive':"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "1206-1210",
          "preview": "getSentimentColor(sentiment) { | switch (sentiment) { | case 'very_positive':"
        }
      ],
      "codePreview": [
        "getSentimentColor(sentiment) {",
        "switch (sentiment) {",
        "case 'very_positive':",
        "case 'positive':",
        "return '#059669';"
      ]
    },
    {
      "id": "db0eac1f",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "1211-1215",
          "preview": "case 'very_negative': | case 'negative': | return '#dc2626';"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "1211-1215",
          "preview": "case 'very_negative': | case 'negative': | return '#dc2626';"
        }
      ],
      "codePreview": [
        "case 'very_negative':",
        "case 'negative':",
        "return '#dc2626';",
        "default:",
        "return '#64748b';"
      ]
    },
    {
      "id": "772d9305",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "1256-1260",
          "preview": "'您好！我是AI智能客服助手，很高兴为您服务！\\n\\n我可以帮助您：\\n• 回答常见问题\\n• 提供产品信息\\n• 处理售后咨询\\n• 解决技术问题\\n\\n请输入您的问题，或点击下方快速回复开始对话。', | 'bot', | { confidence: 1.0, intent: 'greeting' }"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "1256-1260",
          "preview": "'您好！我是AI智能客服助手，很高兴为您服务！\\n\\n我可以帮助您：\\n• 回答常见问题\\n• 提供产品信息\\n• 处理售后咨询\\n• 解决技术问题\\n\\n请输入您的问题，或点击下方快速回复开始对话。', | 'bot', | { confidence: 1.0, intent: 'greeting' }"
        }
      ],
      "codePreview": [
        "'您好！我是AI智能客服助手，很高兴为您服务！\\n\\n我可以帮助您：\\n• 回答常见问题\\n• 提供产品信息\\n• 处理售后咨询\\n• 解决技术问题\\n\\n请输入您的问题，或点击下方快速回复开始对话。',",
        "'bot',",
        "{ confidence: 1.0, intent: 'greeting' }",
        ");",
        "}, 500);"
      ]
    },
    {
      "id": "34b3960d",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "1266-1270",
          "preview": "toggleSettingsPanel() { | const panel = document.getElementById('aiSettingsPanel'); | if (panel) {"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "1266-1270",
          "preview": "toggleSettingsPanel() { | const panel = document.getElementById('aiSettingsPanel'); | if (panel) {"
        }
      ],
      "codePreview": [
        "toggleSettingsPanel() {",
        "const panel = document.getElementById('aiSettingsPanel');",
        "if (panel) {",
        "panel.style.display = panel.style.display === 'none' ? 'block' : 'none';",
        "}"
      ]
    },
    {
      "id": "313a36bb",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "1276-1280",
          "preview": "closeChatBot() { | if (confirm('确定要关闭AI聊天机器人吗？')) { | // 断开WebSocket连接"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "1276-1280",
          "preview": "closeChatBot() { | if (confirm('确定要关闭AI聊天机器人吗？')) { | // 断开WebSocket连接"
        }
      ],
      "codePreview": [
        "closeChatBot() {",
        "if (confirm('确定要关闭AI聊天机器人吗？')) {",
        "if (this.websocket) {",
        "this.websocket.close();"
      ]
    },
    {
      "id": "3a04a313",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\chatbot.js",
          "lines": "1331-1335",
          "preview": "*/ | clearMessageHistory() { | this.messageHistory = [];"
        },
        {
          "file": "static\\js\\ai-chatbot.js",
          "lines": "1331-1335",
          "preview": "*/ | clearMessageHistory() { | this.messageHistory = [];"
        }
      ],
      "codePreview": [
        "clearMessageHistory() {",
        "this.messageHistory = [];",
        "const messageContainer = document.querySelector('.ai-message-container');",
        "if (messageContainer) {"
      ]
    },
    {
      "id": "7b783252",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "66-70",
          "preview": "createAIInterface() { | const container = document.getElementById(this.options.containerId) || document.body;"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "66-70",
          "preview": "createAIInterface() { | const container = document.getElementById(this.options.containerId) || document.body;"
        }
      ],
      "codePreview": [
        "createAIInterface() {",
        "const container = document.getElementById(this.options.containerId) || document.body;",
        "const aiInterface = document.createElement('div');",
        "aiInterface.className = 'ai-assistant-interface';"
      ]
    },
    {
      "id": "7a85d320",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "71-75",
          "preview": "aiInterface.innerHTML = ` | <div class=\"ai-assistant-header\"> | <div class=\"ai-assistant-title\">"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "71-75",
          "preview": "aiInterface.innerHTML = ` | <div class=\"ai-assistant-header\"> | <div class=\"ai-assistant-title\">"
        }
      ],
      "codePreview": [
        "aiInterface.innerHTML = `",
        "<div class=\"ai-assistant-header\">",
        "<div class=\"ai-assistant-title\">",
        "<i class=\"fas fa-robot\"></i>",
        "<span>AI智能助手</span>"
      ]
    },
    {
      "id": "96d35735",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "76-80",
          "preview": "<div class=\"ai-status-indicator\" id=\"ai-status\"> | <span class=\"status-dot\"></span> | <span class=\"status-text\">就绪</span>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "76-80",
          "preview": "<div class=\"ai-status-indicator\" id=\"ai-status\"> | <span class=\"status-dot\"></span> | <span class=\"status-text\">就绪</span>"
        }
      ],
      "codePreview": [
        "<div class=\"ai-status-indicator\" id=\"ai-status\">",
        "<span class=\"status-dot\"></span>",
        "<span class=\"status-text\">就绪</span>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "398f00b8",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "81-85",
          "preview": "<div class=\"ai-assistant-controls\"> | <button class=\"ai-toggle-btn\" id=\"ai-toggle\"> | <i class=\"fas fa-power-off\"></i>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "81-85",
          "preview": "<div class=\"ai-assistant-controls\"> | <button class=\"ai-toggle-btn\" id=\"ai-toggle\"> | <i class=\"fas fa-power-off\"></i>"
        }
      ],
      "codePreview": [
        "<div class=\"ai-assistant-controls\">",
        "<button class=\"ai-toggle-btn\" id=\"ai-toggle\">",
        "<i class=\"fas fa-power-off\"></i>",
        "</button>",
        "<button class=\"ai-settings-btn\" id=\"ai-settings\">"
      ]
    },
    {
      "id": "4b6a94f5",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "86-90",
          "preview": "<i class=\"fas fa-cog\"></i> | </button> | </div>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "86-90",
          "preview": "<i class=\"fas fa-cog\"></i> | </button> | </div>"
        }
      ],
      "codePreview": [
        "<i class=\"fas fa-cog\"></i>",
        "</button>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "f93e49bc",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "91-95",
          "preview": "<div class=\"ai-assistant-content\" id=\"ai-content\"> | <!-- 回复建议面板 --> | <div class=\"ai-panel reply-suggestions-panel\">"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "91-95",
          "preview": "<div class=\"ai-assistant-content\" id=\"ai-content\"> | <!-- 回复建议面板 --> | <div class=\"ai-panel reply-suggestions-panel\">"
        }
      ],
      "codePreview": [
        "<div class=\"ai-assistant-content\" id=\"ai-content\">",
        "<!-- 回复建议面板 -->",
        "<div class=\"ai-panel reply-suggestions-panel\">",
        "<div class=\"panel-header\">",
        "<h4><i class=\"fas fa-lightbulb\"></i> 智能回复建议</h4>"
      ]
    },
    {
      "id": "90a60299",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "96-100",
          "preview": "<button class=\"refresh-btn\" id=\"refresh-suggestions\"> | <i class=\"fas fa-sync-alt\"></i> | </button>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "96-100",
          "preview": "<button class=\"refresh-btn\" id=\"refresh-suggestions\"> | <i class=\"fas fa-sync-alt\"></i> | </button>"
        }
      ],
      "codePreview": [
        "<button class=\"refresh-btn\" id=\"refresh-suggestions\">",
        "<i class=\"fas fa-sync-alt\"></i>",
        "</button>",
        "</div>",
        "<div class=\"panel-content\">"
      ]
    },
    {
      "id": "6147df76",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "101-105",
          "preview": "<div class=\"suggestions-container\" id=\"suggestions-container\"> | <div class=\"no-suggestions\"> | <i class=\"fas fa-comment-dots\"></i>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "101-105",
          "preview": "<div class=\"suggestions-container\" id=\"suggestions-container\"> | <div class=\"no-suggestions\"> | <i class=\"fas fa-comment-dots\"></i>"
        }
      ],
      "codePreview": [
        "<div class=\"suggestions-container\" id=\"suggestions-container\">",
        "<div class=\"no-suggestions\">",
        "<i class=\"fas fa-comment-dots\"></i>",
        "<p>选择对话以获取智能回复建议</p>",
        "</div>"
      ]
    },
    {
      "id": "7f7688af",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "106-110",
          "preview": "</div> | </div> | </div>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "106-110",
          "preview": "</div> | </div> | </div>"
        }
      ],
      "codePreview": [
        "</div>",
        "</div>",
        "</div>",
        "<!-- 消息分析面板 -->"
      ]
    },
    {
      "id": "314f0894",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "111-115",
          "preview": "<div class=\"ai-panel message-analysis-panel\" style=\"display: ${this.options.showAnalysis ? 'block' : 'none'};\"> | <div class=\"panel-header\"> | <h4><i class=\"fas fa-analytics\"></i> 消息分析</h4>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "111-115",
          "preview": "<div class=\"ai-panel message-analysis-panel\" style=\"display: ${this.options.showAnalysis ? 'block' : 'none'};\"> | <div class=\"panel-header\"> | <h4><i class=\"fas fa-analytics\"></i> 消息分析</h4>"
        }
      ],
      "codePreview": [
        "<div class=\"ai-panel message-analysis-panel\" style=\"display: ${this.options.showAnalysis ? 'block' : 'none'};\">",
        "<div class=\"panel-header\">",
        "<h4><i class=\"fas fa-analytics\"></i> 消息分析</h4>",
        "<button class=\"toggle-analysis-btn\" id=\"toggle-analysis\">",
        "<i class=\"fas fa-eye\"></i>"
      ]
    },
    {
      "id": "1967baf8",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "116-120",
          "preview": "</button> | </div> | <div class=\"panel-content\">"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "116-120",
          "preview": "</button> | </div> | <div class=\"panel-content\">"
        }
      ],
      "codePreview": [
        "</button>",
        "</div>",
        "<div class=\"panel-content\">",
        "<div class=\"analysis-container\" id=\"analysis-container\">",
        "<!-- 意图识别 -->"
      ]
    },
    {
      "id": "d13bc8d1",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "121-125",
          "preview": "<div class=\"analysis-item\"> | <label>意图识别:</label> | <div class=\"intent-result\" id=\"intent-result\">"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "121-125",
          "preview": "<div class=\"analysis-item\"> | <label>意图识别:</label> | <div class=\"intent-result\" id=\"intent-result\">"
        }
      ],
      "codePreview": [
        "<div class=\"analysis-item\">",
        "<label>意图识别:</label>",
        "<div class=\"intent-result\" id=\"intent-result\">",
        "<span class=\"intent-label\">未知</span>",
        "<span class=\"confidence-score\">0%</span>"
      ]
    },
    {
      "id": "e1dc35e3",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "126-130",
          "preview": "</div> | </div>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "126-130",
          "preview": "</div> | </div>"
        }
      ],
      "codePreview": [
        "</div>",
        "</div>",
        "<!-- 情感分析 -->",
        "<div class=\"analysis-item\">"
      ]
    },
    {
      "id": "5a98f899",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "131-135",
          "preview": "<label>情感分析:</label> | <div class=\"sentiment-result\" id=\"sentiment-result\"> | <span class=\"sentiment-label neutral\">中性</span>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "131-135",
          "preview": "<label>情感分析:</label> | <div class=\"sentiment-result\" id=\"sentiment-result\"> | <span class=\"sentiment-label neutral\">中性</span>"
        }
      ],
      "codePreview": [
        "<label>情感分析:</label>",
        "<div class=\"sentiment-result\" id=\"sentiment-result\">",
        "<span class=\"sentiment-label neutral\">中性</span>",
        "<div class=\"sentiment-meter\">",
        "<div class=\"sentiment-bar\" id=\"sentiment-bar\"></div>"
      ]
    },
    {
      "id": "f29759b8",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "136-140",
          "preview": "</div> | </div> | </div>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "136-140",
          "preview": "</div> | </div> | </div>"
        }
      ],
      "codePreview": [
        "</div>",
        "</div>",
        "</div>",
        "<!-- 关键词 -->"
      ]
    },
    {
      "id": "9a2ce583",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "141-145",
          "preview": "<div class=\"analysis-item\"> | <label>关键词:</label> | <div class=\"keywords-container\" id=\"keywords-container\">"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "141-145",
          "preview": "<div class=\"analysis-item\"> | <label>关键词:</label> | <div class=\"keywords-container\" id=\"keywords-container\">"
        }
      ],
      "codePreview": [
        "<div class=\"analysis-item\">",
        "<label>关键词:</label>",
        "<div class=\"keywords-container\" id=\"keywords-container\">",
        "<span class=\"no-keywords\">暂无关键词</span>",
        "</div>"
      ]
    },
    {
      "id": "d2624063",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "146-150",
          "preview": "</div> | <!-- 实体识别 -->"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "146-150",
          "preview": "</div> | <!-- 实体识别 -->"
        }
      ],
      "codePreview": [
        "</div>",
        "<!-- 实体识别 -->",
        "<div class=\"analysis-item\">",
        "<label>实体识别:</label>"
      ]
    },
    {
      "id": "9e5c4482",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "151-155",
          "preview": "<div class=\"entities-container\" id=\"entities-container\"> | <span class=\"no-entities\">暂无实体</span> | </div>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "151-155",
          "preview": "<div class=\"entities-container\" id=\"entities-container\"> | <span class=\"no-entities\">暂无实体</span> | </div>"
        }
      ],
      "codePreview": [
        "<div class=\"entities-container\" id=\"entities-container\">",
        "<span class=\"no-entities\">暂无实体</span>",
        "</div>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "4cdba4df",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "156-160",
          "preview": "</div> | </div>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "156-160",
          "preview": "</div> | </div>"
        }
      ],
      "codePreview": [
        "</div>",
        "</div>",
        "<!-- 自动回复面板 -->",
        "<div class=\"ai-panel auto-reply-panel\">"
      ]
    },
    {
      "id": "e36346a4",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "161-165",
          "preview": "<div class=\"panel-header\"> | <h4><i class=\"fas fa-magic\"></i> 自动回复</h4> | <div class=\"auto-reply-toggle\">"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "161-165",
          "preview": "<div class=\"panel-header\"> | <h4><i class=\"fas fa-magic\"></i> 自动回复</h4> | <div class=\"auto-reply-toggle\">"
        }
      ],
      "codePreview": [
        "<div class=\"panel-header\">",
        "<h4><i class=\"fas fa-magic\"></i> 自动回复</h4>",
        "<div class=\"auto-reply-toggle\">",
        "<input type=\"checkbox\" id=\"auto-reply-enabled\" class=\"toggle-switch\">",
        "<label for=\"auto-reply-enabled\"></label>"
      ]
    },
    {
      "id": "c466ace6",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "166-170",
          "preview": "</div> | </div> | <div class=\"panel-content\">"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "166-170",
          "preview": "</div> | </div> | <div class=\"panel-content\">"
        }
      ],
      "codePreview": [
        "</div>",
        "</div>",
        "<div class=\"panel-content\">",
        "<div class=\"auto-reply-result\" id=\"auto-reply-result\">",
        "<div class=\"no-auto-reply\">"
      ]
    },
    {
      "id": "ff3c1fbf",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "171-175",
          "preview": "<i class=\"fas fa-robot\"></i> | <p>暂无自动回复建议</p> | </div>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "171-175",
          "preview": "<i class=\"fas fa-robot\"></i> | <p>暂无自动回复建议</p> | </div>"
        }
      ],
      "codePreview": [
        "<i class=\"fas fa-robot\"></i>",
        "<p>暂无自动回复建议</p>",
        "</div>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "cbc32723",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "176-180",
          "preview": "</div> | <!-- 知识库快速搜索 -->"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "176-180",
          "preview": "</div> | <!-- 知识库快速搜索 -->"
        }
      ],
      "codePreview": [
        "</div>",
        "<!-- 知识库快速搜索 -->",
        "<div class=\"ai-panel knowledge-search-panel\">",
        "<div class=\"panel-header\">"
      ]
    },
    {
      "id": "a6e80e48",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "181-185",
          "preview": "<h4><i class=\"fas fa-search\"></i> 知识库搜索</h4> | </div> | <div class=\"panel-content\">"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "181-185",
          "preview": "<h4><i class=\"fas fa-search\"></i> 知识库搜索</h4> | </div> | <div class=\"panel-content\">"
        }
      ],
      "codePreview": [
        "<h4><i class=\"fas fa-search\"></i> 知识库搜索</h4>",
        "</div>",
        "<div class=\"panel-content\">",
        "<div class=\"search-input-container\">",
        "<input type=\"text\" id=\"kb-search-input\" placeholder=\"搜索知识库...\" class=\"search-input\">"
      ]
    },
    {
      "id": "8615f150",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "186-190",
          "preview": "<button class=\"search-btn\" id=\"kb-search-btn\"> | <i class=\"fas fa-search\"></i> | </button>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "186-190",
          "preview": "<button class=\"search-btn\" id=\"kb-search-btn\"> | <i class=\"fas fa-search\"></i> | </button>"
        }
      ],
      "codePreview": [
        "<button class=\"search-btn\" id=\"kb-search-btn\">",
        "<i class=\"fas fa-search\"></i>",
        "</button>",
        "</div>",
        "<div class=\"search-results\" id=\"kb-search-results\">"
      ]
    },
    {
      "id": "46348c66",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "191-195",
          "preview": "<!-- 搜索结果将在这里显示 --> | </div> | </div>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "191-195",
          "preview": "<!-- 搜索结果将在这里显示 --> | </div> | </div>"
        }
      ],
      "codePreview": [
        "<!-- 搜索结果将在这里显示 -->",
        "</div>",
        "</div>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "84b20d28",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "196-200",
          "preview": "<!-- AI设置模态框 --> | <div class=\"ai-settings-modal\" id=\"ai-settings-modal\" style=\"display: none;\">"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "196-200",
          "preview": "<!-- AI设置模态框 --> | <div class=\"ai-settings-modal\" id=\"ai-settings-modal\" style=\"display: none;\">"
        }
      ],
      "codePreview": [
        "<!-- AI设置模态框 -->",
        "<div class=\"ai-settings-modal\" id=\"ai-settings-modal\" style=\"display: none;\">",
        "<div class=\"modal-content\">",
        "<div class=\"modal-header\">"
      ]
    },
    {
      "id": "2e93caa4",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "201-205",
          "preview": "<h3>AI助手设置</h3> | <button class=\"close-btn\" id=\"close-settings\"> | <i class=\"fas fa-times\"></i>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "201-205",
          "preview": "<h3>AI助手设置</h3> | <button class=\"close-btn\" id=\"close-settings\"> | <i class=\"fas fa-times\"></i>"
        }
      ],
      "codePreview": [
        "<h3>AI助手设置</h3>",
        "<button class=\"close-btn\" id=\"close-settings\">",
        "<i class=\"fas fa-times\"></i>",
        "</button>",
        "</div>"
      ]
    },
    {
      "id": "d48ce8ba",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "206-210",
          "preview": "<div class=\"modal-body\"> | <div class=\"settings-section\"> | <h4>基本设置</h4>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "206-210",
          "preview": "<div class=\"modal-body\"> | <div class=\"settings-section\"> | <h4>基本设置</h4>"
        }
      ],
      "codePreview": [
        "<div class=\"modal-body\">",
        "<div class=\"settings-section\">",
        "<h4>基本设置</h4>",
        "<div class=\"setting-item\">",
        "<label>置信度阈值:</label>"
      ]
    },
    {
      "id": "b9b62896",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "211-215",
          "preview": "<input type=\"range\" id=\"confidence-threshold\" min=\"0.1\" max=\"1\" step=\"0.1\" value=\"0.7\"> | <span class=\"threshold-value\">0.7</span> | </div>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "211-215",
          "preview": "<input type=\"range\" id=\"confidence-threshold\" min=\"0.1\" max=\"1\" step=\"0.1\" value=\"0.7\"> | <span class=\"threshold-value\">0.7</span> | </div>"
        }
      ],
      "codePreview": [
        "<input type=\"range\" id=\"confidence-threshold\" min=\"0.1\" max=\"1\" step=\"0.1\" value=\"0.7\">",
        "<span class=\"threshold-value\">0.7</span>",
        "</div>",
        "<div class=\"setting-item\">",
        "<label>最大建议数量:</label>"
      ]
    },
    {
      "id": "907e33d8",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "216-220",
          "preview": "<input type=\"number\" id=\"max-suggestions\" min=\"1\" max=\"10\" value=\"5\"> | </div> | <div class=\"setting-item\">"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "216-220",
          "preview": "<input type=\"number\" id=\"max-suggestions\" min=\"1\" max=\"10\" value=\"5\"> | </div> | <div class=\"setting-item\">"
        }
      ],
      "codePreview": [
        "<input type=\"number\" id=\"max-suggestions\" min=\"1\" max=\"10\" value=\"5\">",
        "</div>",
        "<div class=\"setting-item\">",
        "<label>自动刷新间隔(秒):</label>",
        "<input type=\"number\" id=\"refresh-interval\" min=\"5\" max=\"60\" value=\"10\">"
      ]
    },
    {
      "id": "42eb75a6",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "221-225",
          "preview": "</div> | </div>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "221-225",
          "preview": "</div> | </div>"
        }
      ],
      "codePreview": [
        "</div>",
        "</div>",
        "<div class=\"settings-section\">",
        "<h4>显示设置</h4>"
      ]
    },
    {
      "id": "ece6c157",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "226-230",
          "preview": "<div class=\"setting-item\"> | <label> | <input type=\"checkbox\" id=\"show-analysis\" checked>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "226-230",
          "preview": "<div class=\"setting-item\"> | <label> | <input type=\"checkbox\" id=\"show-analysis\" checked>"
        }
      ],
      "codePreview": [
        "<div class=\"setting-item\">",
        "<label>",
        "<input type=\"checkbox\" id=\"show-analysis\" checked>",
        "显示消息分析",
        "</label>"
      ]
    },
    {
      "id": "79faf491",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "231-235",
          "preview": "</div> | <div class=\"setting-item\"> | <label>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "231-235",
          "preview": "</div> | <div class=\"setting-item\"> | <label>"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"setting-item\">",
        "<label>",
        "<input type=\"checkbox\" id=\"show-confidence\" checked>",
        "显示置信度"
      ]
    },
    {
      "id": "c4776560",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "236-240",
          "preview": "</label> | </div> | <div class=\"setting-item\">"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "236-240",
          "preview": "</label> | </div> | <div class=\"setting-item\">"
        }
      ],
      "codePreview": [
        "</label>",
        "</div>",
        "<div class=\"setting-item\">",
        "<label>",
        "<input type=\"checkbox\" id=\"enable-sound\" checked>"
      ]
    },
    {
      "id": "19c077da",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "241-245",
          "preview": "启用声音提示 | </label> | </div>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "241-245",
          "preview": "启用声音提示 | </label> | </div>"
        }
      ],
      "codePreview": [
        "启用声音提示",
        "</label>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "e4646d5e",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "246-250",
          "preview": "<div class=\"settings-section\"> | <h4>学习设置</h4> | <div class=\"setting-item\">"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "246-250",
          "preview": "<div class=\"settings-section\"> | <h4>学习设置</h4> | <div class=\"setting-item\">"
        }
      ],
      "codePreview": [
        "<div class=\"settings-section\">",
        "<h4>学习设置</h4>",
        "<div class=\"setting-item\">",
        "<label>",
        "<input type=\"checkbox\" id=\"enable-learning\" checked>"
      ]
    },
    {
      "id": "4eb046c4",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "251-255",
          "preview": "启用智能学习 | </label> | </div>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "251-255",
          "preview": "启用智能学习 | </label> | </div>"
        }
      ],
      "codePreview": [
        "启用智能学习",
        "</label>",
        "</div>",
        "<div class=\"setting-item\">",
        "<label>"
      ]
    },
    {
      "id": "794c38a8",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "256-260",
          "preview": "<input type=\"checkbox\" id=\"auto-improve\" checked> | 自动改进建议 | </label>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "256-260",
          "preview": "<input type=\"checkbox\" id=\"auto-improve\" checked> | 自动改进建议 | </label>"
        }
      ],
      "codePreview": [
        "<input type=\"checkbox\" id=\"auto-improve\" checked>",
        "自动改进建议",
        "</label>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "0e7ab391",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "261-265",
          "preview": "</div> | <div class=\"modal-footer\"> | <button class=\"btn btn-secondary\" id=\"reset-settings\">重置</button>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "261-265",
          "preview": "</div> | <div class=\"modal-footer\"> | <button class=\"btn btn-secondary\" id=\"reset-settings\">重置</button>"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"modal-footer\">",
        "<button class=\"btn btn-secondary\" id=\"reset-settings\">重置</button>",
        "<button class=\"btn btn-primary\" id=\"save-settings\">保存设置</button>",
        "</div>"
      ]
    },
    {
      "id": "660323f5",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "276-280",
          "preview": "bindEventListeners() { | // AI开关 | const toggleBtn = document.getElementById('ai-toggle');"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "276-280",
          "preview": "bindEventListeners() { | // AI开关 | const toggleBtn = document.getElementById('ai-toggle');"
        }
      ],
      "codePreview": [
        "bindEventListeners() {",
        "const toggleBtn = document.getElementById('ai-toggle');",
        "if (toggleBtn) {",
        "toggleBtn.addEventListener('click', () => this.toggleAI());"
      ]
    },
    {
      "id": "067ffdb7",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "311-315",
          "preview": "searchBtn.addEventListener('click', () => this.searchKnowledgeBase()); | searchInput.addEventListener('keypress', (e) => { | if (e.key === 'Enter') {"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "311-315",
          "preview": "searchBtn.addEventListener('click', () => this.searchKnowledgeBase()); | searchInput.addEventListener('keypress', (e) => { | if (e.key === 'Enter') {"
        }
      ],
      "codePreview": [
        "searchBtn.addEventListener('click', () => this.searchKnowledgeBase());",
        "searchInput.addEventListener('keypress', (e) => {",
        "if (e.key === 'Enter') {",
        "this.searchKnowledgeBase();",
        "}"
      ]
    },
    {
      "id": "08b7b497",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "331-335",
          "preview": "const saveBtn = document.getElementById('save-settings'); | const resetBtn = document.getElementById('reset-settings'); | const modal = document.getElementById('ai-settings-modal');"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "331-335",
          "preview": "const saveBtn = document.getElementById('save-settings'); | const resetBtn = document.getElementById('reset-settings'); | const modal = document.getElementById('ai-settings-modal');"
        }
      ],
      "codePreview": [
        "const saveBtn = document.getElementById('save-settings');",
        "const resetBtn = document.getElementById('reset-settings');",
        "const modal = document.getElementById('ai-settings-modal');",
        "if (closeBtn) {"
      ]
    },
    {
      "id": "6756d53e",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "356-360",
          "preview": "// 置信度阈值滑块 | const thresholdSlider = document.getElementById('confidence-threshold'); | if (thresholdSlider) {"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "356-360",
          "preview": "// 置信度阈值滑块 | const thresholdSlider = document.getElementById('confidence-threshold'); | if (thresholdSlider) {"
        }
      ],
      "codePreview": [
        "const thresholdSlider = document.getElementById('confidence-threshold');",
        "if (thresholdSlider) {",
        "thresholdSlider.addEventListener('input', (e) => {",
        "const valueSpan = document.querySelector('.threshold-value');"
      ]
    },
    {
      "id": "b76870ca",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "371-375",
          "preview": "startRealTimeFeatures() { | // 定期刷新建议 | this.refreshInterval = setInterval(() => {"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "371-375",
          "preview": "startRealTimeFeatures() { | // 定期刷新建议 | this.refreshInterval = setInterval(() => {"
        }
      ],
      "codePreview": [
        "startRealTimeFeatures() {",
        "this.refreshInterval = setInterval(() => {",
        "if (this.isEnabled && this.currentConversationId) {",
        "this.refreshSuggestions();"
      ]
    },
    {
      "id": "0970ec0f",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "391-395",
          "preview": "messageInput.addEventListener('input', (e) => { | clearTimeout(debounceTimer);"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "391-395",
          "preview": "messageInput.addEventListener('input', (e) => { | clearTimeout(debounceTimer);"
        }
      ],
      "codePreview": [
        "messageInput.addEventListener('input', (e) => {",
        "clearTimeout(debounceTimer);",
        "debounceTimer = setTimeout(() => {",
        "if (this.isEnabled && e.target.value.trim()) {"
      ]
    },
    {
      "id": "cf1d4711",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "416-420",
          "preview": "if (this.isEnabled) { | toggleBtn.classList.add('active'); | statusIndicator.querySelector('.status-text').textContent = '已启用';"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "416-420",
          "preview": "if (this.isEnabled) { | toggleBtn.classList.add('active'); | statusIndicator.querySelector('.status-text').textContent = '已启用';"
        }
      ],
      "codePreview": [
        "if (this.isEnabled) {",
        "toggleBtn.classList.add('active');",
        "statusIndicator.querySelector('.status-text').textContent = '已启用';",
        "statusIndicator.querySelector('.status-dot').className = 'status-dot active';",
        "content.style.display = 'block';"
      ]
    },
    {
      "id": "2624e36a",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "521-525",
          "preview": "headers: { | 'Content-Type': 'application/json' | },"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "521-525",
          "preview": "headers: { | 'Content-Type': 'application/json' | },"
        }
      ],
      "codePreview": [
        "headers: {",
        "'Content-Type': 'application/json'",
        "},",
        "body: JSON.stringify({",
        "conversationId: this.currentConversationId,"
      ]
    },
    {
      "id": "2488aafe",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "566-570",
          "preview": "const lastElement = messageElements[messageElements.length - 1]; | const textElement = lastElement.querySelector('.message-text, .text-content, .content');"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "566-570",
          "preview": "const lastElement = messageElements[messageElements.length - 1]; | const textElement = lastElement.querySelector('.message-text, .text-content, .content');"
        }
      ],
      "codePreview": [
        "const lastElement = messageElements[messageElements.length - 1];",
        "const textElement = lastElement.querySelector('.message-text, .text-content, .content');",
        "if (textElement) {",
        "return {"
      ]
    },
    {
      "id": "9a5cf5c5",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "591-595",
          "preview": "if (!suggestions || suggestions.length === 0) { | container.innerHTML = `"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "591-595",
          "preview": "if (!suggestions || suggestions.length === 0) { | container.innerHTML = `"
        }
      ],
      "codePreview": [
        "if (!suggestions || suggestions.length === 0) {",
        "container.innerHTML = `",
        "<div class=\"no-suggestions\">",
        "<i class=\"fas fa-comment-dots\"></i>"
      ]
    },
    {
      "id": "66d49e11",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "601-605",
          "preview": "container.innerHTML = suggestions.map((suggestion, index) => ` | <div class=\"suggestion-item\" data-index=\"${index}\">"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "601-605",
          "preview": "container.innerHTML = suggestions.map((suggestion, index) => ` | <div class=\"suggestion-item\" data-index=\"${index}\">"
        }
      ],
      "codePreview": [
        "container.innerHTML = suggestions.map((suggestion, index) => `",
        "<div class=\"suggestion-item\" data-index=\"${index}\">",
        "<div class=\"suggestion-content\">",
        "<div class=\"suggestion-text\">${this.escapeHtml(suggestion.text)}</div>"
      ]
    },
    {
      "id": "b80713eb",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "606-610",
          "preview": "<div class=\"suggestion-meta\"> | <span class=\"suggestion-type\">${this.getSuggestionTypeText(suggestion.type)}</span> | <span class=\"confidence-score\" style=\"display: ${this.options.showConfidence ? 'inline' : 'none'};\">"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "606-610",
          "preview": "<div class=\"suggestion-meta\"> | <span class=\"suggestion-type\">${this.getSuggestionTypeText(suggestion.type)}</span> | <span class=\"confidence-score\" style=\"display: ${this.options.showConfidence ? 'inline' : 'none'};\">"
        }
      ],
      "codePreview": [
        "<div class=\"suggestion-meta\">",
        "<span class=\"suggestion-type\">${this.getSuggestionTypeText(suggestion.type)}</span>",
        "<span class=\"confidence-score\" style=\"display: ${this.options.showConfidence ? 'inline' : 'none'};\">",
        "置信度: ${Math.round(suggestion.confidence * 100)}%",
        "</span>"
      ]
    },
    {
      "id": "6d4e17ab",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "611-615",
          "preview": "</div> | </div> | <div class=\"suggestion-actions\">"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "611-615",
          "preview": "</div> | </div> | <div class=\"suggestion-actions\">"
        }
      ],
      "codePreview": [
        "</div>",
        "</div>",
        "<div class=\"suggestion-actions\">",
        "<button class=\"use-suggestion-btn\" onclick=\"aiAssistant.useSuggestion(${index})\">",
        "<i class=\"fas fa-check\"></i>"
      ]
    },
    {
      "id": "8fc4dd0c",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "616-620",
          "preview": "</button> | <button class=\"edit-suggestion-btn\" onclick=\"aiAssistant.editSuggestion(${index})\"> | <i class=\"fas fa-edit\"></i>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "616-620",
          "preview": "</button> | <button class=\"edit-suggestion-btn\" onclick=\"aiAssistant.editSuggestion(${index})\"> | <i class=\"fas fa-edit\"></i>"
        }
      ],
      "codePreview": [
        "</button>",
        "<button class=\"edit-suggestion-btn\" onclick=\"aiAssistant.editSuggestion(${index})\">",
        "<i class=\"fas fa-edit\"></i>",
        "</button>",
        "<button class=\"feedback-btn positive\" onclick=\"aiAssistant.giveFeedback(${index}, 'positive')\">"
      ]
    },
    {
      "id": "666e0e8a",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "621-625",
          "preview": "<i class=\"fas fa-thumbs-up\"></i> | </button> | <button class=\"feedback-btn negative\" onclick=\"aiAssistant.giveFeedback(${index}, 'negative')\">"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "621-625",
          "preview": "<i class=\"fas fa-thumbs-up\"></i> | </button> | <button class=\"feedback-btn negative\" onclick=\"aiAssistant.giveFeedback(${index}, 'negative')\">"
        }
      ],
      "codePreview": [
        "<i class=\"fas fa-thumbs-up\"></i>",
        "</button>",
        "<button class=\"feedback-btn negative\" onclick=\"aiAssistant.giveFeedback(${index}, 'negative')\">",
        "<i class=\"fas fa-thumbs-down\"></i>",
        "</button>"
      ]
    },
    {
      "id": "f6b14e3c",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "641-645",
          "preview": "if (analysis.intent) { | const intentResult = document.getElementById('intent-result'); | if (intentResult) {"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "641-645",
          "preview": "if (analysis.intent) { | const intentResult = document.getElementById('intent-result'); | if (intentResult) {"
        }
      ],
      "codePreview": [
        "if (analysis.intent) {",
        "const intentResult = document.getElementById('intent-result');",
        "if (intentResult) {",
        "const label = intentResult.querySelector('.intent-label');",
        "const confidence = intentResult.querySelector('.confidence-score');"
      ]
    },
    {
      "id": "2f42f9f8",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "656-660",
          "preview": "const label = sentimentResult.querySelector('.sentiment-label'); | const bar = document.getElementById('sentiment-bar');"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "656-660",
          "preview": "const label = sentimentResult.querySelector('.sentiment-label'); | const bar = document.getElementById('sentiment-bar');"
        }
      ],
      "codePreview": [
        "const label = sentimentResult.querySelector('.sentiment-label');",
        "const bar = document.getElementById('sentiment-bar');",
        "if (label) {",
        "label.textContent = this.getSentimentText(analysis.sentiment.label);"
      ]
    },
    {
      "id": "6a981f60",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "686-690",
          "preview": "// 更新实体识别 | if (analysis.entities) { | const entitiesContainer = document.getElementById('entities-container');"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "686-690",
          "preview": "// 更新实体识别 | if (analysis.entities) { | const entitiesContainer = document.getElementById('entities-container');"
        }
      ],
      "codePreview": [
        "if (analysis.entities) {",
        "const entitiesContainer = document.getElementById('entities-container');",
        "if (entitiesContainer) {",
        "if (analysis.entities.length > 0) {"
      ]
    },
    {
      "id": "6ea82ca9",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "761-765",
          "preview": "buttons.forEach(btn => btn.classList.remove('active')); | const activeButton = suggestionElement.querySelector(`.feedback-btn.${feedbackType}`);"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "761-765",
          "preview": "buttons.forEach(btn => btn.classList.remove('active')); | const activeButton = suggestionElement.querySelector(`.feedback-btn.${feedbackType}`);"
        }
      ],
      "codePreview": [
        "buttons.forEach(btn => btn.classList.remove('active'));",
        "const activeButton = suggestionElement.querySelector(`.feedback-btn.${feedbackType}`);",
        "if (activeButton) {",
        "activeButton.classList.add('active');"
      ]
    },
    {
      "id": "aeea3beb",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "781-785",
          "preview": "}, | body: JSON.stringify({ | conversationId: this.currentConversationId,"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "781-785",
          "preview": "}, | body: JSON.stringify({ | conversationId: this.currentConversationId,"
        }
      ],
      "codePreview": [
        "},",
        "body: JSON.stringify({",
        "conversationId: this.currentConversationId,",
        "suggestion: suggestion,",
        "feedbackType: feedbackType,"
      ]
    },
    {
      "id": "5ca5b72d",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "816-820",
          "preview": "const response = await fetch('/api/ai/search-knowledge', { | method: 'POST',"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "816-820",
          "preview": "const response = await fetch('/api/ai/search-knowledge', { | method: 'POST',"
        }
      ],
      "codePreview": [
        "const response = await fetch('/api/ai/search-knowledge', {",
        "method: 'POST',",
        "headers: {",
        "'Content-Type': 'application/json'"
      ]
    },
    {
      "id": "293b1ed1",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "826-830",
          "preview": "}); | if (response.ok) {"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "826-830",
          "preview": "}); | if (response.ok) {"
        }
      ],
      "codePreview": [
        "});",
        "if (response.ok) {",
        "const result = await response.json();",
        "this.displaySearchResults(result.results);"
      ]
    },
    {
      "id": "d9f016c7",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "846-850",
          "preview": "if (!resultsContainer) return; | if (!results || results.length === 0) {"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "846-850",
          "preview": "if (!resultsContainer) return; | if (!results || results.length === 0) {"
        }
      ],
      "codePreview": [
        "if (!resultsContainer) return;",
        "if (!results || results.length === 0) {",
        "resultsContainer.innerHTML = '<div class=\"no-results\">没有找到相关结果</div>';",
        "return;"
      ]
    },
    {
      "id": "1fa81f6c",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "856-860",
          "preview": "<div class=\"result-answer\">${this.escapeHtml(result.answer)}</div> | <div class=\"result-meta\"> | <span class=\"result-category\">${result.category}</span>"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "856-860",
          "preview": "<div class=\"result-answer\">${this.escapeHtml(result.answer)}</div> | <div class=\"result-meta\"> | <span class=\"result-category\">${result.category}</span>"
        }
      ],
      "codePreview": [
        "<div class=\"result-answer\">${this.escapeHtml(result.answer)}</div>",
        "<div class=\"result-meta\">",
        "<span class=\"result-category\">${result.category}</span>",
        "<span class=\"result-confidence\">匹配度: ${Math.round(result.confidence * 100)}%</span>",
        "</div>"
      ]
    },
    {
      "id": "4e61c473",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "861-865",
          "preview": "<div class=\"result-actions\"> | <button class=\"use-answer-btn\" onclick=\"aiAssistant.useKnowledgeAnswer('${this.escapeHtml(result.answer)}')\"> | 使用答案"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "861-865",
          "preview": "<div class=\"result-actions\"> | <button class=\"use-answer-btn\" onclick=\"aiAssistant.useKnowledgeAnswer('${this.escapeHtml(result.answer)}')\"> | 使用答案"
        }
      ],
      "codePreview": [
        "<div class=\"result-actions\">",
        "<button class=\"use-answer-btn\" onclick=\"aiAssistant.useKnowledgeAnswer('${this.escapeHtml(result.answer)}')\">",
        "使用答案",
        "</button>",
        "</div>"
      ]
    },
    {
      "id": "278315af",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "876-880",
          "preview": "if (messageInput) { | messageInput.value = answer; | messageInput.focus();"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "876-880",
          "preview": "if (messageInput) { | messageInput.value = answer; | messageInput.focus();"
        }
      ],
      "codePreview": [
        "if (messageInput) {",
        "messageInput.value = answer;",
        "messageInput.focus();",
        "messageInput.dispatchEvent(new Event('input', { bubbles: true }));"
      ]
    },
    {
      "id": "7ae5f062",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "891-895",
          "preview": "const refreshBtn = document.getElementById('refresh-suggestions'); | if (refreshBtn) { | refreshBtn.classList.add('spinning');"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "891-895",
          "preview": "const refreshBtn = document.getElementById('refresh-suggestions'); | if (refreshBtn) { | refreshBtn.classList.add('spinning');"
        }
      ],
      "codePreview": [
        "const refreshBtn = document.getElementById('refresh-suggestions');",
        "if (refreshBtn) {",
        "refreshBtn.classList.add('spinning');",
        "setTimeout(() => refreshBtn.classList.remove('spinning'), 1000);",
        "}"
      ]
    },
    {
      "id": "47f1e17f",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "906-910",
          "preview": "if (panel && btn) { | const isVisible = panel.style.display !== 'none';"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "906-910",
          "preview": "if (panel && btn) { | const isVisible = panel.style.display !== 'none';"
        }
      ],
      "codePreview": [
        "if (panel && btn) {",
        "const isVisible = panel.style.display !== 'none';",
        "panel.style.display = isVisible ? 'none' : 'block';",
        "btn.querySelector('i').className = isVisible ? 'fas fa-eye-slash' : 'fas fa-eye';"
      ]
    },
    {
      "id": "dad96986",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "921-925",
          "preview": "headers: { | 'Content-Type': 'application/json' | },"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "921-925",
          "preview": "headers: { | 'Content-Type': 'application/json' | },"
        }
      ],
      "codePreview": [
        "headers: {",
        "'Content-Type': 'application/json'",
        "},",
        "body: JSON.stringify({",
        "shopId: this.getShopId(),"
      ]
    },
    {
      "id": "bd98f19e",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "941-945",
          "preview": "*/ | openSettings() { | const modal = document.getElementById('ai-settings-modal');"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "941-945",
          "preview": "*/ | openSettings() { | const modal = document.getElementById('ai-settings-modal');"
        }
      ],
      "codePreview": [
        "openSettings() {",
        "const modal = document.getElementById('ai-settings-modal');",
        "if (modal) {",
        "modal.style.display = 'flex';"
      ]
    },
    {
      "id": "d44c3c54",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "951-955",
          "preview": "*/ | closeSettings() { | const modal = document.getElementById('ai-settings-modal');"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "951-955",
          "preview": "*/ | closeSettings() { | const modal = document.getElementById('ai-settings-modal');"
        }
      ],
      "codePreview": [
        "closeSettings() {",
        "const modal = document.getElementById('ai-settings-modal');",
        "if (modal) {",
        "modal.style.display = 'none';"
      ]
    },
    {
      "id": "7c044e3e",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "961-965",
          "preview": "*/ | saveSettings() { | const settings = {"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "961-965",
          "preview": "*/ | saveSettings() { | const settings = {"
        }
      ],
      "codePreview": [
        "saveSettings() {",
        "const settings = {",
        "confidenceThreshold: document.getElementById('confidence-threshold')?.value,",
        "maxSuggestions: document.getElementById('max-suggestions')?.value,"
      ]
    },
    {
      "id": "3442dbd9",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "986-990",
          "preview": "*/ | resetSettings() { | if (confirm('确定要重置所有设置吗？')) {"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "986-990",
          "preview": "*/ | resetSettings() { | if (confirm('确定要重置所有设置吗？')) {"
        }
      ],
      "codePreview": [
        "resetSettings() {",
        "if (confirm('确定要重置所有设置吗？')) {",
        "localStorage.removeItem('ai-assistant-settings');",
        "this.loadDefaultSettings();"
      ]
    },
    {
      "id": "cce42874",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "1016-1020",
          "preview": "applySettings(settings) { | // 更新配置 | this.options.maxSuggestions = parseInt(settings.maxSuggestions) || 5;"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "1016-1020",
          "preview": "applySettings(settings) { | // 更新配置 | this.options.maxSuggestions = parseInt(settings.maxSuggestions) || 5;"
        }
      ],
      "codePreview": [
        "applySettings(settings) {",
        "this.options.maxSuggestions = parseInt(settings.maxSuggestions) || 5;",
        "this.options.autoRefresh = parseInt(settings.refreshInterval) * 1000 || 10000;",
        "this.options.showAnalysis = settings.showAnalysis !== false;"
      ]
    },
    {
      "id": "5bb56337",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "1046-1050",
          "preview": "clearSuggestions() { | const container = document.getElementById('suggestions-container'); | if (container) {"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "1046-1050",
          "preview": "clearSuggestions() { | const container = document.getElementById('suggestions-container'); | if (container) {"
        }
      ],
      "codePreview": [
        "clearSuggestions() {",
        "const container = document.getElementById('suggestions-container');",
        "if (container) {",
        "container.innerHTML = `",
        "<div class=\"no-suggestions\">"
      ]
    },
    {
      "id": "25c3a0ad",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "1071-1075",
          "preview": "const sentimentResult = document.getElementById('sentiment-result'); | if (sentimentResult) { | const label = sentimentResult.querySelector('.sentiment-label');"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "1071-1075",
          "preview": "const sentimentResult = document.getElementById('sentiment-result'); | if (sentimentResult) { | const label = sentimentResult.querySelector('.sentiment-label');"
        }
      ],
      "codePreview": [
        "const sentimentResult = document.getElementById('sentiment-result');",
        "if (sentimentResult) {",
        "const label = sentimentResult.querySelector('.sentiment-label');",
        "label.textContent = '中性';",
        "label.className = 'sentiment-label neutral';"
      ]
    },
    {
      "id": "ae3556fe",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "1101-1105",
          "preview": "const typeMap = { | 'intent_based': '意图建议', | 'knowledge_based': '知识库',"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "1101-1105",
          "preview": "const typeMap = { | 'intent_based': '意图建议', | 'knowledge_based': '知识库',"
        }
      ],
      "codePreview": [
        "const typeMap = {",
        "'intent_based': '意图建议',",
        "'knowledge_based': '知识库',",
        "'sentiment_based': '情感建议',",
        "'context_based': '上下文',"
      ]
    },
    {
      "id": "0a6b5740",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "1111-1115",
          "preview": "getIntentText(intent) { | const intentMap = { | 'greeting': '问候',"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "1111-1115",
          "preview": "getIntentText(intent) { | const intentMap = { | 'greeting': '问候',"
        }
      ],
      "codePreview": [
        "getIntentText(intent) {",
        "const intentMap = {",
        "'greeting': '问候',",
        "'question': '提问',",
        "'complaint': '投诉',"
      ]
    },
    {
      "id": "88282a2a",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "1116-1120",
          "preview": "'compliment': '赞扬', | 'request': '请求', | 'booking': '预订',"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "1116-1120",
          "preview": "'compliment': '赞扬', | 'request': '请求', | 'booking': '预订',"
        }
      ],
      "codePreview": [
        "'compliment': '赞扬',",
        "'request': '请求',",
        "'booking': '预订',",
        "'cancellation': '取消',",
        "'unknown': '未知'"
      ]
    },
    {
      "id": "459234fb",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "1126-1130",
          "preview": "const sentimentMap = { | 'very_positive': '非常积极', | 'positive': '积极',"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "1126-1130",
          "preview": "const sentimentMap = { | 'very_positive': '非常积极', | 'positive': '积极',"
        }
      ],
      "codePreview": [
        "const sentimentMap = {",
        "'very_positive': '非常积极',",
        "'positive': '积极',",
        "'neutral': '中性',",
        "'negative': '消极',"
      ]
    },
    {
      "id": "ccdf4785",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "1136-1140",
          "preview": "showNotification(message, type = 'info') { | // 简单的通知实现 | const notification = document.createElement('div');"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "1136-1140",
          "preview": "showNotification(message, type = 'info') { | // 简单的通知实现 | const notification = document.createElement('div');"
        }
      ],
      "codePreview": [
        "showNotification(message, type = 'info') {",
        "const notification = document.createElement('div');",
        "notification.className = `ai-notification ${type}`;",
        "notification.textContent = message;"
      ]
    },
    {
      "id": "b33284c8",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
          "lines": "1146-1150",
          "preview": "}, 100); | setTimeout(() => {"
        },
        {
          "file": "static\\js\\enhanced-ai-assistant.js",
          "lines": "1146-1150",
          "preview": "}, 100); | setTimeout(() => {"
        }
      ],
      "codePreview": [
        "}, 100);",
        "setTimeout(() => {",
        "notification.classList.remove('show');",
        "setTimeout(() => {"
      ]
    },
    {
      "id": "46e9f727",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "16-20",
          "preview": "constructor() { | this.shopId = null; | this.refreshInterval = null;"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "16-20",
          "preview": "constructor() { | this.shopId = null; | this.refreshInterval = null;"
        }
      ],
      "codePreview": [
        "constructor() {",
        "this.shopId = null;",
        "this.refreshInterval = null;",
        "this.charts = {};",
        "this.currentTimeRange = '24h';"
      ]
    },
    {
      "id": "3a461590",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "71-75",
          "preview": "createDashboardInterface() { | const container = document.getElementById('analytics-dashboard') || document.body;"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "71-75",
          "preview": "createDashboardInterface() { | const container = document.getElementById('analytics-dashboard') || document.body;"
        }
      ],
      "codePreview": [
        "createDashboardInterface() {",
        "const container = document.getElementById('analytics-dashboard') || document.body;",
        "container.innerHTML = `",
        "<div class=\"analytics-dashboard\">"
      ]
    },
    {
      "id": "2f9e414a",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "76-80",
          "preview": "<!-- 头部控制区域 --> | <div class=\"dashboard-header\"> | <div class=\"header-title\">"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "76-80",
          "preview": "<!-- 头部控制区域 --> | <div class=\"dashboard-header\"> | <div class=\"header-title\">"
        }
      ],
      "codePreview": [
        "<!-- 头部控制区域 -->",
        "<div class=\"dashboard-header\">",
        "<div class=\"header-title\">",
        "<h2>📊 数据分析仪表板</h2>",
        "<span class=\"last-updated\">最后更新: <span id=\"last-updated-time\">--</span></span>"
      ]
    },
    {
      "id": "c3ba2676",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "81-85",
          "preview": "</div> | <div class=\"header-controls\"> | <select id=\"time-range-select\" class=\"time-range-select\">"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "81-85",
          "preview": "</div> | <div class=\"header-controls\"> | <select id=\"time-range-select\" class=\"time-range-select\">"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"header-controls\">",
        "<select id=\"time-range-select\" class=\"time-range-select\">",
        "<option value=\"1h\">过去1小时</option>",
        "<option value=\"24h\" selected>过去24小时</option>"
      ]
    },
    {
      "id": "94f0b792",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "86-90",
          "preview": "<option value=\"7d\">过去7天</option> | <option value=\"30d\">过去30天</option> | </select>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "86-90",
          "preview": "<option value=\"7d\">过去7天</option> | <option value=\"30d\">过去30天</option> | </select>"
        }
      ],
      "codePreview": [
        "<option value=\"7d\">过去7天</option>",
        "<option value=\"30d\">过去30天</option>",
        "</select>",
        "<button class=\"refresh-btn\" onclick=\"dashboard.refreshData()\">",
        "🔄 刷新"
      ]
    },
    {
      "id": "e33ae766",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "91-95",
          "preview": "</button> | <button class=\"export-btn\" onclick=\"dashboard.exportReport()\"> | 📥 导出报告"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "91-95",
          "preview": "</button> | <button class=\"export-btn\" onclick=\"dashboard.exportReport()\"> | 📥 导出报告"
        }
      ],
      "codePreview": [
        "</button>",
        "<button class=\"export-btn\" onclick=\"dashboard.exportReport()\">",
        "📥 导出报告",
        "</button>",
        "</div>"
      ]
    },
    {
      "id": "cafcb40f",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "96-100",
          "preview": "</div> | <!-- 实时监控卡片区域 -->"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "96-100",
          "preview": "</div> | <!-- 实时监控卡片区域 -->"
        }
      ],
      "codePreview": [
        "</div>",
        "<!-- 实时监控卡片区域 -->",
        "<div class=\"metrics-cards\">",
        "<div class=\"metric-card\">"
      ]
    },
    {
      "id": "7920a243",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "101-105",
          "preview": "<div class=\"metric-icon\">💬</div> | <div class=\"metric-content\"> | <div class=\"metric-title\">对话总数</div>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "101-105",
          "preview": "<div class=\"metric-icon\">💬</div> | <div class=\"metric-content\"> | <div class=\"metric-title\">对话总数</div>"
        }
      ],
      "codePreview": [
        "<div class=\"metric-icon\">💬</div>",
        "<div class=\"metric-content\">",
        "<div class=\"metric-title\">对话总数</div>",
        "<div class=\"metric-value\" id=\"total-conversations\">--</div>",
        "<div class=\"metric-change\" id=\"conversations-change\">--</div>"
      ]
    },
    {
      "id": "623b717f",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "106-110",
          "preview": "</div> | </div>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "106-110",
          "preview": "</div> | </div>"
        }
      ],
      "codePreview": [
        "</div>",
        "</div>",
        "<div class=\"metric-card\">",
        "<div class=\"metric-icon\">📨</div>"
      ]
    },
    {
      "id": "52919f9f",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "111-115",
          "preview": "<div class=\"metric-content\"> | <div class=\"metric-title\">消息总数</div> | <div class=\"metric-value\" id=\"total-messages\">--</div>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "111-115",
          "preview": "<div class=\"metric-content\"> | <div class=\"metric-title\">消息总数</div> | <div class=\"metric-value\" id=\"total-messages\">--</div>"
        }
      ],
      "codePreview": [
        "<div class=\"metric-content\">",
        "<div class=\"metric-title\">消息总数</div>",
        "<div class=\"metric-value\" id=\"total-messages\">--</div>",
        "<div class=\"metric-change\" id=\"messages-change\">--</div>",
        "</div>"
      ]
    },
    {
      "id": "4781d70c",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "116-120",
          "preview": "</div> | <div class=\"metric-card\">"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "116-120",
          "preview": "</div> | <div class=\"metric-card\">"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"metric-card\">",
        "<div class=\"metric-icon\">⚡</div>",
        "<div class=\"metric-content\">"
      ]
    },
    {
      "id": "77d88afb",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "121-125",
          "preview": "<div class=\"metric-title\">平均响应时间</div> | <div class=\"metric-value\" id=\"avg-response-time\">--</div> | <div class=\"metric-change\" id=\"response-time-change\">--</div>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "121-125",
          "preview": "<div class=\"metric-title\">平均响应时间</div> | <div class=\"metric-value\" id=\"avg-response-time\">--</div> | <div class=\"metric-change\" id=\"response-time-change\">--</div>"
        }
      ],
      "codePreview": [
        "<div class=\"metric-title\">平均响应时间</div>",
        "<div class=\"metric-value\" id=\"avg-response-time\">--</div>",
        "<div class=\"metric-change\" id=\"response-time-change\">--</div>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "1af50619",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "126-130",
          "preview": "<div class=\"metric-card\"> | <div class=\"metric-icon\">😊</div>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "126-130",
          "preview": "<div class=\"metric-card\"> | <div class=\"metric-icon\">😊</div>"
        }
      ],
      "codePreview": [
        "<div class=\"metric-card\">",
        "<div class=\"metric-icon\">😊</div>",
        "<div class=\"metric-content\">",
        "<div class=\"metric-title\">客户满意度</div>"
      ]
    },
    {
      "id": "f4f69176",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "131-135",
          "preview": "<div class=\"metric-value\" id=\"customer-satisfaction\">--</div> | <div class=\"metric-change\" id=\"satisfaction-change\">--</div> | </div>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "131-135",
          "preview": "<div class=\"metric-value\" id=\"customer-satisfaction\">--</div> | <div class=\"metric-change\" id=\"satisfaction-change\">--</div> | </div>"
        }
      ],
      "codePreview": [
        "<div class=\"metric-value\" id=\"customer-satisfaction\">--</div>",
        "<div class=\"metric-change\" id=\"satisfaction-change\">--</div>",
        "</div>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "6c785782",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "136-140",
          "preview": "<!-- 图表区域 --> | <div class=\"charts-container\">"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "136-140",
          "preview": "<!-- 图表区域 --> | <div class=\"charts-container\">"
        }
      ],
      "codePreview": [
        "<!-- 图表区域 -->",
        "<div class=\"charts-container\">",
        "<div class=\"chart-row\">",
        "<div class=\"chart-card\">"
      ]
    },
    {
      "id": "5cc355fa",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "141-145",
          "preview": "<div class=\"chart-header\"> | <h3>📈 对话趋势</h3> | <div class=\"chart-controls\">"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "141-145",
          "preview": "<div class=\"chart-header\"> | <h3>📈 对话趋势</h3> | <div class=\"chart-controls\">"
        }
      ],
      "codePreview": [
        "<div class=\"chart-header\">",
        "<h3>📈 对话趋势</h3>",
        "<div class=\"chart-controls\">",
        "<button class=\"chart-btn\" onclick=\"dashboard.toggleChartType('conversations')\">切换视图</button>",
        "</div>"
      ]
    },
    {
      "id": "a58455ae",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "146-150",
          "preview": "</div> | <div class=\"chart-content\"> | <canvas id=\"conversations-chart\"></canvas>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "146-150",
          "preview": "</div> | <div class=\"chart-content\"> | <canvas id=\"conversations-chart\"></canvas>"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"chart-content\">",
        "<canvas id=\"conversations-chart\"></canvas>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "32af02d8",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "151-155",
          "preview": "<div class=\"chart-card\"> | <div class=\"chart-header\">"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "151-155",
          "preview": "<div class=\"chart-card\"> | <div class=\"chart-header\">"
        }
      ],
      "codePreview": [
        "<div class=\"chart-card\">",
        "<div class=\"chart-header\">",
        "<h3>⏰ 工作负载分布</h3>",
        "<div class=\"chart-controls\">"
      ]
    },
    {
      "id": "974303a5",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "156-160",
          "preview": "<button class=\"chart-btn\" onclick=\"dashboard.toggleChartType('workload')\">切换视图</button> | </div> | </div>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "156-160",
          "preview": "<button class=\"chart-btn\" onclick=\"dashboard.toggleChartType('workload')\">切换视图</button> | </div> | </div>"
        }
      ],
      "codePreview": [
        "<button class=\"chart-btn\" onclick=\"dashboard.toggleChartType('workload')\">切换视图</button>",
        "</div>",
        "</div>",
        "<div class=\"chart-content\">",
        "<canvas id=\"workload-chart\"></canvas>"
      ]
    },
    {
      "id": "71a9cd39",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "161-165",
          "preview": "</div> | </div> | </div>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "161-165",
          "preview": "</div> | </div> | </div>"
        }
      ],
      "codePreview": [
        "</div>",
        "</div>",
        "</div>",
        "<div class=\"chart-row\">"
      ]
    },
    {
      "id": "2de3e39e",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "166-170",
          "preview": "<div class=\"chart-card\"> | <div class=\"chart-header\"> | <h3>👥 客服效率排行</h3>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "166-170",
          "preview": "<div class=\"chart-card\"> | <div class=\"chart-header\"> | <h3>👥 客服效率排行</h3>"
        }
      ],
      "codePreview": [
        "<div class=\"chart-card\">",
        "<div class=\"chart-header\">",
        "<h3>👥 客服效率排行</h3>",
        "<div class=\"chart-controls\">",
        "<button class=\"chart-btn\" onclick=\"dashboard.showStaffDetails()\">详细信息</button>"
      ]
    },
    {
      "id": "7db85fdc",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "171-175",
          "preview": "</div> | </div> | <div class=\"chart-content\">"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "171-175",
          "preview": "</div> | </div> | <div class=\"chart-content\">"
        }
      ],
      "codePreview": [
        "</div>",
        "</div>",
        "<div class=\"chart-content\">",
        "<div id=\"staff-efficiency-list\" class=\"staff-list\"></div>",
        "</div>"
      ]
    },
    {
      "id": "a9d1d044",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "176-180",
          "preview": "</div> | <div class=\"chart-card\">"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "176-180",
          "preview": "</div> | <div class=\"chart-card\">"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"chart-card\">",
        "<div class=\"chart-header\">",
        "<h3>⭐ 满意度分布</h3>"
      ]
    },
    {
      "id": "3eed070b",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "181-185",
          "preview": "<div class=\"chart-controls\"> | <button class=\"chart-btn\" onclick=\"dashboard.showSatisfactionDetails()\">详细分析</button> | </div>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "181-185",
          "preview": "<div class=\"chart-controls\"> | <button class=\"chart-btn\" onclick=\"dashboard.showSatisfactionDetails()\">详细分析</button> | </div>"
        }
      ],
      "codePreview": [
        "<div class=\"chart-controls\">",
        "<button class=\"chart-btn\" onclick=\"dashboard.showSatisfactionDetails()\">详细分析</button>",
        "</div>",
        "</div>",
        "<div class=\"chart-content\">"
      ]
    },
    {
      "id": "ce16792d",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "186-190",
          "preview": "<canvas id=\"satisfaction-chart\"></canvas> | </div> | </div>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "186-190",
          "preview": "<canvas id=\"satisfaction-chart\"></canvas> | </div> | </div>"
        }
      ],
      "codePreview": [
        "<canvas id=\"satisfaction-chart\"></canvas>",
        "</div>",
        "</div>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "ce95d7c9",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "191-195",
          "preview": "<!-- KPI指标区域 --> | <div class=\"kpi-section\">"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "191-195",
          "preview": "<!-- KPI指标区域 --> | <div class=\"kpi-section\">"
        }
      ],
      "codePreview": [
        "<!-- KPI指标区域 -->",
        "<div class=\"kpi-section\">",
        "<div class=\"section-header\">",
        "<h3>🎯 KPI指标</h3>"
      ]
    },
    {
      "id": "39f604ac",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "196-200",
          "preview": "<button class=\"kpi-report-btn\" onclick=\"dashboard.generateKpiReport()\">生成完整报告</button> | </div> | <div class=\"kpi-grid\">"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "196-200",
          "preview": "<button class=\"kpi-report-btn\" onclick=\"dashboard.generateKpiReport()\">生成完整报告</button> | </div> | <div class=\"kpi-grid\">"
        }
      ],
      "codePreview": [
        "<button class=\"kpi-report-btn\" onclick=\"dashboard.generateKpiReport()\">生成完整报告</button>",
        "</div>",
        "<div class=\"kpi-grid\">",
        "<div class=\"kpi-item\">",
        "<div class=\"kpi-title\">响应时间得分</div>"
      ]
    },
    {
      "id": "d86733e5",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "201-205",
          "preview": "<div class=\"kpi-score\" id=\"response-time-score\">--</div> | <div class=\"kpi-progress\"> | <div class=\"progress-bar\" id=\"response-time-progress\"></div>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "201-205",
          "preview": "<div class=\"kpi-score\" id=\"response-time-score\">--</div> | <div class=\"kpi-progress\"> | <div class=\"progress-bar\" id=\"response-time-progress\"></div>"
        }
      ],
      "codePreview": [
        "<div class=\"kpi-score\" id=\"response-time-score\">--</div>",
        "<div class=\"kpi-progress\">",
        "<div class=\"progress-bar\" id=\"response-time-progress\"></div>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "675090a4",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "206-210",
          "preview": "<div class=\"kpi-item\"> | <div class=\"kpi-title\">客户满意度得分</div>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "206-210",
          "preview": "<div class=\"kpi-item\"> | <div class=\"kpi-title\">客户满意度得分</div>"
        }
      ],
      "codePreview": [
        "<div class=\"kpi-item\">",
        "<div class=\"kpi-title\">客户满意度得分</div>",
        "<div class=\"kpi-score\" id=\"satisfaction-score\">--</div>",
        "<div class=\"kpi-progress\">"
      ]
    },
    {
      "id": "319fd0f5",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "211-215",
          "preview": "<div class=\"progress-bar\" id=\"satisfaction-progress\"></div> | </div> | </div>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "211-215",
          "preview": "<div class=\"progress-bar\" id=\"satisfaction-progress\"></div> | </div> | </div>"
        }
      ],
      "codePreview": [
        "<div class=\"progress-bar\" id=\"satisfaction-progress\"></div>",
        "</div>",
        "</div>",
        "<div class=\"kpi-item\">"
      ]
    },
    {
      "id": "a003c432",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "216-220",
          "preview": "<div class=\"kpi-title\">客服效率得分</div> | <div class=\"kpi-score\" id=\"efficiency-score\">--</div> | <div class=\"kpi-progress\">"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "216-220",
          "preview": "<div class=\"kpi-title\">客服效率得分</div> | <div class=\"kpi-score\" id=\"efficiency-score\">--</div> | <div class=\"kpi-progress\">"
        }
      ],
      "codePreview": [
        "<div class=\"kpi-title\">客服效率得分</div>",
        "<div class=\"kpi-score\" id=\"efficiency-score\">--</div>",
        "<div class=\"kpi-progress\">",
        "<div class=\"progress-bar\" id=\"efficiency-progress\"></div>",
        "</div>"
      ]
    },
    {
      "id": "65eef473",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "221-225",
          "preview": "</div> | <div class=\"kpi-item\">"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "221-225",
          "preview": "</div> | <div class=\"kpi-item\">"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"kpi-item\">",
        "<div class=\"kpi-title\">系统性能得分</div>",
        "<div class=\"kpi-score\" id=\"performance-score\">--</div>"
      ]
    },
    {
      "id": "034c95a1",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "226-230",
          "preview": "<div class=\"kpi-progress\"> | <div class=\"progress-bar\" id=\"performance-progress\"></div> | </div>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "226-230",
          "preview": "<div class=\"kpi-progress\"> | <div class=\"progress-bar\" id=\"performance-progress\"></div> | </div>"
        }
      ],
      "codePreview": [
        "<div class=\"kpi-progress\">",
        "<div class=\"progress-bar\" id=\"performance-progress\"></div>",
        "</div>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "506437c0",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "231-235",
          "preview": "</div> | <!-- 加载遮罩 -->"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "231-235",
          "preview": "</div> | <!-- 加载遮罩 -->"
        }
      ],
      "codePreview": [
        "</div>",
        "<!-- 加载遮罩 -->",
        "<div id=\"dashboard-loading\" class=\"loading-overlay\" style=\"display: none;\">",
        "<div class=\"loading-spinner\"></div>"
      ]
    },
    {
      "id": "cd6de2b0",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "251-255",
          "preview": "if (timeRangeSelect) { | timeRangeSelect.addEventListener('change', (e) => { | this.currentTimeRange = e.target.value;"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "251-255",
          "preview": "if (timeRangeSelect) { | timeRangeSelect.addEventListener('change', (e) => { | this.currentTimeRange = e.target.value;"
        }
      ],
      "codePreview": [
        "if (timeRangeSelect) {",
        "timeRangeSelect.addEventListener('change', (e) => {",
        "this.currentTimeRange = e.target.value;",
        "this.loadAllData();",
        "});"
      ]
    },
    {
      "id": "843331cc",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "261-265",
          "preview": "switch (e.key) { | case 'r': | e.preventDefault();"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "261-265",
          "preview": "switch (e.key) { | case 'r': | e.preventDefault();"
        }
      ],
      "codePreview": [
        "switch (e.key) {",
        "case 'r':",
        "e.preventDefault();",
        "this.refreshData();",
        "break;"
      ]
    },
    {
      "id": "c1e57a1e",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "266-270",
          "preview": "case 'e': | e.preventDefault(); | this.exportReport();"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "266-270",
          "preview": "case 'e': | e.preventDefault(); | this.exportReport();"
        }
      ],
      "codePreview": [
        "case 'e':",
        "e.preventDefault();",
        "this.exportReport();",
        "break;",
        "}"
      ]
    },
    {
      "id": "077c2581",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "286-290",
          "preview": "workloadData | ] = await Promise.all([ | this.loadRealtimeMetrics(),"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "286-290",
          "preview": "workloadData | ] = await Promise.all([ | this.loadRealtimeMetrics(),"
        }
      ],
      "codePreview": [
        "workloadData",
        "] = await Promise.all([",
        "this.loadRealtimeMetrics(),",
        "this.loadStaffEfficiency(),",
        "this.loadCustomerSatisfaction(),"
      ]
    },
    {
      "id": "ddd90427",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "296-300",
          "preview": "this.updateCharts({ | realtime: realtimeData, | staff: staffEfficiency,"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "296-300",
          "preview": "this.updateCharts({ | realtime: realtimeData, | staff: staffEfficiency,"
        }
      ],
      "codePreview": [
        "this.updateCharts({",
        "realtime: realtimeData,",
        "staff: staffEfficiency,",
        "satisfaction: customerSatisfaction,",
        "workload: workloadData"
      ]
    },
    {
      "id": "4fae353a",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "411-415",
          "preview": "const conversationsChange = document.getElementById('conversations-change'); | if (totalConversations) { | totalConversations.textContent = data.conversations.total.toLocaleString();"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "411-415",
          "preview": "const conversationsChange = document.getElementById('conversations-change'); | if (totalConversations) { | totalConversations.textContent = data.conversations.total.toLocaleString();"
        }
      ],
      "codePreview": [
        "const conversationsChange = document.getElementById('conversations-change');",
        "if (totalConversations) {",
        "totalConversations.textContent = data.conversations.total.toLocaleString();",
        "}",
        "if (conversationsChange) {"
      ]
    },
    {
      "id": "5742038e",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "421-425",
          "preview": "const totalMessages = document.getElementById('total-messages'); | const messagesChange = document.getElementById('messages-change'); | if (totalMessages) {"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "421-425",
          "preview": "const totalMessages = document.getElementById('total-messages'); | const messagesChange = document.getElementById('messages-change'); | if (totalMessages) {"
        }
      ],
      "codePreview": [
        "const totalMessages = document.getElementById('total-messages');",
        "const messagesChange = document.getElementById('messages-change');",
        "if (totalMessages) {",
        "totalMessages.textContent = data.messages.total.toLocaleString();",
        "}"
      ]
    },
    {
      "id": "4514705f",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "431-435",
          "preview": "// 响应时间 | const avgResponseTime = document.getElementById('avg-response-time'); | const responseTimeChange = document.getElementById('response-time-change');"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "431-435",
          "preview": "// 响应时间 | const avgResponseTime = document.getElementById('avg-response-time'); | const responseTimeChange = document.getElementById('response-time-change');"
        }
      ],
      "codePreview": [
        "const avgResponseTime = document.getElementById('avg-response-time');",
        "const responseTimeChange = document.getElementById('response-time-change');",
        "if (avgResponseTime) {",
        "avgResponseTime.textContent = `${data.responseTime.average}分钟`;"
      ]
    },
    {
      "id": "46165c35",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "436-440",
          "preview": "} | if (responseTimeChange) { | const isImprovement = data.responseTime.average < 5;"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "436-440",
          "preview": "} | if (responseTimeChange) { | const isImprovement = data.responseTime.average < 5;"
        }
      ],
      "codePreview": [
        "}",
        "if (responseTimeChange) {",
        "const isImprovement = data.responseTime.average < 5;",
        "responseTimeChange.textContent = isImprovement ? '表现良好' : '需要改善';",
        "responseTimeChange.className = `metric-change ${isImprovement ? 'positive' : 'negative'}`;"
      ]
    },
    {
      "id": "7c8f6d99",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "446-450",
          "preview": "if (customerSatisfaction) { | customerSatisfaction.textContent = '4.3/5.0'; | }"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "446-450",
          "preview": "if (customerSatisfaction) { | customerSatisfaction.textContent = '4.3/5.0'; | }"
        }
      ],
      "codePreview": [
        "if (customerSatisfaction) {",
        "customerSatisfaction.textContent = '4.3/5.0';",
        "}",
        "if (satisfactionChange) {",
        "satisfactionChange.textContent = '+0.1 提升';"
      ]
    },
    {
      "id": "84610e96",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "491-495",
          "preview": "this.charts.conversations = new Chart(ctx, { | type: 'line',"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "491-495",
          "preview": "this.charts.conversations = new Chart(ctx, { | type: 'line',"
        }
      ],
      "codePreview": [
        "this.charts.conversations = new Chart(ctx, {",
        "type: 'line',",
        "data: {",
        "labels: timeLabels,"
      ]
    },
    {
      "id": "c63901bc",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "546-550",
          "preview": "const hourLabels = Array.from({length: 24}, (_, i) => `${i}:00`); | const workloadData = data.hourlyDistribution ? | data.hourlyDistribution.map(item => item.messageCount) :"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "546-550",
          "preview": "const hourLabels = Array.from({length: 24}, (_, i) => `${i}:00`); | const workloadData = data.hourlyDistribution ? | data.hourlyDistribution.map(item => item.messageCount) :"
        }
      ],
      "codePreview": [
        "const hourLabels = Array.from({length: 24}, (_, i) => `${i}:00`);",
        "const workloadData = data.hourlyDistribution ?",
        "data.hourlyDistribution.map(item => item.messageCount) :",
        "this.generateWorkloadData();"
      ]
    },
    {
      "id": "980b2596",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "551-555",
          "preview": "this.charts.workload = new Chart(ctx, { | type: 'bar', | data: {"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "551-555",
          "preview": "this.charts.workload = new Chart(ctx, { | type: 'bar', | data: {"
        }
      ],
      "codePreview": [
        "this.charts.workload = new Chart(ctx, {",
        "type: 'bar',",
        "data: {",
        "labels: hourLabels,",
        "datasets: [{"
      ]
    },
    {
      "id": "930ed221",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "591-595",
          "preview": "updateStaffEfficiencyList(data) { | const container = document.getElementById('staff-efficiency-list'); | if (!container) return;"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "591-595",
          "preview": "updateStaffEfficiencyList(data) { | const container = document.getElementById('staff-efficiency-list'); | if (!container) return;"
        }
      ],
      "codePreview": [
        "updateStaffEfficiencyList(data) {",
        "const container = document.getElementById('staff-efficiency-list');",
        "if (!container) return;",
        "const staffList = data.staffDetails || ["
      ]
    },
    {
      "id": "1a3f0bc8",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "601-605",
          "preview": "container.innerHTML = staffList.map((staff, index) => ` | <div class=\"staff-item\"> | <div class=\"staff-rank\">#${index + 1}</div>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "601-605",
          "preview": "container.innerHTML = staffList.map((staff, index) => ` | <div class=\"staff-item\"> | <div class=\"staff-rank\">#${index + 1}</div>"
        }
      ],
      "codePreview": [
        "container.innerHTML = staffList.map((staff, index) => `",
        "<div class=\"staff-item\">",
        "<div class=\"staff-rank\">#${index + 1}</div>",
        "<div class=\"staff-info\">",
        "<div class=\"staff-name\">${staff.staffName}</div>"
      ]
    },
    {
      "id": "03ae0561",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "606-610",
          "preview": "<div class=\"staff-stats\"> | 处理对话: ${staff.conversationsHandled} | 平均响应: ${staff.avgResponseTime}分钟 | </div>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "606-610",
          "preview": "<div class=\"staff-stats\"> | 处理对话: ${staff.conversationsHandled} | 平均响应: ${staff.avgResponseTime}分钟 | </div>"
        }
      ],
      "codePreview": [
        "<div class=\"staff-stats\">",
        "处理对话: ${staff.conversationsHandled} | 平均响应: ${staff.avgResponseTime}分钟",
        "</div>",
        "</div>",
        "<div class=\"staff-efficiency\">"
      ]
    },
    {
      "id": "3986aead",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "611-615",
          "preview": "<div class=\"efficiency-score\">${staff.efficiency}%</div> | <div class=\"efficiency-bar\"> | <div class=\"efficiency-fill\" style=\"width: ${staff.efficiency}%\"></div>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "611-615",
          "preview": "<div class=\"efficiency-score\">${staff.efficiency}%</div> | <div class=\"efficiency-bar\"> | <div class=\"efficiency-fill\" style=\"width: ${staff.efficiency}%\"></div>"
        }
      ],
      "codePreview": [
        "<div class=\"efficiency-score\">${staff.efficiency}%</div>",
        "<div class=\"efficiency-bar\">",
        "<div class=\"efficiency-fill\" style=\"width: ${staff.efficiency}%\"></div>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "3bbc1ddd",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "641-645",
          "preview": "labels: ['5星', '4星', '3星', '2星', '1星'], | datasets: [{ | data: ["
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "641-645",
          "preview": "labels: ['5星', '4星', '3星', '2星', '1星'], | datasets: [{ | data: ["
        }
      ],
      "codePreview": [
        "labels: ['5星', '4星', '3星', '2星', '1星'],",
        "datasets: [{",
        "data: [",
        "ratingDistribution[5],",
        "ratingDistribution[4],"
      ]
    },
    {
      "id": "9f36e656",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "646-650",
          "preview": "ratingDistribution[3], | ratingDistribution[2], | ratingDistribution[1]"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "646-650",
          "preview": "ratingDistribution[3], | ratingDistribution[2], | ratingDistribution[1]"
        }
      ],
      "codePreview": [
        "ratingDistribution[3],",
        "ratingDistribution[2],",
        "ratingDistribution[1]",
        "],",
        "backgroundColor: ["
      ]
    },
    {
      "id": "00965380",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "681-685",
          "preview": "// 模拟KPI得分计算 | const responseTimeScore = Math.max(0, Math.min(100, (10 - data.responseTime.average) * 10)); | const satisfactionScore = 86; // 4.3/5 * 100 * 0.2 + 80"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "681-685",
          "preview": "// 模拟KPI得分计算 | const responseTimeScore = Math.max(0, Math.min(100, (10 - data.responseTime.average) * 10)); | const satisfactionScore = 86; // 4.3/5 * 100 * 0.2 + 80"
        }
      ],
      "codePreview": [
        "const responseTimeScore = Math.max(0, Math.min(100, (10 - data.responseTime.average) * 10));",
        "const satisfactionScore = 86;",
        "const efficiencyScore = 91;",
        "const performanceScore = Math.max(0, Math.min(100, (300 - data.performance.avgResponseTime) / 2));"
      ]
    },
    {
      "id": "f0e7dc69",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "686-690",
          "preview": "this.updateKpiItem('response-time-score', 'response-time-progress', responseTimeScore); | this.updateKpiItem('satisfaction-score', 'satisfaction-progress', satisfactionScore);"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "686-690",
          "preview": "this.updateKpiItem('response-time-score', 'response-time-progress', responseTimeScore); | this.updateKpiItem('satisfaction-score', 'satisfaction-progress', satisfactionScore);"
        }
      ],
      "codePreview": [
        "this.updateKpiItem('response-time-score', 'response-time-progress', responseTimeScore);",
        "this.updateKpiItem('satisfaction-score', 'satisfaction-progress', satisfactionScore);",
        "this.updateKpiItem('efficiency-score', 'efficiency-progress', efficiencyScore);",
        "this.updateKpiItem('performance-score', 'performance-progress', performanceScore);"
      ]
    },
    {
      "id": "1e6e7357",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "701-705",
          "preview": "const scoreElement = document.getElementById(scoreId); | const progressElement = document.getElementById(progressId);"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "701-705",
          "preview": "const scoreElement = document.getElementById(scoreId); | const progressElement = document.getElementById(progressId);"
        }
      ],
      "codePreview": [
        "const scoreElement = document.getElementById(scoreId);",
        "const progressElement = document.getElementById(progressId);",
        "if (scoreElement) {",
        "scoreElement.textContent = `${Math.round(score)}分`;"
      ]
    },
    {
      "id": "08913fc2",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "711-715",
          "preview": "// 根据得分设置颜色 | if (score >= 80) { | progressElement.style.backgroundColor = '#4CAF50';"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "711-715",
          "preview": "// 根据得分设置颜色 | if (score >= 80) { | progressElement.style.backgroundColor = '#4CAF50';"
        }
      ],
      "codePreview": [
        "if (score >= 80) {",
        "progressElement.style.backgroundColor = '#4CAF50';",
        "} else if (score >= 60) {",
        "progressElement.style.backgroundColor = '#FF9800';"
      ]
    },
    {
      "id": "df8a3480",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "726-730",
          "preview": "const labels = []; | const now = new Date();"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "726-730",
          "preview": "const labels = []; | const now = new Date();"
        }
      ],
      "codePreview": [
        "const labels = [];",
        "const now = new Date();",
        "for (let i = 11; i >= 0; i--) {",
        "const time = new Date(now.getTime() - i * 2 * 60 * 60 * 1000);"
      ]
    },
    {
      "id": "78bf9a02",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "741-745",
          "preview": "const data = []; | const baseValue = Math.floor(total / 12);"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "741-745",
          "preview": "const data = []; | const baseValue = Math.floor(total / 12);"
        }
      ],
      "codePreview": [
        "const data = [];",
        "const baseValue = Math.floor(total / 12);",
        "for (let i = 0; i < 12; i++) {",
        "const variation = Math.floor(Math.random() * baseValue * 0.4) - baseValue * 0.2;"
      ]
    },
    {
      "id": "61c82d1a",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "756-760",
          "preview": "const data = []; | for (let hour = 0; hour < 24; hour++) {"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "756-760",
          "preview": "const data = []; | for (let hour = 0; hour < 24; hour++) {"
        }
      ],
      "codePreview": [
        "const data = [];",
        "for (let hour = 0; hour < 24; hour++) {",
        "let value;",
        "if (hour >= 9 && hour <= 17) {"
      ]
    },
    {
      "id": "3948b308",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "856-860",
          "preview": "const modal = document.createElement('div'); | modal.className = 'kpi-report-modal'; | modal.innerHTML = `"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "856-860",
          "preview": "const modal = document.createElement('div'); | modal.className = 'kpi-report-modal'; | modal.innerHTML = `"
        }
      ],
      "codePreview": [
        "const modal = document.createElement('div');",
        "modal.className = 'kpi-report-modal';",
        "modal.innerHTML = `",
        "<div class=\"modal-content\">",
        "<div class=\"modal-header\">"
      ]
    },
    {
      "id": "41bf0752",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "861-865",
          "preview": "<h3>📊 KPI报告</h3> | <button class=\"close-btn\" onclick=\"this.parentElement.parentElement.parentElement.remove()\">✕</button> | </div>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "861-865",
          "preview": "<h3>📊 KPI报告</h3> | <button class=\"close-btn\" onclick=\"this.parentElement.parentElement.parentElement.remove()\">✕</button> | </div>"
        }
      ],
      "codePreview": [
        "<h3>📊 KPI报告</h3>",
        "<button class=\"close-btn\" onclick=\"this.parentElement.parentElement.parentElement.remove()\">✕</button>",
        "</div>",
        "<div class=\"modal-body\">",
        "<div class=\"report-summary\">"
      ]
    },
    {
      "id": "481f9820",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "866-870",
          "preview": "<h4>报告摘要</h4> | <p>报告类型: ${reportData.reportType}</p> | <p>生成时间: ${new Date(reportData.generatedAt).toLocaleString()}</p>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "866-870",
          "preview": "<h4>报告摘要</h4> | <p>报告类型: ${reportData.reportType}</p> | <p>生成时间: ${new Date(reportData.generatedAt).toLocaleString()}</p>"
        }
      ],
      "codePreview": [
        "<h4>报告摘要</h4>",
        "<p>报告类型: ${reportData.reportType}</p>",
        "<p>生成时间: ${new Date(reportData.generatedAt).toLocaleString()}</p>",
        "<p>总体得分: ${Math.round(reportData.kpiScores.overall)}分</p>",
        "</div>"
      ]
    },
    {
      "id": "0c09e3af",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "871-875",
          "preview": "<div class=\"report-metrics\"> | <h4>详细指标</h4> | <ul>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "871-875",
          "preview": "<div class=\"report-metrics\"> | <h4>详细指标</h4> | <ul>"
        }
      ],
      "codePreview": [
        "<div class=\"report-metrics\">",
        "<h4>详细指标</h4>",
        "<ul>",
        "<li>对话总数: ${reportData.summary.totalConversations}</li>",
        "<li>消息总数: ${reportData.summary.totalMessages}</li>"
      ]
    },
    {
      "id": "76423eda",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "876-880",
          "preview": "<li>平均评分: ${reportData.summary.averageRating}</li> | <li>客服人员: ${reportData.summary.staffCount}人</li> | </ul>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "876-880",
          "preview": "<li>平均评分: ${reportData.summary.averageRating}</li> | <li>客服人员: ${reportData.summary.staffCount}人</li> | </ul>"
        }
      ],
      "codePreview": [
        "<li>平均评分: ${reportData.summary.averageRating}</li>",
        "<li>客服人员: ${reportData.summary.staffCount}人</li>",
        "</ul>",
        "</div>",
        "<div class=\"report-recommendations\">"
      ]
    },
    {
      "id": "4bbb1271",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "881-885",
          "preview": "<h4>改进建议</h4> | <ul> | ${reportData.recommendations.map(rec =>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "881-885",
          "preview": "<h4>改进建议</h4> | <ul> | ${reportData.recommendations.map(rec =>"
        }
      ],
      "codePreview": [
        "<h4>改进建议</h4>",
        "<ul>",
        "${reportData.recommendations.map(rec =>",
        "`<li><strong>${rec.title}:</strong> ${rec.description}</li>`",
        ").join('')}"
      ]
    },
    {
      "id": "ff44aab0",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "886-890",
          "preview": "</ul> | </div> | </div>"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "886-890",
          "preview": "</ul> | </div> | </div>"
        }
      ],
      "codePreview": [
        "</ul>",
        "</div>",
        "</div>",
        "<div class=\"modal-footer\">",
        "<button class=\"btn btn-primary\" onclick=\"dashboard.downloadReport()\">下载完整报告</button>"
      ]
    },
    {
      "id": "04647507",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "911-915",
          "preview": "const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' }); | const link = document.createElement('a'); | const url = URL.createObjectURL(blob);"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "911-915",
          "preview": "const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' }); | const link = document.createElement('a'); | const url = URL.createObjectURL(blob);"
        }
      ],
      "codePreview": [
        "const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });",
        "const link = document.createElement('a');",
        "const url = URL.createObjectURL(blob);",
        "link.setAttribute('href', url);"
      ]
    },
    {
      "id": "3cde016a",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "916-920",
          "preview": "link.setAttribute('download', `KPI报告_${new Date().toISOString().split('T')[0]}.csv`); | link.style.visibility = 'hidden';"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "916-920",
          "preview": "link.setAttribute('download', `KPI报告_${new Date().toISOString().split('T')[0]}.csv`); | link.style.visibility = 'hidden';"
        }
      ],
      "codePreview": [
        "link.setAttribute('download', `KPI报告_${new Date().toISOString().split('T')[0]}.csv`);",
        "link.style.visibility = 'hidden';",
        "document.body.appendChild(link);",
        "link.click();"
      ]
    },
    {
      "id": "5a3a7179",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "946-950",
          "preview": "csv.push(`消息总数,${data.summary.totalMessages}`); | csv.push(`平均评分,${data.summary.averageRating}`); | csv.push(`客服人员,${data.summary.staffCount}`);"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "946-950",
          "preview": "csv.push(`消息总数,${data.summary.totalMessages}`); | csv.push(`平均评分,${data.summary.averageRating}`); | csv.push(`客服人员,${data.summary.staffCount}`);"
        }
      ],
      "codePreview": [
        "csv.push(`消息总数,${data.summary.totalMessages}`);",
        "csv.push(`平均评分,${data.summary.averageRating}`);",
        "csv.push(`客服人员,${data.summary.staffCount}`);",
        "csv.push('');"
      ]
    },
    {
      "id": "d93e4dbe",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\dashboard.js",
          "lines": "951-955",
          "preview": "// KPI得分 | csv.push('KPI指标,得分'); | csv.push(`响应时间得分,${Math.round(data.kpiScores.responseTime)}`);"
        },
        {
          "file": "static\\js\\analytics-dashboard.js",
          "lines": "951-955",
          "preview": "// KPI得分 | csv.push('KPI指标,得分'); | csv.push(`响应时间得分,${Math.round(data.kpiScores.responseTime)}`);"
        }
      ],
      "codePreview": [
        "csv.push('KPI指标,得分');",
        "csv.push(`响应时间得分,${Math.round(data.kpiScores.responseTime)}`);",
        "csv.push(`客户满意度得分,${Math.round(data.kpiScores.customerSatisfaction)}`);",
        "csv.push(`客服效率得分,${Math.round(data.kpiScores.staffEfficiency)}`);"
      ]
    },
    {
      "id": "a076d9c3",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "21-25",
          "preview": "this.currentUser = null; | this.websocket = null; | this.charts = new Map();"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "21-25",
          "preview": "this.currentUser = null; | this.websocket = null; | this.charts = new Map();"
        }
      ],
      "codePreview": [
        "this.currentUser = null;",
        "this.websocket = null;",
        "this.charts = new Map();",
        "this.refreshInterval = null;",
        "this.currentTimeRange = '24h';"
      ]
    },
    {
      "id": "182c4663",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "26-30",
          "preview": "this.dashboardMode = 'overview'; // overview, kpi, performance, satisfaction, revenue | this.isRealTimeEnabled = true; | this.notifications = [];"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "26-30",
          "preview": "this.dashboardMode = 'overview'; // overview, kpi, performance, satisfaction, revenue | this.isRealTimeEnabled = true; | this.notifications = [];"
        }
      ],
      "codePreview": [
        "this.dashboardMode = 'overview';",
        "this.isRealTimeEnabled = true;",
        "this.notifications = [];",
        "this.filters = {};"
      ]
    },
    {
      "id": "4718cf10",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "76-80",
          "preview": "const container = document.getElementById('enhanced-analytics-container') || document.body; | container.innerHTML = `"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "76-80",
          "preview": "const container = document.getElementById('enhanced-analytics-container') || document.body; | container.innerHTML = `"
        }
      ],
      "codePreview": [
        "const container = document.getElementById('enhanced-analytics-container') || document.body;",
        "container.innerHTML = `",
        "<div id=\"enhanced-analytics-dashboard\" class=\"enhanced-analytics-dashboard\">",
        "<!-- 顶部导航栏 -->"
      ]
    },
    {
      "id": "6ff902f0",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "81-85",
          "preview": "<nav class=\"dashboard-nav\"> | <div class=\"nav-brand\"> | <h1><i class=\"fas fa-chart-line\"></i> 数据分析中心</h1>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "81-85",
          "preview": "<nav class=\"dashboard-nav\"> | <div class=\"nav-brand\"> | <h1><i class=\"fas fa-chart-line\"></i> 数据分析中心</h1>"
        }
      ],
      "codePreview": [
        "<nav class=\"dashboard-nav\">",
        "<div class=\"nav-brand\">",
        "<h1><i class=\"fas fa-chart-line\"></i> 数据分析中心</h1>",
        "<div class=\"nav-status\">",
        "<span class=\"status-indicator\" id=\"connection-status\"></span>"
      ]
    },
    {
      "id": "0b5333b6",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "86-90",
          "preview": "<span class=\"status-text\">实时连接</span> | </div> | </div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "86-90",
          "preview": "<span class=\"status-text\">实时连接</span> | </div> | </div>"
        }
      ],
      "codePreview": [
        "<span class=\"status-text\">实时连接</span>",
        "</div>",
        "</div>",
        "<div class=\"nav-controls\">"
      ]
    },
    {
      "id": "4ae0a4ed",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "91-95",
          "preview": "<div class=\"time-range-selector\"> | <select id=\"time-range-select\"> | <option value=\"1h\">最近1小时</option>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "91-95",
          "preview": "<div class=\"time-range-selector\"> | <select id=\"time-range-select\"> | <option value=\"1h\">最近1小时</option>"
        }
      ],
      "codePreview": [
        "<div class=\"time-range-selector\">",
        "<select id=\"time-range-select\">",
        "<option value=\"1h\">最近1小时</option>",
        "<option value=\"24h\" selected>最近24小时</option>",
        "<option value=\"7d\">最近7天</option>"
      ]
    },
    {
      "id": "fe639e01",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "96-100",
          "preview": "<option value=\"30d\">最近30天</option> | <option value=\"90d\">最近90天</option> | </select>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "96-100",
          "preview": "<option value=\"30d\">最近30天</option> | <option value=\"90d\">最近90天</option> | </select>"
        }
      ],
      "codePreview": [
        "<option value=\"30d\">最近30天</option>",
        "<option value=\"90d\">最近90天</option>",
        "</select>",
        "</div>"
      ]
    },
    {
      "id": "c54eec02",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "101-105",
          "preview": "<div class=\"dashboard-modes\"> | <button class=\"mode-btn active\" data-mode=\"overview\"> | <i class=\"fas fa-tachometer-alt\"></i> 概览"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "101-105",
          "preview": "<div class=\"dashboard-modes\"> | <button class=\"mode-btn active\" data-mode=\"overview\"> | <i class=\"fas fa-tachometer-alt\"></i> 概览"
        }
      ],
      "codePreview": [
        "<div class=\"dashboard-modes\">",
        "<button class=\"mode-btn active\" data-mode=\"overview\">",
        "<i class=\"fas fa-tachometer-alt\"></i> 概览",
        "</button>",
        "<button class=\"mode-btn\" data-mode=\"kpi\">"
      ]
    },
    {
      "id": "bc4d08bc",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "106-110",
          "preview": "<i class=\"fas fa-chart-bar\"></i> KPI | </button> | <button class=\"mode-btn\" data-mode=\"performance\">"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "106-110",
          "preview": "<i class=\"fas fa-chart-bar\"></i> KPI | </button> | <button class=\"mode-btn\" data-mode=\"performance\">"
        }
      ],
      "codePreview": [
        "<i class=\"fas fa-chart-bar\"></i> KPI",
        "</button>",
        "<button class=\"mode-btn\" data-mode=\"performance\">",
        "<i class=\"fas fa-users\"></i> 绩效",
        "</button>"
      ]
    },
    {
      "id": "0227200c",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "111-115",
          "preview": "<button class=\"mode-btn\" data-mode=\"satisfaction\"> | <i class=\"fas fa-smile\"></i> 满意度 | </button>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "111-115",
          "preview": "<button class=\"mode-btn\" data-mode=\"satisfaction\"> | <i class=\"fas fa-smile\"></i> 满意度 | </button>"
        }
      ],
      "codePreview": [
        "<button class=\"mode-btn\" data-mode=\"satisfaction\">",
        "<i class=\"fas fa-smile\"></i> 满意度",
        "</button>",
        "<button class=\"mode-btn\" data-mode=\"revenue\">",
        "<i class=\"fas fa-dollar-sign\"></i> 收入"
      ]
    },
    {
      "id": "03cb962d",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "116-120",
          "preview": "</button> | </div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "116-120",
          "preview": "</button> | </div>"
        }
      ],
      "codePreview": [
        "</button>",
        "</div>",
        "<div class=\"action-buttons\">",
        "<button id=\"refresh-btn\" class=\"action-btn\" title=\"刷新数据\">"
      ]
    },
    {
      "id": "bff87ee9",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "121-125",
          "preview": "<i class=\"fas fa-sync-alt\"></i> | </button> | <button id=\"export-btn\" class=\"action-btn\" title=\"导出数据\">"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "121-125",
          "preview": "<i class=\"fas fa-sync-alt\"></i> | </button> | <button id=\"export-btn\" class=\"action-btn\" title=\"导出数据\">"
        }
      ],
      "codePreview": [
        "<i class=\"fas fa-sync-alt\"></i>",
        "</button>",
        "<button id=\"export-btn\" class=\"action-btn\" title=\"导出数据\">",
        "<i class=\"fas fa-download\"></i>",
        "</button>"
      ]
    },
    {
      "id": "3febe6c5",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "126-130",
          "preview": "<button id=\"settings-btn\" class=\"action-btn\" title=\"设置\"> | <i class=\"fas fa-cog\"></i> | </button>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "126-130",
          "preview": "<button id=\"settings-btn\" class=\"action-btn\" title=\"设置\"> | <i class=\"fas fa-cog\"></i> | </button>"
        }
      ],
      "codePreview": [
        "<button id=\"settings-btn\" class=\"action-btn\" title=\"设置\">",
        "<i class=\"fas fa-cog\"></i>",
        "</button>",
        "<button id=\"fullscreen-btn\" class=\"action-btn\" title=\"全屏\">",
        "<i class=\"fas fa-expand\"></i>"
      ]
    },
    {
      "id": "4fefdddb",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "131-135",
          "preview": "</button> | </div> | </div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "131-135",
          "preview": "</button> | </div> | </div>"
        }
      ],
      "codePreview": [
        "</button>",
        "</div>",
        "</div>",
        "</nav>"
      ]
    },
    {
      "id": "13379907",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "136-140",
          "preview": "<!-- 主要内容区域 --> | <main class=\"dashboard-main\"> | <!-- 侧边栏筛选器 -->"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "136-140",
          "preview": "<!-- 主要内容区域 --> | <main class=\"dashboard-main\"> | <!-- 侧边栏筛选器 -->"
        }
      ],
      "codePreview": [
        "<!-- 主要内容区域 -->",
        "<main class=\"dashboard-main\">",
        "<!-- 侧边栏筛选器 -->",
        "<aside class=\"dashboard-sidebar\" id=\"dashboard-sidebar\">",
        "<div class=\"sidebar-section\">"
      ]
    },
    {
      "id": "9f384280",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "141-145",
          "preview": "<h3><i class=\"fas fa-filter\"></i> 筛选器</h3> | <div class=\"filter-group\"> | <label>员工</label>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "141-145",
          "preview": "<h3><i class=\"fas fa-filter\"></i> 筛选器</h3> | <div class=\"filter-group\"> | <label>员工</label>"
        }
      ],
      "codePreview": [
        "<h3><i class=\"fas fa-filter\"></i> 筛选器</h3>",
        "<div class=\"filter-group\">",
        "<label>员工</label>",
        "<select id=\"employee-filter\" multiple>",
        "<option value=\"all\">全部员工</option>"
      ]
    },
    {
      "id": "16bd7b77",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "146-150",
          "preview": "</select> | </div> | <div class=\"filter-group\">"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "146-150",
          "preview": "</select> | </div> | <div class=\"filter-group\">"
        }
      ],
      "codePreview": [
        "</select>",
        "</div>",
        "<div class=\"filter-group\">",
        "<label>客户类型</label>",
        "<select id=\"customer-type-filter\">"
      ]
    },
    {
      "id": "2f7e46ce",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "151-155",
          "preview": "<option value=\"all\">全部客户</option> | <option value=\"new\">新客户</option> | <option value=\"returning\">老客户</option>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "151-155",
          "preview": "<option value=\"all\">全部客户</option> | <option value=\"new\">新客户</option> | <option value=\"returning\">老客户</option>"
        }
      ],
      "codePreview": [
        "<option value=\"all\">全部客户</option>",
        "<option value=\"new\">新客户</option>",
        "<option value=\"returning\">老客户</option>",
        "</select>",
        "</div>"
      ]
    },
    {
      "id": "81767472",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "156-160",
          "preview": "<div class=\"filter-group\"> | <label>对话状态</label> | <select id=\"conversation-status-filter\">"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "156-160",
          "preview": "<div class=\"filter-group\"> | <label>对话状态</label> | <select id=\"conversation-status-filter\">"
        }
      ],
      "codePreview": [
        "<div class=\"filter-group\">",
        "<label>对话状态</label>",
        "<select id=\"conversation-status-filter\">",
        "<option value=\"all\">全部状态</option>",
        "<option value=\"active\">进行中</option>"
      ]
    },
    {
      "id": "456960e7",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "161-165",
          "preview": "<option value=\"closed\">已结束</option> | </select> | </div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "161-165",
          "preview": "<option value=\"closed\">已结束</option> | </select> | </div>"
        }
      ],
      "codePreview": [
        "<option value=\"closed\">已结束</option>",
        "</select>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "e4876567",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "166-170",
          "preview": "<div class=\"sidebar-section\"> | <h3><i class=\"fas fa-bell\"></i> 实时警报</h3> | <div id=\"alerts-container\" class=\"alerts-container\">"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "166-170",
          "preview": "<div class=\"sidebar-section\"> | <h3><i class=\"fas fa-bell\"></i> 实时警报</h3> | <div id=\"alerts-container\" class=\"alerts-container\">"
        }
      ],
      "codePreview": [
        "<div class=\"sidebar-section\">",
        "<h3><i class=\"fas fa-bell\"></i> 实时警报</h3>",
        "<div id=\"alerts-container\" class=\"alerts-container\">",
        "<!-- 动态警报内容 -->",
        "</div>"
      ]
    },
    {
      "id": "7e328c0d",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "171-175",
          "preview": "</div> | <div class=\"sidebar-section\">"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "171-175",
          "preview": "</div> | <div class=\"sidebar-section\">"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"sidebar-section\">",
        "<h3><i class=\"fas fa-star\"></i> 快速指标</h3>",
        "<div id=\"quick-metrics\" class=\"quick-metrics\">"
      ]
    },
    {
      "id": "8e4a6fc3",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "176-180",
          "preview": "<!-- 快速指标内容 --> | </div> | </div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "176-180",
          "preview": "<!-- 快速指标内容 --> | </div> | </div>"
        }
      ],
      "codePreview": [
        "<!-- 快速指标内容 -->",
        "</div>",
        "</div>",
        "</aside>"
      ]
    },
    {
      "id": "f103612d",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "181-185",
          "preview": "<!-- 仪表板内容 --> | <section class=\"dashboard-content\" id=\"dashboard-content\"> | <!-- 动态内容区域 -->"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "181-185",
          "preview": "<!-- 仪表板内容 --> | <section class=\"dashboard-content\" id=\"dashboard-content\"> | <!-- 动态内容区域 -->"
        }
      ],
      "codePreview": [
        "<!-- 仪表板内容 -->",
        "<section class=\"dashboard-content\" id=\"dashboard-content\">",
        "<!-- 动态内容区域 -->",
        "</section>",
        "</main>"
      ]
    },
    {
      "id": "1ac054eb",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "186-190",
          "preview": "<!-- 加载遮罩 --> | <div id=\"loading-overlay\" class=\"loading-overlay hidden\">"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "186-190",
          "preview": "<!-- 加载遮罩 --> | <div id=\"loading-overlay\" class=\"loading-overlay hidden\">"
        }
      ],
      "codePreview": [
        "<!-- 加载遮罩 -->",
        "<div id=\"loading-overlay\" class=\"loading-overlay hidden\">",
        "<div class=\"loading-spinner\">",
        "<i class=\"fas fa-spinner fa-spin\"></i>"
      ]
    },
    {
      "id": "0a3ab201",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "191-195",
          "preview": "<p>加载数据中...</p> | </div> | </div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "191-195",
          "preview": "<p>加载数据中...</p> | </div> | </div>"
        }
      ],
      "codePreview": [
        "<p>加载数据中...</p>",
        "</div>",
        "</div>",
        "<!-- 模态对话框 -->"
      ]
    },
    {
      "id": "86612dde",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "196-200",
          "preview": "<div id=\"modal-overlay\" class=\"modal-overlay hidden\"> | <div class=\"modal-container\"> | <div class=\"modal-header\">"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "196-200",
          "preview": "<div id=\"modal-overlay\" class=\"modal-overlay hidden\"> | <div class=\"modal-container\"> | <div class=\"modal-header\">"
        }
      ],
      "codePreview": [
        "<div id=\"modal-overlay\" class=\"modal-overlay hidden\">",
        "<div class=\"modal-container\">",
        "<div class=\"modal-header\">",
        "<h3 id=\"modal-title\">标题</h3>",
        "<button id=\"modal-close\" class=\"modal-close\">"
      ]
    },
    {
      "id": "a8db5152",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "201-205",
          "preview": "<i class=\"fas fa-times\"></i> | </button> | </div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "201-205",
          "preview": "<i class=\"fas fa-times\"></i> | </button> | </div>"
        }
      ],
      "codePreview": [
        "<i class=\"fas fa-times\"></i>",
        "</button>",
        "</div>",
        "<div class=\"modal-body\" id=\"modal-body\">",
        "<!-- 模态内容 -->"
      ]
    },
    {
      "id": "dd434d58",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "206-210",
          "preview": "</div> | <div class=\"modal-footer\" id=\"modal-footer\"> | <button id=\"modal-cancel\" class=\"btn btn-secondary\">取消</button>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "206-210",
          "preview": "</div> | <div class=\"modal-footer\" id=\"modal-footer\"> | <button id=\"modal-cancel\" class=\"btn btn-secondary\">取消</button>"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"modal-footer\" id=\"modal-footer\">",
        "<button id=\"modal-cancel\" class=\"btn btn-secondary\">取消</button>",
        "<button id=\"modal-confirm\" class=\"btn btn-primary\">确认</button>",
        "</div>"
      ]
    },
    {
      "id": "1176ee30",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "211-215",
          "preview": "</div> | </div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "211-215",
          "preview": "</div> | </div>"
        }
      ],
      "codePreview": [
        "</div>",
        "</div>",
        "<!-- 通知容器 -->",
        "<div id=\"notifications-container\" class=\"notifications-container\">"
      ]
    },
    {
      "id": "bbda61b2",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "261-265",
          "preview": "// 设置时间范围选择器事件 | const timeRangeSelect = document.getElementById('time-range-select'); | timeRangeSelect.addEventListener('change', (e) => {"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "261-265",
          "preview": "// 设置时间范围选择器事件 | const timeRangeSelect = document.getElementById('time-range-select'); | timeRangeSelect.addEventListener('change', (e) => {"
        }
      ],
      "codePreview": [
        "const timeRangeSelect = document.getElementById('time-range-select');",
        "timeRangeSelect.addEventListener('change', (e) => {",
        "this.currentTimeRange = e.target.value;",
        "this.refreshDashboard();"
      ]
    },
    {
      "id": "47304893",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "271-275",
          "preview": "const mode = e.currentTarget.dataset.mode; | this.switchDashboardMode(mode); | });"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "271-275",
          "preview": "const mode = e.currentTarget.dataset.mode; | this.switchDashboardMode(mode); | });"
        }
      ],
      "codePreview": [
        "const mode = e.currentTarget.dataset.mode;",
        "this.switchDashboardMode(mode);",
        "});",
        "});"
      ]
    },
    {
      "id": "a86ceefc",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "276-280",
          "preview": "// 设置操作按钮事件 | document.getElementById('refresh-btn').addEventListener('click', () => this.refreshDashboard()); | document.getElementById('export-btn').addEventListener('click', () => this.showExportModal());"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "276-280",
          "preview": "// 设置操作按钮事件 | document.getElementById('refresh-btn').addEventListener('click', () => this.refreshDashboard()); | document.getElementById('export-btn').addEventListener('click', () => this.showExportModal());"
        }
      ],
      "codePreview": [
        "document.getElementById('refresh-btn').addEventListener('click', () => this.refreshDashboard());",
        "document.getElementById('export-btn').addEventListener('click', () => this.showExportModal());",
        "document.getElementById('settings-btn').addEventListener('click', () => this.showSettingsModal());",
        "document.getElementById('fullscreen-btn').addEventListener('click', () => this.toggleFullscreen());"
      ]
    },
    {
      "id": "f0641e18",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "291-295",
          "preview": "case 'overview': | this.createOverviewDashboard(contentArea); | break;"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "291-295",
          "preview": "case 'overview': | this.createOverviewDashboard(contentArea); | break;"
        }
      ],
      "codePreview": [
        "case 'overview':",
        "this.createOverviewDashboard(contentArea);",
        "break;",
        "case 'kpi':",
        "this.createKPIDashboard(contentArea);"
      ]
    },
    {
      "id": "efa54236",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "296-300",
          "preview": "break; | case 'performance': | this.createPerformanceDashboard(contentArea);"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "296-300",
          "preview": "break; | case 'performance': | this.createPerformanceDashboard(contentArea);"
        }
      ],
      "codePreview": [
        "break;",
        "case 'performance':",
        "this.createPerformanceDashboard(contentArea);",
        "break;",
        "case 'satisfaction':"
      ]
    },
    {
      "id": "ea82ab2d",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "301-305",
          "preview": "this.createSatisfactionDashboard(contentArea); | break; | case 'revenue':"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "301-305",
          "preview": "this.createSatisfactionDashboard(contentArea); | break; | case 'revenue':"
        }
      ],
      "codePreview": [
        "this.createSatisfactionDashboard(contentArea);",
        "break;",
        "case 'revenue':",
        "this.createRevenueDashboard(contentArea);",
        "break;"
      ]
    },
    {
      "id": "1a0c9a77",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "311-315",
          "preview": "*/ | createOverviewDashboard(container) { | container.innerHTML = `"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "311-315",
          "preview": "*/ | createOverviewDashboard(container) { | container.innerHTML = `"
        }
      ],
      "codePreview": [
        "createOverviewDashboard(container) {",
        "container.innerHTML = `",
        "<div class=\"overview-dashboard\">",
        "<!-- 关键指标卡片 -->"
      ]
    },
    {
      "id": "c45eec6a",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "316-320",
          "preview": "<div class=\"metrics-grid\"> | <div class=\"metric-card\" id=\"conversations-card\"> | <div class=\"metric-header\">"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "316-320",
          "preview": "<div class=\"metrics-grid\"> | <div class=\"metric-card\" id=\"conversations-card\"> | <div class=\"metric-header\">"
        }
      ],
      "codePreview": [
        "<div class=\"metrics-grid\">",
        "<div class=\"metric-card\" id=\"conversations-card\">",
        "<div class=\"metric-header\">",
        "<h3>对话总数</h3>",
        "<i class=\"fas fa-comments metric-icon\"></i>"
      ]
    },
    {
      "id": "8bddd4d7",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "321-325",
          "preview": "</div> | <div class=\"metric-value\" id=\"total-conversations\">-</div> | <div class=\"metric-change\" id=\"conversations-change\">-</div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "321-325",
          "preview": "</div> | <div class=\"metric-value\" id=\"total-conversations\">-</div> | <div class=\"metric-change\" id=\"conversations-change\">-</div>"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"metric-value\" id=\"total-conversations\">-</div>",
        "<div class=\"metric-change\" id=\"conversations-change\">-</div>",
        "</div>"
      ]
    },
    {
      "id": "6a2628c6",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "326-330",
          "preview": "<div class=\"metric-card\" id=\"response-time-card\"> | <div class=\"metric-header\"> | <h3>平均响应时间</h3>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "326-330",
          "preview": "<div class=\"metric-card\" id=\"response-time-card\"> | <div class=\"metric-header\"> | <h3>平均响应时间</h3>"
        }
      ],
      "codePreview": [
        "<div class=\"metric-card\" id=\"response-time-card\">",
        "<div class=\"metric-header\">",
        "<h3>平均响应时间</h3>",
        "<i class=\"fas fa-clock metric-icon\"></i>",
        "</div>"
      ]
    },
    {
      "id": "c05729f6",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "331-335",
          "preview": "<div class=\"metric-value\" id=\"avg-response-time\">-</div> | <div class=\"metric-change\" id=\"response-time-change\">-</div> | </div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "331-335",
          "preview": "<div class=\"metric-value\" id=\"avg-response-time\">-</div> | <div class=\"metric-change\" id=\"response-time-change\">-</div> | </div>"
        }
      ],
      "codePreview": [
        "<div class=\"metric-value\" id=\"avg-response-time\">-</div>",
        "<div class=\"metric-change\" id=\"response-time-change\">-</div>",
        "</div>",
        "<div class=\"metric-card\" id=\"satisfaction-card\">"
      ]
    },
    {
      "id": "99f9e27e",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "336-340",
          "preview": "<div class=\"metric-header\"> | <h3>客户满意度</h3> | <i class=\"fas fa-smile metric-icon\"></i>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "336-340",
          "preview": "<div class=\"metric-header\"> | <h3>客户满意度</h3> | <i class=\"fas fa-smile metric-icon\"></i>"
        }
      ],
      "codePreview": [
        "<div class=\"metric-header\">",
        "<h3>客户满意度</h3>",
        "<i class=\"fas fa-smile metric-icon\"></i>",
        "</div>",
        "<div class=\"metric-value\" id=\"avg-satisfaction\">-</div>"
      ]
    },
    {
      "id": "d8539870",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "341-345",
          "preview": "<div class=\"metric-change\" id=\"satisfaction-change\">-</div> | </div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "341-345",
          "preview": "<div class=\"metric-change\" id=\"satisfaction-change\">-</div> | </div>"
        }
      ],
      "codePreview": [
        "<div class=\"metric-change\" id=\"satisfaction-change\">-</div>",
        "</div>",
        "<div class=\"metric-card\" id=\"revenue-card\">",
        "<div class=\"metric-header\">"
      ]
    },
    {
      "id": "0ab53497",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "346-350",
          "preview": "<h3>总收入</h3> | <i class=\"fas fa-dollar-sign metric-icon\"></i> | </div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "346-350",
          "preview": "<h3>总收入</h3> | <i class=\"fas fa-dollar-sign metric-icon\"></i> | </div>"
        }
      ],
      "codePreview": [
        "<h3>总收入</h3>",
        "<i class=\"fas fa-dollar-sign metric-icon\"></i>",
        "</div>",
        "<div class=\"metric-value\" id=\"total-revenue\">-</div>",
        "<div class=\"metric-change\" id=\"revenue-change\">-</div>"
      ]
    },
    {
      "id": "1a1ad527",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "351-355",
          "preview": "</div> | </div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "351-355",
          "preview": "</div> | </div>"
        }
      ],
      "codePreview": [
        "</div>",
        "</div>",
        "<!-- 图表区域 -->",
        "<div class=\"charts-grid\">"
      ]
    },
    {
      "id": "ad8da99d",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "356-360",
          "preview": "<div class=\"chart-container\"> | <div class=\"chart-header\"> | <h3>对话趋势</h3>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "356-360",
          "preview": "<div class=\"chart-container\"> | <div class=\"chart-header\"> | <h3>对话趋势</h3>"
        }
      ],
      "codePreview": [
        "<div class=\"chart-container\">",
        "<div class=\"chart-header\">",
        "<h3>对话趋势</h3>",
        "<div class=\"chart-controls\">",
        "<select class=\"chart-type-select\">"
      ]
    },
    {
      "id": "55863b83",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "361-365",
          "preview": "<option value=\"line\">线图</option> | <option value=\"bar\">柱图</option> | <option value=\"area\">面积图</option>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "361-365",
          "preview": "<option value=\"line\">线图</option> | <option value=\"bar\">柱图</option> | <option value=\"area\">面积图</option>"
        }
      ],
      "codePreview": [
        "<option value=\"line\">线图</option>",
        "<option value=\"bar\">柱图</option>",
        "<option value=\"area\">面积图</option>",
        "</select>",
        "</div>"
      ]
    },
    {
      "id": "25a85028",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "366-370",
          "preview": "</div> | <div class=\"chart-content\"> | <canvas id=\"conversations-trend-chart\"></canvas>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "366-370",
          "preview": "</div> | <div class=\"chart-content\"> | <canvas id=\"conversations-trend-chart\"></canvas>"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"chart-content\">",
        "<canvas id=\"conversations-trend-chart\"></canvas>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "134a3f11",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "371-375",
          "preview": "<div class=\"chart-container\"> | <div class=\"chart-header\">"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "371-375",
          "preview": "<div class=\"chart-container\"> | <div class=\"chart-header\">"
        }
      ],
      "codePreview": [
        "<div class=\"chart-container\">",
        "<div class=\"chart-header\">",
        "<h3>响应时间分布</h3>",
        "</div>"
      ]
    },
    {
      "id": "4252739b",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "376-380",
          "preview": "<div class=\"chart-content\"> | <canvas id=\"response-time-chart\"></canvas> | </div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "376-380",
          "preview": "<div class=\"chart-content\"> | <canvas id=\"response-time-chart\"></canvas> | </div>"
        }
      ],
      "codePreview": [
        "<div class=\"chart-content\">",
        "<canvas id=\"response-time-chart\"></canvas>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "7c7ab636",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "381-385",
          "preview": "<div class=\"chart-container\"> | <div class=\"chart-header\"> | <h3>员工绩效排名</h3>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "381-385",
          "preview": "<div class=\"chart-container\"> | <div class=\"chart-header\"> | <h3>员工绩效排名</h3>"
        }
      ],
      "codePreview": [
        "<div class=\"chart-container\">",
        "<div class=\"chart-header\">",
        "<h3>员工绩效排名</h3>",
        "</div>",
        "<div class=\"chart-content\">"
      ]
    },
    {
      "id": "23aca82b",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "386-390",
          "preview": "<canvas id=\"employee-ranking-chart\"></canvas> | </div> | </div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "386-390",
          "preview": "<canvas id=\"employee-ranking-chart\"></canvas> | </div> | </div>"
        }
      ],
      "codePreview": [
        "<canvas id=\"employee-ranking-chart\"></canvas>",
        "</div>",
        "</div>",
        "<div class=\"chart-container\">"
      ]
    },
    {
      "id": "05806aed",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "391-395",
          "preview": "<div class=\"chart-header\"> | <h3>客户满意度分布</h3> | </div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "391-395",
          "preview": "<div class=\"chart-header\"> | <h3>客户满意度分布</h3> | </div>"
        }
      ],
      "codePreview": [
        "<div class=\"chart-header\">",
        "<h3>客户满意度分布</h3>",
        "</div>",
        "<div class=\"chart-content\">",
        "<canvas id=\"satisfaction-distribution-chart\"></canvas>"
      ]
    },
    {
      "id": "a25a19ac",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "396-400",
          "preview": "</div> | </div> | </div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "396-400",
          "preview": "</div> | </div> | </div>"
        }
      ],
      "codePreview": [
        "</div>",
        "</div>",
        "</div>",
        "<!-- 详细数据表格 -->"
      ]
    },
    {
      "id": "591b4b24",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "401-405",
          "preview": "<div class=\"data-tables\"> | <div class=\"table-container\"> | <div class=\"table-header\">"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "401-405",
          "preview": "<div class=\"data-tables\"> | <div class=\"table-container\"> | <div class=\"table-header\">"
        }
      ],
      "codePreview": [
        "<div class=\"data-tables\">",
        "<div class=\"table-container\">",
        "<div class=\"table-header\">",
        "<h3>最新对话</h3>",
        "<button class=\"btn btn-sm btn-primary\">查看全部</button>"
      ]
    },
    {
      "id": "9145c377",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "406-410",
          "preview": "</div> | <div class=\"table-content\"> | <table id=\"recent-conversations-table\" class=\"data-table\">"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "406-410",
          "preview": "</div> | <div class=\"table-content\"> | <table id=\"recent-conversations-table\" class=\"data-table\">"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"table-content\">",
        "<table id=\"recent-conversations-table\" class=\"data-table\">",
        "<thead>",
        "<tr>"
      ]
    },
    {
      "id": "fdb80f07",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "411-415",
          "preview": "<th>客户</th> | <th>员工</th> | <th>开始时间</th>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "411-415",
          "preview": "<th>客户</th> | <th>员工</th> | <th>开始时间</th>"
        }
      ],
      "codePreview": [
        "<th>客户</th>",
        "<th>员工</th>",
        "<th>开始时间</th>",
        "<th>状态</th>",
        "<th>消息数</th>"
      ]
    },
    {
      "id": "54ad8132",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "416-420",
          "preview": "<th>满意度</th> | </tr> | </thead>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "416-420",
          "preview": "<th>满意度</th> | </tr> | </thead>"
        }
      ],
      "codePreview": [
        "<th>满意度</th>",
        "</tr>",
        "</thead>",
        "<tbody>",
        "<!-- 动态数据 -->"
      ]
    },
    {
      "id": "bafed093",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "421-425",
          "preview": "</tbody> | </table> | </div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "421-425",
          "preview": "</tbody> | </table> | </div>"
        }
      ],
      "codePreview": [
        "</tbody>",
        "</table>",
        "</div>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "798af78c",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "436-440",
          "preview": "createKPIDashboard(container) { | container.innerHTML = ` | <div class=\"kpi-dashboard\">"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "436-440",
          "preview": "createKPIDashboard(container) { | container.innerHTML = ` | <div class=\"kpi-dashboard\">"
        }
      ],
      "codePreview": [
        "createKPIDashboard(container) {",
        "container.innerHTML = `",
        "<div class=\"kpi-dashboard\">",
        "<div class=\"kpi-categories\">",
        "<div class=\"category-tabs\">"
      ]
    },
    {
      "id": "941555dd",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "441-445",
          "preview": "<button class=\"tab-btn active\" data-category=\"all\">全部</button> | <button class=\"tab-btn\" data-category=\"performance\">性能</button> | <button class=\"tab-btn\" data-category=\"customer\">客户</button>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "441-445",
          "preview": "<button class=\"tab-btn active\" data-category=\"all\">全部</button> | <button class=\"tab-btn\" data-category=\"performance\">性能</button> | <button class=\"tab-btn\" data-category=\"customer\">客户</button>"
        }
      ],
      "codePreview": [
        "<button class=\"tab-btn active\" data-category=\"all\">全部</button>",
        "<button class=\"tab-btn\" data-category=\"performance\">性能</button>",
        "<button class=\"tab-btn\" data-category=\"customer\">客户</button>",
        "<button class=\"tab-btn\" data-category=\"business\">业务</button>",
        "<button class=\"tab-btn\" data-category=\"employee\">员工</button>"
      ]
    },
    {
      "id": "44ead511",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "446-450",
          "preview": "<button class=\"tab-btn\" data-category=\"system\">系统</button> | </div> | </div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "446-450",
          "preview": "<button class=\"tab-btn\" data-category=\"system\">系统</button> | </div> | </div>"
        }
      ],
      "codePreview": [
        "<button class=\"tab-btn\" data-category=\"system\">系统</button>",
        "</div>",
        "</div>",
        "<div class=\"kpi-grid\" id=\"kpi-grid\">"
      ]
    },
    {
      "id": "328b54f5",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "451-455",
          "preview": "<!-- 动态KPI卡片 --> | </div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "451-455",
          "preview": "<!-- 动态KPI卡片 --> | </div>"
        }
      ],
      "codePreview": [
        "<!-- 动态KPI卡片 -->",
        "</div>",
        "<div class=\"kpi-analytics\">",
        "<div class=\"analytics-section\">"
      ]
    },
    {
      "id": "fd087bf6",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "456-460",
          "preview": "<h3>KPI趋势分析</h3> | <canvas id=\"kpi-trends-chart\"></canvas> | </div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "456-460",
          "preview": "<h3>KPI趋势分析</h3> | <canvas id=\"kpi-trends-chart\"></canvas> | </div>"
        }
      ],
      "codePreview": [
        "<h3>KPI趋势分析</h3>",
        "<canvas id=\"kpi-trends-chart\"></canvas>",
        "</div>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "fbd692f9",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "471-475",
          "preview": "<div class=\"performance-dashboard\"> | <div class=\"performance-summary\"> | <div class=\"summary-cards\">"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "471-475",
          "preview": "<div class=\"performance-dashboard\"> | <div class=\"performance-summary\"> | <div class=\"summary-cards\">"
        }
      ],
      "codePreview": [
        "<div class=\"performance-dashboard\">",
        "<div class=\"performance-summary\">",
        "<div class=\"summary-cards\">",
        "<div class=\"summary-card\">",
        "<h3>总员工数</h3>"
      ]
    },
    {
      "id": "0a9e8d91",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "476-480",
          "preview": "<div class=\"summary-value\" id=\"total-employees\">-</div> | </div> | <div class=\"summary-card\">"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "476-480",
          "preview": "<div class=\"summary-value\" id=\"total-employees\">-</div> | </div> | <div class=\"summary-card\">"
        }
      ],
      "codePreview": [
        "<div class=\"summary-value\" id=\"total-employees\">-</div>",
        "</div>",
        "<div class=\"summary-card\">",
        "<h3>活跃员工</h3>",
        "<div class=\"summary-value\" id=\"active-employees\">-</div>"
      ]
    },
    {
      "id": "6940f20e",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "481-485",
          "preview": "</div> | <div class=\"summary-card\"> | <h3>平均生产力</h3>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "481-485",
          "preview": "</div> | <div class=\"summary-card\"> | <h3>平均生产力</h3>"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"summary-card\">",
        "<h3>平均生产力</h3>",
        "<div class=\"summary-value\" id=\"avg-productivity\">-</div>",
        "</div>"
      ]
    },
    {
      "id": "181c6d77",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "486-490",
          "preview": "<div class=\"summary-card\"> | <h3>平均质量分</h3> | <div class=\"summary-value\" id=\"avg-quality\">-</div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "486-490",
          "preview": "<div class=\"summary-card\"> | <h3>平均质量分</h3> | <div class=\"summary-value\" id=\"avg-quality\">-</div>"
        }
      ],
      "codePreview": [
        "<div class=\"summary-card\">",
        "<h3>平均质量分</h3>",
        "<div class=\"summary-value\" id=\"avg-quality\">-</div>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "b485a9db",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "491-495",
          "preview": "</div> | <div class=\"performance-charts\">"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "491-495",
          "preview": "</div> | <div class=\"performance-charts\">"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"performance-charts\">",
        "<div class=\"chart-container\">",
        "<h3>员工绩效排名</h3>"
      ]
    },
    {
      "id": "2a68266f",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "496-500",
          "preview": "<canvas id=\"employee-performance-chart\"></canvas> | </div> | <div class=\"chart-container\">"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "496-500",
          "preview": "<canvas id=\"employee-performance-chart\"></canvas> | </div> | <div class=\"chart-container\">"
        }
      ],
      "codePreview": [
        "<canvas id=\"employee-performance-chart\"></canvas>",
        "</div>",
        "<div class=\"chart-container\">",
        "<h3>绩效趋势</h3>",
        "<canvas id=\"performance-trend-chart\"></canvas>"
      ]
    },
    {
      "id": "7ae2fe06",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "501-505",
          "preview": "</div> | </div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "501-505",
          "preview": "</div> | </div>"
        }
      ],
      "codePreview": [
        "</div>",
        "</div>",
        "<div class=\"performance-table\">",
        "<h3>详细绩效数据</h3>"
      ]
    },
    {
      "id": "891acdc0",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "506-510",
          "preview": "<table id=\"performance-data-table\" class=\"data-table\"> | <thead> | <tr>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "506-510",
          "preview": "<table id=\"performance-data-table\" class=\"data-table\"> | <thead> | <tr>"
        }
      ],
      "codePreview": [
        "<table id=\"performance-data-table\" class=\"data-table\">",
        "<thead>",
        "<tr>",
        "<th>员工</th>",
        "<th>对话数</th>"
      ]
    },
    {
      "id": "1760120c",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "511-515",
          "preview": "<th>响应时间</th> | <th>满意度</th> | <th>生产力分</th>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "511-515",
          "preview": "<th>响应时间</th> | <th>满意度</th> | <th>生产力分</th>"
        }
      ],
      "codePreview": [
        "<th>响应时间</th>",
        "<th>满意度</th>",
        "<th>生产力分</th>",
        "<th>质量分</th>",
        "<th>排名</th>"
      ]
    },
    {
      "id": "1b031fde",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "516-520",
          "preview": "</tr> | </thead> | <tbody>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "516-520",
          "preview": "</tr> | </thead> | <tbody>"
        }
      ],
      "codePreview": [
        "</tr>",
        "</thead>",
        "<tbody>",
        "<!-- 动态数据 -->",
        "</tbody>"
      ]
    },
    {
      "id": "5aadf299",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "531-535",
          "preview": "*/ | createSatisfactionDashboard(container) { | container.innerHTML = `"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "531-535",
          "preview": "*/ | createSatisfactionDashboard(container) { | container.innerHTML = `"
        }
      ],
      "codePreview": [
        "createSatisfactionDashboard(container) {",
        "container.innerHTML = `",
        "<div class=\"satisfaction-dashboard\">",
        "<div class=\"satisfaction-overview\">"
      ]
    },
    {
      "id": "0cbe316b",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "536-540",
          "preview": "<div class=\"satisfaction-gauge\"> | <h3>整体满意度</h3> | <canvas id=\"satisfaction-gauge-chart\"></canvas>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "536-540",
          "preview": "<div class=\"satisfaction-gauge\"> | <h3>整体满意度</h3> | <canvas id=\"satisfaction-gauge-chart\"></canvas>"
        }
      ],
      "codePreview": [
        "<div class=\"satisfaction-gauge\">",
        "<h3>整体满意度</h3>",
        "<canvas id=\"satisfaction-gauge-chart\"></canvas>",
        "</div>",
        "<div class=\"satisfaction-distribution\">"
      ]
    },
    {
      "id": "a526e76c",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "541-545",
          "preview": "<h3>满意度分布</h3> | <canvas id=\"satisfaction-pie-chart\"></canvas> | </div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "541-545",
          "preview": "<h3>满意度分布</h3> | <canvas id=\"satisfaction-pie-chart\"></canvas> | </div>"
        }
      ],
      "codePreview": [
        "<h3>满意度分布</h3>",
        "<canvas id=\"satisfaction-pie-chart\"></canvas>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "4d4b9123",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "546-550",
          "preview": "<div class=\"satisfaction-details\"> | <div class=\"details-section\"> | <h3>满意度趋势</h3>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "546-550",
          "preview": "<div class=\"satisfaction-details\"> | <div class=\"details-section\"> | <h3>满意度趋势</h3>"
        }
      ],
      "codePreview": [
        "<div class=\"satisfaction-details\">",
        "<div class=\"details-section\">",
        "<h3>满意度趋势</h3>",
        "<canvas id=\"satisfaction-trend-chart\"></canvas>",
        "</div>"
      ]
    },
    {
      "id": "29b2575e",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "551-555",
          "preview": "<div class=\"details-section\"> | <h3>各维度评分</h3> | <canvas id=\"satisfaction-radar-chart\"></canvas>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "551-555",
          "preview": "<div class=\"details-section\"> | <h3>各维度评分</h3> | <canvas id=\"satisfaction-radar-chart\"></canvas>"
        }
      ],
      "codePreview": [
        "<div class=\"details-section\">",
        "<h3>各维度评分</h3>",
        "<canvas id=\"satisfaction-radar-chart\"></canvas>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "abcbcb5c",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "556-560",
          "preview": "<div class=\"feedback-analysis\"> | <h3>客户反馈分析</h3>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "556-560",
          "preview": "<div class=\"feedback-analysis\"> | <h3>客户反馈分析</h3>"
        }
      ],
      "codePreview": [
        "<div class=\"feedback-analysis\">",
        "<h3>客户反馈分析</h3>",
        "<div id=\"feedback-table-container\">",
        "<table id=\"feedback-table\" class=\"data-table\">"
      ]
    },
    {
      "id": "33080e22",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "561-565",
          "preview": "<thead> | <tr> | <th>客户</th>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "561-565",
          "preview": "<thead> | <tr> | <th>客户</th>"
        }
      ],
      "codePreview": [
        "<thead>",
        "<tr>",
        "<th>客户</th>",
        "<th>评分</th>",
        "<th>反馈内容</th>"
      ]
    },
    {
      "id": "8c257c04",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "566-570",
          "preview": "<th>情感</th> | <th>时间</th> | <th>处理员工</th>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "566-570",
          "preview": "<th>情感</th> | <th>时间</th> | <th>处理员工</th>"
        }
      ],
      "codePreview": [
        "<th>情感</th>",
        "<th>时间</th>",
        "<th>处理员工</th>",
        "</tr>",
        "</thead>"
      ]
    },
    {
      "id": "03d9b71b",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "571-575",
          "preview": "<tbody> | <!-- 动态反馈数据 --> | </tbody>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "571-575",
          "preview": "<tbody> | <!-- 动态反馈数据 --> | </tbody>"
        }
      ],
      "codePreview": [
        "<tbody>",
        "<!-- 动态反馈数据 -->",
        "</tbody>",
        "</table>",
        "</div>"
      ]
    },
    {
      "id": "2a3efe2d",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "586-590",
          "preview": "createRevenueDashboard(container) { | container.innerHTML = ` | <div class=\"revenue-dashboard\">"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "586-590",
          "preview": "createRevenueDashboard(container) { | container.innerHTML = ` | <div class=\"revenue-dashboard\">"
        }
      ],
      "codePreview": [
        "createRevenueDashboard(container) {",
        "container.innerHTML = `",
        "<div class=\"revenue-dashboard\">",
        "<div class=\"revenue-summary\">",
        "<div class=\"revenue-cards\">"
      ]
    },
    {
      "id": "fde85c60",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "591-595",
          "preview": "<div class=\"revenue-card\"> | <h3>总收入</h3> | <div class=\"revenue-value\" id=\"total-revenue-display\">-</div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "591-595",
          "preview": "<div class=\"revenue-card\"> | <h3>总收入</h3> | <div class=\"revenue-value\" id=\"total-revenue-display\">-</div>"
        }
      ],
      "codePreview": [
        "<div class=\"revenue-card\">",
        "<h3>总收入</h3>",
        "<div class=\"revenue-value\" id=\"total-revenue-display\">-</div>",
        "<div class=\"revenue-change\" id=\"revenue-growth\">-</div>",
        "</div>"
      ]
    },
    {
      "id": "a8b5618c",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "596-600",
          "preview": "<div class=\"revenue-card\"> | <h3>月度经常性收入(MRR)</h3> | <div class=\"revenue-value\" id=\"mrr-display\">-</div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "596-600",
          "preview": "<div class=\"revenue-card\"> | <h3>月度经常性收入(MRR)</h3> | <div class=\"revenue-value\" id=\"mrr-display\">-</div>"
        }
      ],
      "codePreview": [
        "<div class=\"revenue-card\">",
        "<h3>月度经常性收入(MRR)</h3>",
        "<div class=\"revenue-value\" id=\"mrr-display\">-</div>",
        "</div>",
        "<div class=\"revenue-card\">"
      ]
    },
    {
      "id": "fb63b715",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "601-605",
          "preview": "<h3>年度经常性收入(ARR)</h3> | <div class=\"revenue-value\" id=\"arr-display\">-</div> | </div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "601-605",
          "preview": "<h3>年度经常性收入(ARR)</h3> | <div class=\"revenue-value\" id=\"arr-display\">-</div> | </div>"
        }
      ],
      "codePreview": [
        "<h3>年度经常性收入(ARR)</h3>",
        "<div class=\"revenue-value\" id=\"arr-display\">-</div>",
        "</div>",
        "<div class=\"revenue-card\">",
        "<h3>客户生命周期价值(LTV)</h3>"
      ]
    },
    {
      "id": "2f4cfba2",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "606-610",
          "preview": "<div class=\"revenue-value\" id=\"ltv-display\">-</div> | </div> | </div>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "606-610",
          "preview": "<div class=\"revenue-value\" id=\"ltv-display\">-</div> | </div> | </div>"
        }
      ],
      "codePreview": [
        "<div class=\"revenue-value\" id=\"ltv-display\">-</div>",
        "</div>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "28f43400",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "611-615",
          "preview": "<div class=\"revenue-charts\"> | <div class=\"chart-container\"> | <h3>收入趋势</h3>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "611-615",
          "preview": "<div class=\"revenue-charts\"> | <div class=\"chart-container\"> | <h3>收入趋势</h3>"
        }
      ],
      "codePreview": [
        "<div class=\"revenue-charts\">",
        "<div class=\"chart-container\">",
        "<h3>收入趋势</h3>",
        "<canvas id=\"revenue-trend-chart\"></canvas>",
        "</div>"
      ]
    },
    {
      "id": "1a2d5c57",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "616-620",
          "preview": "<div class=\"chart-container\"> | <h3>订阅类型分布</h3> | <canvas id=\"subscription-chart\"></canvas>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "616-620",
          "preview": "<div class=\"chart-container\"> | <h3>订阅类型分布</h3> | <canvas id=\"subscription-chart\"></canvas>"
        }
      ],
      "codePreview": [
        "<div class=\"chart-container\">",
        "<h3>订阅类型分布</h3>",
        "<canvas id=\"subscription-chart\"></canvas>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "c5e32218",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "621-625",
          "preview": "<div class=\"revenue-analysis\"> | <div class=\"analysis-section\">"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "621-625",
          "preview": "<div class=\"revenue-analysis\"> | <div class=\"analysis-section\">"
        }
      ],
      "codePreview": [
        "<div class=\"revenue-analysis\">",
        "<div class=\"analysis-section\">",
        "<h3>收入预测</h3>",
        "<canvas id=\"revenue-forecast-chart\"></canvas>"
      ]
    },
    {
      "id": "66171a3f",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "626-630",
          "preview": "</div> | <div class=\"analysis-section\"> | <h3>客户获取与流失</h3>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "626-630",
          "preview": "</div> | <div class=\"analysis-section\"> | <h3>客户获取与流失</h3>"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"analysis-section\">",
        "<h3>客户获取与流失</h3>",
        "<canvas id=\"churn-retention-chart\"></canvas>",
        "</div>"
      ]
    },
    {
      "id": "6ea5c00b",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "696-700",
          "preview": "switch (data.type) { | case 'analytics_update': | this.handleAnalyticsUpdate(data.payload);"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "696-700",
          "preview": "switch (data.type) { | case 'analytics_update': | this.handleAnalyticsUpdate(data.payload);"
        }
      ],
      "codePreview": [
        "switch (data.type) {",
        "case 'analytics_update':",
        "this.handleAnalyticsUpdate(data.payload);",
        "break;",
        "case 'kpi_alert':"
      ]
    },
    {
      "id": "f53dfcf0",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "701-705",
          "preview": "this.handleKPIAlert(data.payload); | break; | case 'real_time_metric':"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "701-705",
          "preview": "this.handleKPIAlert(data.payload); | break; | case 'real_time_metric':"
        }
      ],
      "codePreview": [
        "this.handleKPIAlert(data.payload);",
        "break;",
        "case 'real_time_metric':",
        "this.handleRealTimeMetric(data.payload);",
        "break;"
      ]
    },
    {
      "id": "314c05e4",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "761-765",
          "preview": "const [ | dashboardData, | employeeList,"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "761-765",
          "preview": "const [ | dashboardData, | employeeList,"
        }
      ],
      "codePreview": [
        "const [",
        "dashboardData,",
        "employeeList,",
        "alerts",
        "] = await Promise.all(["
      ]
    },
    {
      "id": "f51f8d67",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "766-770",
          "preview": "this.fetchDashboardData(), | this.fetchEmployeeList(), | this.fetchAlerts()"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "766-770",
          "preview": "this.fetchDashboardData(), | this.fetchEmployeeList(), | this.fetchAlerts()"
        }
      ],
      "codePreview": [
        "this.fetchDashboardData(),",
        "this.fetchEmployeeList(),",
        "this.fetchAlerts()",
        "]);"
      ]
    },
    {
      "id": "b139d018",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "791-795",
          "preview": "method: 'GET', | headers: { | 'Content-Type': 'application/json',"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "791-795",
          "preview": "method: 'GET', | headers: { | 'Content-Type': 'application/json',"
        }
      ],
      "codePreview": [
        "method: 'GET',",
        "headers: {",
        "'Content-Type': 'application/json',",
        "'Authorization': `Bearer ${localStorage.getItem('authToken') || ''}`",
        "}"
      ]
    },
    {
      "id": "6c16b163",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "811-815",
          "preview": "headers: { | 'Content-Type': 'application/json', | 'Authorization': `Bearer ${localStorage.getItem('authToken') || ''}`"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "811-815",
          "preview": "headers: { | 'Content-Type': 'application/json', | 'Authorization': `Bearer ${localStorage.getItem('authToken') || ''}`"
        }
      ],
      "codePreview": [
        "headers: {",
        "'Content-Type': 'application/json',",
        "'Authorization': `Bearer ${localStorage.getItem('authToken') || ''}`",
        "}",
        "});"
      ]
    },
    {
      "id": "65d81092",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "826-830",
          "preview": "*/ | async fetchAlerts() { | const response = await fetch(`/api/analytics/alerts/${this.shopId}`, {"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "826-830",
          "preview": "*/ | async fetchAlerts() { | const response = await fetch(`/api/analytics/alerts/${this.shopId}`, {"
        }
      ],
      "codePreview": [
        "async fetchAlerts() {",
        "const response = await fetch(`/api/analytics/alerts/${this.shopId}`, {",
        "method: 'GET',",
        "headers: {"
      ]
    },
    {
      "id": "6f3dd4ba",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "871-875",
          "preview": "updateMetricCards(metrics) { | // 更新对话总数 | if (metrics.totalConversations !== undefined) {"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "871-875",
          "preview": "updateMetricCards(metrics) { | // 更新对话总数 | if (metrics.totalConversations !== undefined) {"
        }
      ],
      "codePreview": [
        "updateMetricCards(metrics) {",
        "if (metrics.totalConversations !== undefined) {",
        "const element = document.getElementById('total-conversations');",
        "if (element) {"
      ]
    },
    {
      "id": "484e91a2",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "881-885",
          "preview": "if (metrics.avgResponseTime !== undefined) { | const element = document.getElementById('avg-response-time'); | if (element) {"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "881-885",
          "preview": "if (metrics.avgResponseTime !== undefined) { | const element = document.getElementById('avg-response-time'); | if (element) {"
        }
      ],
      "codePreview": [
        "if (metrics.avgResponseTime !== undefined) {",
        "const element = document.getElementById('avg-response-time');",
        "if (element) {",
        "element.textContent = this.formatTime(metrics.avgResponseTime);",
        "}"
      ]
    },
    {
      "id": "df645a60",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "896-900",
          "preview": "// 更新总收入 | if (metrics.totalRevenue !== undefined) { | const element = document.getElementById('total-revenue');"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "896-900",
          "preview": "// 更新总收入 | if (metrics.totalRevenue !== undefined) { | const element = document.getElementById('total-revenue');"
        }
      ],
      "codePreview": [
        "if (metrics.totalRevenue !== undefined) {",
        "const element = document.getElementById('total-revenue');",
        "if (element) {",
        "element.textContent = this.formatCurrency(metrics.totalRevenue);"
      ]
    },
    {
      "id": "fd9e2265",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "911-915",
          "preview": "updateMetricChanges(metrics) { | if (metrics.trend) { | // 根据趋势更新变化指示器"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "911-915",
          "preview": "updateMetricChanges(metrics) { | if (metrics.trend) { | // 根据趋势更新变化指示器"
        }
      ],
      "codePreview": [
        "updateMetricChanges(metrics) {",
        "if (metrics.trend) {",
        "const changeElements = {",
        "'conversations-change': metrics.trend.conversations,"
      ]
    },
    {
      "id": "399947ee",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "921-925",
          "preview": "Object.entries(changeElements).forEach(([elementId, trend]) => { | const element = document.getElementById(elementId); | if (element && trend) {"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "921-925",
          "preview": "Object.entries(changeElements).forEach(([elementId, trend]) => { | const element = document.getElementById(elementId); | if (element && trend) {"
        }
      ],
      "codePreview": [
        "Object.entries(changeElements).forEach(([elementId, trend]) => {",
        "const element = document.getElementById(elementId);",
        "if (element && trend) {",
        "const icon = trend === 'up' ? '↗' : trend === 'down' ? '↘' : '→';",
        "const className = trend === 'up' ? 'positive' : trend === 'down' ? 'negative' : 'neutral';"
      ]
    },
    {
      "id": "f6add6fa",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "936-940",
          "preview": "// 对话趋势图表 | const conversationsTrendCtx = document.getElementById('conversations-trend-chart'); | if (conversationsTrendCtx) {"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "936-940",
          "preview": "// 对话趋势图表 | const conversationsTrendCtx = document.getElementById('conversations-trend-chart'); | if (conversationsTrendCtx) {"
        }
      ],
      "codePreview": [
        "const conversationsTrendCtx = document.getElementById('conversations-trend-chart');",
        "if (conversationsTrendCtx) {",
        "this.charts.set('conversations-trend', new Chart(conversationsTrendCtx, {",
        "type: 'line',"
      ]
    },
    {
      "id": "99fc7fb7",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "956-960",
          "preview": "const responseTimeCtx = document.getElementById('response-time-chart'); | if (responseTimeCtx) { | this.charts.set('response-time', new Chart(responseTimeCtx, {"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "956-960",
          "preview": "const responseTimeCtx = document.getElementById('response-time-chart'); | if (responseTimeCtx) { | this.charts.set('response-time', new Chart(responseTimeCtx, {"
        }
      ],
      "codePreview": [
        "const responseTimeCtx = document.getElementById('response-time-chart');",
        "if (responseTimeCtx) {",
        "this.charts.set('response-time', new Chart(responseTimeCtx, {",
        "type: 'bar',",
        "data: {"
      ]
    },
    {
      "id": "9145705f",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "991-995",
          "preview": "if (satisfactionDistCtx) { | this.charts.set('satisfaction-distribution', new Chart(satisfactionDistCtx, { | type: 'doughnut',"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "991-995",
          "preview": "if (satisfactionDistCtx) { | this.charts.set('satisfaction-distribution', new Chart(satisfactionDistCtx, { | type: 'doughnut',"
        }
      ],
      "codePreview": [
        "if (satisfactionDistCtx) {",
        "this.charts.set('satisfaction-distribution', new Chart(satisfactionDistCtx, {",
        "type: 'doughnut',",
        "data: {",
        "labels: ['非常满意', '满意', '一般', '不满意', '非常不满意'],"
      ]
    },
    {
      "id": "78a1b6e0",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1016-1020",
          "preview": "return { | responsive: true, | maintainAspectRatio: false,"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1016-1020",
          "preview": "return { | responsive: true, | maintainAspectRatio: false,"
        }
      ],
      "codePreview": [
        "return {",
        "responsive: true,",
        "maintainAspectRatio: false,",
        "plugins: {",
        "legend: {"
      ]
    },
    {
      "id": "c3024373",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1026-1030",
          "preview": "y: { | beginAtZero: true, | grid: {"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1026-1030",
          "preview": "y: { | beginAtZero: true, | grid: {"
        }
      ],
      "codePreview": [
        "y: {",
        "beginAtZero: true,",
        "grid: {",
        "color: 'rgba(0,0,0,0.1)'",
        "}"
      ]
    },
    {
      "id": "cb4ebd0f",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1066-1070",
          "preview": "if (chart && dailyData) { | const labels = dailyData.map(d => this.formatDate(d.metric_date)); | const data = dailyData.map(d => d.total_conversations || 0);"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1066-1070",
          "preview": "if (chart && dailyData) { | const labels = dailyData.map(d => this.formatDate(d.metric_date)); | const data = dailyData.map(d => d.total_conversations || 0);"
        }
      ],
      "codePreview": [
        "if (chart && dailyData) {",
        "const labels = dailyData.map(d => this.formatDate(d.metric_date));",
        "const data = dailyData.map(d => d.total_conversations || 0);",
        "chart.data.labels = labels;"
      ]
    },
    {
      "id": "062940f5",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1081-1085",
          "preview": "if (chart && rankings) { | const topEmployees = rankings.slice(0, 10); // 显示前10名 | const labels = topEmployees.map(e => e.employee_name || '未知');"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1081-1085",
          "preview": "if (chart && rankings) { | const topEmployees = rankings.slice(0, 10); // 显示前10名 | const labels = topEmployees.map(e => e.employee_name || '未知');"
        }
      ],
      "codePreview": [
        "if (chart && rankings) {",
        "const topEmployees = rankings.slice(0, 10);",
        "const labels = topEmployees.map(e => e.employee_name || '未知');",
        "const data = topEmployees.map(e => e.productivity_score || 0);"
      ]
    },
    {
      "id": "be2497ac",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1096-1100",
          "preview": "const chart = this.charts.get('satisfaction-distribution'); | if (chart && summary && summary.distribution) { | const dist = summary.distribution;"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1096-1100",
          "preview": "const chart = this.charts.get('satisfaction-distribution'); | if (chart && summary && summary.distribution) { | const dist = summary.distribution;"
        }
      ],
      "codePreview": [
        "const chart = this.charts.get('satisfaction-distribution');",
        "if (chart && summary && summary.distribution) {",
        "const dist = summary.distribution;",
        "const data = [",
        "dist.excellent || 0,"
      ]
    },
    {
      "id": "803a5856",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1101-1105",
          "preview": "dist.good || 0, | dist.neutral || 0, | dist.poor || 0,"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1101-1105",
          "preview": "dist.good || 0, | dist.neutral || 0, | dist.poor || 0,"
        }
      ],
      "codePreview": [
        "dist.good || 0,",
        "dist.neutral || 0,",
        "dist.poor || 0,",
        "dist.terrible || 0",
        "];"
      ]
    },
    {
      "id": "631ff6ed",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1126-1130",
          "preview": "// 更新UI状态 | document.querySelectorAll('.mode-btn').forEach(btn => { | btn.classList.remove('active');"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1126-1130",
          "preview": "// 更新UI状态 | document.querySelectorAll('.mode-btn').forEach(btn => { | btn.classList.remove('active');"
        }
      ],
      "codePreview": [
        "document.querySelectorAll('.mode-btn').forEach(btn => {",
        "btn.classList.remove('active');",
        "});",
        "document.querySelector(`[data-mode=\"${mode}\"]`).classList.add('active');"
      ]
    },
    {
      "id": "bd7df5a1",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1146-1150",
          "preview": "case 'kpi': | data = await this.fetchKPIData(); | this.updateKPIDashboard(data);"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1146-1150",
          "preview": "case 'kpi': | data = await this.fetchKPIData(); | this.updateKPIDashboard(data);"
        }
      ],
      "codePreview": [
        "case 'kpi':",
        "data = await this.fetchKPIData();",
        "this.updateKPIDashboard(data);",
        "break;",
        "case 'performance':"
      ]
    },
    {
      "id": "ddb21228",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1151-1155",
          "preview": "data = await this.fetchPerformanceData(); | this.updatePerformanceDashboard(data); | break;"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1151-1155",
          "preview": "data = await this.fetchPerformanceData(); | this.updatePerformanceDashboard(data); | break;"
        }
      ],
      "codePreview": [
        "data = await this.fetchPerformanceData();",
        "this.updatePerformanceDashboard(data);",
        "break;",
        "case 'satisfaction':",
        "data = await this.fetchSatisfactionData();"
      ]
    },
    {
      "id": "4a52106d",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1156-1160",
          "preview": "this.updateSatisfactionDashboard(data); | break; | case 'revenue':"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1156-1160",
          "preview": "this.updateSatisfactionDashboard(data); | break; | case 'revenue':"
        }
      ],
      "codePreview": [
        "this.updateSatisfactionDashboard(data);",
        "break;",
        "case 'revenue':",
        "data = await this.fetchRevenueData();",
        "this.updateRevenueDashboard(data);"
      ]
    },
    {
      "id": "67128f6e",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1196-1200",
          "preview": "startRealTimeUpdates() { | if (this.isRealTimeEnabled) { | // 每30秒自动刷新一次"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1196-1200",
          "preview": "startRealTimeUpdates() { | if (this.isRealTimeEnabled) { | // 每30秒自动刷新一次"
        }
      ],
      "codePreview": [
        "startRealTimeUpdates() {",
        "if (this.isRealTimeEnabled) {",
        "this.refreshInterval = setInterval(() => {",
        "this.refreshQuickMetrics();"
      ]
    },
    {
      "id": "68ebb31c",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1221-1225",
          "preview": "const response = await fetch(`/api/analytics/quick-metrics/${this.shopId}`, { | method: 'GET', | headers: {"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1221-1225",
          "preview": "const response = await fetch(`/api/analytics/quick-metrics/${this.shopId}`, { | method: 'GET', | headers: {"
        }
      ],
      "codePreview": [
        "const response = await fetch(`/api/analytics/quick-metrics/${this.shopId}`, {",
        "method: 'GET',",
        "headers: {",
        "'Content-Type': 'application/json',",
        "'Authorization': `Bearer ${localStorage.getItem('authToken') || ''}`"
      ]
    },
    {
      "id": "e0fb6f06",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1241-1245",
          "preview": "if (!container || !metrics) return; | container.innerHTML = `"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1241-1245",
          "preview": "if (!container || !metrics) return; | container.innerHTML = `"
        }
      ],
      "codePreview": [
        "if (!container || !metrics) return;",
        "container.innerHTML = `",
        "<div class=\"quick-metric\">",
        "<span class=\"metric-label\">活跃对话</span>"
      ]
    },
    {
      "id": "237097e8",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1246-1250",
          "preview": "<span class=\"metric-value\">${metrics.activeConversations || 0}</span> | </div> | <div class=\"quick-metric\">"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1246-1250",
          "preview": "<span class=\"metric-value\">${metrics.activeConversations || 0}</span> | </div> | <div class=\"quick-metric\">"
        }
      ],
      "codePreview": [
        "<span class=\"metric-value\">${metrics.activeConversations || 0}</span>",
        "</div>",
        "<div class=\"quick-metric\">",
        "<span class=\"metric-label\">在线员工</span>",
        "<span class=\"metric-value\">${metrics.onlineEmployees || 0}</span>"
      ]
    },
    {
      "id": "f620f516",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1251-1255",
          "preview": "</div> | <div class=\"quick-metric\"> | <span class=\"metric-label\">响应时间</span>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1251-1255",
          "preview": "</div> | <div class=\"quick-metric\"> | <span class=\"metric-label\">响应时间</span>"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"quick-metric\">",
        "<span class=\"metric-label\">响应时间</span>",
        "<span class=\"metric-value\">${this.formatTime(metrics.avgResponseTime || 0)}</span>",
        "</div>"
      ]
    },
    {
      "id": "4bc302cf",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1256-1260",
          "preview": "<div class=\"quick-metric\"> | <span class=\"metric-label\">今日收入</span> | <span class=\"metric-value\">${this.formatCurrency(metrics.todayRevenue || 0)}</span>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1256-1260",
          "preview": "<div class=\"quick-metric\"> | <span class=\"metric-label\">今日收入</span> | <span class=\"metric-value\">${this.formatCurrency(metrics.todayRevenue || 0)}</span>"
        }
      ],
      "codePreview": [
        "<div class=\"quick-metric\">",
        "<span class=\"metric-label\">今日收入</span>",
        "<span class=\"metric-value\">${this.formatCurrency(metrics.todayRevenue || 0)}</span>",
        "</div>",
        "`;"
      ]
    },
    {
      "id": "4d350363",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1266-1270",
          "preview": "showExportModal() { | const modal = document.getElementById('modal-overlay'); | const title = document.getElementById('modal-title');"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1266-1270",
          "preview": "showExportModal() { | const modal = document.getElementById('modal-overlay'); | const title = document.getElementById('modal-title');"
        }
      ],
      "codePreview": [
        "showExportModal() {",
        "const modal = document.getElementById('modal-overlay');",
        "const title = document.getElementById('modal-title');",
        "const body = document.getElementById('modal-body');",
        "const confirmBtn = document.getElementById('modal-confirm');"
      ]
    },
    {
      "id": "815493e2",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1271-1275",
          "preview": "title.textContent = '导出数据'; | body.innerHTML = `"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1271-1275",
          "preview": "title.textContent = '导出数据'; | body.innerHTML = `"
        }
      ],
      "codePreview": [
        "title.textContent = '导出数据';",
        "body.innerHTML = `",
        "<form id=\"export-form\">",
        "<div class=\"form-group\">"
      ]
    },
    {
      "id": "88e116af",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1276-1280",
          "preview": "<label>导出类型</label> | <select name=\"reportType\" required> | <option value=\"dashboard\">完整仪表板</option>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1276-1280",
          "preview": "<label>导出类型</label> | <select name=\"reportType\" required> | <option value=\"dashboard\">完整仪表板</option>"
        }
      ],
      "codePreview": [
        "<label>导出类型</label>",
        "<select name=\"reportType\" required>",
        "<option value=\"dashboard\">完整仪表板</option>",
        "<option value=\"kpi\">KPI指标</option>",
        "<option value=\"performance\">员工绩效</option>"
      ]
    },
    {
      "id": "a55cdf9d",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1281-1285",
          "preview": "<option value=\"satisfaction\">客户满意度</option> | <option value=\"revenue\">收入分析</option> | </select>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1281-1285",
          "preview": "<option value=\"satisfaction\">客户满意度</option> | <option value=\"revenue\">收入分析</option> | </select>"
        }
      ],
      "codePreview": [
        "<option value=\"satisfaction\">客户满意度</option>",
        "<option value=\"revenue\">收入分析</option>",
        "</select>",
        "</div>",
        "<div class=\"form-group\">"
      ]
    },
    {
      "id": "1f656038",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1286-1290",
          "preview": "<label>导出格式</label> | <select name=\"format\" required> | <option value=\"json\">JSON</option>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1286-1290",
          "preview": "<label>导出格式</label> | <select name=\"format\" required> | <option value=\"json\">JSON</option>"
        }
      ],
      "codePreview": [
        "<label>导出格式</label>",
        "<select name=\"format\" required>",
        "<option value=\"json\">JSON</option>",
        "<option value=\"csv\">CSV</option>",
        "<option value=\"excel\">Excel</option>"
      ]
    },
    {
      "id": "31ea1b34",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1291-1295",
          "preview": "</select> | </div> | <div class=\"form-group\">"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1291-1295",
          "preview": "</select> | </div> | <div class=\"form-group\">"
        }
      ],
      "codePreview": [
        "</select>",
        "</div>",
        "<div class=\"form-group\">",
        "<label>时间范围</label>",
        "<select name=\"timeRange\" required>"
      ]
    },
    {
      "id": "172ee93b",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1296-1300",
          "preview": "<option value=\"24h\">最近24小时</option> | <option value=\"7d\">最近7天</option> | <option value=\"30d\">最近30天</option>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1296-1300",
          "preview": "<option value=\"24h\">最近24小时</option> | <option value=\"7d\">最近7天</option> | <option value=\"30d\">最近30天</option>"
        }
      ],
      "codePreview": [
        "<option value=\"24h\">最近24小时</option>",
        "<option value=\"7d\">最近7天</option>",
        "<option value=\"30d\">最近30天</option>",
        "<option value=\"90d\">最近90天</option>",
        "</select>"
      ]
    },
    {
      "id": "3c8c7867",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1321-1325",
          "preview": "const response = await fetch(`/api/analytics/export/${this.shopId}`, { | method: 'POST',"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1321-1325",
          "preview": "const response = await fetch(`/api/analytics/export/${this.shopId}`, { | method: 'POST',"
        }
      ],
      "codePreview": [
        "const response = await fetch(`/api/analytics/export/${this.shopId}`, {",
        "method: 'POST',",
        "headers: {",
        "'Content-Type': 'application/json',"
      ]
    },
    {
      "id": "c1f4bba9",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1356-1360",
          "preview": "downloadExportedData(data, format, reportType) { | const timestamp = new Date().toISOString().split('T')[0]; | const filename = `${reportType}_${timestamp}.${format}`;"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1356-1360",
          "preview": "downloadExportedData(data, format, reportType) { | const timestamp = new Date().toISOString().split('T')[0]; | const filename = `${reportType}_${timestamp}.${format}`;"
        }
      ],
      "codePreview": [
        "downloadExportedData(data, format, reportType) {",
        "const timestamp = new Date().toISOString().split('T')[0];",
        "const filename = `${reportType}_${timestamp}.${format}`;",
        "const blob = new Blob([data], {"
      ]
    },
    {
      "id": "ab7cff4b",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1361-1365",
          "preview": "type: format === 'json' ? 'application/json' : 'text/plain' | });"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1361-1365",
          "preview": "type: format === 'json' ? 'application/json' : 'text/plain' | });"
        }
      ],
      "codePreview": [
        "type: format === 'json' ? 'application/json' : 'text/plain'",
        "});",
        "const url = URL.createObjectURL(blob);",
        "const a = document.createElement('a');"
      ]
    },
    {
      "id": "c3370fad",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1366-1370",
          "preview": "a.href = url; | a.download = filename; | document.body.appendChild(a);"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1366-1370",
          "preview": "a.href = url; | a.download = filename; | document.body.appendChild(a);"
        }
      ],
      "codePreview": [
        "a.href = url;",
        "a.download = filename;",
        "document.body.appendChild(a);",
        "a.click();",
        "document.body.removeChild(a);"
      ]
    },
    {
      "id": "a1701e40",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1376-1380",
          "preview": "*/ | showSettingsModal() { | const modal = document.getElementById('modal-overlay');"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1376-1380",
          "preview": "*/ | showSettingsModal() { | const modal = document.getElementById('modal-overlay');"
        }
      ],
      "codePreview": [
        "showSettingsModal() {",
        "const modal = document.getElementById('modal-overlay');",
        "const title = document.getElementById('modal-title');",
        "const body = document.getElementById('modal-body');"
      ]
    },
    {
      "id": "acb5c49e",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1381-1385",
          "preview": "const confirmBtn = document.getElementById('modal-confirm'); | title.textContent = '仪表板设置';"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1381-1385",
          "preview": "const confirmBtn = document.getElementById('modal-confirm'); | title.textContent = '仪表板设置';"
        }
      ],
      "codePreview": [
        "const confirmBtn = document.getElementById('modal-confirm');",
        "title.textContent = '仪表板设置';",
        "body.innerHTML = `",
        "<form id=\"settings-form\">"
      ]
    },
    {
      "id": "1850d24b",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1386-1390",
          "preview": "<div class=\"form-group\"> | <label> | <input type=\"checkbox\" name=\"realTimeEnabled\" ${this.isRealTimeEnabled ? 'checked' : ''}>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1386-1390",
          "preview": "<div class=\"form-group\"> | <label> | <input type=\"checkbox\" name=\"realTimeEnabled\" ${this.isRealTimeEnabled ? 'checked' : ''}>"
        }
      ],
      "codePreview": [
        "<div class=\"form-group\">",
        "<label>",
        "<input type=\"checkbox\" name=\"realTimeEnabled\" ${this.isRealTimeEnabled ? 'checked' : ''}>",
        "启用实时更新",
        "</label>"
      ]
    },
    {
      "id": "852d8638",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1391-1395",
          "preview": "</div> | <div class=\"form-group\"> | <label>自动刷新间隔(秒)</label>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1391-1395",
          "preview": "</div> | <div class=\"form-group\"> | <label>自动刷新间隔(秒)</label>"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"form-group\">",
        "<label>自动刷新间隔(秒)</label>",
        "<input type=\"number\" name=\"refreshInterval\" value=\"30\" min=\"10\" max=\"300\">",
        "</div>"
      ]
    },
    {
      "id": "2162dda9",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1396-1400",
          "preview": "<div class=\"form-group\"> | <label>默认时间范围</label> | <select name=\"defaultTimeRange\">"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1396-1400",
          "preview": "<div class=\"form-group\"> | <label>默认时间范围</label> | <select name=\"defaultTimeRange\">"
        }
      ],
      "codePreview": [
        "<div class=\"form-group\">",
        "<label>默认时间范围</label>",
        "<select name=\"defaultTimeRange\">",
        "<option value=\"1h\">1小时</option>",
        "<option value=\"24h\" selected>24小时</option>"
      ]
    },
    {
      "id": "f0dbdf88",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1401-1405",
          "preview": "<option value=\"7d\">7天</option> | <option value=\"30d\">30天</option> | </select>"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1401-1405",
          "preview": "<option value=\"7d\">7天</option> | <option value=\"30d\">30天</option> | </select>"
        }
      ],
      "codePreview": [
        "<option value=\"7d\">7天</option>",
        "<option value=\"30d\">30天</option>",
        "</select>",
        "</div>",
        "</form>"
      ]
    },
    {
      "id": "2d4bf150",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1461-1465",
          "preview": "updateConnectionStatus(status) { | const indicator = document.getElementById('connection-status'); | const statusText = document.querySelector('.status-text');"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1461-1465",
          "preview": "updateConnectionStatus(status) { | const indicator = document.getElementById('connection-status'); | const statusText = document.querySelector('.status-text');"
        }
      ],
      "codePreview": [
        "updateConnectionStatus(status) {",
        "const indicator = document.getElementById('connection-status');",
        "const statusText = document.querySelector('.status-text');",
        "if (indicator && statusText) {"
      ]
    },
    {
      "id": "9f18ba9b",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1466-1470",
          "preview": "indicator.className = `status-indicator ${status}`; | switch (status) {"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1466-1470",
          "preview": "indicator.className = `status-indicator ${status}`; | switch (status) {"
        }
      ],
      "codePreview": [
        "indicator.className = `status-indicator ${status}`;",
        "switch (status) {",
        "case 'connected':",
        "statusText.textContent = '实时连接';"
      ]
    },
    {
      "id": "c81a1829",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1471-1475",
          "preview": "break; | case 'disconnected': | statusText.textContent = '连接断开';"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1471-1475",
          "preview": "break; | case 'disconnected': | statusText.textContent = '连接断开';"
        }
      ],
      "codePreview": [
        "break;",
        "case 'disconnected':",
        "statusText.textContent = '连接断开';",
        "break;",
        "case 'error':"
      ]
    },
    {
      "id": "334150e8",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1501-1505",
          "preview": "if (!container) return; | const notification = document.createElement('div');"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1501-1505",
          "preview": "if (!container) return; | const notification = document.createElement('div');"
        }
      ],
      "codePreview": [
        "if (!container) return;",
        "const notification = document.createElement('div');",
        "notification.className = `notification notification-${type}`;",
        "notification.innerHTML = `"
      ]
    },
    {
      "id": "78502413",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1506-1510",
          "preview": "<div class=\"notification-content\"> | <span class=\"notification-message\">${message}</span> | <button class=\"notification-close\" onclick=\"this.parentElement.parentElement.remove()\">"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1506-1510",
          "preview": "<div class=\"notification-content\"> | <span class=\"notification-message\">${message}</span> | <button class=\"notification-close\" onclick=\"this.parentElement.parentElement.remove()\">"
        }
      ],
      "codePreview": [
        "<div class=\"notification-content\">",
        "<span class=\"notification-message\">${message}</span>",
        "<button class=\"notification-close\" onclick=\"this.parentElement.parentElement.remove()\">",
        "<i class=\"fas fa-times\"></i>",
        "</button>"
      ]
    },
    {
      "id": "785a73a6",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1566-1570",
          "preview": "const employeeFilter = document.getElementById('employee-filter').value; | const customerTypeFilter = document.getElementById('customer-type-filter').value; | const conversationStatusFilter = document.getElementById('conversation-status-filter').value;"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1566-1570",
          "preview": "const employeeFilter = document.getElementById('employee-filter').value; | const customerTypeFilter = document.getElementById('customer-type-filter').value; | const conversationStatusFilter = document.getElementById('conversation-status-filter').value;"
        }
      ],
      "codePreview": [
        "const employeeFilter = document.getElementById('employee-filter').value;",
        "const customerTypeFilter = document.getElementById('customer-type-filter').value;",
        "const conversationStatusFilter = document.getElementById('conversation-status-filter').value;",
        "this.filters = {"
      ]
    },
    {
      "id": "3f3e07a7",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1586-1590",
          "preview": "if (num >= 1000000) { | return (num / 1000000).toFixed(1) + 'M'; | } else if (num >= 1000) {"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1586-1590",
          "preview": "if (num >= 1000000) { | return (num / 1000000).toFixed(1) + 'M'; | } else if (num >= 1000) {"
        }
      ],
      "codePreview": [
        "if (num >= 1000000) {",
        "return (num / 1000000).toFixed(1) + 'M';",
        "} else if (num >= 1000) {",
        "return (num / 1000).toFixed(1) + 'K';",
        "}"
      ]
    },
    {
      "id": "8eec7711",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1596-1600",
          "preview": "*/ | formatTime(minutes) { | if (minutes >= 60) {"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1596-1600",
          "preview": "*/ | formatTime(minutes) { | if (minutes >= 60) {"
        }
      ],
      "codePreview": [
        "formatTime(minutes) {",
        "if (minutes >= 60) {",
        "const hours = Math.floor(minutes / 60);",
        "const mins = Math.round(minutes % 60);"
      ]
    },
    {
      "id": "7bd4a261",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
          "lines": "1621-1625",
          "preview": "return date.toLocaleDateString('zh-CN', { | month: 'short', | day: 'numeric'"
        },
        {
          "file": "static\\js\\enhanced-analytics-dashboard.js",
          "lines": "1621-1625",
          "preview": "return date.toLocaleDateString('zh-CN', { | month: 'short', | day: 'numeric'"
        }
      ],
      "codePreview": [
        "return date.toLocaleDateString('zh-CN', {",
        "month: 'short',",
        "day: 'numeric'",
        "});",
        "}"
      ]
    },
    {
      "id": "4d8f80f2",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "11-15",
          "preview": "this.searchHistory = []; | this.currentResults = []; | this.searchFilters = {"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "11-15",
          "preview": "this.searchHistory = []; | this.currentResults = []; | this.searchFilters = {"
        }
      ],
      "codePreview": [
        "this.searchHistory = [];",
        "this.currentResults = [];",
        "this.searchFilters = {",
        "dateRange: { from: '', to: '' },",
        "senderType: '',"
      ]
    },
    {
      "id": "481887c6",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "71-75",
          "preview": "const searchPanel = document.createElement('div'); | searchPanel.id = 'searchPanel';"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "71-75",
          "preview": "const searchPanel = document.createElement('div'); | searchPanel.id = 'searchPanel';"
        }
      ],
      "codePreview": [
        "const searchPanel = document.createElement('div');",
        "searchPanel.id = 'searchPanel';",
        "searchPanel.className = 'search-panel';",
        "searchPanel.innerHTML = this.getSearchPanelHTML();"
      ]
    },
    {
      "id": "b039b6ab",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "86-90",
          "preview": "*/ | getSearchPanelHTML() { | return `"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "86-90",
          "preview": "*/ | getSearchPanelHTML() { | return `"
        }
      ],
      "codePreview": [
        "getSearchPanelHTML() {",
        "return `",
        "<div class=\"search-header\">",
        "<div class=\"search-title\">"
      ]
    },
    {
      "id": "20752bb4",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "91-95",
          "preview": "<h3>🔍 消息搜索</h3> | <button class=\"toggle-search-btn\" id=\"toggleSearchBtn\"> | <span class=\"toggle-icon\">▼</span>"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "91-95",
          "preview": "<h3>🔍 消息搜索</h3> | <button class=\"toggle-search-btn\" id=\"toggleSearchBtn\"> | <span class=\"toggle-icon\">▼</span>"
        }
      ],
      "codePreview": [
        "<h3>🔍 消息搜索</h3>",
        "<button class=\"toggle-search-btn\" id=\"toggleSearchBtn\">",
        "<span class=\"toggle-icon\">▼</span>",
        "</button>",
        "</div>"
      ]
    },
    {
      "id": "118a259f",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "96-100",
          "preview": "</div> | <div class=\"search-content\" id=\"searchContent\">"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "96-100",
          "preview": "</div> | <div class=\"search-content\" id=\"searchContent\">"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"search-content\" id=\"searchContent\">",
        "<!-- 基础搜索 -->",
        "<div class=\"basic-search\">"
      ]
    },
    {
      "id": "bbdc303d",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "101-105",
          "preview": "<div class=\"search-input-group\"> | <input type=\"text\" id=\"searchInput\" placeholder=\"搜索消息内容、发送者姓名或文件名...\" class=\"search-input\"> | <button id=\"searchBtn\" class=\"search-btn\">🔍 搜索</button>"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "101-105",
          "preview": "<div class=\"search-input-group\"> | <input type=\"text\" id=\"searchInput\" placeholder=\"搜索消息内容、发送者姓名或文件名...\" class=\"search-input\"> | <button id=\"searchBtn\" class=\"search-btn\">🔍 搜索</button>"
        }
      ],
      "codePreview": [
        "<div class=\"search-input-group\">",
        "<input type=\"text\" id=\"searchInput\" placeholder=\"搜索消息内容、发送者姓名或文件名...\" class=\"search-input\">",
        "<button id=\"searchBtn\" class=\"search-btn\">🔍 搜索</button>",
        "<button id=\"clearSearchBtn\" class=\"clear-btn\">✖ 清除</button>",
        "</div>"
      ]
    },
    {
      "id": "4809aac4",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "106-110",
          "preview": "<div class=\"search-suggestions\" id=\"searchSuggestions\" style=\"display: none;\"> | <!-- 搜索建议将在这里显示 -->"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "106-110",
          "preview": "<div class=\"search-suggestions\" id=\"searchSuggestions\" style=\"display: none;\"> | <!-- 搜索建议将在这里显示 -->"
        }
      ],
      "codePreview": [
        "<div class=\"search-suggestions\" id=\"searchSuggestions\" style=\"display: none;\">",
        "<!-- 搜索建议将在这里显示 -->",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "9ab99b3d",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "111-115",
          "preview": "<!-- 高级搜索选项 --> | <div class=\"advanced-search\" id=\"advancedSearch\" style=\"display: none;\">"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "111-115",
          "preview": "<!-- 高级搜索选项 --> | <div class=\"advanced-search\" id=\"advancedSearch\" style=\"display: none;\">"
        }
      ],
      "codePreview": [
        "<!-- 高级搜索选项 -->",
        "<div class=\"advanced-search\" id=\"advancedSearch\" style=\"display: none;\">",
        "<div class=\"filter-row\">",
        "<div class=\"filter-group\">"
      ]
    },
    {
      "id": "4aa02ef5",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "116-120",
          "preview": "<label>日期范围:</label> | <input type=\"date\" id=\"dateFrom\" class=\"date-input\"> | <span>至</span>"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "116-120",
          "preview": "<label>日期范围:</label> | <input type=\"date\" id=\"dateFrom\" class=\"date-input\"> | <span>至</span>"
        }
      ],
      "codePreview": [
        "<label>日期范围:</label>",
        "<input type=\"date\" id=\"dateFrom\" class=\"date-input\">",
        "<span>至</span>",
        "<input type=\"date\" id=\"dateTo\" class=\"date-input\">",
        "</div>"
      ]
    },
    {
      "id": "236ff826",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "121-125",
          "preview": "<div class=\"filter-group\"> | <label>发送者类型:</label>"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "121-125",
          "preview": "<div class=\"filter-group\"> | <label>发送者类型:</label>"
        }
      ],
      "codePreview": [
        "<div class=\"filter-group\">",
        "<label>发送者类型:</label>",
        "<select id=\"senderTypeFilter\" class=\"filter-select\">",
        "<option value=\"\">全部</option>"
      ]
    },
    {
      "id": "06624423",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "126-130",
          "preview": "<option value=\"customer\">客户</option> | <option value=\"staff\">客服</option> | <option value=\"system\">系统</option>"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "126-130",
          "preview": "<option value=\"customer\">客户</option> | <option value=\"staff\">客服</option> | <option value=\"system\">系统</option>"
        }
      ],
      "codePreview": [
        "<option value=\"customer\">客户</option>",
        "<option value=\"staff\">客服</option>",
        "<option value=\"system\">系统</option>",
        "</select>",
        "</div>"
      ]
    },
    {
      "id": "f281da73",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "131-135",
          "preview": "</div> | <div class=\"filter-row\">"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "131-135",
          "preview": "</div> | <div class=\"filter-row\">"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"filter-row\">",
        "<div class=\"filter-group\">",
        "<label>消息类型:</label>"
      ]
    },
    {
      "id": "e6706fba",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "136-140",
          "preview": "<select id=\"messageTypeFilter\" class=\"filter-select\"> | <option value=\"\">全部</option> | <option value=\"text\">文本</option>"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "136-140",
          "preview": "<select id=\"messageTypeFilter\" class=\"filter-select\"> | <option value=\"\">全部</option> | <option value=\"text\">文本</option>"
        }
      ],
      "codePreview": [
        "<select id=\"messageTypeFilter\" class=\"filter-select\">",
        "<option value=\"\">全部</option>",
        "<option value=\"text\">文本</option>",
        "<option value=\"image\">图片</option>",
        "<option value=\"file\">文件</option>"
      ]
    },
    {
      "id": "668d8a53",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "141-145",
          "preview": "<option value=\"audio\">音频</option> | <option value=\"video\">视频</option> | <option value=\"emoji\">表情</option>"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "141-145",
          "preview": "<option value=\"audio\">音频</option> | <option value=\"video\">视频</option> | <option value=\"emoji\">表情</option>"
        }
      ],
      "codePreview": [
        "<option value=\"audio\">音频</option>",
        "<option value=\"video\">视频</option>",
        "<option value=\"emoji\">表情</option>",
        "</select>",
        "</div>"
      ]
    },
    {
      "id": "6b6c25c9",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "146-150",
          "preview": "<div class=\"filter-group\"> | <label>对话ID:</label>"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "146-150",
          "preview": "<div class=\"filter-group\"> | <label>对话ID:</label>"
        }
      ],
      "codePreview": [
        "<div class=\"filter-group\">",
        "<label>对话ID:</label>",
        "<input type=\"text\" id=\"conversationIdFilter\" placeholder=\"指定对话ID\" class=\"filter-input\">",
        "</div>"
      ]
    },
    {
      "id": "af77fac5",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "151-155",
          "preview": "</div> | <div class=\"filter-actions\">"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "151-155",
          "preview": "</div> | <div class=\"filter-actions\">"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"filter-actions\">",
        "<button id=\"advancedSearchBtn\" class=\"advanced-search-btn\">🔍 高级搜索</button>",
        "<button id=\"resetFiltersBtn\" class=\"reset-filters-btn\">🔄 重置筛选</button>"
      ]
    },
    {
      "id": "d8669431",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "156-160",
          "preview": "<button id=\"saveFiltersBtn\" class=\"save-filters-btn\">💾 保存筛选</button> | </div> | </div>"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "156-160",
          "preview": "<button id=\"saveFiltersBtn\" class=\"save-filters-btn\">💾 保存筛选</button> | </div> | </div>"
        }
      ],
      "codePreview": [
        "<button id=\"saveFiltersBtn\" class=\"save-filters-btn\">💾 保存筛选</button>",
        "</div>",
        "</div>",
        "<!-- 搜索历史 -->"
      ]
    },
    {
      "id": "2b151865",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "161-165",
          "preview": "<div class=\"search-history\" id=\"searchHistoryPanel\" style=\"display: none;\"> | <div class=\"history-header\"> | <h4>📝 搜索历史</h4>"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "161-165",
          "preview": "<div class=\"search-history\" id=\"searchHistoryPanel\" style=\"display: none;\"> | <div class=\"history-header\"> | <h4>📝 搜索历史</h4>"
        }
      ],
      "codePreview": [
        "<div class=\"search-history\" id=\"searchHistoryPanel\" style=\"display: none;\">",
        "<div class=\"history-header\">",
        "<h4>📝 搜索历史</h4>",
        "<button id=\"clearHistoryBtn\" class=\"clear-history-btn\">🗑️ 清除历史</button>",
        "</div>"
      ]
    },
    {
      "id": "e2c6143d",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "166-170",
          "preview": "<div class=\"history-list\" id=\"historyList\"> | <!-- 搜索历史将在这里显示 --> | </div>"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "166-170",
          "preview": "<div class=\"history-list\" id=\"historyList\"> | <!-- 搜索历史将在这里显示 --> | </div>"
        }
      ],
      "codePreview": [
        "<div class=\"history-list\" id=\"historyList\">",
        "<!-- 搜索历史将在这里显示 -->",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "18770c3c",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "171-175",
          "preview": "<!-- 工具栏 --> | <div class=\"search-toolbar\"> | <button id=\"toggleAdvancedBtn\" class=\"toolbar-btn\">⚙️ 高级搜索</button>"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "171-175",
          "preview": "<!-- 工具栏 --> | <div class=\"search-toolbar\"> | <button id=\"toggleAdvancedBtn\" class=\"toolbar-btn\">⚙️ 高级搜索</button>"
        }
      ],
      "codePreview": [
        "<!-- 工具栏 -->",
        "<div class=\"search-toolbar\">",
        "<button id=\"toggleAdvancedBtn\" class=\"toolbar-btn\">⚙️ 高级搜索</button>",
        "<button id=\"toggleHistoryBtn\" class=\"toolbar-btn\">📝 搜索历史</button>",
        "<button id=\"exportResultsBtn\" class=\"toolbar-btn\">📤 导出结果</button>"
      ]
    },
    {
      "id": "de8e7990",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "176-180",
          "preview": "<button id=\"searchStatsBtn\" class=\"toolbar-btn\">📊 搜索统计</button> | </div> | </div>"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "176-180",
          "preview": "<button id=\"searchStatsBtn\" class=\"toolbar-btn\">📊 搜索统计</button> | </div> | </div>"
        }
      ],
      "codePreview": [
        "<button id=\"searchStatsBtn\" class=\"toolbar-btn\">📊 搜索统计</button>",
        "</div>",
        "</div>",
        "<!-- 搜索结果 -->"
      ]
    },
    {
      "id": "da1ede0e",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "181-185",
          "preview": "<div class=\"search-results\" id=\"searchResults\" style=\"display: none;\"> | <div class=\"results-header\"> | <h4 id=\"resultsTitle\">搜索结果</h4>"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "181-185",
          "preview": "<div class=\"search-results\" id=\"searchResults\" style=\"display: none;\"> | <div class=\"results-header\"> | <h4 id=\"resultsTitle\">搜索结果</h4>"
        }
      ],
      "codePreview": [
        "<div class=\"search-results\" id=\"searchResults\" style=\"display: none;\">",
        "<div class=\"results-header\">",
        "<h4 id=\"resultsTitle\">搜索结果</h4>",
        "<div class=\"results-info\">",
        "<span id=\"resultsCount\">0 条结果</span>"
      ]
    },
    {
      "id": "6cbf3f24",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "186-190",
          "preview": "<span id=\"searchTime\">0ms</span> | </div> | </div>"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "186-190",
          "preview": "<span id=\"searchTime\">0ms</span> | </div> | </div>"
        }
      ],
      "codePreview": [
        "<span id=\"searchTime\">0ms</span>",
        "</div>",
        "</div>",
        "<div class=\"results-list\" id=\"resultsList\">",
        "<!-- 搜索结果将在这里显示 -->"
      ]
    },
    {
      "id": "7995f1d7",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "191-195",
          "preview": "</div> | <div class=\"results-pagination\" id=\"resultsPagination\"> | <!-- 分页将在这里显示 -->"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "191-195",
          "preview": "</div> | <div class=\"results-pagination\" id=\"resultsPagination\"> | <!-- 分页将在这里显示 -->"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"results-pagination\" id=\"resultsPagination\">",
        "<!-- 分页将在这里显示 -->",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "9e2c41d8",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "211-215",
          "preview": "}); | document.getElementById('searchInput')?.addEventListener('keypress', (e) => {"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "211-215",
          "preview": "}); | document.getElementById('searchInput')?.addEventListener('keypress', (e) => {"
        }
      ],
      "codePreview": [
        "});",
        "document.getElementById('searchInput')?.addEventListener('keypress', (e) => {",
        "if (e.key === 'Enter') {",
        "this.performBasicSearch();"
      ]
    },
    {
      "id": "09e5f0f8",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "241-245",
          "preview": "this.toggleAdvancedSearch(); | });"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "241-245",
          "preview": "this.toggleAdvancedSearch(); | });"
        }
      ],
      "codePreview": [
        "this.toggleAdvancedSearch();",
        "});",
        "document.getElementById('toggleHistoryBtn')?.addEventListener('click', () => {",
        "this.toggleSearchHistory();"
      ]
    },
    {
      "id": "7436c4f2",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "246-250",
          "preview": "}); | document.getElementById('exportResultsBtn')?.addEventListener('click', () => {"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "246-250",
          "preview": "}); | document.getElementById('exportResultsBtn')?.addEventListener('click', () => {"
        }
      ],
      "codePreview": [
        "});",
        "document.getElementById('exportResultsBtn')?.addEventListener('click', () => {",
        "this.exportSearchResults();",
        "});"
      ]
    },
    {
      "id": "aa4baf88",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "266-270",
          "preview": "const content = document.getElementById('searchContent'); | const toggleIcon = document.querySelector('.toggle-icon');"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "266-270",
          "preview": "const content = document.getElementById('searchContent'); | const toggleIcon = document.querySelector('.toggle-icon');"
        }
      ],
      "codePreview": [
        "const content = document.getElementById('searchContent');",
        "const toggleIcon = document.querySelector('.toggle-icon');",
        "if (content.style.display === 'none') {",
        "content.style.display = 'block';"
      ]
    },
    {
      "id": "24e3597d",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "281-285",
          "preview": "async performBasicSearch() { | const query = document.getElementById('searchInput').value.trim();"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "281-285",
          "preview": "async performBasicSearch() { | const query = document.getElementById('searchInput').value.trim();"
        }
      ],
      "codePreview": [
        "async performBasicSearch() {",
        "const query = document.getElementById('searchInput').value.trim();",
        "if (!query) {",
        "this.showMessage('请输入搜索关键词', 'warning');"
      ]
    },
    {
      "id": "4098c032",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "291-295",
          "preview": "const response = await fetch('/api/search/messages', { | method: 'POST',"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "291-295",
          "preview": "const response = await fetch('/api/search/messages', { | method: 'POST',"
        }
      ],
      "codePreview": [
        "const response = await fetch('/api/search/messages', {",
        "method: 'POST',",
        "headers: { 'Content-Type': 'application/json' },",
        "body: JSON.stringify({"
      ]
    },
    {
      "id": "c0d5aeaa",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "296-300",
          "preview": "query, | shopId: 'shop_1', | userId: 'user_1',"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "296-300",
          "preview": "query, | shopId: 'shop_1', | userId: 'user_1',"
        }
      ],
      "codePreview": [
        "query,",
        "shopId: 'shop_1',",
        "userId: 'user_1',",
        "limit: 50,",
        "offset: 0"
      ]
    },
    {
      "id": "0bcae4d0",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "331-335",
          "preview": "const response = await fetch('/api/search/messages', { | method: 'POST', | headers: { 'Content-Type': 'application/json' },"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "331-335",
          "preview": "const response = await fetch('/api/search/messages', { | method: 'POST', | headers: { 'Content-Type': 'application/json' },"
        }
      ],
      "codePreview": [
        "const response = await fetch('/api/search/messages', {",
        "method: 'POST',",
        "headers: { 'Content-Type': 'application/json' },",
        "body: JSON.stringify({",
        "query,"
      ]
    },
    {
      "id": "84620ebe",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "336-340",
          "preview": "shopId: 'shop_1', | userId: 'user_1', | ...filters,"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "336-340",
          "preview": "shopId: 'shop_1', | userId: 'user_1', | ...filters,"
        }
      ],
      "codePreview": [
        "shopId: 'shop_1',",
        "userId: 'user_1',",
        "...filters,",
        "limit: 50,",
        "offset: 0"
      ]
    },
    {
      "id": "0b4dec57",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "376-380",
          "preview": "*/ | displaySearchResults(data, query, isAdvanced = false) { | const resultsPanel = document.getElementById('searchResults');"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "376-380",
          "preview": "*/ | displaySearchResults(data, query, isAdvanced = false) { | const resultsPanel = document.getElementById('searchResults');"
        }
      ],
      "codePreview": [
        "displaySearchResults(data, query, isAdvanced = false) {",
        "const resultsPanel = document.getElementById('searchResults');",
        "const resultsTitle = document.getElementById('resultsTitle');",
        "const resultsCount = document.getElementById('resultsCount');"
      ]
    },
    {
      "id": "23a17180",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "421-425",
          "preview": "<div class=\"result-header\"> | <div class=\"result-meta\"> | <span class=\"sender-info\">"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "421-425",
          "preview": "<div class=\"result-header\"> | <div class=\"result-meta\"> | <span class=\"sender-info\">"
        }
      ],
      "codePreview": [
        "<div class=\"result-header\">",
        "<div class=\"result-meta\">",
        "<span class=\"sender-info\">",
        "<span class=\"sender-type ${message.sender_type}\">${this.getSenderTypeLabel(message.sender_type)}</span>",
        "<span class=\"sender-name\">${message.sender_name || '未知'}</span>"
      ]
    },
    {
      "id": "8f8bd630",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "426-430",
          "preview": "</span> | <span class=\"message-time\">${this.formatDate(message.created_at)}</span> | </div>"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "426-430",
          "preview": "</span> | <span class=\"message-time\">${this.formatDate(message.created_at)}</span> | </div>"
        }
      ],
      "codePreview": [
        "</span>",
        "<span class=\"message-time\">${this.formatDate(message.created_at)}</span>",
        "</div>",
        "<div class=\"result-actions\">",
        "<button class=\"view-conversation-btn\" data-conversation-id=\"${message.conversation_id}\">"
      ]
    },
    {
      "id": "42b7c191",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "431-435",
          "preview": "📄 查看对话 | </button> | <button class=\"export-message-btn\" data-message-id=\"${message.id}\">"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "431-435",
          "preview": "📄 查看对话 | </button> | <button class=\"export-message-btn\" data-message-id=\"${message.id}\">"
        }
      ],
      "codePreview": [
        "📄 查看对话",
        "</button>",
        "<button class=\"export-message-btn\" data-message-id=\"${message.id}\">",
        "📤 导出",
        "</button>"
      ]
    },
    {
      "id": "9b38ffee",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "436-440",
          "preview": "</div> | </div> | <div class=\"result-content\">"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "436-440",
          "preview": "</div> | </div> | <div class=\"result-content\">"
        }
      ],
      "codePreview": [
        "</div>",
        "</div>",
        "<div class=\"result-content\">",
        "<div class=\"message-content\">",
        "${message.message_type === 'text' ? highlightedContent : this.formatNonTextMessage(message)}"
      ]
    },
    {
      "id": "fb95d58f",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "446-450",
          "preview": "// 绑定查看对话事件 | item.querySelector('.view-conversation-btn')?.addEventListener('click', (e) => { | const conversationId = e.target.dataset.conversationId;"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "446-450",
          "preview": "// 绑定查看对话事件 | item.querySelector('.view-conversation-btn')?.addEventListener('click', (e) => { | const conversationId = e.target.dataset.conversationId;"
        }
      ],
      "codePreview": [
        "item.querySelector('.view-conversation-btn')?.addEventListener('click', (e) => {",
        "const conversationId = e.target.dataset.conversationId;",
        "this.viewConversation(conversationId);",
        "});"
      ]
    },
    {
      "id": "83edf37a",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "471-475",
          "preview": "const regex = new RegExp(`(${keyword})`, 'gi'); | highlightedText = highlightedText.replace(regex, '<mark class=\"highlight\">$1</mark>'); | });"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "471-475",
          "preview": "const regex = new RegExp(`(${keyword})`, 'gi'); | highlightedText = highlightedText.replace(regex, '<mark class=\"highlight\">$1</mark>'); | });"
        }
      ],
      "codePreview": [
        "const regex = new RegExp(`(${keyword})`, 'gi');",
        "highlightedText = highlightedText.replace(regex, '<mark class=\"highlight\">$1</mark>');",
        "});",
        "return highlightedText;"
      ]
    },
    {
      "id": "fc356092",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "481-485",
          "preview": "formatNonTextMessage(message) { | switch (message.message_type) { | case 'image':"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "481-485",
          "preview": "formatNonTextMessage(message) { | switch (message.message_type) { | case 'image':"
        }
      ],
      "codePreview": [
        "formatNonTextMessage(message) {",
        "switch (message.message_type) {",
        "case 'image':",
        "return `🖼️ 图片: ${message.file_name || '未知'}`;",
        "case 'file':"
      ]
    },
    {
      "id": "7c3a3213",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "486-490",
          "preview": "return `📄 文件: ${message.file_name || '未知'}`; | case 'audio': | return `🎵 音频: ${message.file_name || '未知'}`;"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "486-490",
          "preview": "return `📄 文件: ${message.file_name || '未知'}`; | case 'audio': | return `🎵 音频: ${message.file_name || '未知'}`;"
        }
      ],
      "codePreview": [
        "return `📄 文件: ${message.file_name || '未知'}`;",
        "case 'audio':",
        "return `🎵 音频: ${message.file_name || '未知'}`;",
        "case 'video':",
        "return `🎬 视频: ${message.file_name || '未知'}`;"
      ]
    },
    {
      "id": "3304cbd6",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "491-495",
          "preview": "case 'emoji': | return `😊 表情: ${message.content}`; | default:"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "491-495",
          "preview": "case 'emoji': | return `😊 表情: ${message.content}`; | default:"
        }
      ],
      "codePreview": [
        "case 'emoji':",
        "return `😊 表情: ${message.content}`;",
        "default:",
        "return message.content;",
        "}"
      ]
    },
    {
      "id": "99cb89c5",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "501-505",
          "preview": "getSenderTypeLabel(type) { | const labels = { | 'customer': '客户',"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "501-505",
          "preview": "getSenderTypeLabel(type) { | const labels = { | 'customer': '客户',"
        }
      ],
      "codePreview": [
        "getSenderTypeLabel(type) {",
        "const labels = {",
        "'customer': '客户',",
        "'staff': '客服',",
        "'system': '系统'"
      ]
    },
    {
      "id": "0c900d4f",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "521-525",
          "preview": "const suggestions = this.searchHistory | .filter(item => item.search_query.toLowerCase().includes(query.toLowerCase())) | .slice(0, 5);"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "521-525",
          "preview": "const suggestions = this.searchHistory | .filter(item => item.search_query.toLowerCase().includes(query.toLowerCase())) | .slice(0, 5);"
        }
      ],
      "codePreview": [
        "const suggestions = this.searchHistory",
        ".filter(item => item.search_query.toLowerCase().includes(query.toLowerCase()))",
        ".slice(0, 5);",
        "if (suggestions.length > 0) {"
      ]
    },
    {
      "id": "32fae69b",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "541-545",
          "preview": "<div class=\"suggestion-item\" data-query=\"${suggestion.search_query}\"> | <span class=\"suggestion-text\">${suggestion.search_query}</span> | <span class=\"suggestion-count\">${suggestion.result_count} 条结果</span>"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "541-545",
          "preview": "<div class=\"suggestion-item\" data-query=\"${suggestion.search_query}\"> | <span class=\"suggestion-text\">${suggestion.search_query}</span> | <span class=\"suggestion-count\">${suggestion.result_count} 条结果</span>"
        }
      ],
      "codePreview": [
        "<div class=\"suggestion-item\" data-query=\"${suggestion.search_query}\">",
        "<span class=\"suggestion-text\">${suggestion.search_query}</span>",
        "<span class=\"suggestion-count\">${suggestion.result_count} 条结果</span>",
        "</div>",
        "`).join('');"
      ]
    },
    {
      "id": "286c36bf",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "551-555",
          "preview": "document.getElementById('searchInput').value = query; | this.performBasicSearch(); | suggestionsPanel.style.display = 'none';"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "551-555",
          "preview": "document.getElementById('searchInput').value = query; | this.performBasicSearch(); | suggestionsPanel.style.display = 'none';"
        }
      ],
      "codePreview": [
        "document.getElementById('searchInput').value = query;",
        "this.performBasicSearch();",
        "suggestionsPanel.style.display = 'none';",
        "});",
        "});"
      ]
    },
    {
      "id": "86fe0030",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "571-575",
          "preview": "toggleSearchHistory() { | const panel = document.getElementById('searchHistoryPanel'); | panel.style.display = panel.style.display === 'none' ? 'block' : 'none';"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "571-575",
          "preview": "toggleSearchHistory() { | const panel = document.getElementById('searchHistoryPanel'); | panel.style.display = panel.style.display === 'none' ? 'block' : 'none';"
        }
      ],
      "codePreview": [
        "toggleSearchHistory() {",
        "const panel = document.getElementById('searchHistoryPanel');",
        "panel.style.display = panel.style.display === 'none' ? 'block' : 'none';",
        "if (panel.style.display === 'block') {"
      ]
    },
    {
      "id": "62e1071b",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "591-595",
          "preview": "const response = await fetch('/api/search/history/user_1/shop_1', { | headers: { 'X-Session-Id': sessionId } | });"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "591-595",
          "preview": "const response = await fetch('/api/search/history/user_1/shop_1', { | headers: { 'X-Session-Id': sessionId } | });"
        }
      ],
      "codePreview": [
        "const response = await fetch('/api/search/history/user_1/shop_1', {",
        "headers: { 'X-Session-Id': sessionId }",
        "});",
        "const result = await response.json();"
      ]
    },
    {
      "id": "136803fa",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "616-620",
          "preview": "historyList.innerHTML = this.searchHistory.map(item => ` | <div class=\"history-item\" data-query=\"${item.search_query}\">"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "616-620",
          "preview": "historyList.innerHTML = this.searchHistory.map(item => ` | <div class=\"history-item\" data-query=\"${item.search_query}\">"
        }
      ],
      "codePreview": [
        "historyList.innerHTML = this.searchHistory.map(item => `",
        "<div class=\"history-item\" data-query=\"${item.search_query}\">",
        "<div class=\"history-content\">",
        "<span class=\"history-query\">${item.search_query}</span>"
      ]
    },
    {
      "id": "0db9b5d1",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "621-625",
          "preview": "<span class=\"history-meta\"> | ${item.search_count} 次搜索 · ${item.result_count} 条结果 · ${this.formatDate(item.created_at)} | </span>"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "621-625",
          "preview": "<span class=\"history-meta\"> | ${item.search_count} 次搜索 · ${item.result_count} 条结果 · ${this.formatDate(item.created_at)} | </span>"
        }
      ],
      "codePreview": [
        "<span class=\"history-meta\">",
        "${item.search_count} 次搜索 · ${item.result_count} 条结果 · ${this.formatDate(item.created_at)}",
        "</span>",
        "</div>",
        "<button class=\"use-history-btn\">使用</button>"
      ]
    },
    {
      "id": "378424c5",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "631-635",
          "preview": "btn.addEventListener('click', () => { | const item = this.searchHistory[index]; | document.getElementById('searchInput').value = item.search_query;"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "631-635",
          "preview": "btn.addEventListener('click', () => { | const item = this.searchHistory[index]; | document.getElementById('searchInput').value = item.search_query;"
        }
      ],
      "codePreview": [
        "btn.addEventListener('click', () => {",
        "const item = this.searchHistory[index];",
        "document.getElementById('searchInput').value = item.search_query;",
        "this.performBasicSearch();",
        "});"
      ]
    },
    {
      "id": "d12cbc4d",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "646-650",
          "preview": "search_type: type, | result_count: resultCount, | created_at: new Date().toISOString(),"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "646-650",
          "preview": "search_type: type, | result_count: resultCount, | created_at: new Date().toISOString(),"
        }
      ],
      "codePreview": [
        "search_type: type,",
        "result_count: resultCount,",
        "created_at: new Date().toISOString(),",
        "search_count: 1",
        "};"
      ]
    },
    {
      "id": "e3462967",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "671-675",
          "preview": "document.getElementById('searchInput').value = ''; | document.getElementById('searchResults').style.display = 'none'; | document.getElementById('searchSuggestions').style.display = 'none';"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "671-675",
          "preview": "document.getElementById('searchInput').value = ''; | document.getElementById('searchResults').style.display = 'none'; | document.getElementById('searchSuggestions').style.display = 'none';"
        }
      ],
      "codePreview": [
        "document.getElementById('searchInput').value = '';",
        "document.getElementById('searchResults').style.display = 'none';",
        "document.getElementById('searchSuggestions').style.display = 'none';",
        "this.currentResults = [];",
        "}"
      ]
    },
    {
      "id": "5bc04787",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "681-685",
          "preview": "document.getElementById('dateFrom').value = ''; | document.getElementById('dateTo').value = ''; | document.getElementById('senderTypeFilter').value = '';"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "681-685",
          "preview": "document.getElementById('dateFrom').value = ''; | document.getElementById('dateTo').value = ''; | document.getElementById('senderTypeFilter').value = '';"
        }
      ],
      "codePreview": [
        "document.getElementById('dateFrom').value = '';",
        "document.getElementById('dateTo').value = '';",
        "document.getElementById('senderTypeFilter').value = '';",
        "document.getElementById('messageTypeFilter').value = '';",
        "document.getElementById('conversationIdFilter').value = '';"
      ]
    },
    {
      "id": "7131e7fc",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "691-695",
          "preview": "showSearchLoading(isLoading) { | const searchBtn = document.getElementById('searchBtn'); | const advancedSearchBtn = document.getElementById('advancedSearchBtn');"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "691-695",
          "preview": "showSearchLoading(isLoading) { | const searchBtn = document.getElementById('searchBtn'); | const advancedSearchBtn = document.getElementById('advancedSearchBtn');"
        }
      ],
      "codePreview": [
        "showSearchLoading(isLoading) {",
        "const searchBtn = document.getElementById('searchBtn');",
        "const advancedSearchBtn = document.getElementById('advancedSearchBtn');",
        "if (isLoading) {"
      ]
    },
    {
      "id": "8b103c26",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "711-715",
          "preview": "const messageEl = document.createElement('div'); | messageEl.className = `search-message ${type}`; | messageEl.textContent = message;"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "711-715",
          "preview": "const messageEl = document.createElement('div'); | messageEl.className = `search-message ${type}`; | messageEl.textContent = message;"
        }
      ],
      "codePreview": [
        "const messageEl = document.createElement('div');",
        "messageEl.className = `search-message ${type}`;",
        "messageEl.textContent = message;",
        "const searchPanel = document.getElementById('searchPanel');"
      ]
    },
    {
      "id": "325b49db",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "751-755",
          "preview": "*/ | exportSearchResults() { | if (!this.currentResults || this.currentResults.messages.length === 0) {"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "751-755",
          "preview": "*/ | exportSearchResults() { | if (!this.currentResults || this.currentResults.messages.length === 0) {"
        }
      ],
      "codePreview": [
        "exportSearchResults() {",
        "if (!this.currentResults || this.currentResults.messages.length === 0) {",
        "this.showMessage('没有可导出的搜索结果', 'warning');",
        "return;"
      ]
    },
    {
      "id": "22a8d5cf",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "786-790",
          "preview": "modal.className = 'stats-modal'; | modal.innerHTML = ` | <div class=\"stats-modal-content\">"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "786-790",
          "preview": "modal.className = 'stats-modal'; | modal.innerHTML = ` | <div class=\"stats-modal-content\">"
        }
      ],
      "codePreview": [
        "modal.className = 'stats-modal';",
        "modal.innerHTML = `",
        "<div class=\"stats-modal-content\">",
        "<div class=\"stats-header\">",
        "<h3>📊 搜索统计 (${stats.period})</h3>"
      ]
    },
    {
      "id": "834d0bfd",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "791-795",
          "preview": "<button class=\"close-stats-btn\">✖</button> | </div> | <div class=\"stats-body\">"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "791-795",
          "preview": "<button class=\"close-stats-btn\">✖</button> | </div> | <div class=\"stats-body\">"
        }
      ],
      "codePreview": [
        "<button class=\"close-stats-btn\">✖</button>",
        "</div>",
        "<div class=\"stats-body\">",
        "<div class=\"stats-grid\">",
        "<div class=\"stat-item\">"
      ]
    },
    {
      "id": "71113ed6",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "796-800",
          "preview": "<div class=\"stat-value\">${stats.totalSearches}</div> | <div class=\"stat-label\">总搜索次数</div> | </div>"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "796-800",
          "preview": "<div class=\"stat-value\">${stats.totalSearches}</div> | <div class=\"stat-label\">总搜索次数</div> | </div>"
        }
      ],
      "codePreview": [
        "<div class=\"stat-value\">${stats.totalSearches}</div>",
        "<div class=\"stat-label\">总搜索次数</div>",
        "</div>",
        "<div class=\"stat-item\">",
        "<div class=\"stat-value\">${stats.uniqueUsers}</div>"
      ]
    },
    {
      "id": "814c5859",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "801-805",
          "preview": "<div class=\"stat-label\">活跃用户</div> | </div> | <div class=\"stat-item\">"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "801-805",
          "preview": "<div class=\"stat-label\">活跃用户</div> | </div> | <div class=\"stat-item\">"
        }
      ],
      "codePreview": [
        "<div class=\"stat-label\">活跃用户</div>",
        "</div>",
        "<div class=\"stat-item\">",
        "<div class=\"stat-value\">${stats.avgSearchTime}ms</div>",
        "<div class=\"stat-label\">平均响应时间</div>"
      ]
    },
    {
      "id": "6129fec8",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "806-810",
          "preview": "</div> | <div class=\"stat-item\"> | <div class=\"stat-value\">${stats.avgResultCount}</div>"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "806-810",
          "preview": "</div> | <div class=\"stat-item\"> | <div class=\"stat-value\">${stats.avgResultCount}</div>"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"stat-item\">",
        "<div class=\"stat-value\">${stats.avgResultCount}</div>",
        "<div class=\"stat-label\">平均结果数</div>",
        "</div>"
      ]
    },
    {
      "id": "84b9c4f6",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "811-815",
          "preview": "</div> | <div class=\"top-queries\">"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "811-815",
          "preview": "</div> | <div class=\"top-queries\">"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"top-queries\">",
        "<h4>🔥 热门搜索</h4>",
        "${stats.topQueries.map(query => `"
      ]
    },
    {
      "id": "5dafff90",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "816-820",
          "preview": "<div class=\"query-item\"> | <span class=\"query-text\">${query.search_query}</span> | <span class=\"query-count\">${query.search_count} 次</span>"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "816-820",
          "preview": "<div class=\"query-item\"> | <span class=\"query-text\">${query.search_query}</span> | <span class=\"query-count\">${query.search_count} 次</span>"
        }
      ],
      "codePreview": [
        "<div class=\"query-item\">",
        "<span class=\"query-text\">${query.search_query}</span>",
        "<span class=\"query-count\">${query.search_count} 次</span>",
        "</div>",
        "`).join('')}"
      ]
    },
    {
      "id": "ed6aec55",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "831-835",
          "preview": "}); | modal.addEventListener('click', (e) => {"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "831-835",
          "preview": "}); | modal.addEventListener('click', (e) => {"
        }
      ],
      "codePreview": [
        "});",
        "modal.addEventListener('click', (e) => {",
        "if (e.target === modal) {",
        "modal.remove();"
      ]
    },
    {
      "id": "039dbb09",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "851-855",
          "preview": "headers: { 'Content-Type': 'application/json' }, | body: JSON.stringify({ daysToKeep: 0 }) | });"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "851-855",
          "preview": "headers: { 'Content-Type': 'application/json' }, | body: JSON.stringify({ daysToKeep: 0 }) | });"
        }
      ],
      "codePreview": [
        "headers: { 'Content-Type': 'application/json' },",
        "body: JSON.stringify({ daysToKeep: 0 })",
        "});",
        "const result = await response.json();"
      ]
    },
    {
      "id": "2e189183",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\message\\search-manager.js",
          "lines": "856-860",
          "preview": "if (result.success) { | this.searchHistory = [];"
        },
        {
          "file": "static\\js\\message-search-manager.js",
          "lines": "856-860",
          "preview": "if (result.success) { | this.searchHistory = [];"
        }
      ],
      "codePreview": [
        "if (result.success) {",
        "this.searchHistory = [];",
        "this.displaySearchHistory();",
        "this.showMessage('搜索历史已清除', 'success');"
      ]
    },
    {
      "id": "999124d9",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "11-15",
          "preview": "class MobileCustomerService { | constructor() { | this.currentUser = null;"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "11-15",
          "preview": "class MobileCustomerService { | constructor() { | this.currentUser = null;"
        }
      ],
      "codePreview": [
        "class MobileCustomerService {",
        "constructor() {",
        "this.currentUser = null;",
        "this.shops = [];",
        "this.conversations = {};"
      ]
    },
    {
      "id": "3c6f55d2",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "16-20",
          "preview": "this.currentShop = null; | this.currentConversation = null; | this.unreadCounts = {};   // 按店铺ID的未读消息数"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "16-20",
          "preview": "this.currentShop = null; | this.currentConversation = null; | this.unreadCounts = {};   // 按店铺ID的未读消息数"
        }
      ],
      "codePreview": [
        "this.currentShop = null;",
        "this.currentConversation = null;",
        "this.unreadCounts = {};",
        "this.websocket = null;",
        "this.pageStack = ['home'];"
      ]
    },
    {
      "id": "c6afe33e",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "121-125",
          "preview": "const response = await fetch('/api/messages/unread-counts', { | headers: { 'X-Session-Id': sessionId } | });"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "121-125",
          "preview": "const response = await fetch('/api/messages/unread-counts', { | headers: { 'X-Session-Id': sessionId } | });"
        }
      ],
      "codePreview": [
        "const response = await fetch('/api/messages/unread-counts', {",
        "headers: { 'X-Session-Id': sessionId }",
        "});",
        "if (response.ok) {"
      ]
    },
    {
      "id": "8187d57f",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "186-190",
          "preview": "case 'new_message': | this.handleNewMessage(data); | break;"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "186-190",
          "preview": "case 'new_message': | this.handleNewMessage(data); | break;"
        }
      ],
      "codePreview": [
        "case 'new_message':",
        "this.handleNewMessage(data);",
        "break;",
        "case 'message_read':",
        "this.handleMessageRead(data);"
      ]
    },
    {
      "id": "065be5c5",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "191-195",
          "preview": "break; | case 'conversation_update': | this.handleConversationUpdate(data);"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "191-195",
          "preview": "break; | case 'conversation_update': | this.handleConversationUpdate(data);"
        }
      ],
      "codePreview": [
        "break;",
        "case 'conversation_update':",
        "this.handleConversationUpdate(data);",
        "break;",
        "case 'unread_count_update':"
      ]
    },
    {
      "id": "f925d581",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "276-280",
          "preview": "content.innerHTML = ` | <div class=\"empty-state\"> | <div class=\"empty-icon\">🏪</div>"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "276-280",
          "preview": "content.innerHTML = ` | <div class=\"empty-state\"> | <div class=\"empty-icon\">🏪</div>"
        }
      ],
      "codePreview": [
        "content.innerHTML = `",
        "<div class=\"empty-state\">",
        "<div class=\"empty-icon\">🏪</div>",
        "<div class=\"empty-title\">暂无店铺</div>",
        "<div class=\"empty-subtitle\">请先创建店铺来接收消息</div>"
      ]
    },
    {
      "id": "183c387a",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "281-285",
          "preview": "<button class=\"action-btn\" onclick=\"window.mobileCustomerService.goToShopsPage()\"> | 前往店铺管理 | </button>"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "281-285",
          "preview": "<button class=\"action-btn\" onclick=\"window.mobileCustomerService.goToShopsPage()\"> | 前往店铺管理 | </button>"
        }
      ],
      "codePreview": [
        "<button class=\"action-btn\" onclick=\"window.mobileCustomerService.goToShopsPage()\">",
        "前往店铺管理",
        "</button>",
        "</div>",
        "`;"
      ]
    },
    {
      "id": "db1bd4a4",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "291-295",
          "preview": "<div class=\"stats-summary\"> | <div class=\"stats-item\"> | <div class=\"stats-number\">${this.shops.length}</div>"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "291-295",
          "preview": "<div class=\"stats-summary\"> | <div class=\"stats-item\"> | <div class=\"stats-number\">${this.shops.length}</div>"
        }
      ],
      "codePreview": [
        "<div class=\"stats-summary\">",
        "<div class=\"stats-item\">",
        "<div class=\"stats-number\">${this.shops.length}</div>",
        "<div class=\"stats-label\">总店铺</div>",
        "</div>"
      ]
    },
    {
      "id": "92c0fade",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "296-300",
          "preview": "<div class=\"stats-item highlight\"> | <div class=\"stats-number\">${totalUnread}</div> | <div class=\"stats-label\">未读消息</div>"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "296-300",
          "preview": "<div class=\"stats-item highlight\"> | <div class=\"stats-number\">${totalUnread}</div> | <div class=\"stats-label\">未读消息</div>"
        }
      ],
      "codePreview": [
        "<div class=\"stats-item highlight\">",
        "<div class=\"stats-number\">${totalUnread}</div>",
        "<div class=\"stats-label\">未读消息</div>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "2306b479",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "301-305",
          "preview": "<div class=\"shop-list\"> | ${this.shops.map(shop => this.renderShopItem(shop)).join('')}"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "301-305",
          "preview": "<div class=\"shop-list\"> | ${this.shops.map(shop => this.renderShopItem(shop)).join('')}"
        }
      ],
      "codePreview": [
        "<div class=\"shop-list\">",
        "${this.shops.map(shop => this.renderShopItem(shop)).join('')}",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "5e64ca98",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "316-320",
          "preview": "const hasUnread = unreadCount > 0; | return `"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "316-320",
          "preview": "const hasUnread = unreadCount > 0; | return `"
        }
      ],
      "codePreview": [
        "const hasUnread = unreadCount > 0;",
        "return `",
        "<div class=\"shop-item ${hasUnread ? 'has-unread' : ''}\"",
        "onclick=\"window.mobileCustomerService.showShopConversations('${shop.id}')\">"
      ]
    },
    {
      "id": "8d610f72",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "321-325",
          "preview": "<div class=\"shop-avatar\"> | <div class=\"avatar-text\">${shop.name.charAt(0)}</div> | ${hasUnread ? `<div class=\"unread-badge\">${unreadCount > 99 ? '99+' : unreadCount}</div>` : ''}"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "321-325",
          "preview": "<div class=\"shop-avatar\"> | <div class=\"avatar-text\">${shop.name.charAt(0)}</div> | ${hasUnread ? `<div class=\"unread-badge\">${unreadCount > 99 ? '99+' : unreadCount}</div>` : ''}"
        }
      ],
      "codePreview": [
        "<div class=\"shop-avatar\">",
        "<div class=\"avatar-text\">${shop.name.charAt(0)}</div>",
        "${hasUnread ? `<div class=\"unread-badge\">${unreadCount > 99 ? '99+' : unreadCount}</div>` : ''}",
        "</div>",
        "<div class=\"shop-info\">"
      ]
    },
    {
      "id": "d1127c91",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "326-330",
          "preview": "<div class=\"shop-name\">${shop.name}</div> | <div class=\"shop-domain\">${shop.domain}</div> | <div class=\"shop-status ${shop.status}\">${this.getShopStatusText(shop.status)}</div>"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "326-330",
          "preview": "<div class=\"shop-name\">${shop.name}</div> | <div class=\"shop-domain\">${shop.domain}</div> | <div class=\"shop-status ${shop.status}\">${this.getShopStatusText(shop.status)}</div>"
        }
      ],
      "codePreview": [
        "<div class=\"shop-name\">${shop.name}</div>",
        "<div class=\"shop-domain\">${shop.domain}</div>",
        "<div class=\"shop-status ${shop.status}\">${this.getShopStatusText(shop.status)}</div>",
        "</div>",
        "<div class=\"shop-meta\">"
      ]
    },
    {
      "id": "88e4d5f1",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "361-365",
          "preview": "<div class=\"error-state\"> | <div class=\"error-icon\">❌</div> | <div class=\"error-title\">加载失败</div>"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "361-365",
          "preview": "<div class=\"error-state\"> | <div class=\"error-icon\">❌</div> | <div class=\"error-title\">加载失败</div>"
        }
      ],
      "codePreview": [
        "<div class=\"error-state\">",
        "<div class=\"error-icon\">❌</div>",
        "<div class=\"error-title\">加载失败</div>",
        "<div class=\"error-subtitle\">${error.message}</div>",
        "<button class=\"retry-btn\" onclick=\"window.mobileCustomerService.showShopConversations('${shopId}')\">"
      ]
    },
    {
      "id": "6f9ff7c1",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "381-385",
          "preview": "}); | if (response.ok) {"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "381-385",
          "preview": "}); | if (response.ok) {"
        }
      ],
      "codePreview": [
        "});",
        "if (response.ok) {",
        "const conversations = await response.json();",
        "this.conversations[shopId] = conversations;"
      ]
    },
    {
      "id": "1d0f139b",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "401-405",
          "preview": "const content = document.getElementById('messagesContent'); | const conversations = this.conversations[this.currentShop.id] || [];"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "401-405",
          "preview": "const content = document.getElementById('messagesContent'); | const conversations = this.conversations[this.currentShop.id] || [];"
        }
      ],
      "codePreview": [
        "const content = document.getElementById('messagesContent');",
        "const conversations = this.conversations[this.currentShop.id] || [];",
        "if (conversations.length === 0) {",
        "content.innerHTML = `"
      ]
    },
    {
      "id": "a911bcf0",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "406-410",
          "preview": "<div class=\"empty-state\"> | <div class=\"empty-icon\">💬</div> | <div class=\"empty-title\">暂无对话</div>"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "406-410",
          "preview": "<div class=\"empty-state\"> | <div class=\"empty-icon\">💬</div> | <div class=\"empty-title\">暂无对话</div>"
        }
      ],
      "codePreview": [
        "<div class=\"empty-state\">",
        "<div class=\"empty-icon\">💬</div>",
        "<div class=\"empty-title\">暂无对话</div>",
        "<div class=\"empty-subtitle\">等待客户发起对话</div>",
        "</div>"
      ]
    },
    {
      "id": "13101fc7",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "431-435",
          "preview": "return ` | <div class=\"conversation-item ${hasUnread ? 'has-unread' : ''}\" | onclick=\"window.mobileCustomerService.openChat('${conversation.userId}')\">"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "431-435",
          "preview": "return ` | <div class=\"conversation-item ${hasUnread ? 'has-unread' : ''}\" | onclick=\"window.mobileCustomerService.openChat('${conversation.userId}')\">"
        }
      ],
      "codePreview": [
        "return `",
        "<div class=\"conversation-item ${hasUnread ? 'has-unread' : ''}\"",
        "onclick=\"window.mobileCustomerService.openChat('${conversation.userId}')\">",
        "<div class=\"user-avatar\">",
        "<div class=\"avatar-text\">${conversation.userName.charAt(0)}</div>"
      ]
    },
    {
      "id": "95ed3979",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "436-440",
          "preview": "${hasUnread ? `<div class=\"unread-badge\">${conversation.unreadCount > 99 ? '99+' : conversation.unreadCount}</div>` : ''} | </div> | <div class=\"conversation-info\">"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "436-440",
          "preview": "${hasUnread ? `<div class=\"unread-badge\">${conversation.unreadCount > 99 ? '99+' : conversation.unreadCount}</div>` : ''} | </div> | <div class=\"conversation-info\">"
        }
      ],
      "codePreview": [
        "${hasUnread ? `<div class=\"unread-badge\">${conversation.unreadCount > 99 ? '99+' : conversation.unreadCount}</div>` : ''}",
        "</div>",
        "<div class=\"conversation-info\">",
        "<div class=\"conversation-meta\">",
        "<div class=\"user-name\">${conversation.userName}</div>"
      ]
    },
    {
      "id": "90a996f4",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "441-445",
          "preview": "<div class=\"message-time\">${lastMessageTime}</div> | </div> | <div class=\"last-message\">${conversation.lastMessage || '暂无消息'}</div>"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "441-445",
          "preview": "<div class=\"message-time\">${lastMessageTime}</div> | </div> | <div class=\"last-message\">${conversation.lastMessage || '暂无消息'}</div>"
        }
      ],
      "codePreview": [
        "<div class=\"message-time\">${lastMessageTime}</div>",
        "</div>",
        "<div class=\"last-message\">${conversation.lastMessage || '暂无消息'}</div>",
        "</div>",
        "<div class=\"conversation-actions\">"
      ]
    },
    {
      "id": "efbd5d96",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "486-490",
          "preview": "const response = await fetch(`/api/shops/${this.currentShop.id}/users/${userId}/messages`, { | headers: { 'X-Session-Id': sessionId } | });"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "486-490",
          "preview": "const response = await fetch(`/api/shops/${this.currentShop.id}/users/${userId}/messages`, { | headers: { 'X-Session-Id': sessionId } | });"
        }
      ],
      "codePreview": [
        "const response = await fetch(`/api/shops/${this.currentShop.id}/users/${userId}/messages`, {",
        "headers: { 'X-Session-Id': sessionId }",
        "});",
        "if (response.ok) {"
      ]
    },
    {
      "id": "0efbd2fe",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "501-505",
          "preview": "<div class=\"error-title\">加载失败</div> | <button class=\"retry-btn\" onclick=\"window.mobileCustomerService.loadChatMessages('${userId}')\"> | 重试"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "501-505",
          "preview": "<div class=\"error-title\">加载失败</div> | <button class=\"retry-btn\" onclick=\"window.mobileCustomerService.loadChatMessages('${userId}')\"> | 重试"
        }
      ],
      "codePreview": [
        "<div class=\"error-title\">加载失败</div>",
        "<button class=\"retry-btn\" onclick=\"window.mobileCustomerService.loadChatMessages('${userId}')\">",
        "重试",
        "</button>",
        "</div>"
      ]
    },
    {
      "id": "30c38cd0",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "516-520",
          "preview": "if (messages.length === 0) { | chatMessages.innerHTML = ` | <div class=\"empty-state\">"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "516-520",
          "preview": "if (messages.length === 0) { | chatMessages.innerHTML = ` | <div class=\"empty-state\">"
        }
      ],
      "codePreview": [
        "if (messages.length === 0) {",
        "chatMessages.innerHTML = `",
        "<div class=\"empty-state\">",
        "<div class=\"empty-icon\">💬</div>",
        "<div class=\"empty-title\">暂无消息</div>"
      ]
    },
    {
      "id": "4579aa2e",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "536-540",
          "preview": "renderChatMessage(message) { | const isUser = message.sender === 'user'; | const time = this.formatTime(message.created_at);"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "536-540",
          "preview": "renderChatMessage(message) { | const isUser = message.sender === 'user'; | const time = this.formatTime(message.created_at);"
        }
      ],
      "codePreview": [
        "renderChatMessage(message) {",
        "const isUser = message.sender === 'user';",
        "const time = this.formatTime(message.created_at);",
        "return `"
      ]
    },
    {
      "id": "e5cf9a39",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "541-545",
          "preview": "<div class=\"message ${isUser ? 'user' : 'admin'}\"> | <div class=\"message-content\"> | <div class=\"message-text\">${message.content}</div>"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "541-545",
          "preview": "<div class=\"message ${isUser ? 'user' : 'admin'}\"> | <div class=\"message-content\"> | <div class=\"message-text\">${message.content}</div>"
        }
      ],
      "codePreview": [
        "<div class=\"message ${isUser ? 'user' : 'admin'}\">",
        "<div class=\"message-content\">",
        "<div class=\"message-text\">${message.content}</div>",
        "<div class=\"message-time\">${time}</div>",
        "</div>"
      ]
    },
    {
      "id": "8d464fd2",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "566-570",
          "preview": "'Content-Type': 'application/json', | 'X-Session-Id': sessionId | },"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "566-570",
          "preview": "'Content-Type': 'application/json', | 'X-Session-Id': sessionId | },"
        }
      ],
      "codePreview": [
        "'Content-Type': 'application/json',",
        "'X-Session-Id': sessionId",
        "},",
        "body: JSON.stringify({",
        "shopId: this.currentShop.id,"
      ]
    },
    {
      "id": "17b49a02",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "581-585",
          "preview": "this.appendMessageToChat({ | content: message, | sender: 'admin',"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "581-585",
          "preview": "this.appendMessageToChat({ | content: message, | sender: 'admin',"
        }
      ],
      "codePreview": [
        "this.appendMessageToChat({",
        "content: message,",
        "sender: 'admin',",
        "created_at: new Date().toISOString()",
        "});"
      ]
    },
    {
      "id": "6ded8e3a",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "601-605",
          "preview": "const chatMessages = document.getElementById('chatMessages'); | const messageHtml = this.renderChatMessage(message);"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "601-605",
          "preview": "const chatMessages = document.getElementById('chatMessages'); | const messageHtml = this.renderChatMessage(message);"
        }
      ],
      "codePreview": [
        "const chatMessages = document.getElementById('chatMessages');",
        "const messageHtml = this.renderChatMessage(message);",
        "chatMessages.insertAdjacentHTML('beforeend', messageHtml);",
        "chatMessages.scrollTop = chatMessages.scrollHeight;"
      ]
    },
    {
      "id": "5990c685",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "626-630",
          "preview": "// 更新本地未读计数 | if (this.unreadCounts[this.currentShop.id] > 0) { | this.unreadCounts[this.currentShop.id] -= this.currentConversation.unreadCount;"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "626-630",
          "preview": "// 更新本地未读计数 | if (this.unreadCounts[this.currentShop.id] > 0) { | this.unreadCounts[this.currentShop.id] -= this.currentConversation.unreadCount;"
        }
      ],
      "codePreview": [
        "if (this.unreadCounts[this.currentShop.id] > 0) {",
        "this.unreadCounts[this.currentShop.id] -= this.currentConversation.unreadCount;",
        "this.currentConversation.unreadCount = 0;",
        "this.updateBottomNavUnreadCount();"
      ]
    },
    {
      "id": "9af58bec",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "641-645",
          "preview": "updateBottomNavUnreadCount() { | const badge = document.getElementById('messagesBadge'); | if (!badge) return;"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "641-645",
          "preview": "updateBottomNavUnreadCount() { | const badge = document.getElementById('messagesBadge'); | if (!badge) return;"
        }
      ],
      "codePreview": [
        "updateBottomNavUnreadCount() {",
        "const badge = document.getElementById('messagesBadge');",
        "if (!badge) return;",
        "const totalUnread = Object.values(this.unreadCounts).reduce((sum, count) => sum + count, 0);"
      ]
    },
    {
      "id": "ca7335cc",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "711-715",
          "preview": "if (messageInput) { | messageInput.addEventListener('keypress', (e) => { | if (e.key === 'Enter') {"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "711-715",
          "preview": "if (messageInput) { | messageInput.addEventListener('keypress', (e) => { | if (e.key === 'Enter') {"
        }
      ],
      "codePreview": [
        "if (messageInput) {",
        "messageInput.addEventListener('keypress', (e) => {",
        "if (e.key === 'Enter') {",
        "this.sendMessage();",
        "}"
      ]
    },
    {
      "id": "e7abdf25",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "731-735",
          "preview": "*/ | getShopStatusText(status) { | const statusMap = {"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "731-735",
          "preview": "*/ | getShopStatusText(status) { | const statusMap = {"
        }
      ],
      "codePreview": [
        "getShopStatusText(status) {",
        "const statusMap = {",
        "'active': '运行中',",
        "'pending': '审核中',"
      ]
    },
    {
      "id": "814e5c75",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "746-750",
          "preview": "if (!timestamp) return ''; | const date = new Date(timestamp);"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "746-750",
          "preview": "if (!timestamp) return ''; | const date = new Date(timestamp);"
        }
      ],
      "codePreview": [
        "if (!timestamp) return '';",
        "const date = new Date(timestamp);",
        "const now = new Date();",
        "const diff = now - date;"
      ]
    },
    {
      "id": "92a8a6e8",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\customer-service.js",
          "lines": "776-780",
          "preview": "if ('Notification' in window && Notification.permission === 'granted') { | new Notification(title, { | body: message,"
        },
        {
          "file": "static\\js\\mobile-customer-service.js",
          "lines": "776-780",
          "preview": "if ('Notification' in window && Notification.permission === 'granted') { | new Notification(title, { | body: message,"
        }
      ],
      "codePreview": [
        "if ('Notification' in window && Notification.permission === 'granted') {",
        "new Notification(title, {",
        "body: message,",
        "icon: '/favicon.ico'",
        "});"
      ]
    },
    {
      "id": "3b8de7b7",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "11-15",
          "preview": "this.currentUser = null; | this.shops = []; | this.conversations = {};"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "11-15",
          "preview": "this.currentUser = null; | this.shops = []; | this.conversations = {};"
        }
      ],
      "codePreview": [
        "this.currentUser = null;",
        "this.shops = [];",
        "this.conversations = {};",
        "this.currentShop = null;",
        "this.currentConversation = null;"
      ]
    },
    {
      "id": "0b9fd010",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "16-20",
          "preview": "this.unreadCounts = {}; | this.websocket = null; | this.pageStack = ['home'];"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "16-20",
          "preview": "this.unreadCounts = {}; | this.websocket = null; | this.pageStack = ['home'];"
        }
      ],
      "codePreview": [
        "this.unreadCounts = {};",
        "this.websocket = null;",
        "this.pageStack = ['home'];",
        "this.isInitialized = false;"
      ]
    },
    {
      "id": "335f4777",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "21-25",
          "preview": "// 移动端增强功能 | this.mediaRecorder = null; | this.isRecording = false;"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "21-25",
          "preview": "// 移动端增强功能 | this.mediaRecorder = null; | this.isRecording = false;"
        }
      ],
      "codePreview": [
        "this.mediaRecorder = null;",
        "this.isRecording = false;",
        "this.audioChunks = [];",
        "this.cameraStream = null;"
      ]
    },
    {
      "id": "5e222f3e",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "91-95",
          "preview": "const capabilities = { | camera: false, | microphone: false,"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "91-95",
          "preview": "const capabilities = { | camera: false, | microphone: false,"
        }
      ],
      "codePreview": [
        "const capabilities = {",
        "camera: false,",
        "microphone: false,",
        "geolocation: false,",
        "touchscreen: false,"
      ]
    },
    {
      "id": "4e354207",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "96-100",
          "preview": "vibration: false, | notification: false, | orientation: false,"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "96-100",
          "preview": "vibration: false, | notification: false, | orientation: false,"
        }
      ],
      "codePreview": [
        "vibration: false,",
        "notification: false,",
        "orientation: false,",
        "battery: false",
        "};"
      ]
    },
    {
      "id": "6502c07a",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "151-155",
          "preview": "const voiceBtn = document.getElementById('voiceBtn'); | const locationBtn = document.getElementById('locationBtn');"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "151-155",
          "preview": "const voiceBtn = document.getElementById('voiceBtn'); | const locationBtn = document.getElementById('locationBtn');"
        }
      ],
      "codePreview": [
        "const voiceBtn = document.getElementById('voiceBtn');",
        "const locationBtn = document.getElementById('locationBtn');",
        "if (cameraBtn) {",
        "cameraBtn.style.display = this.deviceCapabilities.camera ? 'block' : 'none';"
      ]
    },
    {
      "id": "6a8c758d",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "196-200",
          "preview": "let startY = 0; | let currentY = 0; | let isDragging = false;"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "196-200",
          "preview": "let startY = 0; | let currentY = 0; | let isDragging = false;"
        }
      ],
      "codePreview": [
        "let startY = 0;",
        "let currentY = 0;",
        "let isDragging = false;",
        "container.addEventListener('touchstart', (e) => {"
      ]
    },
    {
      "id": "b5283e48",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "201-205",
          "preview": "if (container.scrollTop === 0) { | startY = e.touches[0].clientY; | isDragging = true;"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "201-205",
          "preview": "if (container.scrollTop === 0) { | startY = e.touches[0].clientY; | isDragging = true;"
        }
      ],
      "codePreview": [
        "if (container.scrollTop === 0) {",
        "startY = e.touches[0].clientY;",
        "isDragging = true;",
        "}",
        "}, { passive: true });"
      ]
    },
    {
      "id": "f7774e2c",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "211-215",
          "preview": "const deltaY = currentY - startY; | if (deltaY > 0 && container.scrollTop === 0) {"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "211-215",
          "preview": "const deltaY = currentY - startY; | if (deltaY > 0 && container.scrollTop === 0) {"
        }
      ],
      "codePreview": [
        "const deltaY = currentY - startY;",
        "if (deltaY > 0 && container.scrollTop === 0) {",
        "e.preventDefault();",
        "const pullDistance = Math.min(deltaY, this.pullToRefreshThreshold * 1.5);"
      ]
    },
    {
      "id": "d73c5a35",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "231-235",
          "preview": "isDragging = false; | this.isPulling = false;"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "231-235",
          "preview": "isDragging = false; | this.isPulling = false;"
        }
      ],
      "codePreview": [
        "isDragging = false;",
        "this.isPulling = false;",
        "this.hidePullToRefreshIndicator();",
        "}, { passive: true });"
      ]
    },
    {
      "id": "fd5bafcf",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "241-245",
          "preview": "showPullToRefreshIndicator(distance) { | let indicator = document.getElementById('pullToRefreshIndicator'); | if (!indicator) {"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "241-245",
          "preview": "showPullToRefreshIndicator(distance) { | let indicator = document.getElementById('pullToRefreshIndicator'); | if (!indicator) {"
        }
      ],
      "codePreview": [
        "showPullToRefreshIndicator(distance) {",
        "let indicator = document.getElementById('pullToRefreshIndicator');",
        "if (!indicator) {",
        "indicator = document.createElement('div');",
        "indicator.id = 'pullToRefreshIndicator';"
      ]
    },
    {
      "id": "fbe10ed7",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "246-250",
          "preview": "indicator.innerHTML = ` | <div class=\"pull-indicator\"> | <div class=\"pull-icon\">⬇️</div>"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "246-250",
          "preview": "indicator.innerHTML = ` | <div class=\"pull-indicator\"> | <div class=\"pull-icon\">⬇️</div>"
        }
      ],
      "codePreview": [
        "indicator.innerHTML = `",
        "<div class=\"pull-indicator\">",
        "<div class=\"pull-icon\">⬇️</div>",
        "<div class=\"pull-text\">下拉刷新</div>",
        "</div>"
      ]
    },
    {
      "id": "6b8da537",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "256-260",
          "preview": "indicator.style.transform = `translateY(${distance}px)`; | if (distance >= this.pullToRefreshThreshold) {"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "256-260",
          "preview": "indicator.style.transform = `translateY(${distance}px)`; | if (distance >= this.pullToRefreshThreshold) {"
        }
      ],
      "codePreview": [
        "indicator.style.transform = `translateY(${distance}px)`;",
        "if (distance >= this.pullToRefreshThreshold) {",
        "indicator.querySelector('.pull-text').textContent = '释放刷新';",
        "indicator.querySelector('.pull-icon').textContent = '🔄';"
      ]
    },
    {
      "id": "0ad94595",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "281-285",
          "preview": "const indicator = document.getElementById('pullToRefreshIndicator'); | if (indicator) { | indicator.querySelector('.pull-text').textContent = '刷新中...';"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "281-285",
          "preview": "const indicator = document.getElementById('pullToRefreshIndicator'); | if (indicator) { | indicator.querySelector('.pull-text').textContent = '刷新中...';"
        }
      ],
      "codePreview": [
        "const indicator = document.getElementById('pullToRefreshIndicator');",
        "if (indicator) {",
        "indicator.querySelector('.pull-text').textContent = '刷新中...';",
        "indicator.querySelector('.pull-icon').textContent = '🔄';",
        "}"
      ]
    },
    {
      "id": "fdd2a6ab",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "291-295",
          "preview": "case 'home': | await this.loadShops(); | await this.loadUnreadCounts();"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "291-295",
          "preview": "case 'home': | await this.loadShops(); | await this.loadUnreadCounts();"
        }
      ],
      "codePreview": [
        "case 'home':",
        "await this.loadShops();",
        "await this.loadUnreadCounts();",
        "break;",
        "case 'shop':"
      ]
    },
    {
      "id": "71be6791",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "296-300",
          "preview": "await this.loadConversations(this.currentShop.id); | break; | case 'chat':"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "296-300",
          "preview": "await this.loadConversations(this.currentShop.id); | break; | case 'chat':"
        }
      ],
      "codePreview": [
        "await this.loadConversations(this.currentShop.id);",
        "break;",
        "case 'chat':",
        "await this.loadMessages(this.currentConversation.id);",
        "break;"
      ]
    },
    {
      "id": "7ace094f",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "316-320",
          "preview": "*/ | async takePhoto() { | if (!this.deviceCapabilities.camera) {"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "316-320",
          "preview": "*/ | async takePhoto() { | if (!this.deviceCapabilities.camera) {"
        }
      ],
      "codePreview": [
        "async takePhoto() {",
        "if (!this.deviceCapabilities.camera) {",
        "this.showError('设备不支持拍照功能');",
        "return;"
      ]
    },
    {
      "id": "8b33af9d",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "326-330",
          "preview": "facingMode: 'environment', // 后置摄像头 | width: { ideal: 1280 }, | height: { ideal: 720 }"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "326-330",
          "preview": "facingMode: 'environment', // 后置摄像头 | width: { ideal: 1280 }, | height: { ideal: 720 }"
        }
      ],
      "codePreview": [
        "facingMode: 'environment',",
        "width: { ideal: 1280 },",
        "height: { ideal: 720 }",
        "}",
        "});"
      ]
    },
    {
      "id": "f304940e",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "341-345",
          "preview": "*/ | showCameraModal(stream) { | const modal = document.createElement('div');"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "341-345",
          "preview": "*/ | showCameraModal(stream) { | const modal = document.createElement('div');"
        }
      ],
      "codePreview": [
        "showCameraModal(stream) {",
        "const modal = document.createElement('div');",
        "modal.className = 'camera-modal';",
        "modal.innerHTML = `"
      ]
    },
    {
      "id": "3970ab4f",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "346-350",
          "preview": "<div class=\"camera-container\"> | <video id=\"cameraPreview\" autoplay playsinline></video> | <canvas id=\"photoCanvas\" style=\"display: none;\"></canvas>"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "346-350",
          "preview": "<div class=\"camera-container\"> | <video id=\"cameraPreview\" autoplay playsinline></video> | <canvas id=\"photoCanvas\" style=\"display: none;\"></canvas>"
        }
      ],
      "codePreview": [
        "<div class=\"camera-container\">",
        "<video id=\"cameraPreview\" autoplay playsinline></video>",
        "<canvas id=\"photoCanvas\" style=\"display: none;\"></canvas>",
        "<div class=\"camera-controls\">",
        "<button class=\"camera-btn cancel-btn\" onclick=\"this.closest('.camera-modal').remove()\">取消</button>"
      ]
    },
    {
      "id": "1543ea24",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "351-355",
          "preview": "<button class=\"camera-btn capture-btn\" onclick=\"enhancedMobileService.capturePhoto()\">拍照</button> | <button class=\"camera-btn switch-btn\" onclick=\"enhancedMobileService.switchCamera()\">翻转</button> | </div>"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "351-355",
          "preview": "<button class=\"camera-btn capture-btn\" onclick=\"enhancedMobileService.capturePhoto()\">拍照</button> | <button class=\"camera-btn switch-btn\" onclick=\"enhancedMobileService.switchCamera()\">翻转</button> | </div>"
        }
      ],
      "codePreview": [
        "<button class=\"camera-btn capture-btn\" onclick=\"enhancedMobileService.capturePhoto()\">拍照</button>",
        "<button class=\"camera-btn switch-btn\" onclick=\"enhancedMobileService.switchCamera()\">翻转</button>",
        "</div>",
        "</div>",
        "`;"
      ]
    },
    {
      "id": "628389fd",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "371-375",
          "preview": "*/ | capturePhoto() { | const video = document.getElementById('cameraPreview');"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "371-375",
          "preview": "*/ | capturePhoto() { | const video = document.getElementById('cameraPreview');"
        }
      ],
      "codePreview": [
        "capturePhoto() {",
        "const video = document.getElementById('cameraPreview');",
        "const canvas = document.getElementById('photoCanvas');",
        "const context = canvas.getContext('2d');"
      ]
    },
    {
      "id": "94938f6d",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "411-415",
          "preview": "async startVoiceRecording() { | if (!this.deviceCapabilities.microphone) { | this.showError('设备不支持录音功能');"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "411-415",
          "preview": "async startVoiceRecording() { | if (!this.deviceCapabilities.microphone) { | this.showError('设备不支持录音功能');"
        }
      ],
      "codePreview": [
        "async startVoiceRecording() {",
        "if (!this.deviceCapabilities.microphone) {",
        "this.showError('设备不支持录音功能');",
        "return;",
        "}"
      ]
    },
    {
      "id": "4562488a",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "426-430",
          "preview": "this.mediaRecorder.addEventListener('dataavailable', (event) => { | this.audioChunks.push(event.data); | });"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "426-430",
          "preview": "this.mediaRecorder.addEventListener('dataavailable', (event) => { | this.audioChunks.push(event.data); | });"
        }
      ],
      "codePreview": [
        "this.mediaRecorder.addEventListener('dataavailable', (event) => {",
        "this.audioChunks.push(event.data);",
        "});",
        "this.mediaRecorder.addEventListener('stop', () => {"
      ]
    },
    {
      "id": "f5f2c485",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "431-435",
          "preview": "this.handleVoiceRecordingStop(); | });"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "431-435",
          "preview": "this.handleVoiceRecordingStop(); | });"
        }
      ],
      "codePreview": [
        "this.handleVoiceRecordingStop();",
        "});",
        "this.mediaRecorder.start();",
        "this.showVoiceRecordingUI();"
      ]
    },
    {
      "id": "c34d5ef9",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "476-480",
          "preview": "const recordingUI = document.createElement('div'); | recordingUI.id = 'voiceRecordingUI'; | recordingUI.className = 'voice-recording-ui';"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "476-480",
          "preview": "const recordingUI = document.createElement('div'); | recordingUI.id = 'voiceRecordingUI'; | recordingUI.className = 'voice-recording-ui';"
        }
      ],
      "codePreview": [
        "const recordingUI = document.createElement('div');",
        "recordingUI.id = 'voiceRecordingUI';",
        "recordingUI.className = 'voice-recording-ui';",
        "recordingUI.innerHTML = `",
        "<div class=\"recording-indicator\">"
      ]
    },
    {
      "id": "8fb9e367",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "481-485",
          "preview": "<div class=\"recording-animation\">🎤</div> | <div class=\"recording-text\">正在录音...</div> | <div class=\"recording-timer\">00:00</div>"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "481-485",
          "preview": "<div class=\"recording-animation\">🎤</div> | <div class=\"recording-text\">正在录音...</div> | <div class=\"recording-timer\">00:00</div>"
        }
      ],
      "codePreview": [
        "<div class=\"recording-animation\">🎤</div>",
        "<div class=\"recording-text\">正在录音...</div>",
        "<div class=\"recording-timer\">00:00</div>",
        "</div>",
        "<div class=\"recording-controls\">"
      ]
    },
    {
      "id": "2d1f0161",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "516-520",
          "preview": "this.recordingTimer = setInterval(() => { | seconds++; | const minutes = Math.floor(seconds / 60);"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "516-520",
          "preview": "this.recordingTimer = setInterval(() => { | seconds++; | const minutes = Math.floor(seconds / 60);"
        }
      ],
      "codePreview": [
        "this.recordingTimer = setInterval(() => {",
        "seconds++;",
        "const minutes = Math.floor(seconds / 60);",
        "const remainingSeconds = seconds % 60;",
        "const timeText = `${minutes.toString().padStart(2, '0')}:${remainingSeconds.toString().padStart(2, '0')}`;"
      ]
    },
    {
      "id": "10c84500",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "536-540",
          "preview": "*/ | cancelVoiceRecording() { | if (this.mediaRecorder && this.isRecording) {"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "536-540",
          "preview": "*/ | cancelVoiceRecording() { | if (this.mediaRecorder && this.isRecording) {"
        }
      ],
      "codePreview": [
        "cancelVoiceRecording() {",
        "if (this.mediaRecorder && this.isRecording) {",
        "this.mediaRecorder.stop();",
        "this.isRecording = false;"
      ]
    },
    {
      "id": "ee1abd11",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "566-570",
          "preview": "timeout: 10000, | maximumAge: 60000 | });"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "566-570",
          "preview": "timeout: 10000, | maximumAge: 60000 | });"
        }
      ],
      "codePreview": [
        "timeout: 10000,",
        "maximumAge: 60000",
        "});",
        "});"
      ]
    },
    {
      "id": "98e85a2b",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "606-610",
          "preview": "modal.innerHTML = ` | <div class=\"location-container\"> | <div class=\"location-header\">"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "606-610",
          "preview": "modal.innerHTML = ` | <div class=\"location-container\"> | <div class=\"location-header\">"
        }
      ],
      "codePreview": [
        "modal.innerHTML = `",
        "<div class=\"location-container\">",
        "<div class=\"location-header\">",
        "<h3>分享位置</h3>",
        "</div>"
      ]
    },
    {
      "id": "08846e26",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "611-615",
          "preview": "<div class=\"location-content\"> | <div class=\"location-icon\">📍</div> | <div class=\"location-info\">"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "611-615",
          "preview": "<div class=\"location-content\"> | <div class=\"location-icon\">📍</div> | <div class=\"location-info\">"
        }
      ],
      "codePreview": [
        "<div class=\"location-content\">",
        "<div class=\"location-icon\">📍</div>",
        "<div class=\"location-info\">",
        "<div class=\"location-address\">${address}</div>",
        "<div class=\"location-coords\">坐标: ${latitude.toFixed(4)}, ${longitude.toFixed(4)}</div>"
      ]
    },
    {
      "id": "ec97ed60",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "616-620",
          "preview": "</div> | </div> | <div class=\"location-controls\">"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "616-620",
          "preview": "</div> | </div> | <div class=\"location-controls\">"
        }
      ],
      "codePreview": [
        "</div>",
        "</div>",
        "<div class=\"location-controls\">",
        "<button class=\"location-btn cancel-btn\" onclick=\"this.closest('.location-modal').remove()\">取消</button>",
        "<button class=\"location-btn send-btn\" onclick=\"enhancedMobileService.sendLocation(${latitude}, ${longitude}, '${address}')\">发送位置</button>"
      ]
    },
    {
      "id": "9d8091d1",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "631-635",
          "preview": "async sendLocation(latitude, longitude, address) { | const locationData = { | type: 'location',"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "631-635",
          "preview": "async sendLocation(latitude, longitude, address) { | const locationData = { | type: 'location',"
        }
      ],
      "codePreview": [
        "async sendLocation(latitude, longitude, address) {",
        "const locationData = {",
        "type: 'location',",
        "latitude: latitude,",
        "longitude: longitude,"
      ]
    },
    {
      "id": "1de1653c",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "651-655",
          "preview": "*/ | getLocationErrorMessage(error) { | switch (error.code) {"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "651-655",
          "preview": "*/ | getLocationErrorMessage(error) { | switch (error.code) {"
        }
      ],
      "codePreview": [
        "getLocationErrorMessage(error) {",
        "switch (error.code) {",
        "case error.PERMISSION_DENIED:",
        "return '用户拒绝了地理定位请求';"
      ]
    },
    {
      "id": "b49bca36",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "656-660",
          "preview": "case error.POSITION_UNAVAILABLE: | return '位置信息不可用'; | case error.TIMEOUT:"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "656-660",
          "preview": "case error.POSITION_UNAVAILABLE: | return '位置信息不可用'; | case error.TIMEOUT:"
        }
      ],
      "codePreview": [
        "case error.POSITION_UNAVAILABLE:",
        "return '位置信息不可用';",
        "case error.TIMEOUT:",
        "return '请求位置信息超时';",
        "default:"
      ]
    },
    {
      "id": "4b34e50a",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "691-695",
          "preview": "*/ | async uploadImage(blob) { | const formData = new FormData();"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "691-695",
          "preview": "*/ | async uploadImage(blob) { | const formData = new FormData();"
        }
      ],
      "codePreview": [
        "async uploadImage(blob) {",
        "const formData = new FormData();",
        "formData.append('image', blob, 'photo.jpg');",
        "formData.append('type', 'image');"
      ]
    },
    {
      "id": "1909e3e4",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "726-730",
          "preview": "*/ | async uploadAudio(blob) { | const formData = new FormData();"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "726-730",
          "preview": "*/ | async uploadAudio(blob) { | const formData = new FormData();"
        }
      ],
      "codePreview": [
        "async uploadAudio(blob) {",
        "const formData = new FormData();",
        "formData.append('audio', blob, 'voice.webm');",
        "formData.append('type', 'audio');"
      ]
    },
    {
      "id": "f208115a",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "776-780",
          "preview": "document.addEventListener('touchstart', (e) => { | pressTimer = setTimeout(() => { | this.handleLongPress(e);"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "776-780",
          "preview": "document.addEventListener('touchstart', (e) => { | pressTimer = setTimeout(() => { | this.handleLongPress(e);"
        }
      ],
      "codePreview": [
        "document.addEventListener('touchstart', (e) => {",
        "pressTimer = setTimeout(() => {",
        "this.handleLongPress(e);",
        "}, 500);",
        "});"
      ]
    },
    {
      "id": "8cba0ee2",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "821-825",
          "preview": "e.preventDefault(); | this.deferredPrompt = e; | this.showInstallPrompt();"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "821-825",
          "preview": "e.preventDefault(); | this.deferredPrompt = e; | this.showInstallPrompt();"
        }
      ],
      "codePreview": [
        "e.preventDefault();",
        "this.deferredPrompt = e;",
        "this.showInstallPrompt();",
        "});"
      ]
    },
    {
      "id": "9a2ce0ee",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "846-850",
          "preview": "*/ | initNetworkStatusListener() { | window.addEventListener('online', () => {"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "846-850",
          "preview": "*/ | initNetworkStatusListener() { | window.addEventListener('online', () => {"
        }
      ],
      "codePreview": [
        "initNetworkStatusListener() {",
        "window.addEventListener('online', () => {",
        "this.handleNetworkOnline();",
        "});"
      ]
    },
    {
      "id": "708cc8d2",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "891-895",
          "preview": "if (!indicator) { | indicator = document.createElement('div'); | indicator.id = 'offlineIndicator';"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "891-895",
          "preview": "if (!indicator) { | indicator = document.createElement('div'); | indicator.id = 'offlineIndicator';"
        }
      ],
      "codePreview": [
        "if (!indicator) {",
        "indicator = document.createElement('div');",
        "indicator.id = 'offlineIndicator';",
        "indicator.className = 'offline-indicator';",
        "indicator.textContent = '📶 网络已断开';"
      ]
    },
    {
      "id": "c32c5c2f",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "916-920",
          "preview": "if (!loader) { | loader = document.createElement('div'); | loader.id = 'loadingIndicator';"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "916-920",
          "preview": "if (!loader) { | loader = document.createElement('div'); | loader.id = 'loadingIndicator';"
        }
      ],
      "codePreview": [
        "if (!loader) {",
        "loader = document.createElement('div');",
        "loader.id = 'loadingIndicator';",
        "loader.className = 'loading-indicator';",
        "loader.innerHTML = `"
      ]
    },
    {
      "id": "cfdb6a08",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
          "lines": "971-975",
          "preview": "setTimeout(() => { | toast.classList.remove('toast-show'); | setTimeout(() => {"
        },
        {
          "file": "static\\js\\enhanced-mobile-customer-service.js",
          "lines": "971-975",
          "preview": "setTimeout(() => { | toast.classList.remove('toast-show'); | setTimeout(() => {"
        }
      ],
      "codePreview": [
        "setTimeout(() => {",
        "toast.classList.remove('toast-show');",
        "setTimeout(() => {",
        "document.body.removeChild(toast);",
        "}, 300);"
      ]
    },
    {
      "id": "196a0531",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "11-15",
          "preview": "class MobileEcommerceCustomerService { | constructor() {"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "11-15",
          "preview": "class MobileEcommerceCustomerService { | constructor() {"
        }
      ],
      "codePreview": [
        "class MobileEcommerceCustomerService {",
        "constructor() {",
        "this.currentUser = null;",
        "this.shops = [];"
      ]
    },
    {
      "id": "1f6904fe",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "16-20",
          "preview": "this.conversations = {};  // 按店铺ID分组的对话 | this.currentShop = null; | this.currentConversation = null;"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "16-20",
          "preview": "this.conversations = {};  // 按店铺ID分组的对话 | this.currentShop = null; | this.currentConversation = null;"
        }
      ],
      "codePreview": [
        "this.conversations = {};",
        "this.currentShop = null;",
        "this.currentConversation = null;",
        "this.unreadCounts = {};",
        "this.totalUnreadCount = 0;"
      ]
    },
    {
      "id": "a918b974",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "111-115",
          "preview": "// 发送用户认证 | this.websocket.send(JSON.stringify({ | type: 'auth',"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "111-115",
          "preview": "// 发送用户认证 | this.websocket.send(JSON.stringify({ | type: 'auth',"
        }
      ],
      "codePreview": [
        "this.websocket.send(JSON.stringify({",
        "type: 'auth',",
        "sessionId: localStorage.getItem('sessionId')",
        "}));"
      ]
    },
    {
      "id": "a45d682b",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "151-155",
          "preview": "this.handleNewMessage(data); | break; | case 'message_read':"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "151-155",
          "preview": "this.handleNewMessage(data); | break; | case 'message_read':"
        }
      ],
      "codePreview": [
        "this.handleNewMessage(data);",
        "break;",
        "case 'message_read':",
        "this.handleMessageRead(data);",
        "break;"
      ]
    },
    {
      "id": "6cb3fe7b",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "156-160",
          "preview": "case 'typing': | this.handleTyping(data); | break;"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "156-160",
          "preview": "case 'typing': | this.handleTyping(data); | break;"
        }
      ],
      "codePreview": [
        "case 'typing':",
        "this.handleTyping(data);",
        "break;",
        "case 'user_online':",
        "this.handleUserOnline(data);"
      ]
    },
    {
      "id": "57a41449",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "161-165",
          "preview": "break; | case 'user_offline': | this.handleUserOffline(data);"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "161-165",
          "preview": "break; | case 'user_offline': | this.handleUserOffline(data);"
        }
      ],
      "codePreview": [
        "break;",
        "case 'user_offline':",
        "this.handleUserOffline(data);",
        "break;",
        "default:"
      ]
    },
    {
      "id": "5954f646",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "186-190",
          "preview": "// 如果正在查看该对话，立即显示新消息 | if (this.currentView === 'chat' && | this.currentShop?.id === shopId &&"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "186-190",
          "preview": "// 如果正在查看该对话，立即显示新消息 | if (this.currentView === 'chat' && | this.currentShop?.id === shopId &&"
        }
      ],
      "codePreview": [
        "if (this.currentView === 'chat' &&",
        "this.currentShop?.id === shopId &&",
        "this.currentConversation?.userId === userId) {",
        "this.addMessageToChat(message);"
      ]
    },
    {
      "id": "9e92ff26",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "211-215",
          "preview": "}); | if (response.ok) {"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "211-215",
          "preview": "}); | if (response.ok) {"
        }
      ],
      "codePreview": [
        "});",
        "if (response.ok) {",
        "const data = await response.json();",
        "this.shops = data.shops || [];"
      ]
    },
    {
      "id": "9ce46538",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "271-275",
          "preview": "<div class=\"mobile-customer-service\"> | <!-- 页面头部 --> | <div class=\"page-header\" id=\"pageHeader\">"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "271-275",
          "preview": "<div class=\"mobile-customer-service\"> | <!-- 页面头部 --> | <div class=\"page-header\" id=\"pageHeader\">"
        }
      ],
      "codePreview": [
        "<div class=\"mobile-customer-service\">",
        "<!-- 页面头部 -->",
        "<div class=\"page-header\" id=\"pageHeader\">",
        "<button class=\"back-btn\" id=\"backBtn\" style=\"display: none;\" onclick=\"mobileCustomerService.goBack()\">",
        "← 返回"
      ]
    },
    {
      "id": "1bd91e3c",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "276-280",
          "preview": "</button> | <div class=\"page-title\" id=\"pageTitle\">消息中心</div> | <button class=\"refresh-btn\" id=\"refreshBtn\" onclick=\"mobileCustomerService.refresh()\">"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "276-280",
          "preview": "</button> | <div class=\"page-title\" id=\"pageTitle\">消息中心</div> | <button class=\"refresh-btn\" id=\"refreshBtn\" onclick=\"mobileCustomerService.refresh()\">"
        }
      ],
      "codePreview": [
        "</button>",
        "<div class=\"page-title\" id=\"pageTitle\">消息中心</div>",
        "<button class=\"refresh-btn\" id=\"refreshBtn\" onclick=\"mobileCustomerService.refresh()\">",
        "🔄",
        "</button>"
      ]
    },
    {
      "id": "f567e946",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "281-285",
          "preview": "</div> | <!-- 页面内容 -->"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "281-285",
          "preview": "</div> | <!-- 页面内容 -->"
        }
      ],
      "codePreview": [
        "</div>",
        "<!-- 页面内容 -->",
        "<div class=\"page-content\" id=\"pageContent\">",
        "<div class=\"loading\">正在加载...</div>"
      ]
    },
    {
      "id": "4afbfd63",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "286-290",
          "preview": "</div> | <!-- 聊天输入框（仅在聊天页面显示） -->"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "286-290",
          "preview": "</div> | <!-- 聊天输入框（仅在聊天页面显示） -->"
        }
      ],
      "codePreview": [
        "</div>",
        "<!-- 聊天输入框（仅在聊天页面显示） -->",
        "<div class=\"chat-input-container\" id=\"chatInputContainer\" style=\"display: none;\">",
        "<div class=\"chat-input\">"
      ]
    },
    {
      "id": "d617002c",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "291-295",
          "preview": "<input type=\"text\" id=\"messageInput\" placeholder=\"输入消息...\" /> | <button id=\"sendBtn\" onclick=\"mobileCustomerService.sendMessage()\">发送</button> | </div>"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "291-295",
          "preview": "<input type=\"text\" id=\"messageInput\" placeholder=\"输入消息...\" /> | <button id=\"sendBtn\" onclick=\"mobileCustomerService.sendMessage()\">发送</button> | </div>"
        }
      ],
      "codePreview": [
        "<input type=\"text\" id=\"messageInput\" placeholder=\"输入消息...\" />",
        "<button id=\"sendBtn\" onclick=\"mobileCustomerService.sendMessage()\">发送</button>",
        "</div>",
        "</div>",
        "</div>"
      ]
    },
    {
      "id": "bf4601ec",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "306-310",
          "preview": "const style = document.createElement('style'); | style.textContent = ` | .mobile-customer-service {"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "306-310",
          "preview": "const style = document.createElement('style'); | style.textContent = ` | .mobile-customer-service {"
        }
      ],
      "codePreview": [
        "const style = document.createElement('style');",
        "style.textContent = `",
        ".mobile-customer-service {",
        "height: 100%;",
        "display: flex;"
      ]
    },
    {
      "id": "cdbcbb48",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "316-320",
          "preview": "height: 50px; | background: #fff; | border-bottom: 1px solid #e9ecef;"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "316-320",
          "preview": "height: 50px; | background: #fff; | border-bottom: 1px solid #e9ecef;"
        }
      ],
      "codePreview": [
        "height: 50px;",
        "background: #fff;",
        "border-bottom: 1px solid #e9ecef;",
        "display: flex;",
        "align-items: center;"
      ]
    },
    {
      "id": "14b5bbff",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "326-330",
          "preview": "background: none; | border: none; | font-size: 16px;"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "326-330",
          "preview": "background: none; | border: none; | font-size: 16px;"
        }
      ],
      "codePreview": [
        "background: none;",
        "border: none;",
        "font-size: 16px;",
        "color: #007AFF;",
        "cursor: pointer;"
      ]
    },
    {
      "id": "4b134cba",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "341-345",
          "preview": ".refresh-btn { | background: none; | border: none;"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "341-345",
          "preview": ".refresh-btn { | background: none; | border: none;"
        }
      ],
      "codePreview": [
        ".refresh-btn {",
        "background: none;",
        "border: none;",
        "font-size: 16px;",
        "cursor: pointer;"
      ]
    },
    {
      "id": "d941a420",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "366-370",
          "preview": ".total-unread { | font-size: 32px; | font-weight: bold;"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "366-370",
          "preview": ".total-unread { | font-size: 32px; | font-weight: bold;"
        }
      ],
      "codePreview": [
        ".total-unread {",
        "font-size: 32px;",
        "font-weight: bold;",
        "margin-bottom: 5px;",
        "}"
      ]
    },
    {
      "id": "e2dc6600",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "381-385",
          "preview": ".shop-item { | display: flex; | align-items: center;"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "381-385",
          "preview": ".shop-item { | display: flex; | align-items: center;"
        }
      ],
      "codePreview": [
        ".shop-item {",
        "display: flex;",
        "align-items: center;",
        "padding: 15px;",
        "border-bottom: 1px solid #f0f0f0;"
      ]
    },
    {
      "id": "7b646930",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "401-405",
          "preview": "height: 50px; | border-radius: 25px; | background: linear-gradient(135deg, #FF6B6B 0%, #4ECDC4 100%);"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "401-405",
          "preview": "height: 50px; | border-radius: 25px; | background: linear-gradient(135deg, #FF6B6B 0%, #4ECDC4 100%);"
        }
      ],
      "codePreview": [
        "height: 50px;",
        "border-radius: 25px;",
        "background: linear-gradient(135deg, #FF6B6B 0%, #4ECDC4 100%);",
        "display: flex;",
        "align-items: center;"
      ]
    },
    {
      "id": "0e4a4ea6",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "406-410",
          "preview": "justify-content: center; | color: white; | font-weight: bold;"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "406-410",
          "preview": "justify-content: center; | color: white; | font-weight: bold;"
        }
      ],
      "codePreview": [
        "justify-content: center;",
        "color: white;",
        "font-weight: bold;",
        "font-size: 18px;",
        "}"
      ]
    },
    {
      "id": "8c1ecd7b",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "411-415",
          "preview": ".unread-badge { | position: absolute;"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "411-415",
          "preview": ".unread-badge { | position: absolute;"
        }
      ],
      "codePreview": [
        ".unread-badge {",
        "position: absolute;",
        "top: -5px;",
        "right: -5px;"
      ]
    },
    {
      "id": "ea4df76c",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "416-420",
          "preview": "background: #FF3B30; | color: white; | border-radius: 12px;"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "416-420",
          "preview": "background: #FF3B30; | color: white; | border-radius: 12px;"
        }
      ],
      "codePreview": [
        "background: #FF3B30;",
        "color: white;",
        "border-radius: 12px;",
        "min-width: 24px;",
        "height: 24px;"
      ]
    },
    {
      "id": "f1671141",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "421-425",
          "preview": "display: flex; | align-items: center; | justify-content: center;"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "421-425",
          "preview": "display: flex; | align-items: center; | justify-content: center;"
        }
      ],
      "codePreview": [
        "display: flex;",
        "align-items: center;",
        "justify-content: center;",
        "font-size: 12px;",
        "font-weight: bold;"
      ]
    },
    {
      "id": "6575e40c",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "436-440",
          "preview": "color: #333; | margin-bottom: 5px; | overflow: hidden;"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "436-440",
          "preview": "color: #333; | margin-bottom: 5px; | overflow: hidden;"
        }
      ],
      "codePreview": [
        "color: #333;",
        "margin-bottom: 5px;",
        "overflow: hidden;",
        "text-overflow: ellipsis;",
        "white-space: nowrap;"
      ]
    },
    {
      "id": "44569d16",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "451-455",
          "preview": "color: #999; | overflow: hidden; | text-overflow: ellipsis;"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "451-455",
          "preview": "color: #999; | overflow: hidden; | text-overflow: ellipsis;"
        }
      ],
      "codePreview": [
        "color: #999;",
        "overflow: hidden;",
        "text-overflow: ellipsis;",
        "white-space: nowrap;",
        "}"
      ]
    },
    {
      "id": "d7e144a0",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "456-460",
          "preview": ".shop-meta { | text-align: right;"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "456-460",
          "preview": ".shop-meta { | text-align: right;"
        }
      ],
      "codePreview": [
        ".shop-meta {",
        "text-align: right;",
        "color: #999;",
        "font-size: 12px;"
      ]
    },
    {
      "id": "8f871c95",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "476-480",
          "preview": "align-items: center; | padding: 15px; | border-bottom: 1px solid #f0f0f0;"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "476-480",
          "preview": "align-items: center; | padding: 15px; | border-bottom: 1px solid #f0f0f0;"
        }
      ],
      "codePreview": [
        "align-items: center;",
        "padding: 15px;",
        "border-bottom: 1px solid #f0f0f0;",
        "cursor: pointer;",
        "transition: background 0.2s;"
      ]
    },
    {
      "id": "9fe13aca",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "486-490",
          "preview": ".user-avatar { | width: 45px;"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "486-490",
          "preview": ".user-avatar { | width: 45px;"
        }
      ],
      "codePreview": [
        ".user-avatar {",
        "width: 45px;",
        "height: 45px;",
        "border-radius: 22.5px;"
      ]
    },
    {
      "id": "20d7517a",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "491-495",
          "preview": "background: linear-gradient(135deg, #4ECDC4 0%, #44A08D 100%); | display: flex; | align-items: center;"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "491-495",
          "preview": "background: linear-gradient(135deg, #4ECDC4 0%, #44A08D 100%); | display: flex; | align-items: center;"
        }
      ],
      "codePreview": [
        "background: linear-gradient(135deg, #4ECDC4 0%, #44A08D 100%);",
        "display: flex;",
        "align-items: center;",
        "justify-content: center;",
        "color: white;"
      ]
    },
    {
      "id": "291d8db0",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "506-510",
          "preview": "display: flex; | justify-content: space-between; | align-items: center;"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "506-510",
          "preview": "display: flex; | justify-content: space-between; | align-items: center;"
        }
      ],
      "codePreview": [
        "display: flex;",
        "justify-content: space-between;",
        "align-items: center;",
        "margin-bottom: 5px;",
        "}"
      ]
    },
    {
      "id": "1d6e4f57",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "511-515",
          "preview": ".user-name { | font-size: 16px;"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "511-515",
          "preview": ".user-name { | font-size: 16px;"
        }
      ],
      "codePreview": [
        ".user-name {",
        "font-size: 16px;",
        "font-weight: 600;",
        "color: #333;"
      ]
    },
    {
      "id": "fa20a673",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "531-535",
          "preview": "/* 聊天界面样式 */ | .chat-messages { | padding: 15px;"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "531-535",
          "preview": "/* 聊天界面样式 */ | .chat-messages { | padding: 15px;"
        }
      ],
      "codePreview": [
        ".chat-messages {",
        "padding: 15px;",
        "height: 100%;",
        "overflow-y: auto;"
      ]
    },
    {
      "id": "cad503dd",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "551-555",
          "preview": ".message-bubble { | max-width: 80%;"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "551-555",
          "preview": ".message-bubble { | max-width: 80%;"
        }
      ],
      "codePreview": [
        ".message-bubble {",
        "max-width: 80%;",
        "padding: 12px 16px;",
        "border-radius: 18px;"
      ]
    },
    {
      "id": "72bedf14",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "561-565",
          "preview": ".message.user .message-bubble { | background: #007AFF; | color: white;"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "561-565",
          "preview": ".message.user .message-bubble { | background: #007AFF; | color: white;"
        }
      ],
      "codePreview": [
        ".message.user .message-bubble {",
        "background: #007AFF;",
        "color: white;",
        "border-bottom-right-radius: 5px;",
        "}"
      ]
    },
    {
      "id": "4fbee4d6",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "566-570",
          "preview": ".message.admin .message-bubble { | background: #e9ecef;"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "566-570",
          "preview": ".message.admin .message-bubble { | background: #e9ecef;"
        }
      ],
      "codePreview": [
        ".message.admin .message-bubble {",
        "background: #e9ecef;",
        "color: #333;",
        "border-bottom-left-radius: 5px;"
      ]
    },
    {
      "id": "68db26e8",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "581-585",
          "preview": ".chat-input-container { | background: #fff; | border-top: 1px solid #e9ecef;"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "581-585",
          "preview": ".chat-input-container { | background: #fff; | border-top: 1px solid #e9ecef;"
        }
      ],
      "codePreview": [
        ".chat-input-container {",
        "background: #fff;",
        "border-top: 1px solid #e9ecef;",
        "padding: 15px;",
        "}"
      ]
    },
    {
      "id": "14f29414",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "586-590",
          "preview": ".chat-input { | display: flex;"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "586-590",
          "preview": ".chat-input { | display: flex;"
        }
      ],
      "codePreview": [
        ".chat-input {",
        "display: flex;",
        "align-items: center;",
        "gap: 10px;"
      ]
    },
    {
      "id": "a0967a6d",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "596-600",
          "preview": "border-radius: 25px; | padding: 12px 16px; | font-size: 16px;"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "596-600",
          "preview": "border-radius: 25px; | padding: 12px 16px; | font-size: 16px;"
        }
      ],
      "codePreview": [
        "border-radius: 25px;",
        "padding: 12px 16px;",
        "font-size: 16px;",
        "outline: none;",
        "}"
      ]
    },
    {
      "id": "4ce46b46",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "601-605",
          "preview": "#sendBtn { | background: #007AFF;"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "601-605",
          "preview": "#sendBtn { | background: #007AFF;"
        }
      ],
      "codePreview": [
        "#sendBtn {",
        "background: #007AFF;",
        "color: white;",
        "border: none;"
      ]
    },
    {
      "id": "a5944c29",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "606-610",
          "preview": "border-radius: 25px; | padding: 12px 20px; | font-size: 16px;"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "606-610",
          "preview": "border-radius: 25px; | padding: 12px 20px; | font-size: 16px;"
        }
      ],
      "codePreview": [
        "border-radius: 25px;",
        "padding: 12px 20px;",
        "font-size: 16px;",
        "cursor: pointer;",
        "}"
      ]
    },
    {
      "id": "fd3de334",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "616-620",
          "preview": "align-items: center; | justify-content: center; | padding: 60px 20px;"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "616-620",
          "preview": "align-items: center; | justify-content: center; | padding: 60px 20px;"
        }
      ],
      "codePreview": [
        "align-items: center;",
        "justify-content: center;",
        "padding: 60px 20px;",
        "color: #999;",
        "text-align: center;"
      ]
    },
    {
      "id": "9da3edb9",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "641-645",
          "preview": "display: flex; | align-items: center; | justify-content: center;"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "641-645",
          "preview": "display: flex; | align-items: center; | justify-content: center;"
        }
      ],
      "codePreview": [
        "display: flex;",
        "align-items: center;",
        "justify-content: center;",
        "padding: 40px;",
        "color: #999;"
      ]
    },
    {
      "id": "be9ef95d",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "676-680",
          "preview": "const html = ` | <div class=\"message-overview\"> | <div class=\"overview-stats\">"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "676-680",
          "preview": "const html = ` | <div class=\"message-overview\"> | <div class=\"overview-stats\">"
        }
      ],
      "codePreview": [
        "const html = `",
        "<div class=\"message-overview\">",
        "<div class=\"overview-stats\">",
        "<div class=\"total-unread\">${this.totalUnreadCount}</div>",
        "<div class=\"stats-label\">条未读消息</div>"
      ]
    },
    {
      "id": "32837a5d",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "681-685",
          "preview": "</div> | <div class=\"shop-list\">"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "681-685",
          "preview": "</div> | <div class=\"shop-list\">"
        }
      ],
      "codePreview": [
        "</div>",
        "<div class=\"shop-list\">",
        "${this.shops.map(shop => this.renderShopOverviewItem(shop)).join('')}",
        "</div>"
      ]
    },
    {
      "id": "82ad9a21",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "701-705",
          "preview": "return ` | <div class=\"shop-item\" onclick=\"mobileCustomerService.showShopConversations('${shop.id}')\">"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "701-705",
          "preview": "return ` | <div class=\"shop-item\" onclick=\"mobileCustomerService.showShopConversations('${shop.id}')\">"
        }
      ],
      "codePreview": [
        "return `",
        "<div class=\"shop-item\" onclick=\"mobileCustomerService.showShopConversations('${shop.id}')\">",
        "<div class=\"shop-avatar\">",
        "<div class=\"avatar-circle\">${shop.name.charAt(0).toUpperCase()}</div>"
      ]
    },
    {
      "id": "e9bd8e79",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "706-710",
          "preview": "${unreadCount > 0 ? `<div class=\"unread-badge\">${unreadCount}</div>` : ''} | </div> | <div class=\"shop-info\">"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "706-710",
          "preview": "${unreadCount > 0 ? `<div class=\"unread-badge\">${unreadCount}</div>` : ''} | </div> | <div class=\"shop-info\">"
        }
      ],
      "codePreview": [
        "${unreadCount > 0 ? `<div class=\"unread-badge\">${unreadCount}</div>` : ''}",
        "</div>",
        "<div class=\"shop-info\">",
        "<div class=\"shop-name\">${shop.name}</div>",
        "<div class=\"shop-domain\">${shop.domain}</div>"
      ]
    },
    {
      "id": "86b01dc0",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "711-715",
          "preview": "<div class=\"last-message\">${lastMessage?.content || '暂无消息'}</div> | </div> | <div class=\"shop-meta\">"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "711-715",
          "preview": "<div class=\"last-message\">${lastMessage?.content || '暂无消息'}</div> | </div> | <div class=\"shop-meta\">"
        }
      ],
      "codePreview": [
        "<div class=\"last-message\">${lastMessage?.content || '暂无消息'}</div>",
        "</div>",
        "<div class=\"shop-meta\">",
        "<div class=\"timestamp\">${lastMessage ? this.formatTime(lastMessage.timestamp) : ''}</div>",
        "<div class=\"chevron\">›</div>"
      ]
    },
    {
      "id": "23c7438e",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "781-785",
          "preview": "const conversations = this.conversations[this.currentShop.id] || []; | if (conversations.length === 0) {"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "781-785",
          "preview": "const conversations = this.conversations[this.currentShop.id] || []; | if (conversations.length === 0) {"
        }
      ],
      "codePreview": [
        "const conversations = this.conversations[this.currentShop.id] || [];",
        "if (conversations.length === 0) {",
        "content.innerHTML = this.renderEmptyState('💬', '暂无对话', '等待客户发起对话');",
        "this.hideChatInput();"
      ]
    },
    {
      "id": "252ef5f9",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "806-810",
          "preview": "<div class=\"conversation-item\" onclick=\"mobileCustomerService.showChat('${conversation.user_id}')\"> | <div class=\"user-avatar\">${(conversation.user_name || 'U').charAt(0).toUpperCase()}</div> | <div class=\"conversation-info\">"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "806-810",
          "preview": "<div class=\"conversation-item\" onclick=\"mobileCustomerService.showChat('${conversation.user_id}')\"> | <div class=\"user-avatar\">${(conversation.user_name || 'U').charAt(0).toUpperCase()}</div> | <div class=\"conversation-info\">"
        }
      ],
      "codePreview": [
        "<div class=\"conversation-item\" onclick=\"mobileCustomerService.showChat('${conversation.user_id}')\">",
        "<div class=\"user-avatar\">${(conversation.user_name || 'U').charAt(0).toUpperCase()}</div>",
        "<div class=\"conversation-info\">",
        "<div class=\"conversation-meta\">",
        "<div class=\"user-name\">${conversation.user_name || '匿名用户'}</div>"
      ]
    },
    {
      "id": "bc325f79",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "811-815",
          "preview": "<div class=\"message-time\">${this.formatTime(conversation.last_message_time)}</div> | </div> | <div class=\"last-message-preview\">${conversation.last_message || '暂无消息'}</div>"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "811-815",
          "preview": "<div class=\"message-time\">${this.formatTime(conversation.last_message_time)}</div> | </div> | <div class=\"last-message-preview\">${conversation.last_message || '暂无消息'}</div>"
        }
      ],
      "codePreview": [
        "<div class=\"message-time\">${this.formatTime(conversation.last_message_time)}</div>",
        "</div>",
        "<div class=\"last-message-preview\">${conversation.last_message || '暂无消息'}</div>",
        "</div>",
        "${unreadCount > 0 ? `<div class=\"unread-badge\">${unreadCount}</div>` : ''}"
      ]
    },
    {
      "id": "7123ad9b",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "831-835",
          "preview": "this.currentConversation = { userId }; | this.currentView = 'chat'; | this.viewStack.push('chat');"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "831-835",
          "preview": "this.currentConversation = { userId }; | this.currentView = 'chat'; | this.viewStack.push('chat');"
        }
      ],
      "codePreview": [
        "this.currentConversation = { userId };",
        "this.currentView = 'chat';",
        "this.viewStack.push('chat');",
        "this.updatePageHeader(`与 ${userId} 的对话`, true);"
      ]
    },
    {
      "id": "680ac5b7",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "856-860",
          "preview": "const sessionId = localStorage.getItem('sessionId'); | const response = await fetch(`/api/messages/conversation?shopId=${shopId}&userId=${userId}`, { | headers: { 'X-Session-Id': sessionId }"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "856-860",
          "preview": "const sessionId = localStorage.getItem('sessionId'); | const response = await fetch(`/api/messages/conversation?shopId=${shopId}&userId=${userId}`, { | headers: { 'X-Session-Id': sessionId }"
        }
      ],
      "codePreview": [
        "const sessionId = localStorage.getItem('sessionId');",
        "const response = await fetch(`/api/messages/conversation?shopId=${shopId}&userId=${userId}`, {",
        "headers: { 'X-Session-Id': sessionId }",
        "});"
      ]
    },
    {
      "id": "104be817",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "886-890",
          "preview": "const html = ` | <div class=\"chat-messages\" id=\"chatMessages\"> | ${this.currentMessages.map(msg => this.renderMessage(msg)).join('')}"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "886-890",
          "preview": "const html = ` | <div class=\"chat-messages\" id=\"chatMessages\"> | ${this.currentMessages.map(msg => this.renderMessage(msg)).join('')}"
        }
      ],
      "codePreview": [
        "const html = `",
        "<div class=\"chat-messages\" id=\"chatMessages\">",
        "${this.currentMessages.map(msg => this.renderMessage(msg)).join('')}",
        "</div>",
        "`;"
      ]
    },
    {
      "id": "eb9048a9",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "896-900",
          "preview": "const chatMessages = document.getElementById('chatMessages'); | if (chatMessages) { | chatMessages.scrollTop = chatMessages.scrollHeight;"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "896-900",
          "preview": "const chatMessages = document.getElementById('chatMessages'); | if (chatMessages) { | chatMessages.scrollTop = chatMessages.scrollHeight;"
        }
      ],
      "codePreview": [
        "const chatMessages = document.getElementById('chatMessages');",
        "if (chatMessages) {",
        "chatMessages.scrollTop = chatMessages.scrollHeight;",
        "}",
        "}, 100);"
      ]
    },
    {
      "id": "b2860664",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "906-910",
          "preview": "renderMessage(message) { | const isUser = message.sender_type === 'user'; | const senderClass = isUser ? 'user' : 'admin';"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "906-910",
          "preview": "renderMessage(message) { | const isUser = message.sender_type === 'user'; | const senderClass = isUser ? 'user' : 'admin';"
        }
      ],
      "codePreview": [
        "renderMessage(message) {",
        "const isUser = message.sender_type === 'user';",
        "const senderClass = isUser ? 'user' : 'admin';",
        "return `"
      ]
    },
    {
      "id": "5c517132",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "911-915",
          "preview": "<div class=\"message ${senderClass}\"> | <div class=\"message-bubble\">${message.content}</div> | <div class=\"message-timestamp\">${this.formatTime(message.created_at)}</div>"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "911-915",
          "preview": "<div class=\"message ${senderClass}\"> | <div class=\"message-bubble\">${message.content}</div> | <div class=\"message-timestamp\">${this.formatTime(message.created_at)}</div>"
        }
      ],
      "codePreview": [
        "<div class=\"message ${senderClass}\">",
        "<div class=\"message-bubble\">${message.content}</div>",
        "<div class=\"message-timestamp\">${this.formatTime(message.created_at)}</div>",
        "</div>",
        "`;"
      ]
    },
    {
      "id": "b53d6490",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "921-925",
          "preview": "async sendMessage() { | const input = document.getElementById('messageInput'); | const message = input.value.trim();"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "921-925",
          "preview": "async sendMessage() { | const input = document.getElementById('messageInput'); | const message = input.value.trim();"
        }
      ],
      "codePreview": [
        "async sendMessage() {",
        "const input = document.getElementById('messageInput');",
        "const message = input.value.trim();",
        "if (!message || !this.currentShop || !this.currentConversation) {"
      ]
    },
    {
      "id": "0af7cc27",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "931-935",
          "preview": "const response = await fetch('/api/messages/send', { | method: 'POST', | headers: {"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "931-935",
          "preview": "const response = await fetch('/api/messages/send', { | method: 'POST', | headers: {"
        }
      ],
      "codePreview": [
        "const response = await fetch('/api/messages/send', {",
        "method: 'POST',",
        "headers: {",
        "'Content-Type': 'application/json',",
        "'X-Session-Id': sessionId"
      ]
    },
    {
      "id": "811c1e30",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "936-940",
          "preview": "}, | body: JSON.stringify({ | shopId: this.currentShop.id,"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "936-940",
          "preview": "}, | body: JSON.stringify({ | shopId: this.currentShop.id,"
        }
      ],
      "codePreview": [
        "},",
        "body: JSON.stringify({",
        "shopId: this.currentShop.id,",
        "userId: this.currentConversation.userId,",
        "content: message,"
      ]
    },
    {
      "id": "5426ae40",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "971-975",
          "preview": "const chatMessages = document.getElementById('chatMessages'); | if (!chatMessages) return;"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "971-975",
          "preview": "const chatMessages = document.getElementById('chatMessages'); | if (!chatMessages) return;"
        }
      ],
      "codePreview": [
        "const chatMessages = document.getElementById('chatMessages');",
        "if (!chatMessages) return;",
        "const messageHTML = this.renderMessage(message);",
        "chatMessages.insertAdjacentHTML('beforeend', messageHTML);"
      ]
    },
    {
      "id": "3a636245",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "1021-1025",
          "preview": "this.viewStack.pop(); | const previousView = this.viewStack[this.viewStack.length - 1];"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "1021-1025",
          "preview": "this.viewStack.pop(); | const previousView = this.viewStack[this.viewStack.length - 1];"
        }
      ],
      "codePreview": [
        "this.viewStack.pop();",
        "const previousView = this.viewStack[this.viewStack.length - 1];",
        "switch (previousView) {",
        "case 'overview':"
      ]
    },
    {
      "id": "0ddf9d25",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "1026-1030",
          "preview": "this.showMessageOverview(); | break; | case 'shop':"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "1026-1030",
          "preview": "this.showMessageOverview(); | break; | case 'shop':"
        }
      ],
      "codePreview": [
        "this.showMessageOverview();",
        "break;",
        "case 'shop':",
        "this.renderShopConversations();",
        "this.updatePageHeader(this.currentShop?.name || '店铺', true);"
      ]
    },
    {
      "id": "c82b97b5",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "1046-1050",
          "preview": "await this.loadUnreadCounts(); | this.showMessageOverview(); | break;"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "1046-1050",
          "preview": "await this.loadUnreadCounts(); | this.showMessageOverview(); | break;"
        }
      ],
      "codePreview": [
        "await this.loadUnreadCounts();",
        "this.showMessageOverview();",
        "break;",
        "case 'shop':",
        "if (this.currentShop) {"
      ]
    },
    {
      "id": "129c0d48",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "1051-1055",
          "preview": "await this.loadShopConversations(this.currentShop.id); | this.renderShopConversations(); | }"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "1051-1055",
          "preview": "await this.loadShopConversations(this.currentShop.id); | this.renderShopConversations(); | }"
        }
      ],
      "codePreview": [
        "await this.loadShopConversations(this.currentShop.id);",
        "this.renderShopConversations();",
        "}",
        "break;",
        "case 'chat':"
      ]
    },
    {
      "id": "5aa01152",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "1056-1060",
          "preview": "if (this.currentShop && this.currentConversation) { | await this.loadChatMessages(this.currentShop.id, this.currentConversation.userId); | this.renderChatMessages();"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "1056-1060",
          "preview": "if (this.currentShop && this.currentConversation) { | await this.loadChatMessages(this.currentShop.id, this.currentConversation.userId); | this.renderChatMessages();"
        }
      ],
      "codePreview": [
        "if (this.currentShop && this.currentConversation) {",
        "await this.loadChatMessages(this.currentShop.id, this.currentConversation.userId);",
        "this.renderChatMessages();",
        "}",
        "break;"
      ]
    },
    {
      "id": "054199f7",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "1071-1075",
          "preview": "const messagesBadge = document.getElementById('messagesBadge'); | if (messagesBadge) { | if (this.totalUnreadCount > 0) {"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "1071-1075",
          "preview": "const messagesBadge = document.getElementById('messagesBadge'); | if (messagesBadge) { | if (this.totalUnreadCount > 0) {"
        }
      ],
      "codePreview": [
        "const messagesBadge = document.getElementById('messagesBadge');",
        "if (messagesBadge) {",
        "if (this.totalUnreadCount > 0) {",
        "messagesBadge.textContent = this.totalUnreadCount;",
        "messagesBadge.style.display = 'flex';"
      ]
    },
    {
      "id": "ad7cb3e7",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "1086-1090",
          "preview": "const connectionDot = document.getElementById('connectionDot'); | const connectionText = document.getElementById('connectionText');"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "1086-1090",
          "preview": "const connectionDot = document.getElementById('connectionDot'); | const connectionText = document.getElementById('connectionText');"
        }
      ],
      "codePreview": [
        "const connectionDot = document.getElementById('connectionDot');",
        "const connectionText = document.getElementById('connectionText');",
        "if (connectionDot) {",
        "if (connected) {"
      ]
    },
    {
      "id": "36adc9f5",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "1106-1110",
          "preview": "// 绑定消息输入框回车发送 | const messageInput = document.getElementById('messageInput'); | if (messageInput) {"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "1106-1110",
          "preview": "// 绑定消息输入框回车发送 | const messageInput = document.getElementById('messageInput'); | if (messageInput) {"
        }
      ],
      "codePreview": [
        "const messageInput = document.getElementById('messageInput');",
        "if (messageInput) {",
        "messageInput.addEventListener('keypress', (e) => {",
        "if (e.key === 'Enter') {"
      ]
    },
    {
      "id": "39df3cf7",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "1121-1125",
          "preview": "// 每30秒刷新一次未读消息统计 | this.refreshTimer = setInterval(async () => { | await this.loadUnreadCounts();"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "1121-1125",
          "preview": "// 每30秒刷新一次未读消息统计 | this.refreshTimer = setInterval(async () => { | await this.loadUnreadCounts();"
        }
      ],
      "codePreview": [
        "this.refreshTimer = setInterval(async () => {",
        "await this.loadUnreadCounts();",
        "if (this.currentView === 'overview') {",
        "this.showMessageOverview();"
      ]
    },
    {
      "id": "5b3d3cdd",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "1156-1160",
          "preview": "if (diff < 60000) { // 小于1分钟 | return '刚刚'; | } else if (diff < 3600000) { // 小于1小时"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "1156-1160",
          "preview": "if (diff < 60000) { // 小于1分钟 | return '刚刚'; | } else if (diff < 3600000) { // 小于1小时"
        }
      ],
      "codePreview": [
        "if (diff < 60000) {",
        "return '刚刚';",
        "} else if (diff < 3600000) {",
        "return `${Math.floor(diff / 60000)}分钟前`;",
        "} else if (date.toDateString() === now.toDateString()) {"
      ]
    },
    {
      "id": "8b83150e",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
          "lines": "1171-1175",
          "preview": "return ` | <div class=\"empty-state\"> | <div class=\"empty-icon\">${icon}</div>"
        },
        {
          "file": "static\\js\\mobile-ecommerce-customer-service.js",
          "lines": "1171-1175",
          "preview": "return ` | <div class=\"empty-state\"> | <div class=\"empty-icon\">${icon}</div>"
        }
      ],
      "codePreview": [
        "return `",
        "<div class=\"empty-state\">",
        "<div class=\"empty-icon\">${icon}</div>",
        "<div class=\"empty-message\">${message}</div>",
        "<div class=\"empty-description\">${description}</div>"
      ]
    },
    {
      "id": "50f83d2d",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\chat.js",
          "lines": "31-35",
          "preview": "this.chatInput.addEventListener('keypress', (e) => { | if (e.key === 'Enter' && !e.shiftKey) { | e.preventDefault();"
        },
        {
          "file": "static\\realtime-customer-service.js",
          "lines": "376-380",
          "preview": "this.chatInput.addEventListener('keypress', (e) => { | if (e.key === 'Enter' && !e.shiftKey) { | e.preventDefault();"
        }
      ],
      "codePreview": [
        "this.chatInput.addEventListener('keypress', (e) => {",
        "if (e.key === 'Enter' && !e.shiftKey) {",
        "e.preventDefault();",
        "this.sendMessage();",
        "}"
      ]
    },
    {
      "id": "073330d3",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\js\\modules\\ruilong-features\\mobile-functions.js",
          "lines": "181-185",
          "preview": "headers: { | 'X-Session-Id': sessionId, | 'Authorization': `Bearer ${sessionId}`,"
        },
        {
          "file": "static\\js\\modules\\ruilong-features\\mobile-functions.js",
          "lines": "216-220",
          "preview": "headers: { | 'X-Session-Id': sessionId, | 'Authorization': `Bearer ${sessionId}`,"
        }
      ],
      "codePreview": [
        "headers: {",
        "'X-Session-Id': sessionId,",
        "'Authorization': `Bearer ${sessionId}`,",
        "'Content-Type': 'application/json'",
        "},"
      ]
    },
    {
      "id": "e39396e7",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\js\\modules\\ruilong-features\\payment-system.js",
          "lines": "231-235",
          "preview": "</ul> | </div> | </div>"
        },
        {
          "file": "static\\js\\modules\\ruilong-features\\payment-system.js",
          "lines": "296-300",
          "preview": "</ul> | </div> | </div>"
        }
      ],
      "codePreview": [
        "</ul>",
        "</div>",
        "</div>",
        "</div>",
        "`;"
      ]
    },
    {
      "id": "7920ceec",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\js\\modules\\ruilong-features\\payment-system.js",
          "lines": "321-325",
          "preview": "method: 'POST', | headers: { | 'Authorization': `Bearer ${localStorage.getItem('token')}`,"
        },
        {
          "file": "static\\js\\modules\\ruilong-features\\payment-system.js",
          "lines": "361-365",
          "preview": "method: 'POST', | headers: { | 'Authorization': `Bearer ${localStorage.getItem('token')}`,"
        }
      ],
      "codePreview": [
        "method: 'POST',",
        "headers: {",
        "'Authorization': `Bearer ${localStorage.getItem('token')}`,",
        "'Content-Type': 'application/json'",
        "},"
      ]
    },
    {
      "id": "be913009",
      "size": 5,
      "occurrences": 2,
      "duplicateLines": 5,
      "locations": [
        {
          "file": "static\\tests\\e2e\\complete-user-flows.test.js",
          "lines": "146-150",
          "preview": "// 模拟客服回复 | setTimeout(() => { | if (ws.onmessage) {"
        },
        {
          "file": "static\\tests\\e2e\\complete-user-flows.test.js",
          "lines": "196-200",
          "preview": "// 模拟客服回复 | setTimeout(() => { | if (ws.onmessage) {"
        }
      ],
      "codePreview": [
        "setTimeout(() => {",
        "if (ws.onmessage) {",
        "ws.onmessage({",
        "type: 'message',"
      ]
    }
  ],
  "recommendations": [
    {
      "priority": "HIGH",
      "category": "Phase 7 Target",
      "description": "代码重复率 12.23% 超过目标 <10%",
      "suggestion": "需要进一步重构重复代码块，考虑提取共同逻辑到服务层"
    },
    {
      "priority": "MEDIUM",
      "category": "Code Structure",
      "description": "发现 1476 个有意义的重复代码块",
      "suggestion": "考虑将重复逻辑提取为可复用的函数或模块"
    }
  ],
  "architectureAnalysis": {
    "serviceLayerFiles": [
      "src\\api\\StaticFileService.js",
      "src\\multi-shop-customer-service-manager.js",
      "src\\services\\AutoReplyService.js",
      "src\\services\\ConversationService.js",
      "src\\services\\index.js",
      "src\\services\\IntentClassificationService.js",
      "src\\services\\interfaces.js",
      "src\\services\\KnowledgeBaseService.js",
      "src\\services\\MessageService.js",
      "src\\services\\NotificationService.js",
      "src\\services\\ServiceFactory.js",
      "src\\services\\ServiceIntegration.js",
      "src\\services\\ServiceInterfaceValidator.js",
      "src\\services\\ServiceManager.js",
      "src\\services\\ShopService.js",
      "static\\assets\\js\\modules\\mobile\\customer-service.js",
      "static\\assets\\js\\modules\\mobile\\enhanced-service.js",
      "static\\assets\\js\\modules\\shop\\ecommerce-service.js",
      "static\\js\\enhanced-mobile-customer-service.js",
      "static\\js\\mobile-customer-service.js",
      "static\\js\\mobile-ecommerce-customer-service.js",
      "static\\realtime-customer-service.js",
      "static\\tests\\integration\\customer-service-integration.test.js",
      "test-service-layer-integration.js"
    ],
    "controllerFiles": [
      "src\\controllers\\MessageController.js"
    ],
    "repositoryFiles": [
      "refactor-message-repository.js",
      "src\\database\\message-repository.js",
      "src\\database\\shop-repository.js",
      "src\\database\\ShopRepository.js",
      "src\\schemas\\MessageRepositorySchemaConfig.js"
    ],
    "traditionalFiles": [
      "analyze-code-duplication-improved.js",
      "analyze-code-duplication.js",
      "analyze-file-structure.js",
      "analyze-frontend-redundancy.js",
      "auth-routes.js",
      "database-sqlite.js",
      "reorganize-css.js",
      "reorganize-js-modules.js",
      "scripts\\repair-image-messages.js",
      "scripts\\smart-repair-images.js",
      "scripts\\upgrade-database.js",
      "server-v2.js",
      "server.js",
      "src\\ai-assistant-manager-refactored.js",
      "src\\ai-assistant-manager.js",
      "src\\analytics-dashboard-manager.js",
      "src\\api\\embed-routes.js",
      "src\\api\\FileUploadAPI.js",
      "src\\app\\modular-app.js",
      "src\\client-api\\client-api-router.js",
      "src\\client-api\\ClientApiHandler.js",
      "src\\client-api\\connection-handler-v2.js",
      "src\\client-api\\connection-handler.js",
      "src\\client-api\\message-handler-v2.js",
      "src\\client-api\\message-handler.js",
      "src\\client-api\\routes.js",
      "src\\database\\database-core.js",
      "src\\file-manager.js",
      "src\\modules\\AdvancedNotificationSystem.js",
      "src\\modules\\ComprehensiveSecurityModule.js",
      "src\\modules\\EmployeeManager.js",
      "src\\modules\\EnhancedAIAssistant.js",
      "src\\modules\\EnhancedAnalyticsDashboard.js",
      "src\\modules\\FileManager.js",
      "src\\modules\\PaymentActivationSystem.js",
      "src\\schemas\\AIAssistantSchemaConfig.js",
      "src\\schemas\\AnalyticsDashboardSchemaConfig.js",
      "src\\schemas\\SecurityModuleSchemaConfig.js",
      "src\\search-history-manager.js",
      "src\\security\\auth-validator.js",
      "src\\security\\domain-validator.js",
      "src\\security\\rate-limiter.js",
      "src\\security\\security-logger.js",
      "src\\security\\SecurityManager.js",
      "src\\utils\\AuthValidator.js",
      "src\\utils\\DatabaseSchemaManager.js",
      "src\\utils\\EnhancedFileManager.js",
      "src\\utils\\ErrorHandler.js",
      "src\\utils\\WebSocketHelper.js",
      "src\\websocket\\WebSocketAPI.js",
      "src\\websocket\\WebSocketManager-v2.js",
      "src\\websocket\\WebSocketManager.js",
      "src\\websocket\\WebSocketRouter.js",
      "static\\assets\\js\\components\\button.js",
      "static\\assets\\js\\components\\form.js",
      "static\\assets\\js\\components\\index.js",
      "static\\assets\\js\\components\\modal.js",
      "static\\assets\\js\\components\\navigation.js",
      "static\\assets\\js\\components\\notification.js",
      "static\\assets\\js\\core\\api-client.js",
      "static\\assets\\js\\core\\app.js",
      "static\\assets\\js\\core\\config.js",
      "static\\assets\\js\\core\\event-bus.js",
      "static\\assets\\js\\core\\module-loader.js",
      "static\\assets\\js\\core\\utils.js",
      "static\\assets\\js\\managers\\auth-manager.js",
      "static\\assets\\js\\managers\\message-manager.js",
      "static\\assets\\js\\managers\\page-manager.js",
      "static\\assets\\js\\managers\\shop-manager.js",
      "static\\assets\\js\\modules\\admin\\file-manager.js",
      "static\\assets\\js\\modules\\admin\\notification-manager.js",
      "static\\assets\\js\\modules\\ai\\chatbot.js",
      "static\\assets\\js\\modules\\ai\\enhanced-assistant.js",
      "static\\assets\\js\\modules\\analytics\\dashboard.js",
      "static\\assets\\js\\modules\\analytics\\enhanced-dashboard.js",
      "static\\assets\\js\\modules\\message\\mobile-manager.js",
      "static\\assets\\js\\modules\\message\\search-manager.js",
      "static\\assets\\js\\modules\\message\\unified-manager.js",
      "static\\assets\\js\\modules\\shop\\mobile-manager.js",
      "static\\chat.js",
      "static\\js\\ai-chatbot.js",
      "static\\js\\analytics-dashboard.js",
      "static\\js\\core\\IntegrationManager.js",
      "static\\js\\core\\UnifiedComponentManager.js",
      "static\\js\\core\\UnifiedMessageAPI.js",
      "static\\js\\enhanced-ai-assistant.js",
      "static\\js\\enhanced-analytics-dashboard.js",
      "static\\js\\enhanced-file-manager.js",
      "static\\js\\message-search-manager.js",
      "static\\js\\mobile\\mobile-admin-app.js",
      "static\\js\\mobile\\mobile-admin-modules.js",
      "static\\js\\modules\\ruilong-features\\mobile-functions.js",
      "static\\js\\modules\\ruilong-features\\module-loader.js",
      "static\\js\\modules\\ruilong-features\\payment-system.js",
      "static\\js\\modules\\ruilong-features\\role-manager.js",
      "static\\js\\modules\\ruilong-features\\shop-buttons.js",
      "static\\js\\notification-manager.js",
      "static\\sw.js",
      "static\\tests\\e2e\\complete-user-flows.test.js",
      "static\\tests\\quick-test.js",
      "static\\tests\\test-config.js",
      "static\\tests\\unit\\api-client.test.js",
      "static\\tests\\unit\\config.test.js",
      "static\\tests\\unit\\event-bus.test.js",
      "static\\tests\\unit\\modal.test.js",
      "static\\tests\\unit\\utils.test.js",
      "test-auth-validator.js",
      "test-database-refactor.js",
      "test-simple-refactor.js"
    ],
    "architectureScore": 22,
    "serviceLayerCoverage": 22
  }
}