<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>èŠå¤©è¾“å…¥å¢å¼ºæµ‹è¯•</title>
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100vh;
            position: relative;
        }

        .test-header {
            padding: 20px;
            color: white;
            text-align: center;
            background: rgba(0,0,0,0.1);
        }

        .chat-container {
            height: calc(100vh - 200px);
            background: white;
            margin: 20px;
            border-radius: 15px;
            overflow: hidden;
            position: relative;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .messages-area {
            height: calc(100% - 80px);
            padding: 20px;
            overflow-y: auto;
        }

        .message {
            margin-bottom: 15px;
            padding: 12px 16px;
            border-radius: 18px;
            max-width: 70%;
            word-break: break-word;
        }

        .message.customer {
            background: #f1f3f4;
            margin-right: auto;
        }

        .message.agent {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            margin-left: auto;
        }

        .test-buttons {
            position: fixed;
            top: 50%;
            right: 20px;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 1000;
        }

        .test-btn {
            padding: 10px 15px;
            background: rgba(255,255,255,0.9);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .test-btn:hover {
            background: white;
            transform: scale(1.05);
        }
    </style>

    <!-- å¼•å…¥èŠå¤©è¾“å…¥å¢å¼ºæ¨¡å— -->
    <link rel="stylesheet" href="../css/chat-input-enhanced.css">
</head>
<body>
    <div class="test-header">
        <h1>ğŸš€ èŠå¤©è¾“å…¥å¢å¼ºåŠŸèƒ½æµ‹è¯•</h1>
        <p>æµ‹è¯•å›ºå®šåº•éƒ¨è¾“å…¥æ¡†å’Œç¾åŒ–æ•ˆæœ</p>
    </div>

    <div class="chat-container">
        <div class="messages-area" id="messagesArea">
            <div class="message customer">
                è¿™æ˜¯ä¸€æ¡å®¢æˆ·æ¶ˆæ¯ï¼Œç”¨äºæµ‹è¯•ç•Œé¢æ•ˆæœ
            </div>
            <div class="message agent">
                è¿™æ˜¯ä¸€æ¡å®¢æœå›å¤æ¶ˆæ¯ï¼Œå±•ç¤ºå¯¹è¯ç•Œé¢
            </div>
            <div class="message customer">
                æˆ‘æœ‰ä¸€ä¸ªé—®é¢˜éœ€è¦å’¨è¯¢ï¼Œè¯·å¸®åŠ©è§£ç­”ä¸€ä¸‹
            </div>
            <div class="message agent">
                å¥½çš„ï¼Œæˆ‘å¾ˆä¹æ„ä¸ºæ‚¨è§£ç­”é—®é¢˜ã€‚è¯·è¯¦ç»†æè¿°æ‚¨é‡åˆ°çš„æƒ…å†µã€‚
            </div>
        </div>

        <!-- ä½¿ç”¨å¢å¼ºçš„èŠå¤©è¾“å…¥å®¹å™¨ -->
        <div class="chat-input-container" id="chatInputContainer">
            <div class="main-input-area">
                <button class="media-btn" title="å‘é€å›¾ç‰‡">ğŸ“·</button>
                <button class="voice-btn" id="voiceBtn" title="è¯­éŸ³è¾“å…¥">ğŸ¤</button>
                <textarea 
                    id="messageInput" 
                    class="chat-input" 
                    placeholder="è¾“å…¥æ¶ˆæ¯..." 
                    rows="1"
                ></textarea>
                <button id="sendBtn" class="send-btn" title="å‘é€æ¶ˆæ¯">
                    <span class="send-icon">â¤</span>
                </button>
            </div>
            
            <div class="quick-replies" id="quickReplies">
                <div class="quick-reply-item" data-text="æ‚¨å¥½ï¼Œæœ‰ä»€ä¹ˆå¯ä»¥å¸®åŠ©æ‚¨çš„ï¼Ÿ">é—®å€™</div>
                <div class="quick-reply-item" data-text="è¯·ç¨ç­‰ï¼Œæˆ‘ä¸ºæ‚¨æŸ¥è¯¢ä¸€ä¸‹">æŸ¥è¯¢</div>
                <div class="quick-reply-item" data-text="æ„Ÿè°¢æ‚¨çš„è€å¿ƒç­‰å¾…">æ„Ÿè°¢</div>
            </div>
        </div>
    </div>

    <!-- æµ‹è¯•æŒ‰é’® -->
    <div class="test-buttons">
        <button class="test-btn" onclick="testAutoResize()">æµ‹è¯•è‡ªåŠ¨è°ƒæ•´</button>
        <button class="test-btn" onclick="testQuickReply()">æµ‹è¯•å¿«é€Ÿå›å¤</button>
        <button class="test-btn" onclick="testSendMessage()">æµ‹è¯•å‘é€æ¶ˆæ¯</button>
        <button class="test-btn" onclick="addTestMessage()">æ·»åŠ æµ‹è¯•æ¶ˆæ¯</button>
        <button class="test-btn" onclick="toggleQuickReplies()">åˆ‡æ¢å¿«æ·å›å¤</button>
    </div>

    <!-- å¼•å…¥èŠå¤©è¾“å…¥å¢å¼ºè„šæœ¬ -->
    <script src="../js/chat-input-enhanced.js"></script>

    <script>
        // æµ‹è¯•åŠŸèƒ½
        function testAutoResize() {
            const input = document.getElementById('messageInput');
            input.value = 'è¿™æ˜¯ä¸€æ¡å¾ˆé•¿çš„æµ‹è¯•æ¶ˆæ¯ï¼Œç”¨äºæµ‹è¯•è¾“å…¥æ¡†çš„è‡ªåŠ¨è°ƒæ•´å¤§å°åŠŸèƒ½ã€‚å½“æ–‡å­—å¾ˆå¤šæ—¶ï¼Œè¾“å…¥æ¡†åº”è¯¥è‡ªåŠ¨æ‰©å±•é«˜åº¦ï¼Œä½†ä¸è¶…è¿‡æœ€å¤§é«˜åº¦é™åˆ¶ã€‚';
            input.dispatchEvent(new Event('input'));
        }

        function testQuickReply() {
            const quickReplies = document.getElementById('quickReplies');
            const firstReply = quickReplies.querySelector('.quick-reply-item');
            if (firstReply) {
                firstReply.click();
            }
        }

        function testSendMessage() {
            const input = document.getElementById('messageInput');
            input.value = 'è¿™æ˜¯ä¸€æ¡æµ‹è¯•æ¶ˆæ¯ ' + new Date().toLocaleTimeString();
            document.getElementById('sendBtn').click();
        }

        function addTestMessage() {
            const messagesArea = document.getElementById('messagesArea');
            const isCustomer = Math.random() > 0.5;
            const message = document.createElement('div');
            message.className = `message ${isCustomer ? 'customer' : 'agent'}`;
            message.textContent = `æµ‹è¯•æ¶ˆæ¯ ${new Date().toLocaleTimeString()}`;
            messagesArea.appendChild(message);
            messagesArea.scrollTop = messagesArea.scrollHeight;
        }

        function toggleQuickReplies() {
            const quickReplies = document.getElementById('quickReplies');
            quickReplies.style.display = quickReplies.style.display === 'none' ? 'flex' : 'none';
        }

        // æ¨¡æ‹Ÿå‘é€æ¶ˆæ¯åŠŸèƒ½
        document.getElementById('sendBtn').addEventListener('click', function() {
            const input = document.getElementById('messageInput');
            const text = input.value.trim();
            
            if (text) {
                const messagesArea = document.getElementById('messagesArea');
                const message = document.createElement('div');
                message.className = 'message agent';
                message.textContent = text;
                messagesArea.appendChild(message);
                messagesArea.scrollTop = messagesArea.scrollHeight;
                
                input.value = '';
                input.dispatchEvent(new Event('input')); // è§¦å‘è‡ªåŠ¨è°ƒæ•´
                
                console.log('å‘é€æ¶ˆæ¯:', text);
            }
        });

        // Enter é”®å‘é€æ¶ˆæ¯
        document.getElementById('messageInput').addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                document.getElementById('sendBtn').click();
            }
        });

        console.log('ğŸš€ èŠå¤©è¾“å…¥å¢å¼ºæµ‹è¯•é¡µé¢åŠ è½½å®Œæˆ');
        console.log('ğŸ“± æµ‹è¯•åŠŸèƒ½:');
        console.log('  - å›ºå®šåº•éƒ¨è¾“å…¥æ¡†');
        console.log('  - è‡ªåŠ¨é«˜åº¦è°ƒæ•´');
        console.log('  - ç¾åŒ–æ ·å¼æ•ˆæœ');
        console.log('  - å¿«é€Ÿå›å¤åŠŸèƒ½');
        console.log('  - è§¦æ‘¸åé¦ˆæ•ˆæœ');
    </script>
</body>
</html>