<!-- QuickTalkå®¢æœç³»ç»Ÿ - è½»é‡é›†æˆä»£ç ï¼ˆåŠ¨æ€åŠ è½½ç‰ˆï¼‰ -->
<!-- ä¼˜ç‚¹ï¼šé›†æˆä»£ç æ°¸ä¸è¿‡æ—¶ï¼Œæ‰€æœ‰é€»è¾‘ä»æœåŠ¡å™¨åŠ¨æ€åŠ è½½ -->
<script>
(function() {
    // QuickTalké…ç½® - è¿™æ˜¯å”¯ä¸€éœ€è¦å®šåˆ¶çš„éƒ¨åˆ†
    const QUICKTALK_CONFIG = {
        shopKey: 'sk_ji85ucic9p00m12as1ygf34o8humuxfl',
        shopId: 'shop_1757591780450_1',
        shopName: 'æ—¶å°šæœè£…åº—',
        authorizedDomain: 'bbs16.929991.xyz',
        
        // æœåŠ¡å™¨é…ç½®
        serverUrl: 'http://localhost:3030',
        
        // ç‰ˆæœ¬æ§åˆ¶
        version: '1.0.0',
        cacheBreaker: Date.now() // å¼ºåˆ¶åˆ·æ–°ç¼“å­˜
    };
    
    // åŸŸåéªŒè¯
    const currentDomain = window.location.hostname;
    if (currentDomain !== QUICKTALK_CONFIG.authorizedDomain && 
        !currentDomain.endsWith('.' + QUICKTALK_CONFIG.authorizedDomain) && 
        currentDomain !== 'localhost') {
        console.error('âŒ QuickTalkå®¢æœç³»ç»Ÿï¼šåŸŸåæœªæˆæƒ');
        console.error('å½“å‰åŸŸå:', currentDomain);
        console.error('æˆæƒåŸŸå:', QUICKTALK_CONFIG.authorizedDomain);
        return;
    }
    
    console.log('ğŸš€ QuickTalkå®¢æœç³»ç»Ÿï¼šå¼€å§‹åŠ¨æ€åŠ è½½...');
    
    // åŠ¨æ€åŠ è½½æ ·å¼æ–‡ä»¶
    function loadCSS() {
        const link = document.createElement('link');
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = `${QUICKTALK_CONFIG.serverUrl}/embed/customer-service.css?v=${QUICKTALK_CONFIG.cacheBreaker}`;
        link.onerror = () => {
            console.error('âŒ QuickTalkæ ·å¼åŠ è½½å¤±è´¥');
        };
        document.head.appendChild(link);
    }
    
    // åŠ¨æ€åŠ è½½JavaScriptæ–‡ä»¶
    function loadJS() {
        const script = document.createElement('script');
        script.type = 'text/javascript';
        script.src = `${QUICKTALK_CONFIG.serverUrl}/embed/customer-service.js?v=${QUICKTALK_CONFIG.cacheBreaker}`;
        
        script.onload = () => {
            console.log('âœ… QuickTalkè„šæœ¬åŠ è½½æˆåŠŸ');
            
            // åˆå§‹åŒ–å®¢æœç³»ç»Ÿ
            if (window.QuickTalkCustomerService) {
                window.QuickTalkCustomerService.init(QUICKTALK_CONFIG);
                console.log('âœ… QuickTalkå®¢æœç³»ç»Ÿåˆå§‹åŒ–å®Œæˆ');
            } else {
                console.error('âŒ QuickTalkå®¢æœç³»ç»Ÿåˆå§‹åŒ–å¤±è´¥ï¼šä¸»æ¨¡å—æœªæ‰¾åˆ°');
            }
        };
        
        script.onerror = () => {
            console.error('âŒ QuickTalkè„šæœ¬åŠ è½½å¤±è´¥ï¼Œä½¿ç”¨é™çº§æ–¹æ¡ˆ');
            fallbackToInlineCode();
        };
        
        document.head.appendChild(script);
    }
    
    // é™çº§æ–¹æ¡ˆï¼šä½¿ç”¨å†…è”ä»£ç 
    function fallbackToInlineCode() {
        console.log('ğŸ”„ QuickTalk: å¯ç”¨é™çº§æ–¹æ¡ˆ...');
        // è¿™é‡Œå¯ä»¥æ”¾ä¸€ä¸ªç®€åŒ–ç‰ˆçš„å®¢æœç³»ç»Ÿ
        // æˆ–è€…æ˜¾ç¤º"å®¢æœç³»ç»Ÿæš‚æ—¶ä¸å¯ç”¨"çš„æç¤º
        
        const fallbackHTML = `
            <div style="
                position: fixed;
                bottom: 40px;
                right: 40px;
                background: #667eea;
                color: white;
                padding: 15px 20px;
                border-radius: 25px;
                font-size: 14px;
                cursor: pointer;
                z-index: 999999;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            " onclick="alert('å®¢æœç³»ç»Ÿæ­£åœ¨ç»´æŠ¤ä¸­ï¼Œè¯·ç¨åå†è¯•')">
                ğŸ“ å®¢æœå’¨è¯¢
            </div>
        `;
        
        document.body.insertAdjacentHTML('beforeend', fallbackHTML);
    }
    
    // å¼€å§‹åŠ è½½
    try {
        loadCSS();
        loadJS();
    } catch (e) {
        console.error('âŒ QuickTalkåŠ è½½å¤±è´¥:', e);
        fallbackToInlineCode();
    }
    
    // å…¨å±€æš´éœ²é…ç½®ï¼ˆä¾›åŠ¨æ€åŠ è½½çš„è„šæœ¬ä½¿ç”¨ï¼‰
    window.QUICKTALK_EMBED_CONFIG = QUICKTALK_CONFIG;
    
})();
</script>

<!-- 
ğŸ”¥ QuickTalkå®¢æœç³»ç»Ÿ - åŠ¨æ€åŠ è½½é›†æˆä»£ç 

ã€ğŸš€ æ ¸å¿ƒä¼˜åŠ¿ã€‘
âœ… é›†æˆä»£ç æ°¸ä¸è¿‡æ—¶ï¼šæ‰€æœ‰ä¸šåŠ¡é€»è¾‘ä»æœåŠ¡å™¨åŠ¨æ€åŠ è½½
âœ… ä¸€æ¬¡æ›´æ–°å…¨ç½‘ç”Ÿæ•ˆï¼šæ— éœ€æ‰‹åŠ¨æ›´æ–°æ¯ä¸ªç½‘ç«™çš„é›†æˆä»£ç 
âœ… ç‰ˆæœ¬æ§åˆ¶ï¼šè‡ªåŠ¨è·å–æœ€æ–°åŠŸèƒ½ï¼ˆå›¾ç‰‡æ¶ˆæ¯ã€æ–°ç‰¹æ€§ç­‰ï¼‰
âœ… é™çº§ä¿æŠ¤ï¼šæœåŠ¡å™¨ä¸å¯ç”¨æ—¶æ˜¾ç¤ºå¤‡ç”¨ç•Œé¢
âœ… ç¼“å­˜åˆ·æ–°ï¼šæ¯æ¬¡åŠ è½½éƒ½è·å–æœ€æ–°ç‰ˆæœ¬

ã€ğŸ”§ å·¥ä½œåŸç†ã€‘
1. é›†æˆä»£ç åªåŒ…å«é…ç½®ä¿¡æ¯å’ŒåŠ è½½é€»è¾‘
2. åŠ¨æ€ä»æœåŠ¡å™¨åŠ è½½ CSS å’Œ JavaScript
3. æœåŠ¡å™¨æä¾›å®Œæ•´çš„å®¢æœç³»ç»Ÿå®ç°
4. æ”¯æŒç‰ˆæœ¬æ§åˆ¶å’Œç¼“å­˜ç®¡ç†

ã€ğŸ“ éœ€è¦åœ¨æœåŠ¡å™¨åˆ›å»ºçš„æ–‡ä»¶ã€‘
- /embed/customer-service.css - å®¢æœç³»ç»Ÿæ ·å¼
- /embed/customer-service.js  - å®¢æœç³»ç»Ÿé€»è¾‘

ã€ğŸ”„ æ›´æ–°æµç¨‹ã€‘
æœåŠ¡å™¨æ›´æ–°ä»£ç  â†’ æ‰€æœ‰ç½‘ç«™è‡ªåŠ¨è·å–æœ€æ–°ç‰ˆæœ¬ â†’ æ— éœ€æ‰‹åŠ¨ç»´æŠ¤

ã€ğŸ“± ä½¿ç”¨æ–¹æ³•ã€‘
åªéœ€è¦åœ¨ç½‘ç«™ä¸­åµŒå…¥è¿™æ®µä»£ç ï¼Œæ‰€æœ‰åŠŸèƒ½éƒ½ä¼šè‡ªåŠ¨åŠ è½½ï¼
-->