# QuickTalk 项目结构重构计划

## 🚨 当前问题
- 文件命名混乱：`admin-new.html`, `admin-mobile.html`, `mobile-admin.html`
- 桌面端和移动端文件混在一起
- 没有清晰的功能分组
- 难以维护和扩展

## 🎯 新的项目结构

```
QuickTalk/
├── 📁 src/                    # 源代码目录
│   ├── 🖥️ desktop/            # 桌面端
│   │   ├── admin/             # 桌面管理后台
│   │   │   ├── index.html     # 主管理界面
│   │   │   ├── shops.html     # 店铺管理
│   │   │   ├── users.html     # 用户管理
│   │   │   └── dashboard.html # 数据面板
│   │   ├── customer/          # 桌面客户界面
│   │   │   ├── index.html     # 客服聊天
│   │   │   └── widget.html    # 嵌入式组件
│   │   └── shared/            # 桌面端共享资源
│   │       ├── css/
│   │       └── js/
│   ├── 📱 mobile/             # 移动端
│   │   ├── admin/             # 移动管理后台
│   │   │   ├── index.html     # 移动管理主页
│   │   │   ├── shops.html     # 移动店铺管理
│   │   │   └── profile.html   # 个人中心
│   │   ├── customer/          # 移动客户界面
│   │   │   └── chat.html      # 移动客服聊天
│   │   └── shared/            # 移动端共享资源
│   │       ├── css/
│   │       └── js/
│   └── 🔧 components/         # 通用组件
│       ├── auth/              # 认证相关
│       ├── api/               # API 客户端
│       └── utils/             # 工具函数
├── 📁 server/                 # 服务端代码
│   ├── routes/                # 路由
│   ├── database/              # 数据库
│   ├── middleware/            # 中间件
│   └── utils/                 # 服务端工具
├── 📁 public/                 # 静态资源
│   ├── images/
│   ├── fonts/
│   └── favicon.ico
└── 📁 docs/                   # 文档
    ├── api.md
    ├── deployment.md
    └── architecture.md
```

## 🔄 文件映射关系

### 当前 → 新结构
```
static/admin-new.html      → src/desktop/admin/index.html
static/mobile-admin.html   → src/mobile/admin/index.html
static/admin-mobile.html   → [删除，功能合并]
static/index.html          → src/desktop/customer/index.html
static/style.css           → src/components/shared/css/main.css
static/chat.js             → src/components/api/chat.js
static/*-sdk.js            → src/components/api/sdk/
```

## 🚀 重构步骤

### 阶段1：创建新目录结构
1. 创建 src/ 主目录
2. 创建 desktop/, mobile/, components/ 子目录
3. 创建各功能模块目录

### 阶段2：文件迁移和重命名
1. 移动桌面端文件到 desktop/
2. 移动移动端文件到 mobile/
3. 提取共享组件到 components/
4. 重新组织CSS和JS文件

### 阶段3：更新引用
1. 更新服务器路由配置
2. 更新HTML中的资源引用
3. 更新JS中的模块引用
4. 测试所有功能

### 阶段4：清理和优化
1. 删除重复文件
2. 优化文件命名
3. 添加README文档
4. 更新部署脚本

## 📋 新的路由设计

```javascript
// 桌面端路由
app.get('/admin', (req, res) => {
    res.sendFile(path.join(__dirname, 'src/desktop/admin/index.html'));
});

app.get('/customer', (req, res) => {
    res.sendFile(path.join(__dirname, 'src/desktop/customer/index.html'));
});

// 移动端路由
app.get('/mobile/admin', (req, res) => {
    res.sendFile(path.join(__dirname, 'src/mobile/admin/index.html'));
});

app.get('/mobile/customer', (req, res) => {
    res.sendFile(path.join(__dirname, 'src/mobile/customer/chat.html'));
});

// API路由保持不变
app.use('/api', apiRoutes);
```

## 🎯 重构后的优势

1. **清晰的功能分离**：桌面端和移动端完全分开
2. **易于维护**：每个文件的作用一目了然
3. **便于扩展**：新功能可以快速定位到对应目录
4. **团队协作**：不同开发者可以专注不同端的开发
5. **部署优化**：可以独立部署不同端的代码

## ⚠️ 注意事项

1. 重构过程中要确保服务不中断
2. 需要充分测试所有功能
3. 要保留备份以防回滚
4. 考虑渐进式重构，避免一次性大改动
