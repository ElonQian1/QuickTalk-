/* layout-modes.css: 横向 / 纵向 列表与消息布局模式 + 长消息渐变 */
body.layout-vertical .shops-list, body.layout-vertical .conversations-list { display:flex; flex-direction:column; gap:8px; }
body.layout-vertical .shop-card, body.layout-vertical .conversation-item { display:flex; align-items:flex-start; padding:10px 12px; }
body.layout-vertical .shop-card .shop-icon, body.layout-vertical .conversation-item .avatar { width:42px; height:42px; border-radius:50%; background:#f2f3f5; display:flex; align-items:center; justify-content:center; font-weight:600; margin-right:10px; position:relative; }
body.layout-vertical .conversation-item .avatar .badge, body.layout-vertical .shop-card .badge-mini { position:absolute; bottom:-2px; right:-2px; background:#ff4d4f; color:#fff; font-size:10px; padding:2px 4px; border-radius:10px; line-height:1; }
body.layout-horizontal .conversation-item .avatar .badge { display:none; }

/* 切换按钮 */
.layout-toggle-btn { background:#fff; border:1px solid #ccc; border-radius:6px; padding:4px 10px; cursor:pointer; font-size:12px; display:inline-flex; gap:4px; align-items:center; margin-left:8px; }
.layout-toggle-btn:hover { background:#f5f5f5; }

/* 长消息渐变与展开 */
.chat-message .bubble { position:relative; max-width:640px; line-height:1.5; white-space:pre-wrap; word-break:break-word; }
.chat-message .bubble.collapsible { max-height:160px; overflow:hidden; }
.chat-message .bubble.collapsible.need-fade::after { content:''; position:absolute; left:0; right:0; bottom:0; height:60px; background:linear-gradient(to bottom, rgba(255,255,255,0), var(--bubble-bg, #fff)); pointer-events:none; }
.chat-message .bubble.expanded { max-height:none; }
.chat-message .bubble-toggle { position:absolute; right:8px; bottom:4px; background:rgba(0,0,0,.55); color:#fff; font-size:11px; padding:2px 6px; border-radius:12px; cursor:pointer; }
.chat-message.pending .bubble { opacity:0.6; }
.chat-message.failed .bubble { border:1px solid #ff4d4f; }

/* 适配暗色（如未来引入） */
@media (prefers-color-scheme: dark){
  .chat-message .bubble.collapsible.need-fade::after { background:linear-gradient(to bottom, rgba(0,0,0,0), #222); }
  .layout-toggle-btn { background:#222; color:#ddd; border-color:#444; }
  .layout-toggle-btn:hover { background:#333; }
}
