# 🚀 同步静态文件到Ubuntu生产服务器

## 问题描述
BBS页面嵌入脚本报错 404：
- `https://43.139.82.12:8443/static/embed/service-standalone.js` ❌
- `https://43.139.82.12:8443/static/embed/styles.css` ❌

**原因**: Ubuntu服务器的 `static` 目录缺少 `embed` 和 `sdk` 子目录

---

## 📦 方案1: 手动SCP上传（推荐）

### 在Windows PowerShell中执行：

```powershell
# 1. 上传embed目录
scp -r ubuntu-deploy-ready/static/embed root@43.139.82.12:/root/ubuntu-deploy-ready/static/

# 2. 上传sdk目录
scp -r ubuntu-deploy-ready/static/sdk root@43.139.82.12:/root/ubuntu-deploy-ready/static/

# 3. 验证
ssh root@43.139.82.12 "ls -la /root/ubuntu-deploy-ready/static/"
```

---

## 📦 方案2: SSH登录手动操作

```bash
# 1. SSH登录Ubuntu
ssh root@43.139.82.12

# 2. 进入部署目录
cd /root/ubuntu-deploy-ready/static

# 3. 创建embed目录（如果不存在）
mkdir -p embed sdk

# 4. 从Windows上传（在Windows端执行）
# 然后使用方案1的scp命令
```

---

## 📦 方案3: 完整重新部署（最彻底）

```powershell
# 在Windows上执行完整部署包上传
scp -r ubuntu-deploy-ready root@43.139.82.12:/root/

# SSH登录重启服务
ssh root@43.139.82.12
cd /root/ubuntu-deploy-ready
./start.sh
```

---

## ✅ 验证静态文件

上传完成后，在浏览器访问：

```
https://43.139.82.12:8443/static/embed/service-standalone.js
https://43.139.82.12:8443/static/embed/styles.css
```

应该能看到JS和CSS内容，不再是404。

---

## 🔍 文件清单确认

确保以下文件存在于Ubuntu服务器：

```
/root/ubuntu-deploy-ready/static/
├── embed/
│   ├── service-standalone.js  ✅ 必需
│   ├── styles.css             ✅ 必需
│   ├── demo.html              (可选)
│   └── mobile-optimization-test.html (可选)
├── sdk/
│   ├── index.js               ✅ 必需
│   ├── advanced-sdk.js        ✅ 必需
│   └── service-standalone.js  ✅ 必需
└── static/
    └── (React前端文件)
```

---

## 💡 注意事项

1. **热重载环境**: 你本地的 `npm run dev` 只影响本地开发，Ubuntu生产服务器需要手动同步静态文件
2. **路径一致**: 确保上传路径为 `/root/ubuntu-deploy-ready/static/`
3. **权限**: 上传后文件自动继承父目录权限，无需额外chmod
4. **重启**: 静态文件更新通常不需要重启Rust后端，直接刷新浏览器即可

---

## 🎯 快速执行（复制粘贴）

```powershell
# 一键上传所有静态文件
cd e:\duihua\customer-service-system
scp -r ubuntu-deploy-ready/static/embed ubuntu-deploy-ready/static/sdk root@43.139.82.12:/root/ubuntu-deploy-ready/static/
```

上传完成后刷新你的BBS页面，嵌入脚本应该能正常加载！
