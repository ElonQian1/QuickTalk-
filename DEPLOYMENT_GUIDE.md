# 实时客服系统嵌入使用指南

## 📋 概述
这是一个完整的实时客服系统嵌入代码，可以直接复制到任何网站中使用。

## 🚀 快速开始

### 1. 下载嵌入代码
文件：`embed-customer-service.html`

### 2. 修改服务器配置
打开 `embed-customer-service.html` 文件，找到第200行左右的配置：

```javascript
// ⚠️ 重要配置: 请修改为您的实际服务器地址
const WEBSOCKET_URL = 'ws://localhost:3030/ws';
```

将 `localhost` 改为您的实际服务器地址：
- HTTP站点：`ws://您的域名或IP:3030/ws`
- HTTPS站点：`wss://您的域名或IP:3030/ws`

### 3. 上传到网站
将修改后的代码直接复制粘贴到您朋友网站的HTML页面中，放在 `</body>` 标签之前。

## 🛠️ 部署步骤

### 步骤1: 启动后端服务器
```bash
# 在您的服务器上
cd e:\论坛客服项目
node server.js
```

### 步骤2: 确保端口开放
确保服务器的3030端口对外开放，防火墙允许访问。

### 步骤3: 测试连接
在浏览器中打开集成了客服代码的网页，点击"客服"按钮，查看连接状态。

## 🎯 功能特性

### ✅ 用户端功能
- 点击"客服"按钮打开聊天窗口
- 实时发送和接收消息
- 连接状态显示
- 窗口最小化/最大化
- 响应式设计，支持手机端

### ✅ 管理端功能
- 管理端地址：`http://您的服务器地址:3030/admin` (自动重定向到 admin-new)
- 查看所有在线用户
- 实时接收用户消息
- 回复用户消息
- 多用户聊天管理

## 🔧 自定义配置

### 修改样式
在代码的CSS部分，您可以自定义：
- 聊天窗口颜色
- 按钮样式
- 字体大小
- 位置调整

### 修改功能
在JavaScript部分，您可以自定义：
- 欢迎消息
- 重连次数
- 超时时间
- 用户ID生成规则

## 📱 兼容性

### 支持的浏览器
- Chrome 50+
- Firefox 45+
- Safari 10+
- Edge 12+
- 移动端浏览器

### 支持的协议
- HTTP/HTTPS
- WebSocket/WebSocket Secure (WSS)

## ⚠️ 注意事项

### 1. 服务器地址配置
- 必须将 `WEBSOCKET_URL` 改为实际地址
- HTTPS站点必须使用WSS协议
- 确保端口号正确

### 2. 网络安全
- 如果网站使用HTTPS，服务器也需要HTTPS证书
- 防火墙需要开放3030端口
- 考虑使用反向代理(Nginx/Apache)

### 3. 服务器部署
- 确保Node.js服务器持续运行
- 建议使用PM2等进程管理工具
- 定期备份聊天记录

## 🐛 常见问题

### Q: 连接失败怎么办？
A: 检查以下几点：
1. 服务器是否正在运行
2. WEBSOCKET_URL地址是否正确
3. 端口是否开放
4. 防火墙设置
5. HTTPS站点需要WSS协议

### Q: 消息发送失败？
A: 检查：
1. 网络连接状态
2. 服务器日志错误信息
3. 浏览器控制台错误信息

### Q: 管理端看不到用户消息？
A: 确保：
1. 管理端页面已打开
2. WebSocket连接正常
3. 服务器正确转发消息

## 📞 技术支持

如果遇到问题：
1. 查看浏览器控制台错误信息
2. 查看服务器运行日志
3. 确认网络连接状态
4. 检查配置是否正确

## 🎉 部署成功标志

当您看到以下情况时，说明部署成功：
- 客服按钮可以正常点击
- 聊天窗口正常打开
- 连接状态显示"已连接"
- 可以正常发送消息
- 管理端能收到用户消息

---

**祝您使用愉快！** 🎊
