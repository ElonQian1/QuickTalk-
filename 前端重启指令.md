# 重启前端开发服务器指令

## 问题
前端正在请求 `http://localhost:8080`，但Ubuntu服务器在 `https://43.139.82.12:8443`

## 原因
环境变量 `REACT_APP_API_BASE` 需要在启动时加载，热重载不会重新读取环境变量

## 解决步骤

### 1. 停止当前的 npm run dev
在运行 `npm run dev` 的终端中按 `Ctrl+C` 停止

### 2. 重新启动开发服务器
```bash
cd e:\duihua\customer-service-system
npm run dev
```

### 3. 验证环境变量加载
重启后，浏览器控制台应该显示：
```
API_BASE: https://43.139.82.12:8443
```

而不是：
```
API_BASE: http://localhost:8080
```

### 4. 测试API连接
访问前端页面，检查Network标签：
- ✅ 应该请求: `https://43.139.82.12:8443/api/...`
- ❌ 不应该是: `http://localhost:8080/api/...`

## 配置说明

### 测试Ubuntu生产服务器
`.env.development` 文件内容：
```env
REACT_APP_API_BASE=https://43.139.82.12:8443
REACT_APP_WS_PORT=8443
```

### 测试本地开发服务器
如果想测试本地Rust服务器，修改为：
```env
REACT_APP_API_BASE=http://localhost:8080
REACT_APP_WS_PORT=8080
```

## 注意事项
- ⚠️ 修改 `.env` 文件后必须重启 `npm run dev`
- ⚠️ 热重载不会重新读取环境变量
- ⚠️ 浏览器需要刷新页面（Ctrl+F5 强制刷新）
- ⚠️ `.env.development` 不会提交到Git（本地配置）

## 快速切换脚本（可选）

### 切换到Ubuntu测试
```powershell
Set-Content frontend\.env.development "REACT_APP_API_BASE=https://43.139.82.12:8443`nREACT_APP_WS_PORT=8443"
# 然后重启 npm run dev
```

### 切换到本地测试
```powershell
Set-Content frontend\.env.development "REACT_APP_API_BASE=http://localhost:8080`nREACT_APP_WS_PORT=8080"
# 然后重启 npm run dev
```
